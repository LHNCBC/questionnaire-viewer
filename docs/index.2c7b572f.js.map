{"mappings":"upBAAC,SAASA,GAGR,SAASC,EAASC,EAAGC,GACnB,GAAID,aAAaE,SAAwB,kBAANF,EACjC,OAAO,EAKT,GAHMC,aAAgBE,SACpBF,EAAO,CAAC,GAENA,EAAKG,eAAe,gBAAkBH,EAAKI,YAAoB,KAANL,EAC3D,OAAO,EAGT,IAAIM,EAAQ,qEAUZ,OARIL,EAAKM,OACPD,EAAQ,4CAA8CA,IAG3B,IAAzBL,EAAKO,kBACPF,EAAQ,4EAGH,IAAKG,OAAO,IAAMH,EAAQ,IAAK,MAAOI,KAAKV,EACpD,CAGuCW,EAAOC,UAC1CA,EAAUD,EAAOC,QAAUb,GAE7Ba,EAAQb,SAAWA,CAQvB,CAvCC,E,sCCiRDY,EAAAC,QA3QA,SAAeC,GAqDd,SAASC,EAAYC,GACpB,IAAIC,EAEAC,EACAC,EAFAC,EAAiB,KAIrB,SAASC,KAASC,GAEjB,IAAKD,EAAME,QACV,OAGD,MAAMC,EAAOH,EAGPI,EAAOC,OAAO,IAAIC,MAClBC,EAAKH,GAAQR,GAAYQ,GAC/BD,EAAKK,KAAOD,EACZJ,EAAKM,KAAOb,EACZO,EAAKC,KAAOA,EACZR,EAAWQ,EAEXH,EAAK,GAAKP,EAAYgB,OAAOT,EAAK,IAEX,iBAAZA,EAAK,IAEfA,EAAKU,QAAQ,MAId,IAAIC,EAAQ,EACZX,EAAK,GAAKA,EAAK,GAAGY,QAAQ,iBAAiB,CAACC,EAAOC,KAElD,GAAc,OAAVD,EACH,MAAO,IAERF,IACA,MAAMI,EAAYtB,EAAYuB,WAAWF,GACzC,GAAyB,mBAAdC,EAA0B,CACpC,MAAME,EAAMjB,EAAKW,GACjBE,EAAQE,EAAUG,KAAKhB,EAAMe,GAG7BjB,EAAKmB,OAAOR,EAAO,GACnBA,GACD,CACA,OAAOE,CAAA,IAIRpB,EAAY2B,WAAWF,KAAKhB,EAAMF,IAEpBE,EAAKmB,KAAO5B,EAAY4B,KAChCC,MAAMpB,EAAMF,EACnB,CAgCA,OA9BAD,EAAML,UAAYA,EAClBK,EAAMwB,UAAY9B,EAAY8B,YAC9BxB,EAAMyB,MAAQ/B,EAAYgC,YAAY/B,GACtCK,EAAM2B,OAASA,EACf3B,EAAM4B,QAAUlC,EAAYkC,QAE5B7C,OAAO8C,eAAe7B,EAAO,UAAW,CACvC8B,YAAY,EACZC,cAAc,EACdC,IAAK,IACmB,OAAnBjC,EACIA,GAEJF,IAAoBH,EAAYuC,aACnCpC,EAAkBH,EAAYuC,WAC9BnC,EAAeJ,EAAYQ,QAAQP,IAG7BG,GAERoC,IAAKtD,IACJmB,EAAiBnB,CAAA,IAKa,mBAArBc,EAAYyC,MACtBzC,EAAYyC,KAAKnC,GAGXA,CACR,CAEA,SAAS2B,EAAOhC,EAAWyC,GAC1B,MAAMC,EAAW3C,EAAY4C,KAAK3C,gBAAkC,IAAdyC,EAA4B,IAAMA,GAAazC,GAErG,OADA0C,EAASf,IAAMgB,KAAKhB,IACbe,CACR,CAwFA,SAASE,EAAYC,GACpB,OAAOA,EAAOC,WACZC,UAAU,EAAGF,EAAOC,WAAWE,OAAS,GACxC9B,QAAQ,UAAW,IACtB,CA0BA,OAvQAnB,EAAYM,MAAQN,EACpBA,EAAYkD,QAAUlD,EACtBA,EAAYgB,OAoPZ,SAAgBQ,GACf,OAAIA,aAAe2B,MACX3B,EAAI4B,OAAS5B,EAAI6B,QAElB7B,CACR,EAxPAxB,EAAYsD,QAwLZ,WACC,MAAMf,EAAa,IACfvC,EAAYuD,MAAMC,IAAIX,MACtB7C,EAAYyD,MAAMD,IAAIX,GAAaW,KAAIvD,GAAa,IAAMA,KAC5DyD,KAAK,KAEP,OADA1D,EAAY2D,OAAO,IACZpB,CACR,EA9LAvC,EAAY2D,OAsJZ,SAAgBpB,GAOf,IAAIqB,EANJ5D,EAAY6D,KAAKtB,GACjBvC,EAAYuC,WAAaA,EAEzBvC,EAAYuD,MAAQ,GACpBvD,EAAYyD,MAAQ,GAGpB,MAAMK,GAA+B,iBAAfvB,EAA0BA,EAAa,IAAIuB,MAAM,UACjEC,EAAMD,EAAMb,OAElB,IAAKW,EAAI,EAAGA,EAAIG,EAAKH,IACfE,EAAMF,KAOW,OAFtBrB,EAAauB,EAAMF,GAAGzC,QAAQ,MAAO,QAEtB,GACdnB,EAAYyD,MAAMO,KAAK,IAAIrE,OAAO,IAAM4C,EAAW0B,MAAM,GAAK,MAE9DjE,EAAYuD,MAAMS,KAAK,IAAIrE,OAAO,IAAM4C,EAAa,MAGxD,EA9KAvC,EAAYQ,QAsMZ,SAAiB0D,GAChB,GAA8B,MAA1BA,EAAKA,EAAKjB,OAAS,GACtB,OAAO,EAGR,IAAIW,EACAG,EAEJ,IAAKH,EAAI,EAAGG,EAAM/D,EAAYyD,MAAMR,OAAQW,EAAIG,EAAKH,IACpD,GAAI5D,EAAYyD,MAAMG,GAAGhE,KAAKsE,GAC7B,OAAO,EAIT,IAAKN,EAAI,EAAGG,EAAM/D,EAAYuD,MAAMN,OAAQW,EAAIG,EAAKH,IACpD,GAAI5D,EAAYuD,MAAMK,GAAGhE,KAAKsE,GAC7B,OAAO,EAIT,OAAO,CACR,EA1NAlE,EAAYmE,SAAWC,EAAA,SACvBpE,EAAYkC,QA0PZ,WACCmC,QAAQC,KAAK,wIACd,EA1PAjF,OAAOkF,KAAKxE,GAAKyE,SAAQC,IACxBzE,EAAYyE,GAAO1E,EAAI0E,EAAI,IAO5BzE,EAAYuD,MAAQ,GACpBvD,EAAYyD,MAAQ,GAOpBzD,EAAYuB,WAAa,CAAC,EAkB1BvB,EAAYgC,YAVZ,SAAqB/B,GACpB,IAAIyE,EAAO,EAEX,IAAK,IAAId,EAAI,EAAGA,EAAI3D,EAAUgD,OAAQW,IACrCc,GAASA,GAAQ,GAAKA,EAAQzE,EAAU0E,WAAWf,GACnDc,GAAQ,EAGT,OAAO1E,EAAY4E,OAAOC,KAAKC,IAAIJ,GAAQ1E,EAAY4E,OAAO3B,OAC/D,EA2NAjD,EAAY2D,OAAO3D,EAAY+E,QAExB/E,CACR,C,sCC3QA,IAAIgF,EAAI,IACJC,EAAQ,GAAJD,EACJE,EAAQ,GAAJD,EACJE,EAAQ,GAAJD,EACJE,EAAQ,EAAJD,EACJE,EAAQ,OAAJF,EAqJR,SAASG,EAAOzE,EAAI0E,EAAOC,EAAGtB,GAC5B,IAAIuB,EAAWF,GAAa,IAAJC,EACxB,OAAOX,KAAKa,MAAM7E,EAAK2E,GAAK,IAAMtB,GAAQuB,EAAW,IAAM,GAC7D,CAxIA5F,EAAAC,QAAiB,SAAS0B,EAAKmE,GAC7BA,EAAUA,GAAW,CAAC,EACtB,IA8Ge9E,EACX0E,EA/GAK,SAAcpE,EAClB,GAAa,WAAToE,GAAqBpE,EAAIyB,OAAS,EACpC,OAkBJ,SAAe4C,GAEb,IADAA,EAAMC,OAAOD,IACL5C,OAAS,IACf,OAEF,IAAI7B,EAAQ,mIAAmI2E,KAC7IF,GAEF,IAAKzE,EACH,OAEF,IAAIoE,EAAIQ,WAAW5E,EAAM,IAEzB,QADYA,EAAM,IAAM,MAAM6E,eAE5B,IAAK,QACL,IAAK,OACL,IAAK,MACL,IAAK,KACL,IAAK,IACH,OAAOT,EAAIH,EACb,IAAK,QACL,IAAK,OACL,IAAK,IACH,OAAOG,EAAIJ,EACb,IAAK,OACL,IAAK,MACL,IAAK,IACH,OAAOI,EAAIL,EACb,IAAK,QACL,IAAK,OACL,IAAK,MACL,IAAK,KACL,IAAK,IACH,OAAOK,EAAIN,EACb,IAAK,UACL,IAAK,SACL,IAAK,OACL,IAAK,MACL,IAAK,IACH,OAAOM,EAAIP,EACb,IAAK,UACL,IAAK,SACL,IAAK,OACL,IAAK,MACL,IAAK,IACH,OAAOO,EAAIR,EACb,IAAK,eACL,IAAK,cACL,IAAK,QACL,IAAK,OACL,IAAK,KACH,OAAOQ,EACT,QACE,OAEN,CAzEWU,CAAM1E,GACR,GAAa,WAAToE,GAAqBO,SAAS3E,GACvC,OAAOmE,EAAQS,MA0GFvF,EA1GiBW,GA2G5B+D,EAAQV,KAAKC,IAAIjE,KACRsE,EACJG,EAAOzE,EAAI0E,EAAOJ,EAAG,OAE1BI,GAASL,EACJI,EAAOzE,EAAI0E,EAAOL,EAAG,QAE1BK,GAASN,EACJK,EAAOzE,EAAI0E,EAAON,EAAG,UAE1BM,GAASP,EACJM,EAAOzE,EAAI0E,EAAOP,EAAG,UAEvBnE,EAAK,OAvCd,SAAkBA,GAChB,IAAI0E,EAAQV,KAAKC,IAAIjE,GACrB,OAAI0E,GAASJ,EACJN,KAAKa,MAAM7E,EAAKsE,GAAK,IAE1BI,GAASL,EACJL,KAAKa,MAAM7E,EAAKqE,GAAK,IAE1BK,GAASN,EACJJ,KAAKa,MAAM7E,EAAKoE,GAAK,IAE1BM,GAASP,EACJH,KAAKa,MAAM7E,EAAKmE,GAAK,IAEvBnE,EAAK,IACd,CAhGyCwF,CAAS7E,GAEhD,MAAM,IAAI2B,MACR,wDACEmD,KAAKC,UAAU/E,GAErB,C,sCCrCA,IASUgF,EATNC,EAAyB,oBAAThG,KAAuBA,KAAOmC,KAC9C8D,EAAW,WACf,SAASC,IACT/D,KAAKgE,OAAQ,EACbhE,KAAKiE,aAAeJ,EAAOI,YAC3B,CAEA,OADAF,EAAEG,UAAYL,EACP,IAAIE,CACX,CAPe,GAQLH,EAmhBPE,EAjhBc,SAAWK,GAE1B,IAAIC,EAAU,CACZC,aAAc,oBAAqBT,EACnCU,SAAU,WAAYV,GAAQ,aAAcW,OAC5CC,KACE,eAAgBZ,GAChB,SAAUA,GACV,WACE,IAEE,OADA,IAAIa,MACG,CACT,CAAE,MAAOC,GACP,OAAO,CACT,CACF,CAPA,GAQFC,SAAU,aAAcf,EACxBgB,YAAa,gBAAiBhB,GAOhC,GAAIQ,EAAQQ,YACV,IAAIC,EAAc,CAChB,qBACA,sBACA,6BACA,sBACA,uBACA,sBACA,uBACA,wBACA,yBAGEC,EACFC,YAAYC,QACZ,SAASC,GACP,OAAOA,GAAOJ,EAAYK,QAAQzI,OAAOyH,UAAU/D,SAAStB,KAAKoG,KAAQ,CAC3E,EAGJ,SAASE,EAAc7D,GAIrB,GAHoB,iBAATA,IACTA,EAAO4B,OAAO5B,IAEZ,4BAA4BtE,KAAKsE,GACnC,MAAM,IAAI8D,UAAU,0CAEtB,OAAO9D,EAAK+B,aACd,CAEA,SAASgC,EAAeC,GAItB,MAHqB,iBAAVA,IACTA,EAAQpC,OAAOoC,IAEVA,CACT,CAGA,SAASC,EAAYC,GACnB,IAAIC,EAAW,CACbC,KAAM,WACJ,IAAIJ,EAAQE,EAAMG,QAClB,MAAO,CAACC,UAAgBC,IAAVP,EAAqBA,MAAOA,EAC5C,GASF,OANIlB,EAAQE,WACVmB,EAASlB,OAAOkB,UAAY,WAC1B,OAAOA,CACT,GAGKA,CACT,CAEA,SAASK,EAAQC,GACf/F,KAAKY,IAAM,CAAC,EAERmF,aAAmBD,EACrBC,EAAQnE,SAAQ,SAAS0D,EAAOhE,GAC9BtB,KAAKgG,OAAO1E,EAAMgE,EACpB,GAAGtF,MACMiG,MAAMC,QAAQH,GACvBA,EAAQnE,SAAQ,SAASuE,GACvBnG,KAAKgG,OAAOG,EAAO,GAAIA,EAAO,GAChC,GAAGnG,MACM+F,GACTtJ,OAAO2J,oBAAoBL,GAASnE,SAAQ,SAASN,GACnDtB,KAAKgG,OAAO1E,EAAMyE,EAAQzE,GAC5B,GAAGtB,KAEP,CA8DA,SAASqG,EAASC,GAChB,GAAIA,EAAKC,SACP,OAAOC,QAAQC,OAAO,IAAIrB,UAAU,iBAEtCkB,EAAKC,UAAW,CAClB,CAEA,SAASG,EAAgBC,GACvB,OAAO,IAAIH,SAAQ,SAASI,EAASH,GACnCE,EAAOE,OAAS,WACdD,EAAQD,EAAOG,OACjB,EACAH,EAAOI,QAAU,WACfN,EAAOE,EAAOK,MAChB,CACF,GACF,CAEA,SAASC,EAAsBzC,GAC7B,IAAImC,EAAS,IAAIO,WACbC,EAAUT,EAAgBC,GAE9B,OADAA,EAAOS,kBAAkB5C,GAClB2C,CACT,CAmBA,SAASE,EAAYC,GACnB,GAAIA,EAAIjG,MACN,OAAOiG,EAAIjG,MAAM,GAEjB,IAAIkG,EAAO,IAAIC,WAAWF,EAAIG,YAE9B,OADAF,EAAK3H,IAAI,IAAI4H,WAAWF,IACjBC,EAAKG,MAEhB,CAEA,SAASC,IA0FP,OAzFA3H,KAAKuG,UAAW,EAEhBvG,KAAK4H,UAAY,SAAStB,GAhM5B,IAAoBrB,EAiMhBjF,KAAK6H,UAAYvB,EACZA,EAEsB,iBAATA,EAChBtG,KAAK8H,UAAYxB,EACRlC,EAAQI,MAAQC,KAAKP,UAAU6D,cAAczB,GACtDtG,KAAKgI,UAAY1B,EACRlC,EAAQO,UAAYsD,SAAS/D,UAAU6D,cAAczB,GAC9DtG,KAAKkI,cAAgB5B,EACZlC,EAAQC,cAAgB8D,gBAAgBjE,UAAU6D,cAAczB,GACzEtG,KAAK8H,UAAYxB,EAAKnG,WACbiE,EAAQQ,aAAeR,EAAQI,OA5M1BS,EA4M6CqB,IA3MjD8B,SAASlE,UAAU6D,cAAc9C,IA4M3CjF,KAAKqI,iBAAmBhB,EAAYf,EAAKoB,QAEzC1H,KAAK6H,UAAY,IAAIpD,KAAK,CAACzE,KAAKqI,oBACvBjE,EAAQQ,cAAgBG,YAAYb,UAAU6D,cAAczB,IAASxB,EAAkBwB,IAChGtG,KAAKqI,iBAAmBhB,EAAYf,GAEpCtG,KAAK8H,UAAYxB,EAAO7J,OAAOyH,UAAU/D,SAAStB,KAAKyH,GAhBvDtG,KAAK8H,UAAY,GAmBd9H,KAAK+F,QAAQrG,IAAI,kBACA,iBAAT4G,EACTtG,KAAK+F,QAAQnG,IAAI,eAAgB,4BACxBI,KAAKgI,WAAahI,KAAKgI,UAAUhF,KAC1ChD,KAAK+F,QAAQnG,IAAI,eAAgBI,KAAKgI,UAAUhF,MACvCoB,EAAQC,cAAgB8D,gBAAgBjE,UAAU6D,cAAczB,IACzEtG,KAAK+F,QAAQnG,IAAI,eAAgB,mDAGvC,EAEIwE,EAAQI,OACVxE,KAAKwE,KAAO,WACV,IAAI8D,EAAWjC,EAASrG,MACxB,GAAIsI,EACF,OAAOA,EAGT,GAAItI,KAAKgI,UACP,OAAOxB,QAAQI,QAAQ5G,KAAKgI,WACvB,GAAIhI,KAAKqI,iBACd,OAAO7B,QAAQI,QAAQ,IAAInC,KAAK,CAACzE,KAAKqI,oBACjC,GAAIrI,KAAKkI,cACd,MAAM,IAAI3H,MAAM,wCAEhB,OAAOiG,QAAQI,QAAQ,IAAInC,KAAK,CAACzE,KAAK8H,YAE1C,EAEA9H,KAAK4E,YAAc,WACjB,OAAI5E,KAAKqI,iBACAhC,EAASrG,OAASwG,QAAQI,QAAQ5G,KAAKqI,kBAEvCrI,KAAKwE,OAAO+D,KAAKtB,EAE5B,GAGFjH,KAAKwI,KAAO,WACV,IA3FoBhE,EAClBmC,EACAQ,EAyFEmB,EAAWjC,EAASrG,MACxB,GAAIsI,EACF,OAAOA,EAGT,GAAItI,KAAKgI,UACP,OAjGkBxD,EAiGIxE,KAAKgI,UAhG3BrB,EAAS,IAAIO,WACbC,EAAUT,EAAgBC,GAC9BA,EAAO8B,WAAWjE,GACX2C,EA8FE,GAAInH,KAAKqI,iBACd,OAAO7B,QAAQI,QA5FrB,SAA+BU,GAI7B,IAHA,IAAIC,EAAO,IAAIC,WAAWF,GACtBoB,EAAQ,IAAIzC,MAAMsB,EAAKlH,QAElBW,EAAI,EAAGA,EAAIuG,EAAKlH,OAAQW,IAC/B0H,EAAM1H,GAAKkC,OAAOyF,aAAapB,EAAKvG,IAEtC,OAAO0H,EAAM5H,KAAK,GACpB,CAoF6B8H,CAAsB5I,KAAKqI,mBAC7C,GAAIrI,KAAKkI,cACd,MAAM,IAAI3H,MAAM,wCAEhB,OAAOiG,QAAQI,QAAQ5G,KAAK8H,UAEhC,EAEI1D,EAAQO,WACV3E,KAAK2E,SAAW,WACd,OAAO3E,KAAKwI,OAAOD,KAAKM,EAC1B,GAGF7I,KAAK8I,KAAO,WACV,OAAO9I,KAAKwI,OAAOD,KAAK7E,KAAKqF,MAC/B,EAEO/I,IACT,CA3MA8F,EAAQ5B,UAAU8B,OAAS,SAAS1E,EAAMgE,GACxChE,EAAO6D,EAAc7D,GACrBgE,EAAQD,EAAeC,GACvB,IAAI0D,EAAWhJ,KAAKY,IAAIU,GACxBtB,KAAKY,IAAIU,GAAQ0H,EAAWA,EAAW,KAAO1D,EAAQA,CACxD,EAEAQ,EAAQ5B,UAAU,OAAY,SAAS5C,UAC9BtB,KAAKY,IAAIuE,EAAc7D,GAChC,EAEAwE,EAAQ5B,UAAUxE,IAAM,SAAS4B,GAE/B,OADAA,EAAO6D,EAAc7D,GACdtB,KAAKiJ,IAAI3H,GAAQtB,KAAKY,IAAIU,GAAQ,IAC3C,EAEAwE,EAAQ5B,UAAU+E,IAAM,SAAS3H,GAC/B,OAAOtB,KAAKY,IAAIlE,eAAeyI,EAAc7D,GAC/C,EAEAwE,EAAQ5B,UAAUtE,IAAM,SAAS0B,EAAMgE,GACrCtF,KAAKY,IAAIuE,EAAc7D,IAAS+D,EAAeC,EACjD,EAEAQ,EAAQ5B,UAAUtC,QAAU,SAASsH,EAAUC,GAC7C,IAAK,IAAI7H,KAAQtB,KAAKY,IAChBZ,KAAKY,IAAIlE,eAAe4E,IAC1B4H,EAASrK,KAAKsK,EAASnJ,KAAKY,IAAIU,GAAOA,EAAMtB,KAGnD,EAEA8F,EAAQ5B,UAAUvC,KAAO,WACvB,IAAI6D,EAAQ,GAIZ,OAHAxF,KAAK4B,SAAQ,SAAS0D,EAAOhE,GAC3BkE,EAAMpE,KAAKE,EACb,IACOiE,EAAYC,EACrB,EAEAM,EAAQ5B,UAAUkF,OAAS,WACzB,IAAI5D,EAAQ,GAIZ,OAHAxF,KAAK4B,SAAQ,SAAS0D,GACpBE,EAAMpE,KAAKkE,EACb,IACOC,EAAYC,EACrB,EAEAM,EAAQ5B,UAAUmF,QAAU,WAC1B,IAAI7D,EAAQ,GAIZ,OAHAxF,KAAK4B,SAAQ,SAAS0D,EAAOhE,GAC3BkE,EAAMpE,KAAK,CAACE,EAAMgE,GACpB,IACOC,EAAYC,EACrB,EAEIpB,EAAQE,WACVwB,EAAQ5B,UAAUK,OAAOkB,UAAYK,EAAQ5B,UAAUmF,SAqJzD,IAAIC,EAAU,CAAC,SAAU,MAAO,OAAQ,UAAW,OAAQ,OAO3D,SAASC,EAAQC,EAAOzG,GAEtB,IAPuB0G,EACnBC,EAMApD,GADJvD,EAAUA,GAAW,CAAC,GACHuD,KAEnB,GAAIkD,aAAiBD,EAAS,CAC5B,GAAIC,EAAMjD,SACR,MAAM,IAAInB,UAAU,gBAEtBpF,KAAK2J,IAAMH,EAAMG,IACjB3J,KAAK4J,YAAcJ,EAAMI,YACpB7G,EAAQgD,UACX/F,KAAK+F,QAAU,IAAID,EAAQ0D,EAAMzD,UAEnC/F,KAAKyJ,OAASD,EAAMC,OACpBzJ,KAAK6J,KAAOL,EAAMK,KAClB7J,KAAK8J,OAASN,EAAMM,OACfxD,GAA2B,MAAnBkD,EAAM3B,YACjBvB,EAAOkD,EAAM3B,UACb2B,EAAMjD,UAAW,EAErB,MACEvG,KAAK2J,IAAMzG,OAAOsG,GAYpB,GATAxJ,KAAK4J,YAAc7G,EAAQ6G,aAAe5J,KAAK4J,aAAe,eAC1D7G,EAAQgD,SAAY/F,KAAK+F,UAC3B/F,KAAK+F,QAAU,IAAID,EAAQ/C,EAAQgD,UAErC/F,KAAKyJ,QAjCkBA,EAiCO1G,EAAQ0G,QAAUzJ,KAAKyJ,QAAU,MAhC3DC,EAAUD,EAAOM,cACdT,EAAQpE,QAAQwE,IAAW,EAAKA,EAAUD,GAgCjDzJ,KAAK6J,KAAO9G,EAAQ8G,MAAQ7J,KAAK6J,MAAQ,KACzC7J,KAAK8J,OAAS/G,EAAQ+G,QAAU9J,KAAK8J,OACrC9J,KAAKgK,SAAW,MAEK,QAAhBhK,KAAKyJ,QAAoC,SAAhBzJ,KAAKyJ,SAAsBnD,EACvD,MAAM,IAAIlB,UAAU,6CAEtBpF,KAAK4H,UAAUtB,EACjB,CAMA,SAASuC,EAAOvC,GACd,IAAI2D,EAAO,IAAIhC,SAYf,OAXA3B,EACG4D,OACAhJ,MAAM,KACNU,SAAQ,SAASuI,GAChB,GAAIA,EAAO,CACT,IAAIjJ,EAAQiJ,EAAMjJ,MAAM,KACpBI,EAAOJ,EAAMyE,QAAQpH,QAAQ,MAAO,KACpC+G,EAAQpE,EAAMJ,KAAK,KAAKvC,QAAQ,MAAO,KAC3C0L,EAAKjE,OAAOoE,mBAAmB9I,GAAO8I,mBAAmB9E,GAC3D,CACF,IACK2E,CACT,CAoBA,SAASI,EAASC,EAAUvH,GACrBA,IACHA,EAAU,CAAC,GAGb/C,KAAKgD,KAAO,UACZhD,KAAKuK,YAA4B1E,IAAnB9C,EAAQwH,OAAuB,IAAMxH,EAAQwH,OAC3DvK,KAAKwK,GAAKxK,KAAKuK,QAAU,KAAOvK,KAAKuK,OAAS,IAC9CvK,KAAKyK,WAAa,eAAgB1H,EAAUA,EAAQ0H,WAAa,KACjEzK,KAAK+F,QAAU,IAAID,EAAQ/C,EAAQgD,SACnC/F,KAAK2J,IAAM5G,EAAQ4G,KAAO,GAC1B3J,KAAK4H,UAAU0C,EACjB,CAlDAf,EAAQrF,UAAUwG,MAAQ,WACxB,OAAO,IAAInB,EAAQvJ,KAAM,CAACsG,KAAMtG,KAAK6H,WACvC,EAkCAF,EAAK9I,KAAK0K,EAAQrF,WAgBlByD,EAAK9I,KAAKwL,EAASnG,WAEnBmG,EAASnG,UAAUwG,MAAQ,WACzB,OAAO,IAAIL,EAASrK,KAAK6H,UAAW,CAClC0C,OAAQvK,KAAKuK,OACbE,WAAYzK,KAAKyK,WACjB1E,QAAS,IAAID,EAAQ9F,KAAK+F,SAC1B4D,IAAK3J,KAAK2J,KAEd,EAEAU,EAASrD,MAAQ,WACf,IAAI2D,EAAW,IAAIN,EAAS,KAAM,CAACE,OAAQ,EAAGE,WAAY,KAE1D,OADAE,EAAS3H,KAAO,QACT2H,CACT,EAEA,IAAIC,EAAmB,CAAC,IAAK,IAAK,IAAK,IAAK,KAE5CP,EAASQ,SAAW,SAASlB,EAAKY,GAChC,IAAyC,IAArCK,EAAiB1F,QAAQqF,GAC3B,MAAM,IAAIO,WAAW,uBAGvB,OAAO,IAAIT,EAAS,KAAM,CAACE,OAAQA,EAAQxE,QAAS,CAACgF,SAAUpB,IACjE,EAEAxF,EAAQF,aAAeL,EAAKK,aAC5B,IACE,IAAIE,EAAQF,YACd,CAAE,MAAO+G,GACP7G,EAAQF,aAAe,SAASxD,EAASa,GACvCtB,KAAKS,QAAUA,EACfT,KAAKsB,KAAOA,EACZ,IAAI0F,EAAQzG,MAAME,GAClBT,KAAKQ,MAAQwG,EAAMxG,KACrB,EACA2D,EAAQF,aAAaC,UAAYzH,OAAOwO,OAAO1K,MAAM2D,WACrDC,EAAQF,aAAaC,UAAUgH,YAAc/G,EAAQF,YACvD,CAEA,SAASD,EAAMwF,EAAO3J,GACpB,OAAO,IAAI2G,SAAQ,SAASI,EAASH,GACnC,IAAI0E,EAAU,IAAI5B,EAAQC,EAAO3J,GAEjC,GAAIsL,EAAQrB,QAAUqB,EAAQrB,OAAOsB,QACnC,OAAO3E,EAAO,IAAItC,EAAQF,aAAa,UAAW,eAGpD,IAAIoH,EAAM,IAAIC,eAEd,SAASC,IACPF,EAAIG,OACN,CAEAH,EAAIxE,OAAS,WACX,IAxFgB4E,EAChB1F,EAuFIhD,EAAU,CACZwH,OAAQc,EAAId,OACZE,WAAYY,EAAIZ,WAChB1E,SA3Fc0F,EA2FQJ,EAAIK,yBAA2B,GA1FvD3F,EAAU,IAAID,EAGQ2F,EAAWlN,QAAQ,eAAgB,KACzC2C,MAAM,SAASU,SAAQ,SAAS+J,GAClD,IAAIC,EAAQD,EAAKzK,MAAM,KACnBW,EAAM+J,EAAMjG,QAAQuE,OACxB,GAAIrI,EAAK,CACP,IAAIyD,EAAQsG,EAAM9K,KAAK,KAAKoJ,OAC5BnE,EAAQC,OAAOnE,EAAKyD,EACtB,CACF,IACOS,IAgFHhD,EAAQ4G,IAAM,gBAAiB0B,EAAMA,EAAIQ,YAAc9I,EAAQgD,QAAQrG,IAAI,iBAC3E,IAAI4G,EAAO,aAAc+E,EAAMA,EAAIV,SAAWU,EAAIS,aAClDlF,EAAQ,IAAIyD,EAAS/D,EAAMvD,GAC7B,EAEAsI,EAAItE,QAAU,WACZN,EAAO,IAAIrB,UAAU,0BACvB,EAEAiG,EAAIU,UAAY,WACdtF,EAAO,IAAIrB,UAAU,0BACvB,EAEAiG,EAAIW,QAAU,WACZvF,EAAO,IAAItC,EAAQF,aAAa,UAAW,cAC7C,EAEAoH,EAAIY,KAAKd,EAAQ1B,OAAQ0B,EAAQxB,KAAK,GAEV,YAAxBwB,EAAQvB,YACVyB,EAAIa,iBAAkB,EACW,SAAxBf,EAAQvB,cACjByB,EAAIa,iBAAkB,GAGpB,iBAAkBb,GAAOjH,EAAQI,OACnC6G,EAAIc,aAAe,QAGrBhB,EAAQpF,QAAQnE,SAAQ,SAAS0D,EAAOhE,GACtC+J,EAAIe,iBAAiB9K,EAAMgE,EAC7B,IAEI6F,EAAQrB,SACVqB,EAAQrB,OAAOuC,iBAAiB,QAASd,GAEzCF,EAAIiB,mBAAqB,WAEA,IAAnBjB,EAAIkB,YACNpB,EAAQrB,OAAO0C,oBAAoB,QAASjB,EAEhD,GAGFF,EAAIoB,UAAkC,IAAtBtB,EAAQtD,UAA4B,KAAOsD,EAAQtD,UACrE,GACF,CAEA7D,EAAM0I,UAAW,EAEZ9I,EAAKI,QACRJ,EAAKI,MAAQA,EACbJ,EAAKkC,QAAUA,EACflC,EAAK2F,QAAUA,EACf3F,EAAKyG,SAAWA,GAGlBlG,EAAQ2B,QAAUA,EAClB3B,EAAQoF,QAAUA,EAClBpF,EAAQkG,SAAWA,EACnBlG,EAAQH,MAAQA,EAEhBvH,OAAO8C,eAAe4E,EAAS,aAAc,CAAEmB,OAAO,GAIxD,CAhhBiB,CAghBd,CAAC,GAEJxB,EAASE,MAAM2I,UAAW,SAEnB7I,EAASE,MAAM0I,SAGtB,IAAIE,EAAM9I,GACV5G,EAAU0P,EAAI5I,OACN1D,QAAUsM,EAAI5I,MACtB9G,EAAQ8G,MAAQ4I,EAAI5I,MACpB9G,EAAQ4I,QAAU8G,EAAI9G,QACtB5I,EAAQqM,QAAUqD,EAAIrD,QACtBrM,EAAQmN,SAAWuC,EAAIvC,SACvBpN,EAAOC,QAAUA,C,sCCziBhB,IAAU2P,IAGR,WAED,SAASC,EAAgBC,EAAUC,GACjC,KAAMD,aAAoBC,GACxB,MAAM,IAAI5H,UAAU,oCAExB,CAEA,SAAS6H,EAAkBC,EAAQC,GACjC,IAAK,IAAInM,EAAI,EAAGA,EAAImM,EAAM9M,OAAQW,IAAK,CACrC,IAAIoM,EAAaD,EAAMnM,GACvBoM,EAAW5N,WAAa4N,EAAW5N,aAAc,EACjD4N,EAAW3N,cAAe,EACtB,UAAW2N,IAAYA,EAAWC,UAAW,GACjD5Q,OAAO8C,eAAe2N,EAAQE,EAAWvL,IAAKuL,EAChD,CACF,CAEA,SAASE,EAAaN,EAAaO,EAAYC,GAG7C,OAFID,GAAYN,EAAkBD,EAAY9I,UAAWqJ,GACrDC,GAAaP,EAAkBD,EAAaQ,GACzCR,CACT,CAiBA,SAASS,EAAgBC,GAIvB,OAHAD,EAAkBhR,OAAOkR,eAAiBlR,OAAOmR,eAAiB,SAAyBF,GACzF,OAAOA,EAAEG,WAAapR,OAAOmR,eAAeF,EAC9C,EACOD,EAAgBC,EACzB,CAEA,SAASI,EAAgBJ,EAAGK,GAM1B,OALAD,EAAkBrR,OAAOkR,gBAAkB,SAAyBD,EAAGK,GAErE,OADAL,EAAEG,UAAYE,EACPL,CACT,EAEOI,EAAgBJ,EAAGK,EAC5B,CAeA,SAASC,EAAuBpK,GAC9B,QAAa,IAATA,EACF,MAAM,IAAIqK,eAAe,6DAG3B,OAAOrK,CACT,CAUA,SAASsK,EAAaC,GACpB,IAAIC,EA9BN,WACE,GAAuB,oBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,mBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAxQ,KAAKkG,UAAU/D,SAAStB,KAAKwP,QAAQC,UAAUtQ,KAAM,IAAI,WAAa,MAC/D,CACT,CAAE,MAAO0G,GACP,OAAO,CACT,CACF,CAmBkC+J,GAEhC,OAAO,WACL,IACI3H,EAb4BlD,EAAM/E,EAYlC6P,EAAQjB,EAAgBU,GAG5B,GAAIC,EAA2B,CAC7B,IAAIO,EAAYlB,EAAgBzN,MAAMkL,YAEtCpE,EAASuH,QAAQC,UAAUI,EAAOE,UAAWD,EAC/C,MACE7H,EAAS4H,EAAMzP,MAAMe,KAAM4O,WAG7B,OAvBgChL,EAuBE5D,OAvBInB,EAuBEiI,IAtBb,iBAATjI,GAAqC,mBAATA,EAIzCmP,EAAuBpK,GAHrB/E,CAsBT,CACF,CAWA,SAASgQ,EAAK3B,EAAQ4B,EAAUC,GAkB9B,OAhBEF,EADqB,oBAAZR,SAA2BA,QAAQ3O,IACrC2O,QAAQ3O,IAER,SAAcwN,EAAQ4B,EAAUC,GACrC,IAAIC,EAdV,SAAwBC,EAAQH,GAC9B,MAAQrS,OAAOyH,UAAUxH,eAAemC,KAAKoQ,EAAQH,IAEpC,QADfG,EAASxB,EAAgBwB,MAI3B,OAAOA,CACT,CAOiBC,CAAehC,EAAQ4B,GAElC,GAAKE,EAAL,CACA,IAAIG,EAAO1S,OAAO2S,yBAAyBJ,EAAMF,GAEjD,OAAIK,EAAKzP,IACAyP,EAAKzP,IAAIb,KAAKkQ,GAGhBI,EAAK7J,KAPD,CAQb,EAGKuJ,EAAK3B,EAAQ4B,EAAUC,GAAY7B,EAC5C,CAEA,IA8MWtJ,EA9MPyL,EAAuB,WACzB,SAASA,IACPvC,EAAgB9M,KAAMqP,GAEtB5S,OAAO8C,eAAeS,KAAM,YAAa,CACvCsF,MAAO,CAAC,EACR+H,UAAU,EACV5N,cAAc,GAElB,CA4DA,OA1DA6N,EAAa+B,EAAS,CAAC,CACrBxN,IAAK,mBACLyD,MAAO,SAA0BtC,EAAMkG,EAAUnG,GACzCC,KAAQhD,KAAKsP,YACjBtP,KAAKsP,UAAUtM,GAAQ,IAGzBhD,KAAKsP,UAAUtM,GAAM5B,KAAK,CACxB8H,SAAUA,EACVnG,QAASA,GAEb,GACC,CACDlB,IAAK,sBACLyD,MAAO,SAA6BtC,EAAMkG,GACxC,GAAMlG,KAAQhD,KAAKsP,UAMnB,IAFA,IAAI9O,EAAQR,KAAKsP,UAAUtM,GAElBhC,EAAI,EAAGuO,EAAI/O,EAAMH,OAAQW,EAAIuO,EAAGvO,IACvC,GAAIR,EAAMQ,GAAGkI,WAAaA,EAExB,YADA1I,EAAM1B,OAAOkC,EAAG,EAItB,GACC,CACDa,IAAK,gBACLyD,MAAO,SAAuBkK,GAC5B,GAAMA,EAAMxM,QAAQhD,KAAKsP,UAAzB,CAOA,IAHA,IACIG,EADQzP,KAAKsP,UAAUE,EAAMxM,MACT3B,QAEfL,EAAI,EAAGuO,EAAIE,EAAYpP,OAAQW,EAAIuO,EAAGvO,IAAK,CAClD,IAAI0O,EAAWD,EAAYzO,GAE3B,IACE0O,EAASxG,SAASrK,KAAKmB,KAAMwP,EAC/B,CAAE,MAAO9K,GACP8B,QAAQI,UAAU2B,MAAK,WACrB,MAAM7D,CACR,GACF,CAEIgL,EAAS3M,SAAW2M,EAAS3M,QAAQ4M,MACvC3P,KAAKwM,oBAAoBgD,EAAMxM,KAAM0M,EAASxG,SAElD,CAEA,OAAQsG,EAAMI,gBAtBZ,CAuBJ,KAGKP,CACT,CAtE2B,GAwEvBQ,EAA2B,SAAUC,IArLzC,SAAmBC,EAAUC,GAC3B,GAA0B,mBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAI5K,UAAU,sDAGtB2K,EAAS7L,UAAYzH,OAAOwO,OAAO+E,GAAcA,EAAW9L,UAAW,CACrEgH,YAAa,CACX5F,MAAOyK,EACP1C,UAAU,EACV5N,cAAc,KAGduQ,GAAYlC,EAAgBiC,EAAUC,EAC5C,CAyKEC,CAAUJ,EAAaC,GAEvB,IAAII,EAAShC,EAAa2B,GAE1B,SAASA,IACP,IAAIM,EA2BJ,OAzBArD,EAAgB9M,KAAM6P,IAEtBM,EAAQD,EAAOrR,KAAKmB,OAOTsP,WACTD,EAAQxQ,KAAKmP,EAAuBmC,IAKtC1T,OAAO8C,eAAeyO,EAAuBmC,GAAQ,UAAW,CAC9D7K,OAAO,EACP+H,UAAU,EACV5N,cAAc,IAEhBhD,OAAO8C,eAAeyO,EAAuBmC,GAAQ,UAAW,CAC9D7K,MAAO,KACP+H,UAAU,EACV5N,cAAc,IAET0Q,CACT,CAsBA,OApBA7C,EAAauC,EAAa,CAAC,CACzBhO,IAAK,WACLyD,MAAO,WACL,MAAO,sBACT,GACC,CACDzD,IAAK,gBACLyD,MAAO,SAAuBkK,GACT,UAAfA,EAAMxM,OACRhD,KAAKoL,SAAU,EAEa,mBAAjBpL,KAAKgM,SACdhM,KAAKgM,QAAQnN,KAAKmB,KAAMwP,IAI5BX,EAAKpB,EAAgBoC,EAAY3L,WAAY,gBAAiBlE,MAAMnB,KAAKmB,KAAMwP,EACjF,KAGKK,CACT,CAzD+B,CAyD7BR,GACEe,EAA+B,WACjC,SAASA,IACPtD,EAAgB9M,KAAMoQ,GAItB3T,OAAO8C,eAAeS,KAAM,SAAU,CACpCsF,MAAO,IAAIuK,EACXxC,UAAU,EACV5N,cAAc,GAElB,CAuCA,OArCA6N,EAAa8C,EAAiB,CAAC,CAC7BvO,IAAK,QACLyD,MAAO,WACL,IAAIkK,EAEJ,IACEA,EAAQ,IAAIa,MAAM,QACpB,CAAE,MAAO3L,GACiB,oBAAb4L,SACJA,SAASC,aAMZf,EAAQc,SAASC,YAAY,UACvBC,UAAU,SAAS,GAAO,IALhChB,EAAQc,SAASG,qBACXzN,KAAO,QAQfwM,EAAQ,CACNxM,KAAM,QACN0N,SAAS,EACTC,YAAY,EAGlB,CAEA3Q,KAAK8J,OAAO8G,cAAcpB,EAC5B,GACC,CACD3N,IAAK,WACLyD,MAAO,WACL,MAAO,0BACT,KAGK8K,CACT,CAnDmC,GAqDb,oBAAX7L,QAA0BA,OAAOsM,cAG1CT,EAAgBlM,UAAUK,OAAOsM,aAAe,kBAChDhB,EAAY3L,UAAUK,OAAOsM,aAAe,eAG9C,SAAwBjN,GACtB,OAAIA,EAAKkN,0CACPrP,QAAQzC,IAAI,sFACL,GAUsB,mBAAjB4E,EAAK2F,UAA2B3F,EAAK2F,QAAQrF,UAAUxH,eAAe,YAAckH,EAAKwM,eACzG,CAIOW,CAFInN,EAQQ,oBAAT/F,KAAuBA,KAAOmT,KAFtCpN,EAAKwM,gBAAkBA,EACvBxM,EAAKiM,YAAcA,EAGvB,EA/VoB,mBAAXoB,QAAyBA,OAAOC,IAAMD,OAAOpE,GACpDA,G,sCCIF5P,EAAAC,QAAiB,SAAUiU,GAIzB,IAAIC,EAAO5P,EAAA,SAUX,OATK4P,EAAKC,eAAeF,IAA2C,kBAA5BA,EAAWG,cACjDF,EAAKG,eAAeJ,GAAY,SAAUK,GACxC,IAAK,IAAIC,KAAOD,EACE,wEAAZC,EAAI9H,MACN8H,EAAI9H,IAAM,iFAGhB,IAEKwH,CACT,C,sCCjBA,MAAMO,EAAgB,wBAEtBzU,EAAAC,QAAiB,CAIfmU,eAAgB,SAAUF,GACxB,QAASA,EAAWG,YACtB,EAOAC,eAAgB,SAAUJ,EAAYjI,GAChCiI,EAAWQ,WACbzI,EAASiI,EAAWQ,WACtB,IAAInM,EAAQ2L,EAAWS,MAAQT,EAAW3L,MAC1C,GAAIA,EACF,IAAK,IAAIxE,KAAKwE,EACZxF,KAAKuR,eAAevQ,EAAGkI,EAE7B,EAOA2I,oBAAqB,SAAUV,EAAYjI,GACrCiI,EAAWQ,WACbzI,EAASiI,GACX,IAAI3L,EAAQ2L,EAAWS,MAAQT,EAAW3L,MAC1C,GAAIA,EACF,IAAK,IAAIxE,KAAKwE,EACZxF,KAAK6R,oBAAoB7Q,EAAGkI,EAElC,EAWA4I,gBAAiB,SAAUC,EAAMC,GAC/B,IAAIC,EACJ,GAAKF,EAEA,CACH,IAAIG,EAAYH,EAAK7Q,MAAM,KACvBiR,EAAaH,EAAM9Q,MAAM,KAC7B,IAAK,IAAIF,EAAE,EAAGA,EAAE,QAAa6E,IAARoM,IAAqBjR,EAAG,CAC3C,IAAIoR,EAAKC,SAASH,EAAUlR,IAAKsR,EAAKD,SAASF,EAAWnR,IACtDoR,GAAME,IACRL,EAAMG,EAAKE,EACf,MACYzM,IAARoM,IACFA,GAAM,EACV,MAXEA,GAAM,EAYR,OAAOA,CACT,EAOAM,eAAgB,SAAUC,GACxB,MAAO,kBAAkBA,CAC3B,EAQAC,eAAgB,SAASC,GACvB,IAAIT,EAAM,KAINU,GADaD,EAAIE,MAAQF,EAAIG,SACbrU,MAAMkT,GAG1B,OAFIiB,IACFV,EAAMU,EAAG,IACJV,CACT,EAOAa,aAAa3B,GACX,GAAIA,EAAW4B,MAAQ5B,EAAW4B,KAAKL,IACrC,IAAK,MAAMA,KAAOvB,EAAW4B,KAAKL,IAChC,GAAIA,EAAIE,MAAQF,EAAIE,KAAKpU,MAAMkT,GAC7B,OAAO,EAKb,OAAO,CACT,E,sCC1GFzU,EAAAC,QAAiB,SAAUiU,GAIzB,IAAIC,EAAO5P,EAAA,SAiBX,QAhBK4P,EAAKC,eAAeF,IACQ,kBAA5BA,EAAWG,cAAoCF,EAAK0B,aAAa3B,KACpEC,EAAKG,eAAeJ,GAAY,SAAUK,GACxC,IAAK,MAAMC,KAAOD,EAEhB,GAAgB,2FAAZC,EAAI9H,IAAkG,CACxG6H,EAASpQ,KAAK,CACZuI,IAAK,sFACLqJ,cAAc,IAEhB,KACF,CAEJ,IAGK7B,CACT,C,sCCtBAlU,EAAAC,QAAiB,SAAUiU,GA0BzB,OAtBW3P,EAAA,SACD6P,eAAeF,KACmB,iBAA/BA,EAAW8B,sBAGgCpN,IAAhDsL,EAAW8B,gBAAgBC,mBAC7B/B,EAAW8B,gBAAgBC,kBAAmB,QAGErN,IAA9CsL,EAAW8B,gBAAgBE,iBAC7BhC,EAAW8B,gBAAgBE,gBAAiB,IAK9ChC,EAAW8B,gBAAkB,CAC3BC,kBAAkB,EAClBC,gBAAgB,IAKfhC,CACT,C,sCC3BAlU,EAAAC,QAAiB,SAAUiU,GAIzB,IAAIC,EAAO5P,EAAA,SASX,OARK4P,EAAKC,eAAeF,IAA2C,kBAA5BA,EAAWG,cACjDF,EAAKG,eAAeJ,GAAY,SAAUK,GACxC,IAAK,IAAIC,KAAOD,EACE,+EAAZC,EAAI9H,MACN8H,EAAI9H,IAAM,wFAEhB,IAEKwH,CACT,C,sCClBA,MAAMiC,EAAiB,IAOvB,SAASC,EAAoBC,GAC3BC,EAAWD,EAAO9N,MAAO,GAAI8N,GAC7BE,EAAqBF,EAAO9N,OAC5BiO,EAAkBH,EAAO9N,MAC3B,CAOA,SAASiO,EAAkBjO,GAEzB,IAAK,IAAIxE,EAAI,EAAG0S,EAAOlO,EAAMnF,OAAQW,EAAI0S,EAAM1S,IAAK,CAClD,IAAI4Q,EAAOpM,EAAMxE,UACV4Q,EAAK+B,mBACL/B,EAAKgC,UAERhC,EAAKpM,OAASoM,EAAKpM,MAAMnF,OAAS,GACpCoT,EAAkB7B,EAAKpM,MAE3B,CACF,CASA,SAAS+N,EAAW/N,EAAOqO,EAAoBC,GAK7C,IAHA,IAAIJ,EAAOlO,EAAMnF,OAAQ0T,EAAc,KAG9B/S,EAAI,EAAGA,EAAI0S,EAAM1S,IAAK,CAC7B,IAAI4Q,EAAOpM,EAAMxE,GAEQ4Q,EAAKoC,qBAAuBpC,EAAKoC,oBAAoBC,MACxC,MAAjCrC,EAAKoC,oBAAoBC,KAAe5B,SAAST,EAAKoC,oBAAoBC,KAAO,IAG5DF,GAAeA,EAAYG,eAAiBtC,EAAKsC,aAC/D,EAED,EAIX,IAAIC,EAAWN,EAAqBT,EAAiBxB,EAAKsC,aAE1DtC,EAAK+B,YAAcG,EACnBlC,EAAKgC,UAAYO,EAGZvC,EAAKwC,SACRxC,EAAKwC,OAASD,GAGhBJ,EAAcnC,EAGVA,EAAKpM,OAASoM,EAAKpM,MAAMnF,OAAS,GACpCkT,EAAW3B,EAAKpM,MAAO2O,EAAUvC,EAErC,CACF,CASA,SAAS4B,EAAqBhO,GAE5B,IAAI,IAAIxE,EAAE,EAAG0S,EAAKlO,EAAMnF,OAAQW,EAAE0S,EAAM1S,IAAK,CAC3C,IAAI4Q,EAAOpM,EAAMxE,GAEjB,GAAI4Q,EAAKyC,WAAazC,EAAKyC,UAAUC,WACnC,IAAK,IAAIC,EAAI,EAAGC,EAAO5C,EAAKyC,UAAUC,WAAWjU,OAAQkU,EAAIC,EAAMD,IAAK,CACtE,IAAIE,EAAY7C,EAAKyC,UAAUC,WAAWC,GACtCG,EAAaC,EAAmC/C,EAAM6C,EAAUG,QACpEH,EAAUG,OAASF,EAAWN,MAChC,CAIF,GAAIxC,EAAKiD,YACP,IAASN,EAAG,EAAGC,EAAK5C,EAAKiD,YAAYxU,OAAQkU,EAAEC,EAAMD,IAAK,CACxD,IAAIK,EAAShD,EAAKiD,YAAYN,GAAGK,OAGjC,GAAIA,KAAYA,EAAOE,YAAoC,aAAtBF,EAAOE,aACxCF,EAAOG,eAAgB,CAGzB,KADIL,EAAaC,EAAmC/C,EAAMgD,EAAOG,iBAI/D,MAAM,IAAIxU,MAAM,0BAA0BqR,EAAKoD,SAAU,4BAA4BJ,EAAOG,eACxF,sEAENH,EAAOK,aAAeP,EAAWN,cAC1BQ,EAAOG,cAChB,CACF,CAIF,GAAInD,EAAKsD,mBAAqBtD,EAAKsD,kBAAkB5P,OAASW,MAAMC,QAAQ0L,EAAKsD,kBAAkB5P,OAAQ,CACzG,IAAI6P,EAAW,GACf,IAASZ,EAAG,EAAGC,EAAK5C,EAAKsD,kBAAkB5P,MAAMjF,OAAQkU,EAAEC,EAAMD,IAAK,CAEhEG,EAAaC,EAAmC/C,EADjCA,EAAKsD,kBAAkB5P,MAAMiP,IAEhDY,EAAS/T,KAAKsT,EAAWN,OAC3B,CAEAxC,EAAKsD,kBAAkB5P,MAAQ6P,CACjC,CAEIvD,EAAKpM,OAASoM,EAAKpM,MAAMnF,OAAS,GACpCmT,EAAqB5B,EAAKpM,MAE9B,CAEF,CAUA,SAASmP,EAAmC/C,EAAMsC,GAChD,IAAIQ,EAAa,KAGjB,GAAI9C,EAAK+B,aAAe1N,MAAMC,QAAQ0L,EAAK+B,YAAYnO,OACrD,IAAK,IAAIxE,EAAG,EAAG0S,EAAM9B,EAAK+B,YAAYnO,MAAMnF,OAAQW,EAAE0S,EAAM1S,IAC1D,GAAI4Q,EAAK+B,YAAYnO,MAAMxE,GAAGkT,eAAiBA,EAAc,CAC3DQ,EAAa9C,EAAK+B,YAAYnO,MAAMxE,GACpC,KACF,CAIJ,IAAK0T,EAEH,IADA,IAAIZ,EAAalC,EAAK+B,YACfG,GAAY,CACjB,IAAIsB,GAAc,EAElB,GAAItB,EAAWI,eAAiBA,EAC9BQ,EAAaZ,EACbsB,GAAc,OAGX,GAAItB,EAAWH,aAAe1N,MAAMC,QAAQ4N,EAAWH,YAAYnO,OACtE,KAAI6P,EAAiBvB,EAAWH,YAAYnO,MAC5C,IAASxE,EAAG,EAAG0S,EAAM2B,EAAehV,OAAQW,EAAE0S,EAAM1S,IAClD,GAAIqU,EAAerU,GAAGkT,eAAiBA,EAAc,CACnDQ,EAAaW,EAAerU,GAC5BoU,GAAc,EACd,KACF,CAN+C,CASnD,GAAIA,EACF,MAEFtB,EAAaA,EAAWH,WAC1B,CAEF,OAAOe,CACT,CASAzX,EAAAC,QAAiB,SAAUiU,GAOzB,OALW3P,EAAA,SAED6P,eAAeF,IAAeA,EAAW3L,OACjD6N,EAAoBlC,GAEfA,CACT,C,sCCpMAlU,EAAAC,QAAiB,SAAUiU,GAIzB,IAAIC,EAAO5P,EAAA,SACPuR,EAAO5B,EAAW4B,KACtB,GAAIA,EAAM,CACR,IAAIuC,EAAOvC,EAAKL,IAChB,GAAI4C,EACF,IAAK,IAAIC,KAAKD,EAAM,CAElB,GADclE,EAAKqB,eAAe8C,GACrB,CAGPA,EAAE1C,UAAY0C,EAAE3C,OAClB2C,EAAE3C,KAAO2C,EAAE1C,eACJ0C,EAAE1C,SAEX,KACF,CACF,CAEJ,CAkBA,MAfgC,kBAA5B1B,EAAWG,cACbF,EAAKS,oBAAoBV,GAAY,SAAUS,GAC7C,GAAIA,EAAKD,UACP,IAAK,IAAI3Q,EAAE,EAAGA,EAAG4Q,EAAKD,UAAUtR,OAAQW,IAAK,CAE3B,wEADN4Q,EAAKD,UAAU3Q,GACjB2I,MACNiI,EAAK4D,SAAU,EACf5D,EAAKD,UAAU7S,OAAOkC,EAAG,GACzBA,GAAQ,EAEZ,CAEJ,IAGKmQ,CACT,C,sCC3CAlU,EAAAC,QAAiB,SAAUiU,GAIzB,IAAIC,EAAO5P,EAAA,SASX,OARK4P,EAAKC,eAAeF,IAA2C,kBAA5BA,EAAWG,cACjDF,EAAKG,eAAeJ,GAAY,SAAUK,GACxC,IAAK,IAAIC,KAAOD,EACE,gFAAZC,EAAI9H,MACN8H,EAAI9H,IAAM,yFAEhB,IAEKwH,CACT,C,eCTAsE,EAAiB,SAAkBC,EAAMC,GAIvC,GAHAA,EAAWA,EAASzU,MAAM,KAAK,KAC/BwU,GAAQA,GAEG,OAAO,EAElB,OAAQC,GACN,IAAK,OACL,IAAK,KACL,OAAgB,KAATD,EAEP,IAAK,QACL,IAAK,MACL,OAAgB,MAATA,EAEP,IAAK,MACL,OAAgB,KAATA,EAEP,IAAK,SACL,OAAgB,KAATA,EAEP,IAAK,OACL,OAAO,EAGT,OAAgB,IAATA,CACT,E,IC+EAE,EACAC,E,qEAnHA,IAAIC,EAAMrZ,OAAOyH,UAAUxH,eAU3B,SAASqZ,EAAOvM,GACd,IACE,OAAOY,mBAAmBZ,EAAMjL,QAAQ,MAAO,KACjD,CAAE,MAAOmG,GACP,OAAO,IACT,CACF,CASA,SAASsR,EAAOxM,GACd,IACE,OAAOyM,mBAAmBzM,EAC5B,CAAE,MAAO9E,GACP,OAAO,IACT,CACF,CAmFAkR,EA1CA,SAAwB3Q,EAAKiR,GAC3BA,EAASA,GAAU,GAEnB,IACI5Q,EACAzD,EAFAsU,EAAQ,GASZ,IAAKtU,IAFD,iBAAoBqU,IAAQA,EAAS,KAE7BjR,EACV,GAAI6Q,EAAIjX,KAAKoG,EAAKpD,GAAM,CAkBtB,IAjBAyD,EAAQL,EAAIpD,KAMGyD,UAAqC8Q,MAAM9Q,KACxDA,EAAQ,IAGVzD,EAAMmU,EAAOnU,GACbyD,EAAQ0Q,EAAO1Q,GAMH,OAARzD,GAA0B,OAAVyD,EAAgB,SACpC6Q,EAAM/U,KAAKS,EAAK,IAAKyD,EACvB,CAGF,OAAO6Q,EAAM9V,OAAS6V,EAASC,EAAMrV,KAAK,KAAO,EACnD,EAMA+U,EA3EA,SAAqBQ,GAKnB,IAJA,IAEIC,EAFAC,EAAS,uBACTzP,EAAS,CAAC,EAGPwP,EAAOC,EAAOpT,KAAKkT,IAAQ,CAChC,IAAIxU,EAAMkU,EAAOO,EAAK,IAClBhR,EAAQyQ,EAAOO,EAAK,IAUZ,OAARzU,GAA0B,OAAVyD,GAAkBzD,KAAOiF,IAC7CA,EAAOjF,GAAOyD,EAChB,CAEA,OAAOwB,CACT,EC9DA,IAEI0P,EAAsB,6EACtBC,EAAS,YACTC,EAAU,gCACVC,EAAO,QACPC,EAAa,mDACbC,EAAqB,aAUzB,SAASC,EAAS7T,GAChB,OAAQA,GAAY,IAAI9C,WAAW5B,QAAQiY,EAAqB,GAClE,CAcA,IAAIO,EAAQ,CACV,CAAC,IAAK,QACN,CAAC,IAAK,SACN,SAAkBC,EAASrN,GACzB,OAAOsN,EAAUtN,EAAIgM,UAAYqB,EAAQzY,QAAQ,MAAO,KAAOyY,CACjE,EACA,CAAC,IAAK,YACN,CAAC,IAAK,OAAQ,GACd,CAACE,IAAK,YAAQrR,EAAW,EAAG,GAC5B,CAAC,UAAW,YAAQA,EAAW,GAC/B,CAACqR,IAAK,gBAAYrR,EAAW,EAAG,IAW9BsR,EAAS,CAAErV,KAAM,EAAGuU,MAAO,GAc/B,SAASe,EAAUC,GACjB,IAYIxV,EALAkJ,GALkB,oBAAXuM,OAAoCA,YACpB,IAAXtG,EAAoCA,EAC3B,oBAATnT,KAAkCA,KACjC,CAAC,GAEOkN,UAAY,CAAC,EAGlCwM,EAAmB,CAAC,EACpBvU,SAHJqU,EAAMA,GAAOtM,GAMb,GAAI,UAAYsM,EAAI1B,SAClB4B,EAAmB,IAAIC,EAAIC,SAASJ,EAAIK,UAAW,CAAC,QAC/C,GAAI,WAAa1U,EAEtB,IAAKnB,KADL0V,EAAmB,IAAIC,EAAIH,EAAK,CAAC,GACrBF,SAAeI,EAAiB1V,QACvC,GAAI,WAAamB,EAAM,CAC5B,IAAKnB,KAAOwV,EACNxV,KAAOsV,IACXI,EAAiB1V,GAAOwV,EAAIxV,SAGGgE,IAA7B0R,EAAiBI,UACnBJ,EAAiBI,QAAUjB,EAAQ1Z,KAAKqa,EAAIO,MAEhD,CAEA,OAAOL,CACT,CASA,SAASN,EAAUY,GACjB,MACa,UAAXA,GACW,SAAXA,GACW,UAAXA,GACW,WAAXA,GACW,QAAXA,GACW,SAAXA,CAEJ,CAkBA,SAASC,EAAgBd,EAASjM,GAEhCiM,GADAA,EAAUF,EAASE,IACDzY,QAAQkY,EAAQ,IAClC1L,EAAWA,GAAY,CAAC,EAExB,IAKIgN,EALAvZ,EAAQoY,EAAWzT,KAAK6T,GACxBrB,EAAWnX,EAAM,GAAKA,EAAM,GAAG6E,cAAgB,GAC/C2U,IAAmBxZ,EAAM,GACzByZ,IAAiBzZ,EAAM,GACvB0Z,EAAe,EAkCnB,OA/BIF,EACEC,GACFF,EAAOvZ,EAAM,GAAKA,EAAM,GAAKA,EAAM,GACnC0Z,EAAe1Z,EAAM,GAAG6B,OAAS7B,EAAM,GAAG6B,SAE1C0X,EAAOvZ,EAAM,GAAKA,EAAM,GACxB0Z,EAAe1Z,EAAM,GAAG6B,QAGtB4X,GACFF,EAAOvZ,EAAM,GAAKA,EAAM,GACxB0Z,EAAe1Z,EAAM,GAAG6B,QAExB0X,EAAOvZ,EAAM,GAIA,UAAbmX,EACEuC,GAAgB,IAClBH,EAAOA,EAAK1W,MAAM,IAEX4V,EAAUtB,GACnBoC,EAAOvZ,EAAM,GACJmX,EACLqC,IACFD,EAAOA,EAAK1W,MAAM,IAEX6W,GAAgB,GAAKjB,EAAUlM,EAAS4K,YACjDoC,EAAOvZ,EAAM,IAGR,CACLmX,SAAUA,EACVgC,QAASK,GAAkBf,EAAUtB,GACrCuC,aAAcA,EACdH,KAAMA,EAEV,CAoDA,SAASP,EAAIR,EAASjM,EAAUwL,GAI9B,GAFAS,GADAA,EAAUF,EAASE,IACDzY,QAAQkY,EAAQ,MAE5BzW,gBAAgBwX,GACpB,OAAO,IAAIA,EAAIR,EAASjM,EAAUwL,GAGpC,IAAI4B,EAAUC,EAAWrP,EAAOsP,EAAa/Z,EAAOuD,EAChDyW,EAAevB,EAAM1V,QACrB2B,SAAc+H,EACdpB,EAAM3J,KACNgB,EAAI,EA8CR,IAjCI,WAAagC,GAAQ,WAAaA,IACpCuT,EAASxL,EACTA,EAAW,MAGTwL,GAAU,mBAAsBA,IAAQA,EAASgC,EAAGxP,OAQxDoP,IADAC,EAAYN,EAAgBd,GAAW,GALvCjM,EAAWqM,EAAUrM,KAMC4K,WAAayC,EAAUT,QAC7ChO,EAAIgO,QAAUS,EAAUT,SAAWQ,GAAYpN,EAAS4M,QACxDhO,EAAIgM,SAAWyC,EAAUzC,UAAY5K,EAAS4K,UAAY,GAC1DqB,EAAUoB,EAAUL,MAOK,UAAvBK,EAAUzC,WACmB,IAA3ByC,EAAUF,cAAsBrB,EAAmB7Z,KAAKga,MACxDoB,EAAUT,UACTS,EAAUzC,UACTyC,EAAUF,aAAe,IACxBjB,EAAUtN,EAAIgM,cAEnB2C,EAAa,GAAK,CAAC,OAAQ,aAGtBtX,EAAIsX,EAAajY,OAAQW,IAGH,mBAF3BqX,EAAcC,EAAatX,KAO3B+H,EAAQsP,EAAY,GACpBxW,EAAMwW,EAAY,GAEdtP,GAAUA,EACZY,EAAI9H,GAAOmV,EACF,iBAAoBjO,IAC7BzK,EAAkB,MAAVyK,EACJiO,EAAQwB,YAAYzP,GACpBiO,EAAQ9R,QAAQ6D,MAGd,iBAAoBsP,EAAY,IAClC1O,EAAI9H,GAAOmV,EAAQ3V,MAAM,EAAG/C,GAC5B0Y,EAAUA,EAAQ3V,MAAM/C,EAAQ+Z,EAAY,MAE5C1O,EAAI9H,GAAOmV,EAAQ3V,MAAM/C,GACzB0Y,EAAUA,EAAQ3V,MAAM,EAAG/C,MAGrBA,EAAQyK,EAAM5F,KAAK6T,MAC7BrN,EAAI9H,GAAOvD,EAAM,GACjB0Y,EAAUA,EAAQ3V,MAAM,EAAG/C,EAAMA,QAGnCqL,EAAI9H,GAAO8H,EAAI9H,IACbsW,GAAYE,EAAY,IAAKtN,EAASlJ,IAAa,GAOjDwW,EAAY,KAAI1O,EAAI9H,GAAO8H,EAAI9H,GAAKwB,gBApCtC2T,EAAUqB,EAAYrB,EAASrN,GA4C/B4M,IAAQ5M,EAAI0M,MAAQE,EAAO5M,EAAI0M,QAM/B8B,GACCpN,EAAS4M,SACkB,MAA3BhO,EAAI+N,SAASe,OAAO,KACF,KAAjB9O,EAAI+N,UAAyC,KAAtB3M,EAAS2M,YAEpC/N,EAAI+N,SA/JR,SAAiBS,EAAUnJ,GACzB,GAAiB,KAAbmJ,EAAiB,OAAOnJ,EAQ5B,IANA,IAAI0J,GAAQ1J,GAAQ,KAAK9N,MAAM,KAAKG,MAAM,GAAG,GAAIsX,OAAOR,EAASjX,MAAM,MACnEF,EAAI0X,EAAKrY,OACTuY,EAAOF,EAAK1X,EAAI,GAChB3C,GAAU,EACVwa,EAAK,EAEF7X,KACW,MAAZ0X,EAAK1X,GACP0X,EAAK5Z,OAAOkC,EAAG,GACM,OAAZ0X,EAAK1X,IACd0X,EAAK5Z,OAAOkC,EAAG,GACf6X,KACSA,IACC,IAAN7X,IAAS3C,GAAU,GACvBqa,EAAK5Z,OAAOkC,EAAG,GACf6X,KAOJ,OAHIxa,GAASqa,EAAKra,QAAQ,IACb,MAATua,GAAyB,OAATA,GAAeF,EAAKtX,KAAK,IAEtCsX,EAAK5X,KAAK,IACnB,CAqImBgY,CAAQnP,EAAI+N,SAAU3M,EAAS2M,WAOjB,MAA3B/N,EAAI+N,SAASe,OAAO,IAAcxB,EAAUtN,EAAIgM,YAClDhM,EAAI+N,SAAW,IAAM/N,EAAI+N,UAQtBjC,EAAS9L,EAAI+L,KAAM/L,EAAIgM,YAC1BhM,EAAIoP,KAAOpP,EAAIqP,SACfrP,EAAI+L,KAAO,IAMb/L,EAAIsP,SAAWtP,EAAIuP,SAAW,GAE1BvP,EAAIwP,SACN7a,EAAQqL,EAAIwP,KAAKjU,QAAQ,OAGvByE,EAAIsP,SAAWtP,EAAIwP,KAAK9X,MAAM,EAAG/C,GACjCqL,EAAIsP,SAAWhD,mBAAmB7L,mBAAmBT,EAAIsP,WAEzDtP,EAAIuP,SAAWvP,EAAIwP,KAAK9X,MAAM/C,EAAQ,GACtCqL,EAAIuP,SAAWjD,mBAAmB7L,mBAAmBT,EAAIuP,YAEzDvP,EAAIsP,SAAWhD,mBAAmB7L,mBAAmBT,EAAIwP,OAG3DxP,EAAIwP,KAAOxP,EAAIuP,SAAWvP,EAAIsP,SAAU,IAAKtP,EAAIuP,SAAWvP,EAAIsP,UAGlEtP,EAAIyP,OAA0B,UAAjBzP,EAAIgM,UAAwBsB,EAAUtN,EAAIgM,WAAahM,EAAIoP,KACpEpP,EAAIgM,SAAU,KAAMhM,EAAIoP,KACxB,OAKJpP,EAAIiO,KAAOjO,EAAIxJ,UACjB,CA2KAqX,EAAItT,UAAY,CAAEtE,IA5JlB,SAAa0W,EAAMhR,EAAO+T,GACxB,IAAI1P,EAAM3J,KAEV,OAAQsW,GACN,IAAK,QACC,iBAAoBhR,GAASA,EAAMjF,SACrCiF,GAAS+T,GAAMd,EAAGxP,OAAOzD,IAG3BqE,EAAI2M,GAAQhR,EACZ,MAEF,IAAK,OACHqE,EAAI2M,GAAQhR,EAEPmQ,EAASnQ,EAAOqE,EAAIgM,UAGdrQ,IACTqE,EAAIoP,KAAOpP,EAAIqP,SAAU,IAAK1T,IAH9BqE,EAAIoP,KAAOpP,EAAIqP,SACfrP,EAAI2M,GAAQ,IAKd,MAEF,IAAK,WACH3M,EAAI2M,GAAQhR,EAERqE,EAAI+L,OAAMpQ,GAAS,IAAKqE,EAAI+L,MAChC/L,EAAIoP,KAAOzT,EACX,MAEF,IAAK,OACHqE,EAAI2M,GAAQhR,EAERqR,EAAK3Z,KAAKsI,IACZA,EAAQA,EAAMpE,MAAM,KACpByI,EAAI+L,KAAOpQ,EAAMgU,MACjB3P,EAAIqP,SAAW1T,EAAMxE,KAAK,OAE1B6I,EAAIqP,SAAW1T,EACfqE,EAAI+L,KAAO,IAGb,MAEF,IAAK,WACH/L,EAAIgM,SAAWrQ,EAAMjC,cACrBsG,EAAIgO,SAAW0B,EACf,MAEF,IAAK,WACL,IAAK,OACH,GAAI/T,EAAO,CACT,IAAIiU,EAAgB,aAATjD,EAAsB,IAAM,IACvC3M,EAAI2M,GAAQhR,EAAMmT,OAAO,KAAOc,EAAOA,EAAOjU,EAAQA,CACxD,MACEqE,EAAI2M,GAAQhR,EAEd,MAEF,IAAK,WACL,IAAK,WACHqE,EAAI2M,GAAQL,mBAAmB3Q,GAC/B,MAEF,IAAK,OACH,IAAIhH,EAAQgH,EAAMJ,QAAQ,MAErB5G,GACHqL,EAAIsP,SAAW3T,EAAMjE,MAAM,EAAG/C,GAC9BqL,EAAIsP,SAAWhD,mBAAmB7L,mBAAmBT,EAAIsP,WAEzDtP,EAAIuP,SAAW5T,EAAMjE,MAAM/C,EAAQ,GACnCqL,EAAIuP,SAAWjD,mBAAmB7L,mBAAmBT,EAAIuP,YAEzDvP,EAAIsP,SAAWhD,mBAAmB7L,mBAAmB9E,IAI3D,IAAK,IAAItE,EAAI,EAAGA,EAAI+V,EAAM1W,OAAQW,IAAK,CACrC,IAAIwY,EAAMzC,EAAM/V,GAEZwY,EAAI,KAAI7P,EAAI6P,EAAI,IAAM7P,EAAI6P,EAAI,IAAInW,cACxC,CAUA,OARAsG,EAAIwP,KAAOxP,EAAIuP,SAAWvP,EAAIsP,SAAU,IAAKtP,EAAIuP,SAAWvP,EAAIsP,SAEhEtP,EAAIyP,OAA0B,UAAjBzP,EAAIgM,UAAwBsB,EAAUtN,EAAIgM,WAAahM,EAAIoP,KACpEpP,EAAIgM,SAAU,KAAMhM,EAAIoP,KACxB,OAEJpP,EAAIiO,KAAOjO,EAAIxJ,WAERwJ,CACT,EA8D4BxJ,SArD5B,SAAkBwD,GACXA,GAAa,mBAAsBA,IAAWA,EAAY4U,EAAG5U,WAElE,IAAI0S,EACA1M,EAAM3J,KACN+Y,EAAOpP,EAAIoP,KACXpD,EAAWhM,EAAIgM,SAEfA,GAAqD,MAAzCA,EAAS8C,OAAO9C,EAAStV,OAAS,KAAYsV,GAAY,KAE1E,IAAI7O,EACF6O,GACChM,EAAKgM,UAAYhM,EAAIgO,SAAYV,EAAUtN,EAAIgM,UAAY,KAAO,IAsCrE,OApCIhM,EAAIsP,UACNnS,GAAU6C,EAAIsP,SACVtP,EAAIuP,WAAUpS,GAAU,IAAK6C,EAAIuP,UACrCpS,GAAU,KACD6C,EAAIuP,UACbpS,GAAU,IAAK6C,EAAIuP,SACnBpS,GAAU,KAEO,UAAjB6C,EAAIgM,UACJsB,EAAUtN,EAAIgM,YACboD,GACgB,MAAjBpP,EAAI+N,WAMJ5Q,GAAU,MAQkB,MAA1BiS,EAAKA,EAAK1Y,OAAS,IAAesW,EAAK3Z,KAAK2M,EAAIqP,YAAcrP,EAAI+L,QACpEqD,GAAQ,KAGVjS,GAAUiS,EAAOpP,EAAI+N,UAErBrB,EAAQ,iBAAoB1M,EAAI0M,MAAQ1S,EAAUgG,EAAI0M,OAAS1M,EAAI0M,SACxDvP,GAAU,MAAQuP,EAAMoC,OAAO,GAAK,IAAKpC,EAAQA,GAExD1M,EAAI7H,OAAMgF,GAAU6C,EAAI7H,MAErBgF,CACT,GAQA0Q,EAAIiC,gBAAkB3B,EACtBN,EAAIzM,SAAWqM,EACfI,EAAIkC,SAAW5C,EACfU,EAAImC,GAAKpB,EAETqB,EAAiBpC,E,cCzkBbqC,EAAmC,oBAAfrS,YACgB,oBAAhBsS,aACe,oBAAfC,WAExB,SAASC,EAAK/U,EAAKpD,GACjB,OAAOpF,OAAOyH,UAAUxH,eAAemC,KAAKoG,EAAKpD,EACnD,CAEAoY,EAAQC,OAAS,SAAUjV,GAEzB,IADA,IAAIkV,EAAUlU,MAAM/B,UAAU7C,MAAMxC,KAAK+P,UAAW,GAC7CuL,EAAQ9Z,QAAQ,CACrB,IAAIuU,EAASuF,EAAQxU,QACrB,GAAKiP,EAAL,CAEA,GAAsB,iBAAXA,EACT,MAAM,IAAIxP,UAAUwP,EAAS,sBAG/B,IAAK,IAAI7G,KAAK6G,EACRoF,EAAKpF,EAAQ7G,KACf9I,EAAI8I,GAAK6G,EAAO7G,GARI,CAW1B,CAEA,OAAO9I,CACT,EAIAgV,EAAQG,UAAY,SAAU9S,EAAK+S,GACjC,OAAI/S,EAAIjH,SAAWga,EAAe/S,EAC9BA,EAAIgT,SAAmBhT,EAAIgT,SAAS,EAAGD,IAC3C/S,EAAIjH,OAASga,EACN/S,EACT,EAGA,IAAIiT,EAAU,CACZC,SAAU,SAAUC,EAAMC,EAAKC,EAAUxZ,EAAKyZ,GAC5C,GAAIF,EAAIJ,UAAYG,EAAKH,SACvBG,EAAK7a,IAAI8a,EAAIJ,SAASK,EAAUA,EAAWxZ,GAAMyZ,QAInD,IAAK,IAAI5Z,EAAI,EAAGA,EAAIG,EAAKH,IACvByZ,EAAKG,EAAY5Z,GAAK0Z,EAAIC,EAAW3Z,EAEzC,EAEA6Z,cAAe,SAAUC,GACvB,IAAI9Z,EAAGuO,EAAGpO,EAAK4Z,EAAKC,EAAOlU,EAI3B,IADA3F,EAAM,EACDH,EAAI,EAAGuO,EAAIuL,EAAOza,OAAQW,EAAIuO,EAAGvO,IACpCG,GAAO2Z,EAAO9Z,GAAGX,OAMnB,IAFAyG,EAAS,IAAIU,WAAWrG,GACxB4Z,EAAM,EACD/Z,EAAI,EAAGuO,EAAIuL,EAAOza,OAAQW,EAAIuO,EAAGvO,IACpCga,EAAQF,EAAO9Z,GACf8F,EAAOlH,IAAIob,EAAOD,GAClBA,GAAOC,EAAM3a,OAGf,OAAOyG,CACT,GAGEmU,EAAY,CACdT,SAAU,SAAUC,EAAMC,EAAKC,EAAUxZ,EAAKyZ,GAC5C,IAAK,IAAI5Z,EAAI,EAAGA,EAAIG,EAAKH,IACvByZ,EAAKG,EAAY5Z,GAAK0Z,EAAIC,EAAW3Z,EAEzC,EAEA6Z,cAAe,SAAUC,GACvB,MAAO,GAAGnC,OAAO1Z,MAAM,GAAI6b,EAC7B,GAMFb,EAAQiB,SAAW,SAAUC,GACvBA,GACFlB,EAAQmB,KAAQ5T,WAChByS,EAAQoB,MAAQvB,YAChBG,EAAQqB,MAAQvB,WAChBE,EAAQC,OAAOD,EAASM,KAExBN,EAAQmB,KAAQnV,MAChBgU,EAAQoB,MAAQpV,MAChBgU,EAAQqB,MAAQrV,MAChBgU,EAAQC,OAAOD,EAASgB,GAE5B,EAEAhB,EAAQiB,SAASrB,G,ICoSjB0B,EACAC,EACAC,EACAC,ECk7CAC,EAGAC,EACAC,EACAC,EACAC,ECtoBAC,EACAC,EACAC,EACAC,EACAC,E,EClsCInC,EAAAC,O,qID6BJ,IAIImC,EAAwB,EACxBC,EAAwB,EAO5B,SAASC,EAAKjV,GAA6B,IAAtB,IAAInG,EAAMmG,EAAIjH,SAAiBc,GAAO,GAAKmG,EAAInG,GAAO,CAAK,CAIhF,IAAIqb,EAAe,EAcfC,EAAgB,GAGhBC,GAAgB,IAGhBC,GAAgBD,GAAW,EAAID,EAG/BG,GAAgB,GAGhBC,GAAgB,GAGhBC,GAAgB,EAAIH,GAAU,EAG9BI,GAAgB,GAGhBC,GAAgB,GAQhBC,GAAc,EAGdC,GAAc,IAGdC,GAAc,GAGdC,GAAc,GAGdC,GAAc,GAIdC,GACF,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAEvDC,GACF,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAEhEC,GACF,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAEnCC,GACF,CAAC,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAgB3CC,GAAgB,IAAIzX,MAAsB,GAAf0W,GAAU,IACzCJ,EAAKmB,IAOL,IAAIC,GAAgB,IAAI1X,MAAgB,EAAV2W,IAC9BL,EAAKoB,IAKL,IAAIC,GAAgB,IAAI3X,MAjBJ,KAkBpBsW,EAAKqB,IAML,IAAIC,GAAgB,IAAI5X,MAAM6X,KAC9BvB,EAAKsB,IAGL,IAAIE,GAAgB,IAAI9X,MAAMwW,GAC9BF,EAAKwB,IAGL,IAkBIC,GACAC,GACAC,GApBAC,GAAgB,IAAIlY,MAAM2W,IAK9B,SAASwB,GAAeC,EAAaC,EAAYC,EAAYC,EAAOC,GAElEze,KAAKqe,YAAeA,EACpBre,KAAKse,WAAeA,EACpBte,KAAKue,WAAeA,EACpBve,KAAKwe,MAAeA,EACpBxe,KAAKye,WAAeA,EAGpBze,KAAK0e,UAAeL,GAAeA,EAAYhe,MACjD,CAQA,SAASse,GAASC,EAAUC,GAC1B7e,KAAK4e,SAAWA,EAChB5e,KAAK8e,SAAW,EAChB9e,KAAK6e,UAAYA,CACnB,CAIA,SAASE,GAAOC,GACd,OAAOA,EAAO,IAAMpB,GAAWoB,GAAQpB,GAAW,KAAOoB,IAAS,GACpE,CAOA,SAASC,GAAUC,EAAGC,GAGpBD,EAAEE,YAAYF,EAAEG,WAAmB,IAANF,EAC7BD,EAAEE,YAAYF,EAAEG,WAAaF,IAAO,EAAK,GAC3C,CAOA,SAASG,GAAUJ,EAAG5Z,EAAOjF,GACvB6e,EAAEK,SAAYvC,GAAW3c,GAC3B6e,EAAEM,QAAUla,GAAU4Z,EAAEK,SAAY,MACpCN,GAAUC,EAAGA,EAAEM,QACfN,EAAEM,OAASla,GAAU0X,GAAWkC,EAAEK,SAClCL,EAAEK,UAAYlf,EAAS2c,KAEvBkC,EAAEM,QAAUla,GAAU4Z,EAAEK,SAAY,MACpCL,EAAEK,UAAYlf,EAElB,CAGA,SAASof,GAAUP,EAAGQ,EAAGC,GACvBL,GAAUJ,EAAGS,EAAS,EAAJD,GAAiBC,EAAS,EAAJD,EAAQ,GAClD,CAQA,SAASE,GAAWhN,EAAMzR,GACxB,IAAI0e,EAAM,EACV,GACEA,GAAc,EAAPjN,EACPA,KAAU,EACViN,IAAQ,UACC1e,EAAM,GACjB,OAAO0e,IAAQ,CACjB,CA+HA,SAASC,GAAUH,EAAMb,EAAUiB,GAKjC,IAEIC,EACApd,EAHAqd,EAAY,IAAIha,MAAM8W,GAAW,GACjCnK,EAAO,EAOX,IAAKoN,EAAO,EAAGA,GAAQjD,GAAUiD,IAC/BC,EAAUD,GAAQpN,EAAOA,EAAQmN,EAASC,EAAO,IAAO,EAS1D,IAAKpd,EAAI,EAAIA,GAAKkc,EAAUlc,IAAK,CAC/B,IAAIzB,EAAMwe,EAAS,EAAJ/c,EAAQ,GACX,IAARzB,IAEJwe,EAAS,EAAJ/c,GAAkBgd,GAAWK,EAAU9e,KAAQA,GAItD,CACF,CA8GA,SAAS+e,GAAWhB,GAClB,IAAItc,EAGJ,IAAKA,EAAI,EAAGA,EAAI+Z,GAAU/Z,IAAOsc,EAAEiB,UAAc,EAAJvd,GAAkB,EAC/D,IAAKA,EAAI,EAAGA,EAAIga,GAAUha,IAAOsc,EAAEkB,UAAc,EAAJxd,GAAkB,EAC/D,IAAKA,EAAI,EAAGA,EAAIia,GAAUja,IAAOsc,EAAEmB,QAAY,EAAJzd,GAAkB,EAE7Dsc,EAAEiB,UAAsB,EAAZjD,IAA0B,EACtCgC,EAAEoB,QAAUpB,EAAEqB,WAAa,EAC3BrB,EAAEsB,SAAWtB,EAAEuB,QAAU,CAC3B,CAMA,SAASC,GAAUxB,GAEbA,EAAEK,SAAW,EACfN,GAAUC,EAAGA,EAAEM,QACNN,EAAEK,SAAW,IAEtBL,EAAEE,YAAYF,EAAEG,WAAaH,EAAEM,QAEjCN,EAAEM,OAAS,EACXN,EAAEK,SAAW,CACf,CA6BA,SAASoB,GAAQhB,EAAM/c,EAAGge,EAAGC,GAC3B,IAAIC,EAAU,EAAJle,EACNme,EAAU,EAAJH,EACV,OAAQjB,EAAKmB,GAAgBnB,EAAKoB,IAC1BpB,EAAKmB,KAAkBnB,EAAKoB,IAAiBF,EAAMje,IAAMie,EAAMD,EACzE,CAQA,SAASI,GAAW9B,EAAGS,EAAMsB,GAO3B,IAFA,IAAI3kB,EAAI4iB,EAAEgC,KAAKD,GACX1M,EAAI0M,GAAK,EACN1M,GAAK2K,EAAEiC,WAER5M,EAAI2K,EAAEiC,UACRR,GAAQhB,EAAMT,EAAEgC,KAAK3M,EAAI,GAAI2K,EAAEgC,KAAK3M,GAAI2K,EAAE2B,QAC1CtM,KAGEoM,GAAQhB,EAAMrjB,EAAG4iB,EAAEgC,KAAK3M,GAAI2K,EAAE2B,SAGlC3B,EAAEgC,KAAKD,GAAK/B,EAAEgC,KAAK3M,GACnB0M,EAAI1M,EAGJA,IAAM,EAER2K,EAAEgC,KAAKD,GAAK3kB,CACd,CASA,SAAS8kB,GAAelC,EAAGmC,EAAOC,GAKhC,IAAItC,EACAuC,EAEA3O,EACA4O,EAFAC,EAAK,EAIT,GAAmB,IAAfvC,EAAEsB,SACJ,GACExB,EAAOE,EAAGE,YAAYF,EAAEwC,MAAa,EAALD,IAAW,EAAMvC,EAAEE,YAAYF,EAAEwC,MAAa,EAALD,EAAS,GAClFF,EAAKrC,EAAEE,YAAYF,EAAEyC,MAAQF,GAC7BA,IAEa,IAATzC,EACFS,GAAUP,EAAGqC,EAAIF,IAKjB5B,GAAUP,GADVtM,EAAOiL,GAAa0D,IACA7E,GAAW,EAAG2E,GAEpB,KADdG,EAAQlE,GAAY1K,KAGlB0M,GAAUJ,EADVqC,GAAMxD,GAAYnL,GACD4O,GAMnB/B,GAAUP,EAHVtM,EAAOmM,KADPC,GAImBsC,GAEL,KADdE,EAAQjE,GAAY3K,KAGlB0M,GAAUJ,EADVF,GAAQb,GAAUvL,GACC4O,UAQhBC,EAAKvC,EAAEsB,UAGlBf,GAAUP,EAAGhC,GAAWmE,EAC1B,CAWA,SAASO,GAAW1C,EAAG/P,GAIrB,IAIIvM,EAAGge,EAEHiB,EANAlC,EAAWxQ,EAAKyP,SAChBkD,EAAW3S,EAAK0P,UAAUR,YAC1BK,EAAYvP,EAAK0P,UAAUH,UAC3BF,EAAWrP,EAAK0P,UAAUL,MAE1BM,GAAW,EAUf,IAHAI,EAAEiC,SAAW,EACbjC,EAAE6C,SAAWjF,GAERla,EAAI,EAAGA,EAAI4b,EAAO5b,IACQ,IAAzB+c,EAAS,EAAJ/c,IACPsc,EAAEgC,OAAOhC,EAAEiC,UAAYrC,EAAWlc,EAClCsc,EAAE2B,MAAMje,GAAK,GAGb+c,EAAS,EAAJ/c,EAAQ,GAAa,EAS9B,KAAOsc,EAAEiC,SAAW,GAElBxB,EAAY,GADZkC,EAAO3C,EAAEgC,OAAOhC,EAAEiC,UAAarC,EAAW,IAAMA,EAAW,IACjC,EAC1BI,EAAE2B,MAAMgB,GAAQ,EAChB3C,EAAEoB,UAEE5B,IACFQ,EAAEqB,YAAcuB,EAAa,EAAPD,EAAW,IASrC,IALA1S,EAAK2P,SAAWA,EAKXlc,EAAKsc,EAAEiC,UAAY,EAAcve,GAAK,EAAGA,IAAOoe,GAAW9B,EAAGS,EAAM/c,GAKzEif,EAAOrD,EACP,GAGE5b,EAAIsc,EAAEgC,KAAK,GACXhC,EAAEgC,KAAK,GAAiBhC,EAAEgC,KAAKhC,EAAEiC,YACjCH,GAAW9B,EAAGS,EAAM,GAGpBiB,EAAI1B,EAAEgC,KAAK,GAEXhC,EAAEgC,OAAOhC,EAAE6C,UAAYnf,EACvBsc,EAAEgC,OAAOhC,EAAE6C,UAAYnB,EAGvBjB,EAAY,EAAPkC,GAAqBlC,EAAS,EAAJ/c,GAAkB+c,EAAS,EAAJiB,GACtD1B,EAAE2B,MAAMgB,IAAS3C,EAAE2B,MAAMje,IAAMsc,EAAE2B,MAAMD,GAAK1B,EAAE2B,MAAMje,GAAKsc,EAAE2B,MAAMD,IAAM,EACvEjB,EAAS,EAAJ/c,EAAQ,GAAa+c,EAAS,EAAJiB,EAAQ,GAAaiB,EAGpD3C,EAAEgC,KAAK,GAAiBW,IACxBb,GAAW9B,EAAGS,EAAM,SAEbT,EAAEiC,UAAY,GAEvBjC,EAAEgC,OAAOhC,EAAE6C,UAAY7C,EAAEgC,KAAK,GAjehC,SAAoBhC,EAAG/P,GAIrB,IAOI6S,EACApf,EAAGge,EACHZ,EACAiC,EACAC,EAXAvC,EAAkBxQ,EAAKyP,SACvBE,EAAkB3P,EAAK2P,SACvBgD,EAAkB3S,EAAK0P,UAAUR,YACjCK,EAAkBvP,EAAK0P,UAAUH,UACjC8C,EAAkBrS,EAAK0P,UAAUP,WACjCtP,EAAkBG,EAAK0P,UAAUN,WACjCE,EAAkBtP,EAAK0P,UAAUJ,WAMjC0D,EAAW,EAEf,IAAKnC,EAAO,EAAGA,GAAQjD,GAAUiD,IAC/Bd,EAAEa,SAASC,GAAQ,EAQrB,IAFAL,EAA0B,EAArBT,EAAEgC,KAAKhC,EAAE6C,UAAgB,GAAa,EAEtCC,EAAI9C,EAAE6C,SAAW,EAAGC,EAAIlF,GAAWkF,KAEtChC,EAAOL,EAA+B,EAA1BA,EAAS,GADrB/c,EAAIsc,EAAEgC,KAAKc,IACc,GAAiB,GAAa,GAC5CvD,IACTuB,EAAOvB,EACP0D,KAEFxC,EAAS,EAAJ/c,EAAQ,GAAaod,EAGtBpd,EAAIkc,IAERI,EAAEa,SAASC,KACXiC,EAAQ,EACJrf,GAAKoM,IACPiT,EAAQT,EAAM5e,EAAIoM,IAEpBkT,EAAIvC,EAAS,EAAJ/c,GACTsc,EAAEoB,SAAW4B,GAAKlC,EAAOiC,GACrBvD,IACFQ,EAAEqB,YAAc2B,GAAKJ,EAAU,EAAJlf,EAAQ,GAAaqf,KAGpD,GAAiB,IAAbE,EAAJ,CAMA,EAAG,CAED,IADAnC,EAAOvB,EAAa,EACQ,IAArBS,EAAEa,SAASC,IAAeA,IACjCd,EAAEa,SAASC,KACXd,EAAEa,SAASC,EAAO,IAAM,EACxBd,EAAEa,SAAStB,KAIX0D,GAAY,CACd,OAASA,EAAW,GAOpB,IAAKnC,EAAOvB,EAAqB,IAATuB,EAAYA,IAElC,IADApd,EAAIsc,EAAEa,SAASC,GACF,IAANpd,IACLge,EAAI1B,EAAEgC,OAAOc,IACLlD,IACJa,EAAS,EAAJiB,EAAQ,KAAeZ,IAE9Bd,EAAEoB,UAAYN,EAAOL,EAAS,EAAJiB,EAAQ,IAAcjB,EAAS,EAAJiB,GACrDjB,EAAS,EAAJiB,EAAQ,GAAaZ,GAE5Bpd,IAjCkB,CAoCxB,CAgZEwf,CAAWlD,EAAG/P,GAGd2Q,GAAUH,EAAMb,EAAUI,EAAEa,SAC9B,CAOA,SAASsC,GAAUnD,EAAGS,EAAMb,GAK1B,IAAIlc,EAEA0f,EADAC,GAAU,EAGVC,EAAU7C,EAAK,GAEf8C,EAAQ,EACRC,EAAY,EACZC,EAAY,EAQhB,IANgB,IAAZH,IACFE,EAAY,IACZC,EAAY,GAEdhD,EAAsB,GAAhBb,EAAW,GAAS,GAAa,MAElClc,EAAI,EAAGA,GAAKkc,EAAUlc,IACzB0f,EAASE,EACTA,EAAU7C,EAAe,GAAT/c,EAAI,GAAS,KAEvB6f,EAAQC,GAAaJ,IAAWE,IAG3BC,EAAQE,EACjBzD,EAAEmB,QAAiB,EAATiC,IAAwBG,EAEd,IAAXH,GAELA,IAAWC,GAAWrD,EAAEmB,QAAiB,EAATiC,KACpCpD,EAAEmB,QAAkB,EAAVlD,OAEDsF,GAAS,GAClBvD,EAAEmB,QAAoB,EAAZjD,MAGV8B,EAAEmB,QAAsB,EAAdhD,MAGZoF,EAAQ,EACRF,EAAUD,EAEM,IAAZE,GACFE,EAAY,IACZC,EAAY,GAEHL,IAAWE,GACpBE,EAAY,EACZC,EAAY,IAGZD,EAAY,EACZC,EAAY,GAGlB,CAOA,SAASC,GAAU1D,EAAGS,EAAMb,GAK1B,IAAIlc,EAEA0f,EADAC,GAAU,EAGVC,EAAU7C,EAAK,GAEf8C,EAAQ,EACRC,EAAY,EACZC,EAAY,EAQhB,IALgB,IAAZH,IACFE,EAAY,IACZC,EAAY,GAGT/f,EAAI,EAAGA,GAAKkc,EAAUlc,IAIzB,GAHA0f,EAASE,EACTA,EAAU7C,EAAe,GAAT/c,EAAI,GAAS,OAEvB6f,EAAQC,GAAaJ,IAAWE,GAAtC,CAGO,GAAIC,EAAQE,EACjB,GAAKlD,GAAUP,EAAGoD,EAAQpD,EAAEmB,eAA+B,KAAVoC,QAE7B,IAAXH,GACLA,IAAWC,IACb9C,GAAUP,EAAGoD,EAAQpD,EAAEmB,SACvBoC,KAGFhD,GAAUP,EAAG/B,GAAS+B,EAAEmB,SACxBf,GAAUJ,EAAGuD,EAAQ,EAAG,IAEfA,GAAS,IAClBhD,GAAUP,EAAG9B,GAAW8B,EAAEmB,SAC1Bf,GAAUJ,EAAGuD,EAAQ,EAAG,KAGxBhD,GAAUP,EAAG7B,GAAa6B,EAAEmB,SAC5Bf,GAAUJ,EAAGuD,EAAQ,GAAI,IAG3BA,EAAQ,EACRF,EAAUD,EACM,IAAZE,GACFE,EAAY,IACZC,EAAY,GAEHL,IAAWE,GACpBE,EAAY,EACZC,EAAY,IAGZD,EAAY,EACZC,EAAY,EAdd,CAiBJ,CAnuBApG,EAAK4B,IAu1BL,IAAI0E,IAAmB,EA4BvB,SAASC,GAAiB5D,EAAG5X,EAAKyb,EAAYnK,GAM5C0G,GAAUJ,GAAI1C,GAAgB,IAAM5D,EAAO,EAAI,GAAI,GAzfrD,SAAoBsG,EAAG5X,EAAKnG,EAAKgF,GAM/Bua,GAAUxB,GAEN/Y,IACF8Y,GAAUC,EAAG/d,GACb8d,GAAUC,GAAI/d,IAKhB8Y,EAAAO,SAAe0E,EAAEE,YAAaF,EAAE5H,OAAQhQ,EAAKnG,EAAK+d,EAAEG,SACpDH,EAAEG,SAAWle,CACf,CAyeE6hB,CAAW9D,EAAG5X,EAAKyb,GAAY,EACjC,CAmKA/G,EAlMA,SAAkBkD,GAGX2D,MAxmBP,WACE,IAAIjgB,EACAod,EACA3f,EACAuS,EACAoM,EACAe,EAAW,IAAI9Z,MAAM8W,GAAW,GAiBpC,IADA1c,EAAS,EACJuS,EAAO,EAAGA,EAAO6J,EAAe,EAAG7J,IAEtC,IADAmL,GAAYnL,GAAQvS,EACfuC,EAAI,EAAGA,EAAK,GAAK0a,GAAY1K,GAAQhQ,IACxCib,GAAaxd,KAAYuS,EAY7B,IAJAiL,GAAaxd,EAAS,GAAKuS,EAG3BoM,EAAO,EACFpM,EAAO,EAAGA,EAAO,GAAIA,IAExB,IADAuL,GAAUvL,GAAQoM,EACbpc,EAAI,EAAGA,EAAK,GAAK2a,GAAY3K,GAAQhQ,IACxCgb,GAAWoB,KAAUpM,EAKzB,IADAoM,IAAS,EACFpM,EAAOgK,GAAShK,IAErB,IADAuL,GAAUvL,GAAQoM,GAAQ,EACrBpc,EAAI,EAAGA,EAAK,GAAM2a,GAAY3K,GAAQ,EAAKhQ,IAC9Cgb,GAAW,IAAMoB,KAAUpM,EAM/B,IAAKoN,EAAO,EAAGA,GAAQjD,GAAUiD,IAC/BD,EAASC,GAAQ,EAInB,IADApd,EAAI,EACGA,GAAK,KACV8a,GAAiB,EAAJ9a,EAAQ,GAAa,EAClCA,IACAmd,EAAS,KAEX,KAAOnd,GAAK,KACV8a,GAAiB,EAAJ9a,EAAQ,GAAa,EAClCA,IACAmd,EAAS,KAEX,KAAOnd,GAAK,KACV8a,GAAiB,EAAJ9a,EAAQ,GAAa,EAClCA,IACAmd,EAAS,KAEX,KAAOnd,GAAK,KACV8a,GAAiB,EAAJ9a,EAAQ,GAAa,EAClCA,IACAmd,EAAS,KASX,IAHAD,GAAUpC,GAAcf,GAAU,EAAGoD,GAGhCnd,EAAI,EAAGA,EAAIga,GAASha,IACvB+a,GAAiB,EAAJ/a,EAAQ,GAAa,EAClC+a,GAAiB,EAAJ/a,GAAkBgd,GAAWhd,EAAG,GAI/Cob,GAAgB,IAAII,GAAeV,GAAcJ,GAAaZ,GAAW,EAAGC,GAASI,IACrFkB,GAAgB,IAAIG,GAAeT,GAAcJ,GAAa,EAAYX,GAASG,IACnFmB,GAAiB,IAAIE,GAAe,IAAInY,MAAM,GAAIuX,GAAc,EAAWX,GAAUI,GAGvF,CAugBIgG,GACAJ,IAAmB,GAGrB3D,EAAEgE,OAAU,IAAIvE,GAASO,EAAEiB,UAAWnC,IACtCkB,EAAEiE,OAAU,IAAIxE,GAASO,EAAEkB,UAAWnC,IACtCiB,EAAEkE,QAAU,IAAIzE,GAASO,EAAEmB,QAASnC,IAEpCgB,EAAEM,OAAS,EACXN,EAAEK,SAAW,EAGbW,GAAWhB,EACb,EAkLAjD,EAA2B6G,GAC3B5G,EAnJA,SAAyBgD,EAAG5X,EAAKyb,EAAYnK,GAM3C,IAAIyK,EAAUC,EACVC,EAAc,EAGdrE,EAAEsE,MAAQ,GAnhCY,IAshCpBtE,EAAEuE,KAAKC,YACTxE,EAAEuE,KAAKC,UArGb,SAA0BxE,GAKxB,IACItc,EADA+gB,EAAa,WAIjB,IAAK/gB,EAAI,EAAGA,GAAK,GAAIA,IAAK+gB,KAAgB,EACxC,GAAkB,EAAdA,GAAqD,IAAhCzE,EAAEiB,UAAc,EAAJvd,GACnC,OAAOyZ,EAKX,GAAoC,IAAhC6C,EAAEiB,UAAU,KAA0D,IAAjCjB,EAAEiB,UAAU,KAChB,IAAjCjB,EAAEiB,UAAU,IACd,OAAO7D,EAET,IAAK1Z,EAAI,GAAIA,EAAI8Z,GAAU9Z,IACzB,GAAoC,IAAhCsc,EAAEiB,UAAc,EAAJvd,GACd,OAAO0Z,EAOX,OAAOD,CACT,CAuEyBuH,CAAiB1E,IAItC0C,GAAW1C,EAAGA,EAAEgE,QAIhBtB,GAAW1C,EAAGA,EAAEiE,QAUhBI,EAnMJ,SAAuBrE,GACrB,IAAIqE,EAgBJ,IAbAlB,GAAUnD,EAAGA,EAAEiB,UAAWjB,EAAEgE,OAAOpE,UACnCuD,GAAUnD,EAAGA,EAAEkB,UAAWlB,EAAEiE,OAAOrE,UAGnC8C,GAAW1C,EAAGA,EAAEkE,SASXG,EAAc1G,GAAW,EAAG0G,GAAe,GACW,IAArDrE,EAAEmB,QAAgC,EAAxB5C,GAAS8F,GAAmB,GADOA,KAUnD,OAJArE,EAAEoB,SAAW,GAAKiD,EAAc,GAAK,EAAI,EAAI,EAItCA,CACT,CAuKkBM,CAAc3E,GAG5BmE,EAAWnE,EAAGoB,QAAU,EAAI,IAAO,GACnCgD,EAAcpE,EAAGqB,WAAa,EAAI,IAAO,IAMtB8C,IAAYA,EAAWC,IAI1CD,EAAWC,EAAcP,EAAa,EAGpCA,EAAc,GAAKM,IAAsB,IAAR/b,EASnCwb,GAAiB5D,EAAG5X,EAAKyb,EAAYnK,GA1kCb,IA4kCfsG,EAAE4E,UAAwBR,IAAgBD,GAEnD/D,GAAUJ,EAAG,GAAuBtG,EAAO,EAAI,GAAI,GACnDwI,GAAelC,EAAGxB,GAAcC,MAGhC2B,GAAUJ,EAAG,GAAoBtG,EAAO,EAAI,GAAI,GAjMpD,SAAwBsG,EAAG6E,EAAQC,EAAQC,GAIzC,IAAIC,EASJ,IAHA5E,GAAUJ,EAAG6E,EAAS,IAAK,GAC3BzE,GAAUJ,EAAG8E,EAAS,EAAK,GAC3B1E,GAAUJ,EAAG+E,EAAU,EAAI,GACtBC,EAAO,EAAGA,EAAOD,EAASC,IAE7B5E,GAAUJ,EAAGA,EAAEmB,QAAyB,EAAjB5C,GAASyG,GAAY,GAAY,GAI1DtB,GAAU1D,EAAGA,EAAEiB,UAAW4D,EAAS,GAGnCnB,GAAU1D,EAAGA,EAAEkB,UAAW4D,EAAS,EAErC,CA0KIG,CAAejF,EAAGA,EAAEgE,OAAOpE,SAAW,EAAGI,EAAEiE,OAAOrE,SAAW,EAAGyE,EAAc,GAC9EnC,GAAelC,EAAGA,EAAEiB,UAAWjB,EAAEkB,YAMnCF,GAAWhB,GAEPtG,GACF8H,GAAUxB,EAId,EAmEA/C,EA7DA,SAAmB+C,EAAGF,EAAMuC,GAmD1B,OA5CArC,EAAEE,YAAYF,EAAEwC,MAAqB,EAAbxC,EAAEsB,UAAoBxB,IAAU,EAAK,IAC7DE,EAAEE,YAAYF,EAAEwC,MAAqB,EAAbxC,EAAEsB,SAAe,GAAY,IAAPxB,EAE9CE,EAAEE,YAAYF,EAAEyC,MAAQzC,EAAEsB,UAAiB,IAALe,EACtCrC,EAAEsB,WAEW,IAATxB,EAEFE,EAAEiB,UAAe,EAALoB,MAEZrC,EAAEuB,UAEFzB,IAKAE,EAAEiB,UAA8C,GAAnCtC,GAAa0D,GAAM7E,GAAW,MAC3CwC,EAAEkB,UAAyB,EAAfrB,GAAOC,OA0BbE,EAAEsB,WAAatB,EAAEkF,YAAc,CAKzC,EAMAhI,EAhKA,SAAmB8C,GACjBI,GAAUJ,EAAGmF,EAAmB,GAChC5E,GAAUP,EAAGhC,GAAWQ,IA5yB1B,SAAkBwB,GACG,KAAfA,EAAEK,UACJN,GAAUC,EAAGA,EAAEM,QACfN,EAAEM,OAAS,EACXN,EAAEK,SAAW,GAEJL,EAAEK,UAAY,IACvBL,EAAEE,YAAYF,EAAEG,WAAwB,IAAXH,EAAEM,OAC/BN,EAAEM,SAAW,EACbN,EAAEK,UAAY,EAElB,CAkyBE+E,CAASpF,EACX,E,UEv/BAqF,GAzBA,SAAiBC,EAAOld,EAAKnG,EAAK4Z,GAKhC,IAJA,IAAI0J,EAAc,MAATD,EAAkB,EACvBE,EAAKF,IAAY,GAAM,MAAS,EAChC5hB,EAAI,EAEO,IAARzB,GAAW,CAKhBA,GADAyB,EAAIzB,EAAM,IAAO,IAAOA,EAGxB,GAEEujB,EAAKA,GADLD,EAAKA,EAAMnd,EAAIyT,KAAS,GACR,UACPnY,GAEX6hB,GAAM,MACNC,GAAM,KACR,CAEA,OAAOD,EAAOC,GAAM,GAAM,CAC5B,E,UCNA,IAAIC,GAfJ,WAGE,IAFA,IAAIjF,EAAGkF,EAAQ,GAENhiB,EAAI,EAAGA,EAAI,IAAKA,IAAK,CAC5B8c,EAAI9c,EACJ,IAAK,IAAIqe,EAAI,EAAGA,EAAI,EAAGA,IACrBvB,EAAU,EAALA,EAAW,WAAcA,IAAM,EAAOA,IAAM,EAEnDkF,EAAMhiB,GAAK8c,CACb,CAEA,OAAOkF,CACT,CAGeC,GAiBfC,GAdA,SAAeC,EAAKzd,EAAKnG,EAAK4Z,GAC5B,IAAIxF,EAAIoP,GACJK,EAAMjK,EAAM5Z,EAEhB4jB,IAAO,EAEP,IAAK,IAAI/jB,EAAI+Z,EAAK/Z,EAAIgkB,EAAKhkB,IACzB+jB,EAAMA,IAAS,EAAKxP,EAAmB,KAAhBwP,EAAMzd,EAAItG,KAGnC,OAAe,EAAP+jB,CACV,E,UClCAE,GAAiB,CACf,EAAQ,kBACR,EAAQ,aACR,EAAQ,GACR,KAAQ,aACR,KAAQ,eACR,KAAQ,aACR,KAAQ,sBACR,KAAQ,eACR,KAAQ,wBLEV,IAu/BIC,GMz/BJC,GAyEAC,GAMAC,GAUAC,GAgDAC,GNvIIC,GAAkB,EAIlBC,GAAkB,EAQlBC,GAAkB,EAIlBC,IAAkB,EAWlBC,IAAwB,EAMxBC,GAAwB,EAOxBC,GAAwB,EAIxBC,GAAc,EAKdC,GAAgB,EAWhBC,GAAgBC,IAEhBC,GAAgB,GAEhBC,GAAgB,GAEhBC,GAAgB,EAAIJ,GAAU,EAE9BK,GAAY,GAGZC,GAAY,EACZC,GAAY,IACZC,GAAiBD,GAAYD,GAAY,EAIzCG,GAAa,GAIbC,GAAa,IACbC,GAAa,IACbC,GAAe,IAEfC,GAAoB,EACpBC,GAAoB,EACpBC,GAAoB,EACpBC,GAAoB,EAIxB,SAASC,GAAIzD,EAAM0D,GAEjB,OADA1D,EAAK2D,IAAMnC,GAAIkC,GACRA,CACT,CAEA,SAASE,GAAKnF,GACZ,OAAQA,GAAO,IAAMA,EAAM,EAAI,EAAI,EACrC,CAEA,SAASoF,GAAKhgB,GAA6B,IAAtB,IAAInG,EAAMmG,EAAIjH,SAAiBc,GAAO,GAAKmG,EAAInG,GAAO,CAAK,CAShF,SAASomB,GAAc9D,GACrB,IAAIvE,EAAIuE,EAAK+D,MAGTrmB,EAAM+d,EAAEG,QACRle,EAAMsiB,EAAKgE,YACbtmB,EAAMsiB,EAAKgE,WAED,IAARtmB,IAEJ8Y,EAAAO,SAAeiJ,EAAKiE,OAAQxI,EAAEE,YAAaF,EAAEyI,YAAaxmB,EAAKsiB,EAAKmE,UACpEnE,EAAKmE,UAAYzmB,EACjB+d,EAAEyI,aAAexmB,EACjBsiB,EAAKoE,WAAa1mB,EAClBsiB,EAAKgE,WAAatmB,EAClB+d,EAAEG,SAAWle,EACK,IAAd+d,EAAEG,UACJH,EAAEyI,YAAc,GAEpB,CAGA,SAASG,GAAiB5I,EAAGtG,GAC3BsD,EAAsBgD,EAAIA,EAAE6I,aAAe,EAAI7I,EAAE6I,aAAc,EAAK7I,EAAE8I,SAAW9I,EAAE6I,YAAanP,GAChGsG,EAAE6I,YAAc7I,EAAE8I,SAClBT,GAAcrI,EAAEuE,KAClB,CAGA,SAASwE,GAAS/I,EAAGgJ,GACnBhJ,EAAEE,YAAYF,EAAEG,WAAa6I,CAC/B,CAQA,SAASC,GAAYjJ,EAAGgJ,GAGtBhJ,EAAEE,YAAYF,EAAEG,WAAa6I,IAAO,EAAK,IACzChJ,EAAEE,YAAYF,EAAEG,WAAiB,IAAJ6I,CAC/B,CA4CA,SAASE,GAAclJ,EAAGmJ,GACxB,IAEI7pB,EACA2C,EAHAmnB,EAAepJ,EAAEqJ,iBACjBC,EAAOtJ,EAAE8I,SAGTS,EAAWvJ,EAAEwJ,YACbC,EAAazJ,EAAEyJ,WACfC,EAAQ1J,EAAG8I,SAAY9I,EAAE2J,OAASpC,GAClCvH,EAAE8I,UAAY9I,EAAE2J,OAASpC,IAAiB,EAE1CqC,EAAO5J,EAAE5H,OAETyR,EAAQ7J,EAAE8J,OACV7qB,EAAQ+gB,EAAE/gB,KAMV8qB,EAAS/J,EAAE8I,SAAWxB,GACtB0C,EAAaJ,EAAKN,EAAOC,EAAW,GACpCU,EAAaL,EAAKN,EAAOC,GAQzBvJ,EAAEwJ,aAAexJ,EAAEkK,aACrBd,IAAiB,GAKfK,EAAazJ,EAAEmK,YAAaV,EAAazJ,EAAEmK,WAI/C,GAaE,GAAIP,GAXJtqB,EAAQ6pB,GAWSI,KAAkBU,GAC/BL,EAAKtqB,EAAQiqB,EAAW,KAAOS,GAC/BJ,EAAKtqB,KAA0BsqB,EAAKN,IACpCM,IAAOtqB,KAAwBsqB,EAAKN,EAAO,GAH/C,CAaAA,GAAQ,EACRhqB,IAMA,UAESsqB,IAAON,KAAUM,IAAOtqB,IAAUsqB,IAAON,KAAUM,IAAOtqB,IAC1DsqB,IAAON,KAAUM,IAAOtqB,IAAUsqB,IAAON,KAAUM,IAAOtqB,IAC1DsqB,IAAON,KAAUM,IAAOtqB,IAAUsqB,IAAON,KAAUM,IAAOtqB,IAC1DsqB,IAAON,KAAUM,IAAOtqB,IAAUsqB,IAAON,KAAUM,IAAOtqB,IAC1DgqB,EAAOS,GAOhB,GAHA9nB,EAAMqlB,IAAayC,EAAST,GAC5BA,EAAOS,EAASzC,GAEZrlB,EAAMsnB,EAAU,CAGlB,GAFAvJ,EAAEoK,YAAcjB,EAChBI,EAAWtnB,EACPA,GAAOwnB,EACT,MAEFO,EAAaJ,EAAKN,EAAOC,EAAW,GACpCU,EAAaL,EAAKN,EAAOC,EAC3B,CArCW,SAsCHJ,EAAYlqB,EAAKkqB,EAAYU,IAAUH,GAA4B,KAAjBN,GAE5D,OAAIG,GAAYvJ,EAAEmK,UACTZ,EAEFvJ,EAAEmK,SACX,CAaA,SAASE,GAAYrK,GACnB,IACInR,EAAGnL,EAAGge,EAAG4I,EAAMvmB,EArJHwgB,EAAMnc,EAAKmiB,EAAOpP,EAC9BlZ,EAmJAuoB,EAAUxK,EAAE2J,OAKhB,EAAG,CAqBD,GApBAW,EAAOtK,EAAEyK,YAAczK,EAAEmK,UAAYnK,EAAE8I,SAoBnC9I,EAAE8I,UAAY0B,GAAWA,EAAUjD,IAAgB,CAErDxM,EAAAO,SAAe0E,EAAE5H,OAAQ4H,EAAE5H,OAAQoS,EAASA,EAAS,GACrDxK,EAAEoK,aAAeI,EACjBxK,EAAE8I,UAAY0B,EAEdxK,EAAE6I,aAAe2B,EAUjB3b,EADAnL,EAAIsc,EAAE0K,UAEN,GACEhJ,EAAI1B,EAAE2K,OAAO9b,GACbmR,EAAE2K,KAAK9b,GAAM6S,GAAK8I,EAAU9I,EAAI8I,EAAU,UACjC9mB,GAGXmL,EADAnL,EAAI8mB,EAEJ,GACE9I,EAAI1B,EAAE/gB,OAAO4P,GACbmR,EAAE/gB,KAAK4P,GAAM6S,GAAK8I,EAAU9I,EAAI8I,EAAU,UAIjC9mB,GAEX4mB,GAAQE,CACV,CACA,GAAwB,IAApBxK,EAAEuE,KAAKqG,SACT,MAmBF,GApOcrG,EAgODvE,EAAEuE,KAhOKnc,EAgOC4X,EAAE5H,OAhOEmS,EAgOMvK,EAAE8I,SAAW9I,EAAEmK,UAhOdhP,EAgOyBmP,EA/NvDroB,YAAMsiB,EAAKqG,UAELzP,IAAQlZ,EAAMkZ,GA6NtBzX,EA5NU,IAARzB,EAAoB,GAExBsiB,EAAKqG,UAAY3oB,EAGjB8Y,EAAAO,SAAelT,EAAKmc,EAAKja,MAAOia,EAAKsG,QAAS5oB,EAAKsoB,GAC3B,IAApBhG,EAAK+D,MAAMwC,KACbvG,EAAKe,MAAQD,GAAQd,EAAKe,MAAOld,EAAKnG,EAAKsoB,GAGhB,IAApBhG,EAAK+D,MAAMwC,OAClBvG,EAAKe,MAAQM,GAAMrB,EAAKe,MAAOld,EAAKnG,EAAKsoB,IAG3ChG,EAAKsG,SAAW5oB,EAChBsiB,EAAKwG,UAAY9oB,EAEVA,GA4ML+d,EAAEmK,WAAazmB,EAGXsc,EAAEmK,UAAYnK,EAAEgL,QAAU3D,GAS5B,IARAtjB,EAAMic,EAAE8I,SAAW9I,EAAEgL,OACrBhL,EAAEiL,MAAQjL,EAAE5H,OAAOrU,GAGnBic,EAAEiL,OAASjL,EAAGiL,OAASjL,EAAEkL,WAAclL,EAAE5H,OAAOrU,EAAM,IAAMic,EAAEmL,UAIvDnL,EAAEgL,SAEPhL,EAAEiL,OAASjL,EAAGiL,OAASjL,EAAEkL,WAAclL,EAAE5H,OAAOrU,EAAMsjB,GAAY,IAAMrH,EAAEmL,UAE1EnL,EAAE/gB,KAAK8E,EAAMic,EAAE8J,QAAU9J,EAAE2K,KAAK3K,EAAEiL,OAClCjL,EAAE2K,KAAK3K,EAAEiL,OAASlnB,EAClBA,IACAic,EAAEgL,WACEhL,EAAEmK,UAAYnK,EAAEgL,OAAS3D,OASnC,OAASrH,EAAEmK,UAAY5C,IAAqC,IAApBvH,EAAEuE,KAAKqG,SAsCjD,CA6GA,SAASQ,GAAapL,EAAGqL,GAIvB,IAHA,IAAIC,EACAC,IAEK,CAMP,GAAIvL,EAAEmK,UAAY5C,GAAe,CAE/B,GADA8C,GAAYrK,GACRA,EAAEmK,UAAY5C,IAAiB8D,IAAU/E,GAC3C,OAAOsB,GAET,GAAoB,IAAhB5H,EAAEmK,UACJ,KAEJ,CAyBA,GApBAmB,EAAY,EACRtL,EAAEmK,WAAa9C,KAEjBrH,EAAEiL,OAASjL,EAAGiL,OAASjL,EAAEkL,WAAclL,EAAE5H,OAAO4H,EAAE8I,SAAWzB,GAAY,IAAMrH,EAAEmL,UACjFG,EAAYtL,EAAE/gB,KAAK+gB,EAAE8I,SAAW9I,EAAE8J,QAAU9J,EAAE2K,KAAK3K,EAAEiL,OACrDjL,EAAE2K,KAAK3K,EAAEiL,OAASjL,EAAE8I,UAOJ,IAAdwC,GAA2BtL,EAAG8I,SAAWwC,GAAetL,EAAE2J,OAASpC,KAKrEvH,EAAEwL,aAAetC,GAAclJ,EAAGsL,IAGhCtL,EAAEwL,cAAgBnE,GAYpB,GAPAkE,EAAStO,EAAgB+C,EAAGA,EAAE8I,SAAW9I,EAAEoK,YAAapK,EAAEwL,aAAenE,IAEzErH,EAAEmK,WAAanK,EAAEwL,aAKbxL,EAAEwL,cAAgBxL,EAAEyL,gBAAuCzL,EAAEmK,WAAa9C,GAAW,CACvFrH,EAAEwL,eACF,GACExL,EAAE8I,WAEF9I,EAAEiL,OAASjL,EAAGiL,OAASjL,EAAEkL,WAAclL,EAAE5H,OAAO4H,EAAE8I,SAAWzB,GAAY,IAAMrH,EAAEmL,UACjFG,EAAYtL,EAAE/gB,KAAK+gB,EAAE8I,SAAW9I,EAAE8J,QAAU9J,EAAE2K,KAAK3K,EAAEiL,OACrDjL,EAAE2K,KAAK3K,EAAEiL,OAASjL,EAAE8I,eAKQ,KAAnB9I,EAAEwL,cACbxL,EAAE8I,UACJ,MAEE9I,EAAE8I,UAAY9I,EAAEwL,aAChBxL,EAAEwL,aAAe,EACjBxL,EAAEiL,MAAQjL,EAAE5H,OAAO4H,EAAE8I,UAErB9I,EAAEiL,OAASjL,EAAGiL,OAASjL,EAAEkL,WAAclL,EAAE5H,OAAO4H,EAAE8I,SAAW,IAAM9I,EAAEmL,eAavEI,EAAStO,EAAgB+C,EAAG,EAAGA,EAAE5H,OAAO4H,EAAE8I,WAE1C9I,EAAEmK,YACFnK,EAAE8I,WAEJ,GAAIyC,IAEF3C,GAAiB5I,GAAG,GACK,IAArBA,EAAEuE,KAAKgE,WACT,OAAOX,EAIb,CAEA,OADA5H,EAAEgL,OAAUhL,EAAG8I,SAAYzB,GAAY,EAAMrH,EAAE8I,SAAWzB,GAAY,EAClEgE,IAAU9E,IAEZqC,GAAiB5I,GAAG,GACK,IAArBA,EAAEuE,KAAKgE,UACFT,GAGFC,IAEL/H,EAAEsB,WAEJsH,GAAiB5I,GAAG,GACK,IAArBA,EAAEuE,KAAKgE,WACFX,GAIJC,EACT,CAOA,SAAS6D,GAAa1L,EAAGqL,GAOvB,IANA,IAAIC,EACAC,EAEAI,IAGK,CAMP,GAAI3L,EAAEmK,UAAY5C,GAAe,CAE/B,GADA8C,GAAYrK,GACRA,EAAEmK,UAAY5C,IAAiB8D,IAAU/E,GAC3C,OAAOsB,GAET,GAAoB,IAAhB5H,EAAEmK,UAAmB,KAC3B,CAyCA,GApCAmB,EAAY,EACRtL,EAAEmK,WAAa9C,KAEjBrH,EAAEiL,OAASjL,EAAGiL,OAASjL,EAAEkL,WAAclL,EAAE5H,OAAO4H,EAAE8I,SAAWzB,GAAY,IAAMrH,EAAEmL,UACjFG,EAAYtL,EAAE/gB,KAAK+gB,EAAE8I,SAAW9I,EAAE8J,QAAU9J,EAAE2K,KAAK3K,EAAEiL,OACrDjL,EAAE2K,KAAK3K,EAAEiL,OAASjL,EAAE8I,UAMtB9I,EAAEwJ,YAAcxJ,EAAEwL,aAClBxL,EAAE4L,WAAa5L,EAAEoK,YACjBpK,EAAEwL,aAAenE,GAAY,EAEX,IAAdiE,GAA0BtL,EAAEwJ,YAAcxJ,EAAEyL,gBAC5CzL,EAAE8I,SAAWwC,GAActL,EAAE2J,OAASpC,KAKxCvH,EAAEwL,aAAetC,GAAclJ,EAAGsL,GAG9BtL,EAAEwL,cAAgB,IAvsBA,IAwsBlBxL,EAAE4E,UAA4B5E,EAAEwL,eAAiBnE,IAAarH,EAAE8I,SAAW9I,EAAEoK,YAAc,QAK7FpK,EAAEwL,aAAenE,GAAY,IAM7BrH,EAAEwJ,aAAenC,IAAarH,EAAEwL,cAAgBxL,EAAEwJ,YAAa,CACjEmC,EAAa3L,EAAE8I,SAAW9I,EAAEmK,UAAY9C,GAOxCkE,EAAStO,EAAgB+C,EAAGA,EAAE8I,SAAW,EAAI9I,EAAE4L,WAAY5L,EAAEwJ,YAAcnC,IAM3ErH,EAAEmK,WAAanK,EAAEwJ,YAAc,EAC/BxJ,EAAEwJ,aAAe,EACjB,KACQxJ,EAAE8I,UAAY6C,IAElB3L,EAAEiL,OAASjL,EAAGiL,OAASjL,EAAEkL,WAAclL,EAAE5H,OAAO4H,EAAE8I,SAAWzB,GAAY,IAAMrH,EAAEmL,UACjFG,EAAYtL,EAAE/gB,KAAK+gB,EAAE8I,SAAW9I,EAAE8J,QAAU9J,EAAE2K,KAAK3K,EAAEiL,OACrDjL,EAAE2K,KAAK3K,EAAEiL,OAASjL,EAAE8I,gBAGK,KAAlB9I,EAAEwJ,aAKb,GAJAxJ,EAAE6L,gBAAkB,EACpB7L,EAAEwL,aAAenE,GAAY,EAC7BrH,EAAE8I,WAEEyC,IAEF3C,GAAiB5I,GAAG,GACK,IAArBA,EAAEuE,KAAKgE,WACT,OAAOX,EAKb,MAAO,GAAI5H,EAAE6L,iBAgBX,IATAN,EAAStO,EAAgB+C,EAAG,EAAGA,EAAE5H,OAAO4H,EAAE8I,SAAW,MAInDF,GAAiB5I,GAAG,GAGtBA,EAAE8I,WACF9I,EAAEmK,YACuB,IAArBnK,EAAEuE,KAAKgE,UACT,OAAOX,QAMT5H,EAAE6L,gBAAkB,EACpB7L,EAAE8I,WACF9I,EAAEmK,WAEN,CAUA,OARInK,EAAE6L,kBAGJN,EAAStO,EAAgB+C,EAAG,EAAGA,EAAE5H,OAAO4H,EAAE8I,SAAW,IAErD9I,EAAE6L,gBAAkB,GAEtB7L,EAAEgL,OAAShL,EAAE8I,SAAWzB,GAAY,EAAIrH,EAAE8I,SAAWzB,GAAY,EAC7DgE,IAAU9E,IAEZqC,GAAiB5I,GAAG,GACK,IAArBA,EAAEuE,KAAKgE,UACFT,GAGFC,IAEL/H,EAAEsB,WAEJsH,GAAiB5I,GAAG,GACK,IAArBA,EAAEuE,KAAKgE,WACFX,GAKJC,EACT,CAgKA,SAASiE,GAAOC,EAAaC,EAAUC,EAAaC,EAAWC,GAC7DrrB,KAAKirB,YAAcA,EACnBjrB,KAAKkrB,SAAWA,EAChBlrB,KAAKmrB,YAAcA,EACnBnrB,KAAKorB,UAAYA,EACjBprB,KAAKqrB,KAAOA,CACd,CA8CA,SAASC,KACPtrB,KAAKyjB,KAAO,KACZzjB,KAAKuK,OAAS,EACdvK,KAAKof,YAAc,KACnBpf,KAAKurB,iBAAmB,EACxBvrB,KAAK2nB,YAAc,EACnB3nB,KAAKqf,QAAU,EACfrf,KAAKgqB,KAAO,EACZhqB,KAAKwrB,OAAS,KACdxrB,KAAKyrB,QAAU,EACfzrB,KAAKyJ,OAASsc,GACd/lB,KAAK0rB,YAAa,EAElB1rB,KAAK6oB,OAAS,EACd7oB,KAAK2rB,OAAS,EACd3rB,KAAKgpB,OAAS,EAEdhpB,KAAKsX,OAAS,KAQdtX,KAAK2pB,YAAc,EAKnB3pB,KAAK7B,KAAO,KAMZ6B,KAAK6pB,KAAO,KAEZ7pB,KAAKmqB,MAAQ,EACbnqB,KAAK4pB,UAAY,EACjB5pB,KAAK4rB,UAAY,EACjB5rB,KAAKqqB,UAAY,EAEjBrqB,KAAKoqB,WAAa,EAOlBpqB,KAAK+nB,YAAc,EAKnB/nB,KAAK0qB,aAAe,EACpB1qB,KAAK8qB,WAAa,EAClB9qB,KAAK+qB,gBAAkB,EACvB/qB,KAAKgoB,SAAW,EAChBhoB,KAAKspB,YAAc,EACnBtpB,KAAKqpB,UAAY,EAEjBrpB,KAAK0oB,YAAc,EAKnB1oB,KAAKuoB,iBAAmB,EAMxBvoB,KAAK2qB,eAAiB,EAYtB3qB,KAAKwjB,MAAQ,EACbxjB,KAAK8jB,SAAW,EAEhB9jB,KAAKopB,WAAa,EAGlBppB,KAAK2oB,WAAa,EAYlB3oB,KAAKmgB,UAAa,IAAIlG,EAAAoB,MAAwB,EAAZgL,IAClCrmB,KAAKogB,UAAa,IAAInG,EAAAoB,MAAgC,GAAnB,EAAI8K,GAAU,IACjDnmB,KAAKqgB,QAAa,IAAIpG,EAAAoB,MAAiC,GAApB,EAAI+K,GAAW,IAClDkB,GAAKtnB,KAAKmgB,WACVmH,GAAKtnB,KAAKogB,WACVkH,GAAKtnB,KAAKqgB,SAEVrgB,KAAKkjB,OAAW,KAChBljB,KAAKmjB,OAAW,KAChBnjB,KAAKojB,QAAW,KAGhBpjB,KAAK+f,SAAW,IAAI9F,EAAAoB,MAAYiL,GAAW,GAI3CtmB,KAAKkhB,KAAO,IAAIjH,EAAAoB,MAAY,EAAI4K,GAAU,GAC1CqB,GAAKtnB,KAAKkhB,MAEVlhB,KAAKmhB,SAAW,EAChBnhB,KAAK+hB,SAAW,EAKhB/hB,KAAK6gB,MAAQ,IAAI5G,EAAAoB,MAAY,EAAI4K,GAAU,GAC3CqB,GAAKtnB,KAAK6gB,OAIV7gB,KAAK2hB,MAAQ,EAEb3hB,KAAKokB,YAAc,EAoBnBpkB,KAAKwgB,SAAW,EAEhBxgB,KAAK0hB,MAAQ,EAMb1hB,KAAKsgB,QAAU,EACftgB,KAAKugB,WAAa,EAClBvgB,KAAKygB,QAAU,EACfzgB,KAAKkqB,OAAS,EAGdlqB,KAAKwf,OAAS,EAIdxf,KAAKuf,SAAW,CAalB,CAGA,SAASsM,GAAiBpI,GACxB,IAAIvE,EAEJ,OAAKuE,GAASA,EAAK+D,OAInB/D,EAAKwG,SAAWxG,EAAKoE,UAAY,EACjCpE,EAAKC,UAAYoC,IAEjB5G,EAAIuE,EAAK+D,OACPnI,QAAU,EACZH,EAAEyI,YAAc,EAEZzI,EAAE8K,KAAO,IACX9K,EAAE8K,MAAQ9K,EAAE8K,MAGd9K,EAAE3U,OAAU2U,EAAE8K,KAAOtD,GAAaE,GAClCnD,EAAKe,MAAoB,IAAZtF,EAAG8K,KACd,EAEA,EACF9K,EAAEwM,WAAalG,GACfxJ,EAAekD,GACRwG,IArBEwB,GAAIzD,EAAMkC,GAsBrB,CAGA,SAASmG,GAAarI,GACpB,IAlPevE,EAkPX6M,EAAMF,GAAiBpI,GAI3B,OAHIsI,IAAQrG,MAnPGxG,EAoPLuE,EAAK+D,OAnPbmC,YAAc,EAAIzK,EAAE2J,OAGtBvB,GAAKpI,EAAE2K,MAIP3K,EAAEyL,eAAiBzF,GAAoBhG,EAAEsE,OAAO0H,SAChDhM,EAAEkK,WAAalE,GAAoBhG,EAAEsE,OAAOyH,YAC5C/L,EAAEyJ,WAAazD,GAAoBhG,EAAEsE,OAAO2H,YAC5CjM,EAAEqJ,iBAAmBrD,GAAoBhG,EAAEsE,OAAO4H,UAElDlM,EAAE8I,SAAW,EACb9I,EAAE6I,YAAc,EAChB7I,EAAEmK,UAAY,EACdnK,EAAEgL,OAAS,EACXhL,EAAEwL,aAAexL,EAAEwJ,YAAcnC,GAAY,EAC7CrH,EAAE6L,gBAAkB,EACpB7L,EAAEiL,MAAQ,GAmOH4B,CACT,CAWA,SAASC,GAAavI,EAAMD,EAAO/Z,EAAQwiB,EAAYC,EAAUpI,GAC/D,IAAKL,EACH,OAAOkC,GAET,IAAIqE,EAAO,EAiBX,GAfIxG,IAAUoC,KACZpC,EAAQ,GAGNyI,EAAa,GACfjC,EAAO,EACPiC,GAAcA,GAGPA,EAAa,KACpBjC,EAAO,EACPiC,GAAc,IAIZC,EAAW,GAAKA,EAAWlG,IAAiBvc,IAAWsc,IACzDkG,EAAa,GAAKA,EAAa,IAAMzI,EAAQ,GAAKA,EAAQ,GAC1DM,EAAW,GAAKA,EAAW+B,GAC3B,OAAOqB,GAAIzD,EAAMkC,IAIA,IAAfsG,IACFA,EAAa,GAIf,IAAI/M,EAAI,IAAIoM,GA0CZ,OAxCA7H,EAAK+D,MAAQtI,EACbA,EAAEuE,KAAOA,EAETvE,EAAE8K,KAAOA,EACT9K,EAAEsM,OAAS,KACXtM,EAAEyM,OAASM,EACX/M,EAAE2J,OAAS,GAAK3J,EAAEyM,OAClBzM,EAAE8J,OAAS9J,EAAE2J,OAAS,EAEtB3J,EAAE0M,UAAYM,EAAW,EACzBhN,EAAE0K,UAAY,GAAK1K,EAAE0M,UACrB1M,EAAEmL,UAAYnL,EAAE0K,UAAY,EAC5B1K,EAAEkL,eAAiBlL,EAAE0M,UAAYrF,GAAY,GAAKA,IAElDrH,EAAE5H,OAAS,IAAI2C,EAAAmB,KAAsB,EAAX8D,EAAE2J,QAC5B3J,EAAE2K,KAAO,IAAI5P,EAAAoB,MAAY6D,EAAE0K,WAC3B1K,EAAE/gB,KAAO,IAAI8b,EAAAoB,MAAY6D,EAAE2J,QAK3B3J,EAAEkF,YAAc,GAAM8H,EAAW,EAEjChN,EAAEqM,iBAAmC,EAAhBrM,EAAEkF,YAIvBlF,EAAEE,YAAc,IAAInF,EAAAmB,KAAW8D,EAAEqM,kBAIjCrM,EAAEwC,MAAQ,EAAIxC,EAAEkF,YAGhBlF,EAAEyC,MAAQ,EAAUzC,EAAEkF,YAEtBlF,EAAEsE,MAAQA,EACVtE,EAAE4E,SAAWA,EACb5E,EAAEzV,OAASA,EAEJqiB,GAAarI,EACtB,CAjWAyB,GAAsB,CAEpB,IAAI8F,GAAO,EAAG,EAAG,EAAG,GAxiBtB,SAAwB9L,EAAGqL,GAIzB,IAAI4B,EAAiB,MAOrB,IALIA,EAAiBjN,EAAEqM,iBAAmB,IACxCY,EAAiBjN,EAAEqM,iBAAmB,KAI/B,CAEP,GAAIrM,EAAEmK,WAAa,EAAG,CAUpB,GADAE,GAAYrK,GACQ,IAAhBA,EAAEmK,WAAmBkB,IAAU/E,GACjC,OAAOsB,GAGT,GAAoB,IAAhB5H,EAAEmK,UACJ,KAGJ,CAIAnK,EAAE8I,UAAY9I,EAAEmK,UAChBnK,EAAEmK,UAAY,EAGd,IAAI+C,EAAYlN,EAAE6I,YAAcoE,EAEhC,IAAmB,IAAfjN,EAAE8I,UAAkB9I,EAAE8I,UAAYoE,KAEpClN,EAAEmK,UAAYnK,EAAE8I,SAAWoE,EAC3BlN,EAAE8I,SAAWoE,EAEbtE,GAAiB5I,GAAG,GACK,IAArBA,EAAEuE,KAAKgE,WACT,OAAOX,GASX,GAAI5H,EAAE8I,SAAW9I,EAAE6I,aAAgB7I,EAAE2J,OAASpC,KAE5CqB,GAAiB5I,GAAG,GACK,IAArBA,EAAEuE,KAAKgE,WACT,OAAOX,EAIb,CAIA,OAFA5H,EAAEgL,OAAS,EAEPK,IAAU9E,IAEZqC,GAAiB5I,GAAG,GACK,IAArBA,EAAEuE,KAAKgE,UACFT,GAGFC,KAGL/H,EAAE8I,SAAW9I,EAAE6I,cAEjBD,GAAiB5I,GAAG,GAChBA,EAAEuE,KAAKgE,WACFX,GAMb,IAgdE,IAAIkE,GAAO,EAAG,EAAG,EAAG,EAAGV,IACvB,IAAIU,GAAO,EAAG,EAAG,GAAI,EAAGV,IACxB,IAAIU,GAAO,EAAG,EAAG,GAAI,GAAIV,IAEzB,IAAIU,GAAO,EAAG,EAAG,GAAI,GAAIJ,IACzB,IAAII,GAAO,EAAG,GAAI,GAAI,GAAIJ,IAC1B,IAAII,GAAO,EAAG,GAAI,IAAK,IAAKJ,IAC5B,IAAII,GAAO,EAAG,GAAI,IAAK,IAAKJ,IAC5B,IAAII,GAAO,GAAI,IAAK,IAAK,KAAMJ,IAC/B,IAAII,GAAO,GAAI,IAAK,IAAK,KAAMJ,KA4xBjCjP,EAAuBqQ,GAGvBpQ,EA9hBA,SAA0B6H,EAAMoG,GAC9B,OAAKpG,GAASA,EAAK+D,MACK,IAApB/D,EAAK+D,MAAMwC,KAAqBrE,IACpClC,EAAK+D,MAAMgE,OAAS3B,EACbnE,IAH4BC,EAIrC,EA0hBA9J,EApcA,SAAiB4H,EAAM8G,GACrB,IAAI8B,EAAWnN,EACXoN,EAAK1tB,EAET,IAAK6kB,IAASA,EAAK+D,OACjB+C,EAj2CkB,GAi2CCA,EAAQ,EAC3B,OAAO9G,EAAOyD,GAAIzD,EAAMkC,IAAkBA,GAK5C,GAFAzG,EAAIuE,EAAK+D,OAEJ/D,EAAKiE,SACJjE,EAAKja,OAA2B,IAAlBia,EAAKqG,UACpB5K,EAAE3U,SAAWsc,IAAgB0D,IAAU9E,GAC1C,OAAOyB,GAAIzD,EAA0B,IAApBA,EAAMgE,WA51CL,EA41CsC9B,IAQ1D,GALAzG,EAAEuE,KAAOA,EACT4I,EAAYnN,EAAEwM,WACdxM,EAAEwM,WAAanB,EAGXrL,EAAE3U,SAAWmc,GAEf,GAAe,IAAXxH,EAAE8K,KACJvG,EAAKe,MAAQ,EACbyD,GAAS/I,EAAG,IACZ+I,GAAS/I,EAAG,KACZ+I,GAAS/I,EAAG,GACPA,EAAEsM,QAaLvD,GAAS/I,GAAIA,EAAEsM,OAAOhjB,KAAO,EAAI,IACpB0W,EAAEsM,OAAOe,KAAO,EAAI,IACnBrN,EAAEsM,OAAOhK,MAAY,EAAJ,IACjBtC,EAAEsM,OAAOlqB,KAAW,EAAJ,IAChB4d,EAAEsM,OAAOgB,QAAc,GAAJ,IAEjCvE,GAAS/I,EAAmB,IAAhBA,EAAEsM,OAAOiB,MACrBxE,GAAS/I,EAAGA,EAAGsM,OAAOiB,MAAQ,EAAK,KACnCxE,GAAS/I,EAAGA,EAAGsM,OAAOiB,MAAQ,GAAM,KACpCxE,GAAS/I,EAAGA,EAAGsM,OAAOiB,MAAQ,GAAM,KACpCxE,GAAS/I,EAAe,IAAZA,EAAEsE,MAAc,EACftE,EAAE4E,UAv3CK,GAu3CyB5E,EAAEsE,MAAQ,EAC1C,EAAI,GACjByE,GAAS/I,EAAiB,IAAdA,EAAEsM,OAAOkB,IACjBxN,EAAEsM,OAAOhK,OAAStC,EAAEsM,OAAOhK,MAAMnhB,SACnC4nB,GAAS/I,EAA2B,IAAxBA,EAAEsM,OAAOhK,MAAMnhB,QAC3B4nB,GAAS/I,EAAGA,EAAGsM,OAAOhK,MAAMnhB,QAAU,EAAK,MAEzC6e,EAAEsM,OAAOe,OACX9I,EAAKe,MAAQM,GAAMrB,EAAKe,MAAOtF,EAAEE,YAAaF,EAAEG,QAAS,IAE3DH,EAAEuM,QAAU,EACZvM,EAAE3U,OAn1CQ,KAizCV0d,GAAS/I,EAAG,GACZ+I,GAAS/I,EAAG,GACZ+I,GAAS/I,EAAG,GACZ+I,GAAS/I,EAAG,GACZ+I,GAAS/I,EAAG,GACZ+I,GAAS/I,EAAe,IAAZA,EAAEsE,MAAc,EACftE,EAAE4E,UAt2CK,GAs2CyB5E,EAAEsE,MAAQ,EAC1C,EAAI,GACjByE,GAAS/I,EA7yCH,GA8yCNA,EAAE3U,OAASqc,QA6Bf,CACE,IAAIzgB,EAAS4f,IAAe7G,EAAGyM,OAAS,GAAM,IAAO,EAYrDxlB,IATI+Y,EAAE4E,UA14CgB,GA04Cc5E,EAAEsE,MAAQ,EAC9B,EACLtE,EAAEsE,MAAQ,EACL,EACO,IAAZtE,EAAEsE,MACG,EAEA,IAEU,EACP,IAAftE,EAAE8I,WAAkB7hB,GAx2CZ,IAy2CZA,GAAU,GAAMA,EAAS,GAEzB+Y,EAAE3U,OAASqc,GACXuB,GAAYjJ,EAAG/Y,GAGI,IAAf+Y,EAAE8I,WACJG,GAAYjJ,EAAGuE,EAAKe,QAAU,IAC9B2D,GAAYjJ,EAAgB,MAAbuE,EAAKe,QAEtBf,EAAKe,MAAQ,CACf,CAIF,GAr3CgB,KAq3CZtF,EAAE3U,OACJ,GAAI2U,EAAEsM,OAAOhK,MAAqB,CAGhC,IAFA8K,EAAMpN,EAAEG,QAEDH,EAAEuM,SAAmC,MAAxBvM,EAAEsM,OAAOhK,MAAMnhB,UAC7B6e,EAAEG,UAAYH,EAAEqM,mBACdrM,EAAEsM,OAAOe,MAAQrN,EAAEG,QAAUiN,IAC/B7I,EAAKe,MAAQM,GAAMrB,EAAKe,MAAOtF,EAAEE,YAAaF,EAAEG,QAAUiN,EAAKA,IAEjE/E,GAAc9D,GACd6I,EAAMpN,EAAEG,QACJH,EAAEG,UAAYH,EAAEqM,oBAItBtD,GAAS/I,EAA+B,IAA5BA,EAAEsM,OAAOhK,MAAMtC,EAAEuM,UAC7BvM,EAAEuM,UAEAvM,EAAEsM,OAAOe,MAAQrN,EAAEG,QAAUiN,IAC/B7I,EAAKe,MAAQM,GAAMrB,EAAKe,MAAOtF,EAAEE,YAAaF,EAAEG,QAAUiN,EAAKA,IAE7DpN,EAAEuM,UAAYvM,EAAEsM,OAAOhK,MAAMnhB,SAC/B6e,EAAEuM,QAAU,EACZvM,EAAE3U,OA34CO,GA64Cb,MAEE2U,EAAE3U,OA/4CS,GAk5Cf,GAl5Ce,KAk5CX2U,EAAE3U,OACJ,GAAI2U,EAAEsM,OAAOlqB,KAAoB,CAC/BgrB,EAAMpN,EAAEG,QAGR,EAAG,CACD,GAAIH,EAAEG,UAAYH,EAAEqM,mBACdrM,EAAEsM,OAAOe,MAAQrN,EAAEG,QAAUiN,IAC/B7I,EAAKe,MAAQM,GAAMrB,EAAKe,MAAOtF,EAAEE,YAAaF,EAAEG,QAAUiN,EAAKA,IAEjE/E,GAAc9D,GACd6I,EAAMpN,EAAEG,QACJH,EAAEG,UAAYH,EAAEqM,kBAAkB,CACpC3sB,EAAM,EACN,KACF,CAIAA,EADEsgB,EAAEuM,QAAUvM,EAAEsM,OAAOlqB,KAAKjB,OACkB,IAAxC6e,EAAEsM,OAAOlqB,KAAKS,WAAWmd,EAAEuM,WAE3B,EAERxD,GAAS/I,EAAGtgB,EACd,OAAiB,IAARA,GAELsgB,EAAEsM,OAAOe,MAAQrN,EAAEG,QAAUiN,IAC/B7I,EAAKe,MAAQM,GAAMrB,EAAKe,MAAOtF,EAAEE,YAAaF,EAAEG,QAAUiN,EAAKA,IAErD,IAAR1tB,IACFsgB,EAAEuM,QAAU,EACZvM,EAAE3U,OAh7CU,GAk7ChB,MAEE2U,EAAE3U,OAp7CY,GAu7ClB,GAv7CkB,KAu7Cd2U,EAAE3U,OACJ,GAAI2U,EAAEsM,OAAOgB,QAAuB,CAClCF,EAAMpN,EAAEG,QAGR,EAAG,CACD,GAAIH,EAAEG,UAAYH,EAAEqM,mBACdrM,EAAEsM,OAAOe,MAAQrN,EAAEG,QAAUiN,IAC/B7I,EAAKe,MAAQM,GAAMrB,EAAKe,MAAOtF,EAAEE,YAAaF,EAAEG,QAAUiN,EAAKA,IAEjE/E,GAAc9D,GACd6I,EAAMpN,EAAEG,QACJH,EAAEG,UAAYH,EAAEqM,kBAAkB,CACpC3sB,EAAM,EACN,KACF,CAIAA,EADEsgB,EAAEuM,QAAUvM,EAAEsM,OAAOgB,QAAQnsB,OACkB,IAA3C6e,EAAEsM,OAAOgB,QAAQzqB,WAAWmd,EAAEuM,WAE9B,EAERxD,GAAS/I,EAAGtgB,EACd,OAAiB,IAARA,GAELsgB,EAAEsM,OAAOe,MAAQrN,EAAEG,QAAUiN,IAC/B7I,EAAKe,MAAQM,GAAMrB,EAAKe,MAAOtF,EAAEE,YAAaF,EAAEG,QAAUiN,EAAKA,IAErD,IAAR1tB,IACFsgB,EAAE3U,OAASoc,GAEf,MAEEzH,EAAE3U,OAASoc,GAsBf,GAnBIzH,EAAE3U,SAAWoc,KACXzH,EAAEsM,OAAOe,MACPrN,EAAEG,QAAU,EAAIH,EAAEqM,kBACpBhE,GAAc9D,GAEZvE,EAAEG,QAAU,GAAKH,EAAEqM,mBACrBtD,GAAS/I,EAAgB,IAAbuE,EAAKe,OACjByD,GAAS/I,EAAGuE,EAAMe,OAAS,EAAK,KAChCf,EAAKe,MAAQ,EACbtF,EAAE3U,OAASqc,KAIb1H,EAAE3U,OAASqc,IAMG,IAAd1H,EAAEG,SAEJ,GADAkI,GAAc9D,GACS,IAAnBA,EAAKgE,UAQP,OADAvI,EAAEwM,YAAa,EACRhG,QAOJ,GAAsB,IAAlBjC,EAAKqG,UAAkBzC,GAAKkD,IAAUlD,GAAKgF,IACpD9B,IAAU9E,GACV,OAAOyB,GAAIzD,GA/jDO,GAmkDpB,GAAIvE,EAAE3U,SAAWsc,IAAkC,IAAlBpD,EAAKqG,SACpC,OAAO5C,GAAIzD,GApkDO,GAykDpB,GAAsB,IAAlBA,EAAKqG,UAAkC,IAAhB5K,EAAEmK,WAC1BkB,IAAU/E,IAActG,EAAE3U,SAAWsc,GAAe,CACrD,IAAI8F,EA/jDoB,IA+jDXzN,EAAG4E,SAxqBpB,SAAsB5E,EAAGqL,GAGvB,IAFA,IAAIE,IAEK,CAEP,GAAoB,IAAhBvL,EAAEmK,YACJE,GAAYrK,GACQ,IAAhBA,EAAEmK,WAAiB,CACrB,GAAIkB,IAAU/E,GACZ,OAAOsB,GAET,KACF,CAUF,GANA5H,EAAEwL,aAAe,EAGjBD,EAAStO,EAAgB+C,EAAG,EAAGA,EAAE5H,OAAO4H,EAAE8I,WAC1C9I,EAAEmK,YACFnK,EAAE8I,WACEyC,IAEF3C,GAAiB5I,GAAG,GACK,IAArBA,EAAEuE,KAAKgE,WACT,OAAOX,EAIb,CAEA,OADA5H,EAAEgL,OAAS,EACPK,IAAU9E,IAEZqC,GAAiB5I,GAAG,GACK,IAArBA,EAAEuE,KAAKgE,UACFT,GAGFC,IAEL/H,EAAEsB,WAEJsH,GAAiB5I,GAAG,GACK,IAArBA,EAAEuE,KAAKgE,WACFX,GAIJC,EACT,CAsnBmD6F,CAAa1N,EAAGqL,GA9jDvC,IA+jDrBrL,EAAE4E,SAxwBT,SAAqB5E,EAAGqL,GAOtB,IANA,IAAIE,EACAtsB,EACAqqB,EAAMS,EAENH,EAAO5J,EAAE5H,SAEJ,CAKP,GAAI4H,EAAEmK,WAAa7C,GAAW,CAE5B,GADA+C,GAAYrK,GACRA,EAAEmK,WAAa7C,IAAa+D,IAAU/E,GACxC,OAAOsB,GAET,GAAoB,IAAhB5H,EAAEmK,UAAmB,KAC3B,CAIA,GADAnK,EAAEwL,aAAe,EACbxL,EAAEmK,WAAa9C,IAAarH,EAAE8I,SAAW,IAE3C7pB,EAAO2qB,EADPN,EAAOtJ,EAAE8I,SAAW,MAEPc,IAAON,IAASrqB,IAAS2qB,IAAON,IAASrqB,IAAS2qB,IAAON,GAAO,CAC3ES,EAAS/J,EAAE8I,SAAWxB,GACtB,UAESroB,IAAS2qB,IAAON,IAASrqB,IAAS2qB,IAAON,IACzCrqB,IAAS2qB,IAAON,IAASrqB,IAAS2qB,IAAON,IACzCrqB,IAAS2qB,IAAON,IAASrqB,IAAS2qB,IAAON,IACzCrqB,IAAS2qB,IAAON,IAASrqB,IAAS2qB,IAAON,IACzCA,EAAOS,GAChB/J,EAAEwL,aAAelE,IAAayC,EAAST,GACnCtJ,EAAEwL,aAAexL,EAAEmK,YACrBnK,EAAEwL,aAAexL,EAAEmK,UAEvB,CAuBF,GAlBInK,EAAEwL,cAAgBnE,IAIpBkE,EAAStO,EAAgB+C,EAAG,EAAGA,EAAEwL,aAAenE,IAEhDrH,EAAEmK,WAAanK,EAAEwL,aACjBxL,EAAE8I,UAAY9I,EAAEwL,aAChBxL,EAAEwL,aAAe,IAKjBD,EAAStO,EAAgB+C,EAAG,EAAGA,EAAE5H,OAAO4H,EAAE8I,WAE1C9I,EAAEmK,YACFnK,EAAE8I,YAEAyC,IAEF3C,GAAiB5I,GAAG,GACK,IAArBA,EAAEuE,KAAKgE,WACT,OAAOX,EAIb,CAEA,OADA5H,EAAEgL,OAAS,EACPK,IAAU9E,IAEZqC,GAAiB5I,GAAG,GACK,IAArBA,EAAEuE,KAAKgE,UACFT,GAGFC,IAEL/H,EAAEsB,WAEJsH,GAAiB5I,GAAG,GACK,IAArBA,EAAEuE,KAAKgE,WACFX,GAIJC,EACT,CA+qB8B8F,CAAY3N,EAAGqL,GACrCrF,GAAoBhG,EAAEsE,OAAO6H,KAAKnM,EAAGqL,GAKzC,GAHIoC,IAAW3F,IAAqB2F,IAAW1F,KAC7C/H,EAAE3U,OAASsc,IAET8F,IAAW7F,IAAgB6F,IAAW3F,GAKxC,OAJuB,IAAnBvD,EAAKgE,YACPvI,EAAEwM,YAAa,GAGVhG,GAST,GAAIiH,IAAW5F,KAlnDG,IAmnDZwD,EACFnO,EAAgB8C,GAhnDF,IAknDPqL,IAEPtO,EAAuBiD,EAAG,EAAG,GAAG,GAtnDlB,IA0nDVqL,IAEFjD,GAAKpI,EAAE2K,MAEa,IAAhB3K,EAAEmK,YACJnK,EAAE8I,SAAW,EACb9I,EAAE6I,YAAc,EAChB7I,EAAEgL,OAAS,KAIjB3C,GAAc9D,GACS,IAAnBA,EAAKgE,WAEP,OADAvI,EAAEwM,YAAa,EACRhG,EAGb,CAIA,OAAI6E,IAAU9E,GAAmBC,GAC7BxG,EAAE8K,MAAQ,EAtoDM,GAyoDL,IAAX9K,EAAE8K,MACJ/B,GAAS/I,EAAgB,IAAbuE,EAAKe,OACjByD,GAAS/I,EAAGuE,EAAMe,OAAS,EAAK,KAChCyD,GAAS/I,EAAGuE,EAAMe,OAAS,GAAM,KACjCyD,GAAS/I,EAAGuE,EAAMe,OAAS,GAAM,KACjCyD,GAAS/I,EAAmB,IAAhBuE,EAAKwG,UACjBhC,GAAS/I,EAAGuE,EAAMwG,UAAY,EAAK,KACnChC,GAAS/I,EAAGuE,EAAMwG,UAAY,GAAM,KACpChC,GAAS/I,EAAGuE,EAAMwG,UAAY,GAAM,OAIpC9B,GAAYjJ,EAAGuE,EAAKe,QAAU,IAC9B2D,GAAYjJ,EAAgB,MAAbuE,EAAKe,QAGtB+C,GAAc9D,GAIVvE,EAAE8K,KAAO,IAAK9K,EAAE8K,MAAQ9K,EAAE8K,MAET,IAAd9K,EAAEG,QAAgBqG,GA/pDL,EAgqDtB,EAyHA5J,EAvHA,SAAoB2H,GAClB,IAAIlZ,EAEJ,OAAKkZ,GAAsBA,EAAK+D,OAIhCjd,EAASkZ,EAAK+D,MAAMjd,UACLmc,IAzmDC,KA0mDdnc,GAzmDa,KA0mDbA,GAzmDgB,KA0mDhBA,GACAA,IAAWoc,IACXpc,IAAWqc,IACXrc,IAAWsc,GAEJK,GAAIzD,EAAMkC,KAGnBlC,EAAK+D,MAAQ,KAENjd,IAAWqc,GAAaM,GAAIzD,GAnrDf,GAmrDqCiC,IAjBhDC,EAkBX,EAkGA5J,EA3FA,SAA8B0H,EAAMqJ,GAClC,IAEI5N,EACAjc,EAAKL,EACLonB,EACA+C,EACArnB,EACA8D,EACAwjB,EARAC,EAAaH,EAAWzsB,OAU5B,IAAKojB,IAAsBA,EAAK+D,MAC9B,OAAO7B,GAMT,GAAa,KAFbqE,GADA9K,EAAIuE,EAAK+D,OACAwC,OAEmB,IAATA,GAAc9K,EAAE3U,SAAWmc,IAAexH,EAAEmK,UAC7D,OAAO1D,GAmCT,IA/Ba,IAATqE,IAEFvG,EAAKe,MAAQD,GAAQd,EAAKe,MAAOsI,EAAYG,EAAY,IAG3D/N,EAAE8K,KAAO,EAGLiD,GAAc/N,EAAE2J,SACL,IAATmB,IAEF1C,GAAKpI,EAAE2K,MACP3K,EAAE8I,SAAW,EACb9I,EAAE6I,YAAc,EAChB7I,EAAEgL,OAAS,GAIb8C,EAAU,IAAI/S,EAAAmB,KAAW8D,EAAE2J,QAC3B5O,EAAAO,SAAewS,EAASF,EAAYG,EAAa/N,EAAE2J,OAAQ3J,EAAE2J,OAAQ,GACrEiE,EAAaE,EACbC,EAAa/N,EAAE2J,QAGjBkE,EAAQtJ,EAAKqG,SACbpkB,EAAO+d,EAAKsG,QACZvgB,EAAQia,EAAKja,MACbia,EAAKqG,SAAWmD,EAChBxJ,EAAKsG,QAAU,EACftG,EAAKja,MAAQsjB,EACbvD,GAAYrK,GACLA,EAAEmK,WAAa9C,IAAW,CAC/BtjB,EAAMic,EAAE8I,SACRplB,EAAIsc,EAAEmK,WAAa9C,GAAY,GAC/B,GAEErH,EAAEiL,OAASjL,EAAGiL,OAASjL,EAAEkL,WAAclL,EAAE5H,OAAOrU,EAAMsjB,GAAY,IAAMrH,EAAEmL,UAE1EnL,EAAE/gB,KAAK8E,EAAMic,EAAE8J,QAAU9J,EAAE2K,KAAK3K,EAAEiL,OAElCjL,EAAE2K,KAAK3K,EAAEiL,OAASlnB,EAClBA,YACSL,GACXsc,EAAE8I,SAAW/kB,EACbic,EAAEmK,UAAY9C,GAAY,EAC1BgD,GAAYrK,EACd,CAWA,OAVAA,EAAE8I,UAAY9I,EAAEmK,UAChBnK,EAAE6I,YAAc7I,EAAE8I,SAClB9I,EAAEgL,OAAShL,EAAEmK,UACbnK,EAAEmK,UAAY,EACdnK,EAAEwL,aAAexL,EAAEwJ,YAAcnC,GAAY,EAC7CrH,EAAE6L,gBAAkB,EACpBtH,EAAKsG,QAAUrkB,EACf+d,EAAKja,MAAQA,EACbia,EAAKqG,SAAWiD,EAChB7N,EAAE8K,KAAOA,EACFtE,EACT,EMjzDA,IAAIwH,IAAe,EACfC,IAAmB,EAEvB,IAAMjqB,OAAOyF,aAAa1J,MAAM,KAAM,CAAE,GAAM,CAAE,MAAOmuB,GAAMF,IAAe,CAAO,CACnF,IAAMhqB,OAAOyF,aAAa1J,MAAM,KAAM,IAAIuI,WAAW,GAAK,CAAE,MAAO4lB,GAAMD,IAAmB,CAAO,CAOnG,IADA,IAAIE,GAAW,IAAIpT,EAAAmB,KAAW,KACrBkS,GAAI,EAAGA,GAAI,IAAKA,KACvBD,GAASC,IAAMA,IAAK,IAAM,EAAIA,IAAK,IAAM,EAAIA,IAAK,IAAM,EAAIA,IAAK,IAAM,EAAIA,IAAK,IAAM,EAAI,EA4D5F,SAASC,GAAcjmB,EAAKnG,GAI1B,GAAIA,EAAM,QACJmG,EAAKgT,UAAY6S,KAAuB7lB,EAAIgT,UAAY4S,IAC1D,OAAOhqB,OAAOyF,aAAa1J,MAAM,KAAMgb,EAAAG,UAAgB9S,EAAKnG,IAKhE,IADA,IAAI2F,EAAS,GACJ9F,EAAI,EAAGA,EAAIG,EAAKH,IACvB8F,GAAU5D,OAAOyF,aAAarB,EAAItG,IAEpC,OAAO8F,CACT,CAzEAumB,GAAS,KAAOA,GAAS,KAAO,EAIhClI,GAAqB,SAAUliB,GAC7B,IAAIqE,EAAKoY,EAAG8N,EAAIC,EAAOzsB,EAAG0sB,EAAUzqB,EAAI5C,OAAQstB,EAAU,EAG1D,IAAKF,EAAQ,EAAGA,EAAQC,EAASD,IAEV,QAAZ,OADT/N,EAAIzc,EAAIlB,WAAW0rB,MACaA,EAAQ,EAAIC,GAEpB,QAAZ,OADVF,EAAKvqB,EAAIlB,WAAW0rB,EAAQ,OAE1B/N,EAAI,OAAWA,EAAK,OAAW,KAAO8N,EAAK,OAC3CC,KAGJE,GAAWjO,EAAI,IAAO,EAAIA,EAAI,KAAQ,EAAIA,EAAI,MAAU,EAAI,EAO9D,IAHApY,EAAM,IAAI2S,EAAAmB,KAAWuS,GAGhB3sB,EAAI,EAAGysB,EAAQ,EAAGzsB,EAAI2sB,EAASF,IAEb,QAAZ,OADT/N,EAAIzc,EAAIlB,WAAW0rB,MACaA,EAAQ,EAAIC,GAEpB,QAAZ,OADVF,EAAKvqB,EAAIlB,WAAW0rB,EAAQ,OAE1B/N,EAAI,OAAWA,EAAK,OAAW,KAAO8N,EAAK,OAC3CC,KAGA/N,EAAI,IAENpY,EAAItG,KAAO0e,EACFA,EAAI,MAEbpY,EAAItG,KAAO,IAAQ0e,IAAM,EACzBpY,EAAItG,KAAO,IAAY,GAAJ0e,GACVA,EAAI,OAEbpY,EAAItG,KAAO,IAAQ0e,IAAM,GACzBpY,EAAItG,KAAO,IAAQ0e,IAAM,EAAI,GAC7BpY,EAAItG,KAAO,IAAY,GAAJ0e,IAGnBpY,EAAItG,KAAO,IAAQ0e,IAAM,GACzBpY,EAAItG,KAAO,IAAQ0e,IAAM,GAAK,GAC9BpY,EAAItG,KAAO,IAAQ0e,IAAM,EAAI,GAC7BpY,EAAItG,KAAO,IAAY,GAAJ0e,GAIvB,OAAOpY,CACT,EAsBA8d,GAAwB,SAAU9d,GAChC,OAAOimB,GAAcjmB,EAAKA,EAAIjH,OAChC,EAIAglB,GAAwB,SAAUpiB,GAEhC,IADA,IAAIqE,EAAM,IAAI2S,EAAAmB,KAAWnY,EAAI5C,QACpBW,EAAI,EAAGG,EAAMmG,EAAIjH,OAAQW,EAAIG,EAAKH,IACzCsG,EAAItG,GAAKiC,EAAIlB,WAAWf,GAE1B,OAAOsG,CACT,EAIAge,GAAqB,SAAUhe,EAAK2M,GAClC,IAAIjT,EAAG4sB,EAAKlO,EAAGmO,EACX1sB,EAAM8S,GAAO3M,EAAIjH,OAKjBytB,EAAW,IAAI7nB,MAAY,EAAN9E,GAEzB,IAAKysB,EAAM,EAAG5sB,EAAI,EAAGA,EAAIG,GAGvB,IAFAue,EAAIpY,EAAItG,MAEA,IAAQ8sB,EAASF,KAASlO,OAIlC,IAFAmO,EAAQR,GAAS3N,IAEL,EAAKoO,EAASF,KAAS,MAAQ5sB,GAAK6sB,EAAQ,MAAxD,CAKA,IAFAnO,GAAe,IAAVmO,EAAc,GAAiB,IAAVA,EAAc,GAAO,EAExCA,EAAQ,GAAK7sB,EAAIG,GACtBue,EAAIA,GAAM,EAAiB,GAAXpY,EAAItG,KACpB6sB,IAIEA,EAAQ,EAAKC,EAASF,KAAS,MAE/BlO,EAAI,MACNoO,EAASF,KAASlO,GAElBA,GAAK,MACLoO,EAASF,KAAS,MAAUlO,GAAM,GAAM,KACxCoO,EAASF,KAAS,MAAc,KAAJlO,EAlBuC,CAsBvE,OAAO6N,GAAcO,EAAUF,EACjC,EASArI,GAAqB,SAAUje,EAAK2M,GAClC,IAAI8G,EAOJ,KALA9G,EAAMA,GAAO3M,EAAIjH,QACPiH,EAAIjH,SAAU4T,EAAM3M,EAAIjH,QAGlC0a,EAAM9G,EAAM,EACL8G,GAAO,GAA2B,MAAV,IAAXzT,EAAIyT,KAAyBA,IAIjD,OAAIA,EAAM,GAIE,IAARA,EAJkB9G,EAMf8G,EAAOsS,GAAS/lB,EAAIyT,IAAQ9G,EAAO8G,EAAM9G,CAClD,E,UC5IA8Z,GAzBA,WAEE/tB,KAAKwJ,MAAQ,KACbxJ,KAAK+pB,QAAU,EAEf/pB,KAAK8pB,SAAW,EAEhB9pB,KAAKiqB,SAAW,EAEhBjqB,KAAK0nB,OAAS,KACd1nB,KAAK4nB,SAAW,EAEhB5nB,KAAKynB,UAAY,EAEjBznB,KAAK6nB,UAAY,EAEjB7nB,KAAKonB,IAAM,GAEXpnB,KAAKwnB,MAAQ,KAEbxnB,KAAK0jB,UAAY,EAEjB1jB,KAAKwkB,MAAQ,CACf,ERnCA,IAAIwJ,GAAWvxB,OAAOyH,UAAU/D,SAQ5B8tB,GAAkB,EAIlBC,IAAwB,EAExBC,GAAwB,EAExBC,GAAc,EA8FlB,SAASC,GAAQtrB,GACf,KAAM/C,gBAAgBquB,IAAU,OAAO,IAAIA,GAAQtrB,GAEnD/C,KAAK+C,QAAUkX,EAAAC,OAAa,CAC1BsJ,MAAO0K,GACPzkB,OAAQ2kB,GACRE,UAAW,MACXrC,WAAY,GACZC,SAAU,EACVpI,SAAUqK,GACVI,GAAI,IACHxrB,GAAW,CAAC,GAEf,IAAIyrB,EAAMxuB,KAAK+C,QAEXyrB,EAAIC,KAAQD,EAAIvC,WAAa,EAC/BuC,EAAIvC,YAAcuC,EAAIvC,WAGfuC,EAAIE,MAASF,EAAIvC,WAAa,GAAOuC,EAAIvC,WAAa,KAC7DuC,EAAIvC,YAAc,IAGpBjsB,KAAKgL,IAAS,EACdhL,KAAKonB,IAAS,GACdpnB,KAAK2uB,OAAS,EACd3uB,KAAK8a,OAAS,GAEd9a,KAAKyjB,KAAO,IAAIsK,GAChB/tB,KAAKyjB,KAAKgE,UAAY,EAEtB,IAAIld,EAASoR,EACX3b,KAAKyjB,KACL+K,EAAIhL,MACJgL,EAAI/kB,OACJ+kB,EAAIvC,WACJuC,EAAItC,SACJsC,EAAI1K,UAGN,GAAIvZ,IAAW0jB,GACb,MAAM,IAAI1tB,MAAM0kB,GAAI1a,IAOtB,GAJIikB,EAAIroB,QACNyV,EAA8B5b,KAAKyjB,KAAM+K,EAAIroB,QAG3CqoB,EAAI1B,WAAY,CAClB,IAAI8B,EAaJ,GATEA,EAF4B,iBAAnBJ,EAAI1B,WAEN3H,GAAmBqJ,EAAI1B,YACa,yBAAlCkB,GAASnvB,KAAK2vB,EAAI1B,YACpB,IAAItlB,WAAWgnB,EAAI1B,YAEnB0B,EAAI1B,YAGbviB,EAASwR,EAAkC/b,KAAKyjB,KAAMmL,MAEvCX,GACb,MAAM,IAAI1tB,MAAM0kB,GAAI1a,IAGtBvK,KAAK6uB,WAAY,CACnB,CACF,CAuKA,SAASC,GAAQtlB,EAAOzG,GACtB,IAAIgsB,EAAW,IAAIV,GAAQtrB,GAK3B,GAHAgsB,EAAS3tB,KAAKoI,GAAO,GAGjBulB,EAAS/jB,IAAO,MAAM+jB,EAAS3H,KAAOnC,GAAI8J,EAAS/jB,KAEvD,OAAO+jB,EAASjoB,MAClB,CAjJAunB,GAAQnqB,UAAU9C,KAAO,SAAU4tB,EAAMnlB,GACvC,IAEIU,EAAQ0kB,EAFRxL,EAAOzjB,KAAKyjB,KACZ6K,EAAYtuB,KAAK+C,QAAQurB,UAG7B,GAAItuB,KAAK2uB,MAAS,OAAO,EAEzBM,EAAQplB,MAAYA,EAAQA,GAAkB,IAAVA,EAlNhB,EADA,EAsNA,iBAATmlB,EAETvL,EAAKja,MAAQ2b,GAAmB6J,GACC,yBAAxBhB,GAASnvB,KAAKmwB,GACvBvL,EAAKja,MAAQ,IAAIhC,WAAWwnB,GAE5BvL,EAAKja,MAAQwlB,EAGfvL,EAAKsG,QAAU,EACftG,EAAKqG,SAAWrG,EAAKja,MAAMnJ,OAE3B,EAAG,CAQD,GAPuB,IAAnBojB,EAAKgE,YACPhE,EAAKiE,OAAS,IAAIzN,EAAAmB,KAAWkT,GAC7B7K,EAAKmE,SAAW,EAChBnE,EAAKgE,UAAY6G,GAlOD,KAoOlB/jB,EAASsR,EAAqB4H,EAAMwL,KAEL1kB,IAAW0jB,GAGxC,OAFAjuB,KAAKkvB,MAAM3kB,GACXvK,KAAK2uB,OAAQ,GACN,EAEc,IAAnBlL,EAAKgE,YAAsC,IAAlBhE,EAAKqG,UA9OhB,IA8OmCmF,GA1OnC,IA0OyDA,KACjD,WAApBjvB,KAAK+C,QAAQwrB,GACfvuB,KAAKmvB,OAAO/J,GAAsBnL,EAAAG,UAAgBqJ,EAAKiE,OAAQjE,EAAKmE,YAEpE5nB,KAAKmvB,OAAOlV,EAAAG,UAAgBqJ,EAAKiE,OAAQjE,EAAKmE,WAGpD,QAAUnE,EAAKqG,SAAW,GAAwB,IAAnBrG,EAAKgE,YAlPhB,IAkPoCld,GAGxD,OAxPoB,IAwPhB0kB,GACF1kB,EAASuR,EAAwB9b,KAAKyjB,MACtCzjB,KAAKkvB,MAAM3kB,GACXvK,KAAK2uB,OAAQ,EACNpkB,IAAW0jB,IAxPA,IA4PhBgB,IACFjvB,KAAKkvB,MAAMjB,IACXxK,EAAKgE,UAAY,GACV,EAIX,EAYA4G,GAAQnqB,UAAUirB,OAAS,SAAUnU,GACnChb,KAAK8a,OAAO1Z,KAAK4Z,EACnB,EAaAqT,GAAQnqB,UAAUgrB,MAAQ,SAAU3kB,GAE9BA,IAAW0jB,KACW,WAApBjuB,KAAK+C,QAAQwrB,GACfvuB,KAAK8G,OAAS9G,KAAK8a,OAAOha,KAAK,IAE/Bd,KAAK8G,OAASmT,EAAAY,cAAoB7a,KAAK8a,SAG3C9a,KAAK8a,OAAS,GACd9a,KAAKgL,IAAMT,EACXvK,KAAKonB,IAAMpnB,KAAKyjB,KAAK2D,GACvB,EA+EA7L,EAAkB8S,GAClB7S,EAAkBsT,GAClBrT,EAxBA,SAAoBjS,EAAOzG,GAGzB,OAFAA,EAAUA,GAAW,CAAC,GACd0rB,KAAM,EACPK,GAAQtlB,EAAOzG,EACxB,EAqBA2Y,EAVA,SAAclS,EAAOzG,GAGnB,OAFAA,EAAUA,GAAW,CAAC,GACd2rB,MAAO,EACRI,GAAQtlB,EAAOzG,EACxB,E,IS0BAqsB,GACAC,GACAC,GACAC,GC8lCAC,GACAC,GACAC,GACAC,GACAC,G,2JC58CAC,GAAiB,SAAsBpM,EAAMgG,GAC3C,IAAIjC,EACAsI,EACAlX,EACAmX,EACAzD,EACAtH,EAEAgL,EAEAC,EACAC,EACAC,EAEAC,EACAC,EACArQ,EACAsQ,EACAC,EACAC,EACAC,EACAC,EACAC,EAEAxvB,EACA6d,EACA4R,EACAC,EAGArnB,EAAOke,EAGXF,EAAQ/D,EAAK+D,MAEbsI,EAAMrM,EAAKsG,QACXvgB,EAAQia,EAAKja,MACboP,EAAOkX,GAAOrM,EAAKqG,SAAW,GAC9BiG,EAAOtM,EAAKmE,SACZF,EAASjE,EAAKiE,OACd4E,EAAMyD,GAAQtG,EAAQhG,EAAKgE,WAC3BzC,EAAM+K,GAAQtM,EAAKgE,UAAY,KAE/BuI,EAAOxI,EAAMwI,KAEbC,EAAQzI,EAAMyI,MACdC,EAAQ1I,EAAM0I,MACdC,EAAQ3I,EAAM2I,MACdC,EAAW5I,EAAMlQ,OACjB+Y,EAAO7I,EAAM6I,KACbrQ,EAAOwH,EAAMxH,KACbsQ,EAAQ9I,EAAMsJ,QACdP,EAAQ/I,EAAMuJ,SACdP,GAAS,GAAKhJ,EAAMwJ,SAAW,EAC/BP,GAAS,GAAKjJ,EAAMyJ,UAAY,EAMhCC,EACA,EAAG,CACGlR,EAAO,KACTqQ,GAAQ7mB,EAAMsmB,MAAU9P,EACxBA,GAAQ,EACRqQ,GAAQ7mB,EAAMsmB,MAAU9P,EACxBA,GAAQ,GAGV0Q,EAAOJ,EAAMD,EAAOG,GAEpBW,EACA,OAAS,CAKP,GAHAd,KADAM,EAAKD,IAAS,GAEd1Q,GAAQ2Q,EAEG,KADXA,EAAKD,IAAU,GAAM,KAKnBhJ,EAAOqI,KAAiB,MAAPW,MAEd,MAAS,GAALC,GAwKJ,IAAkB,IAAR,GAALA,GAAgB,CACxBD,EAAOJ,GAAc,MAAPI,IAA8BL,GAAS,GAAKM,GAAM,IAChE,SAASQ,CACX,CACK,GAAS,GAALR,EAAS,CAEhBnJ,EAAM3d,KAtSH,GAuSH,MAAMqnB,CACR,CAEEzN,EAAK2D,IAAM,8BACXI,EAAM3d,KA5SJ,GA6SF,MAAMqnB,CACR,CApLE/vB,EAAa,MAAPuvB,GACNC,GAAM,MAEA3Q,EAAO2Q,IACTN,GAAQ7mB,EAAMsmB,MAAU9P,EACxBA,GAAQ,GAEV7e,GAAOkvB,GAAS,GAAKM,GAAM,EAC3BN,KAAUM,EACV3Q,GAAQ2Q,GAGN3Q,EAAO,KACTqQ,GAAQ7mB,EAAMsmB,MAAU9P,EACxBA,GAAQ,EACRqQ,GAAQ7mB,EAAMsmB,MAAU9P,EACxBA,GAAQ,GAEV0Q,EAAOH,EAAMF,EAAOI,GAEpBW,EACA,OAAS,CAMP,GAJAf,KADAM,EAAKD,IAAS,GAEd1Q,GAAQ2Q,IAGC,IAFTA,EAAKD,IAAU,GAAM,MAiIhB,IAAkB,IAAR,GAALC,GAAgB,CACxBD,EAAOH,GAAc,MAAPG,IAA8BL,GAAS,GAAKM,GAAM,IAChE,SAASS,CACX,CAEE3N,EAAK2D,IAAM,wBACXI,EAAM3d,KA1RR,GA2RE,MAAMqnB,CACR,CA1HE,GAZAlS,EAAc,MAAP0R,EAEH1Q,GADJ2Q,GAAM,MAEJN,GAAQ7mB,EAAMsmB,MAAU9P,GACxBA,GAAQ,GACG2Q,IACTN,GAAQ7mB,EAAMsmB,MAAU9P,EACxBA,GAAQ,KAGZhB,GAAQqR,GAAS,GAAKM,GAAM,GAEjBX,EAAM,CACfvM,EAAK2D,IAAM,gCACXI,EAAM3d,KApKV,GAqKI,MAAMqnB,CACR,CAMA,GAJAb,KAAUM,EACV3Q,GAAQ2Q,EAGJ3R,GADJ2R,EAAKZ,EAAOzD,GACG,CAEb,IADAqE,EAAK3R,EAAO2R,GACHT,GACH1I,EAAM6J,KAAM,CACd5N,EAAK2D,IAAM,gCACXI,EAAM3d,KAjLd,GAkLQ,MAAMqnB,CACR,CA0BF,GAFAN,EAAO,EACPC,EAAcT,EACA,IAAVD,GAEF,GADAS,GAAQX,EAAQU,EACZA,EAAKxvB,EAAK,CACZA,GAAOwvB,EACP,GACEjJ,EAAOqI,KAAUK,EAASQ,aACjBD,GACXC,EAAOb,EAAO/Q,EACd6R,EAAcnJ,CAChB,OAEG,GAAIyI,EAAQQ,GAGf,GAFAC,GAAQX,EAAQE,EAAQQ,GACxBA,GAAMR,GACGhvB,EAAK,CACZA,GAAOwvB,EACP,GACEjJ,EAAOqI,KAAUK,EAASQ,aACjBD,GAEX,GADAC,EAAO,EACHT,EAAQhvB,EAAK,CAEfA,GADAwvB,EAAKR,EAEL,GACEzI,EAAOqI,KAAUK,EAASQ,aACjBD,GACXC,EAAOb,EAAO/Q,EACd6R,EAAcnJ,CAChB,CACF,OAIA,GADAkJ,GAAQT,EAAQQ,EACZA,EAAKxvB,EAAK,CACZA,GAAOwvB,EACP,GACEjJ,EAAOqI,KAAUK,EAASQ,aACjBD,GACXC,EAAOb,EAAO/Q,EACd6R,EAAcnJ,CAChB,CAEF,KAAOvmB,EAAM,GACXumB,EAAOqI,KAAUc,EAAYD,KAC7BlJ,EAAOqI,KAAUc,EAAYD,KAC7BlJ,EAAOqI,KAAUc,EAAYD,KAC7BzvB,GAAO,EAELA,IACFumB,EAAOqI,KAAUc,EAAYD,KACzBzvB,EAAM,IACRumB,EAAOqI,KAAUc,EAAYD,MAGnC,KACK,CACHA,EAAOb,EAAO/Q,EACd,GACE0I,EAAOqI,KAAUrI,EAAOkJ,KACxBlJ,EAAOqI,KAAUrI,EAAOkJ,KACxBlJ,EAAOqI,KAAUrI,EAAOkJ,KACxBzvB,GAAO,QACAA,EAAM,GACXA,IACFumB,EAAOqI,KAAUrI,EAAOkJ,KACpBzvB,EAAM,IACRumB,EAAOqI,KAAUrI,EAAOkJ,MAG9B,CAYF,KACF,CAeF,CAEA,KACF,CACF,OAASd,EAAMlX,GAAQmX,EAAO/K,GAI9B8K,GADA3uB,EAAM6e,GAAQ,EAGdqQ,IAAS,IADTrQ,GAAQ7e,GAAO,IACO,EAGtBsiB,EAAKsG,QAAU+F,EACfrM,EAAKmE,SAAWmI,EAChBtM,EAAKqG,SAAYgG,EAAMlX,EAAYA,EAAOkX,EAAZ,EAAmB,GAAKA,EAAMlX,GAC5D6K,EAAKgE,UAAasI,EAAO/K,EAAaA,EAAM+K,EAAb,IAAqB,KAAOA,EAAO/K,GAClEwC,EAAM6I,KAAOA,EACb7I,EAAMxH,KAAOA,CAEf,E,UCjUIsR,GAAU,GASVC,GAAQ,CACV,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACrD,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAG3DC,GAAO,CACT,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAGtDC,GAAQ,CACV,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IACtD,IAAK,IAAK,IAAK,IAAK,KAAM,KAAM,KAAM,KAAM,KAAM,KAClD,KAAM,MAAO,MAAO,MAAO,EAAG,GAG5BC,GAAO,CACT,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACpC,GAAI,GAAI,GAAI,GAAI,GAAI,IAGtBC,GAAiB,SAAuB3uB,EAAM4uB,EAAMC,EAAYC,EAAOlN,EAAOmN,EAAaC,EAAMz1B,GAE/F,IAYI01B,EACAC,EACAC,EACAC,EACA1sB,EAIAsf,EAMAqN,EAAWC,EAASC,EA1BpBvS,EAAOzjB,EAAKyjB,KAGZ7e,EAAM,EACNqxB,EAAM,EACNC,EAAM,EAAGxe,EAAM,EACf7X,EAAO,EACP0B,EAAO,EACP40B,EAAO,EACP3gB,EAAO,EACP4gB,EAAO,EACPC,EAAO,EAMP5jB,EAAO,KACP6jB,EAAa,EAGbpQ,EAAQ,IAAIxI,EAAAoB,MAAYiW,IACxBwB,EAAO,IAAI7Y,EAAAoB,MAAYiW,IACvB9P,EAAQ,KACRuR,EAAc,EAoClB,IAAK5xB,EAAM,EAAGA,GAAOmwB,GAASnwB,IAC5BshB,EAAMthB,GAAO,EAEf,IAAKqxB,EAAM,EAAGA,EAAMV,EAAOU,IACzB/P,EAAMmP,EAAKC,EAAaW,MAK1B,IADAp2B,EAAO4jB,EACF/L,EAAMqd,GAASrd,GAAO,GACN,IAAfwO,EAAMxO,GADkBA,KAM9B,GAHI7X,EAAO6X,IACT7X,EAAO6X,GAEG,IAARA,EAaF,OATA2Q,EAAMmN,KAAiB,SAMvBnN,EAAMmN,KAAiB,SAEvBx1B,EAAKyjB,KAAO,EACL,EAET,IAAKyS,EAAM,EAAGA,EAAMxe,GACC,IAAfwO,EAAMgQ,GADaA,KASzB,IANIr2B,EAAOq2B,IACTr2B,EAAOq2B,GAIT1gB,EAAO,EACF5Q,EAAM,EAAGA,GAAOmwB,GAASnwB,IAG5B,GAFA4Q,IAAS,GACTA,GAAQ0Q,EAAMthB,IACH,EACT,OAAO,EAGX,GAAI4Q,EAAO,IAtID,IAsIO/O,GAA0B,IAARiR,GACjC,OAAO,EAKT,IADA6e,EAAK,GAAK,EACL3xB,EAAM,EAAGA,EAAMmwB,GAASnwB,IAC3B2xB,EAAK3xB,EAAM,GAAK2xB,EAAK3xB,GAAOshB,EAAMthB,GAIpC,IAAKqxB,EAAM,EAAGA,EAAMV,EAAOU,IACM,IAA3BZ,EAAKC,EAAaW,KACpBR,EAAKc,EAAKlB,EAAKC,EAAaW,OAAWA,GAmE3C,GAtNU,IAyLNxvB,GACFgM,EAAOwS,EAAQwQ,EACfhN,EAAM,IA1LC,IA4LEhiB,GACTgM,EAAOuiB,GACPsB,GAAc,IACdrR,EAAQgQ,GACRuB,GAAe,IACf/N,EAAM,MAGNhW,EAAOyiB,GACPjQ,EAAQkQ,GACR1M,GAAM,GAIR4N,EAAO,EACPJ,EAAM,EACNrxB,EAAMsxB,EACN/sB,EAAOqsB,EACPj0B,EAAO1B,EACPs2B,EAAO,EACPP,GAAM,EAENC,GADAO,EAAO,GAAKv2B,GACE,EAlNL,IAqNL4G,GAAkB2vB,EA1NN,KAMN,IAqNP3vB,GAAkB2vB,EA1NJ,IA2Nf,OAAO,EAIT,OAAS,CAEPN,EAAYlxB,EAAMuxB,EACdV,EAAKQ,GAAOxN,GACdsN,EAAU,EACVC,EAAWP,EAAKQ,IAETR,EAAKQ,GAAOxN,GACnBsN,EAAU9Q,EAAMuR,EAAcf,EAAKQ,IACnCD,EAAWvjB,EAAK6jB,EAAab,EAAKQ,MAGlCF,EAAU,GACVC,EAAW,GAIbN,EAAO,GAAM9wB,EAAMuxB,EAEnBD,EADAP,EAAO,GAAKp0B,EAEZ,GAEE8mB,EAAMlf,GAAQktB,GAAQF,IADtBR,GAAQD,IAC8BI,GAAc,GAAOC,GAAW,GAAMC,EAAU,QACtE,IAATL,GAIT,IADAD,EAAO,GAAM9wB,EAAM,EACZyxB,EAAOX,GACZA,IAAS,EAWX,GATa,IAATA,GACFW,GAAQX,EAAO,EACfW,GAAQX,GAERW,EAAO,EAITJ,IACqB,KAAf/P,EAAMthB,GAAY,CACtB,GAAIA,IAAQ8S,EAAO,MACnB9S,EAAMywB,EAAKC,EAAaG,EAAKQ,GAC/B,CAGA,GAAIrxB,EAAM/E,IAASw2B,EAAOR,KAAUD,EAAK,CAYvC,IAVa,IAATO,IACFA,EAAOt2B,GAITsJ,GAAQ+sB,EAIR1gB,EAAO,IADPjU,EAAOqD,EAAMuxB,GAEN50B,EAAO40B,EAAOze,MACnBlC,GAAQ0Q,EAAM3kB,EAAO40B,KACT,IACZ50B,IACAiU,IAAS,EAKX,GADA4gB,GAAQ,GAAK70B,EA5RR,IA6RDkF,GAAkB2vB,EAlSV,KAMN,IA6RH3vB,GAAkB2vB,EAlSR,IAmSX,OAAO,EAQT/N,EAJAuN,EAAMS,EAAOR,GAIAh2B,GAAS,GAAO0B,GAAQ,GAAO4H,EAAOqsB,EAAc,CACnE,CACF,CAeA,OAVa,IAATa,IAIFhO,EAAMlf,EAAOktB,GAAQzxB,EAAQuxB,GAAS,GAAjB,SAKvBn2B,EAAKyjB,KAAO5jB,EACL,CACT,EF3TA,IACI42B,GAAO,EACPC,GAAQ,EAmBRC,GAAkB,EAIlBC,IAAkB,EAcfC,GAAO,EAWHC,GAAO,GAkBXC,GAAM,GAQTC,GAAc,IACdC,GAAe,IAQnB,SAASC,GAAQC,GACf,OAAUA,IAAO,GAAM,MACdA,IAAO,EAAK,SACP,MAAJA,IAAe,KACX,IAAJA,IAAa,GACzB,CAGA,SAASC,KACP3zB,KAAK6J,KAAO,EACZ7J,KAAK4Y,MAAO,EACZ5Y,KAAKgqB,KAAO,EACZhqB,KAAK4zB,UAAW,EAChB5zB,KAAK6zB,MAAQ,EACb7zB,KAAKgwB,KAAO,EACZhwB,KAAK8zB,MAAQ,EACb9zB,KAAK+zB,MAAQ,EAEb/zB,KAAK6pB,KAAO,KAGZ7pB,KAAKg0B,MAAQ,EACbh0B,KAAKiwB,MAAQ,EACbjwB,KAAKkwB,MAAQ,EACblwB,KAAKmwB,MAAQ,EACbnwB,KAAKsX,OAAS,KAGdtX,KAAKqwB,KAAO,EACZrwB,KAAKggB,KAAO,EAGZhgB,KAAKK,OAAS,EACdL,KAAKi0B,OAAS,EAGdj0B,KAAKwhB,MAAQ,EAGbxhB,KAAK8wB,QAAU,KACf9wB,KAAK+wB,SAAW,KAChB/wB,KAAKgxB,QAAU,EACfhxB,KAAKixB,SAAW,EAGhBjxB,KAAKk0B,MAAQ,EACbl0B,KAAKm0B,KAAO,EACZn0B,KAAKo0B,MAAQ,EACbp0B,KAAKq0B,KAAO,EACZr0B,KAAK0F,KAAO,KAEZ1F,KAAK4xB,KAAO,IAAI3X,EAAAoB,MAAY,KAC5Brb,KAAKgyB,KAAO,IAAI/X,EAAAoB,MAAY,KAO5Brb,KAAKs0B,OAAS,KACdt0B,KAAKu0B,QAAU,KACfv0B,KAAKqxB,KAAO,EACZrxB,KAAKw0B,KAAO,EACZx0B,KAAKy0B,IAAM,CACb,CAEA,SAASC,GAAiBjR,GACxB,IAAI+D,EAEJ,OAAK/D,GAASA,EAAK+D,OACnBA,EAAQ/D,EAAK+D,MACb/D,EAAKwG,SAAWxG,EAAKoE,UAAYL,EAAMuM,MAAQ,EAC/CtQ,EAAK2D,IAAM,GACPI,EAAMwC,OACRvG,EAAKe,MAAqB,EAAbgD,EAAMwC,MAErBxC,EAAM3d,KAAOupB,GACb5L,EAAM5O,KAAO,EACb4O,EAAMoM,SAAW,EACjBpM,EAAMwI,KAAO,MACbxI,EAAMqC,KAAO,KACbrC,EAAM6I,KAAO,EACb7I,EAAMxH,KAAO,EAEbwH,EAAMsJ,QAAUtJ,EAAM8M,OAAS,IAAIra,EAAAqB,MAAYiY,IAC/C/L,EAAMuJ,SAAWvJ,EAAM+M,QAAU,IAAIta,EAAAqB,MAAYkY,IAEjDhM,EAAM6J,KAAO,EACb7J,EAAMgN,MAAO,EAENtB,IArB4BC,EAsBrC,CAEA,SAASwB,GAAalR,GACpB,IAAI+D,EAEJ,OAAK/D,GAASA,EAAK+D,QACnBA,EAAQ/D,EAAK+D,OACPyI,MAAQ,EACdzI,EAAM0I,MAAQ,EACd1I,EAAM2I,MAAQ,EACPuE,GAAiBjR,IALW0P,EAOrC,CAEA,SAASyB,GAAcnR,EAAMwI,GAC3B,IAAIjC,EACAxC,EAGJ,OAAK/D,GAASA,EAAK+D,OACnBA,EAAQ/D,EAAK+D,MAGTyE,EAAa,GACfjC,EAAO,EACPiC,GAAcA,IAGdjC,EAA2B,GAAnBiC,GAAc,GAClBA,EAAa,KACfA,GAAc,KAKdA,IAAeA,EAAa,GAAKA,EAAa,IACzCkH,IAEY,OAAjB3L,EAAMlQ,QAAmBkQ,EAAMwM,QAAU/H,IAC3CzE,EAAMlQ,OAAS,MAIjBkQ,EAAMwC,KAAOA,EACbxC,EAAMwM,MAAQ/H,EACP0I,GAAalR,KA1Be0P,EA2BrC,CAEA,SAAS0B,GAAapR,EAAMwI,GAC1B,IAAIF,EACAvE,EAEJ,OAAK/D,GAGL+D,EAAQ,IAAImM,GAIZlQ,EAAK+D,MAAQA,EACbA,EAAMlQ,OAAS,MACfyU,EAAM6I,GAAcnR,EAAMwI,MACdiH,KACVzP,EAAK+D,MAAQ,MAERuE,GAbaoH,EActB,CAiBA,IAEI2B,GAAQC,GAFRC,IAAS,EAIb,SAASC,GAAYzN,GAEnB,GAAIwN,GAAQ,CACV,IAAIxC,EAOJ,IALAsC,GAAS,IAAI7a,EAAAqB,MAAY,KACzByZ,GAAU,IAAI9a,EAAAqB,MAAY,IAG1BkX,EAAM,EACCA,EAAM,KAAOhL,EAAMoK,KAAKY,KAAS,EACxC,KAAOA,EAAM,KAAOhL,EAAMoK,KAAKY,KAAS,EACxC,KAAOA,EAAM,KAAOhL,EAAMoK,KAAKY,KAAS,EACxC,KAAOA,EAAM,KAAOhL,EAAMoK,KAAKY,KAAS,EAMxC,IAJAb,GAAcqB,GAAOxL,EAAMoK,KAAM,EAAG,IAAKkD,GAAU,EAAGtN,EAAMwK,KAAM,CAAEhS,KAAM,IAG1EwS,EAAM,EACCA,EAAM,IAAMhL,EAAMoK,KAAKY,KAAS,EAEvCb,GAAcsB,GAAOzL,EAAMoK,KAAM,EAAG,GAAMmD,GAAS,EAAGvN,EAAMwK,KAAM,CAAEhS,KAAM,IAG1EgV,IAAS,CACX,CAEAxN,EAAMsJ,QAAUgE,GAChBtN,EAAMwJ,QAAU,EAChBxJ,EAAMuJ,SAAWgE,GACjBvN,EAAMyJ,SAAW,CACnB,CAiBA,SAASiE,GAAazR,EAAM/I,EAAKsK,EAAKmQ,GACpC,IAAInW,EACAwI,EAAQ/D,EAAK+D,MAqCjB,OAlCqB,OAAjBA,EAAMlQ,SACRkQ,EAAMyI,MAAQ,GAAKzI,EAAMwM,MACzBxM,EAAM2I,MAAQ,EACd3I,EAAM0I,MAAQ,EAEd1I,EAAMlQ,OAAS,IAAI2C,EAAAmB,KAAWoM,EAAMyI,QAIlCkF,GAAQ3N,EAAMyI,OAChBhW,EAAAO,SAAegN,EAAMlQ,OAAQoD,EAAKsK,EAAMwC,EAAMyI,MAAOzI,EAAMyI,MAAO,GAClEzI,EAAM2I,MAAQ,EACd3I,EAAM0I,MAAQ1I,EAAMyI,SAGpBjR,EAAOwI,EAAMyI,MAAQzI,EAAM2I,OAChBgF,IACTnW,EAAOmW,GAGTlb,EAAAO,SAAegN,EAAMlQ,OAAQoD,EAAKsK,EAAMmQ,EAAMnW,EAAMwI,EAAM2I,QAC1DgF,GAAQnW,IAGN/E,EAAAO,SAAegN,EAAMlQ,OAAQoD,EAAKsK,EAAMmQ,EAAMA,EAAM,GACpD3N,EAAM2I,MAAQgF,EACd3N,EAAM0I,MAAQ1I,EAAMyI,QAGpBzI,EAAM2I,OAASnR,EACXwI,EAAM2I,QAAU3I,EAAMyI,QAASzI,EAAM2I,MAAQ,GAC7C3I,EAAM0I,MAAQ1I,EAAMyI,QAASzI,EAAM0I,OAASlR,KAG7C,CACT,CA0oCAwQ,GAAuBqF,GACvBpF,GAzoCA,SAAiBhM,EAAM8G,GACrB,IAAI/C,EACAhe,EAAOke,EACPhiB,EACA0vB,EACAf,EAAMtiB,EACNse,EACArQ,EACA8P,EAAKC,EACLoF,EACAvE,EACAC,EAEAwB,EAAWC,EAASC,EAEpB8C,EAAWC,EAASC,EACpBp0B,EACA4qB,EAEAxvB,EAEAqG,EATA8tB,EAAO,EAMP8E,EAAO,IAAIvb,EAAAmB,KAAW,GAKtBqa,EACF,CAAE,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,IAGlE,IAAKhS,IAASA,EAAK+D,QAAU/D,EAAKiE,SAC5BjE,EAAKja,OAA2B,IAAlBia,EAAKqG,SACvB,OAAOqJ,IAGT3L,EAAQ/D,EAAK+D,OACH3d,OAASwpB,KAAQ7L,EAAM3d,KA/Uf,IAmVlBurB,EAAM3R,EAAKmE,SACXF,EAASjE,EAAKiE,OACd3V,EAAO0R,EAAKgE,UACZ/hB,EAAO+d,EAAKsG,QACZvgB,EAAQia,EAAKja,MACb6qB,EAAO5Q,EAAKqG,SACZuG,EAAO7I,EAAM6I,KACbrQ,EAAOwH,EAAMxH,KAGb8P,EAAMuE,EACNtE,EAAOhe,EACPga,EAAMmH,GAENwC,EACA,OACE,OAAQlO,EAAM3d,MACZ,KAAKupB,GACH,GAAmB,IAAf5L,EAAMwC,KAAY,CACpBxC,EAAM3d,KAtWI,GAuWV,KACF,CAEA,KAAOmW,EAAO,IAAI,CAChB,GAAa,IAATqU,EAAc,MAAMqB,EACxBrB,IACAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CACV,CAEA,GAAkB,EAAdwH,EAAOwC,MAAsB,QAATqG,EAAiB,CACvC7I,EAAMsM,MAAQ,EAEd0B,EAAK,GAAY,IAAPnF,EACVmF,EAAK,GAAKnF,IAAU,EAAK,IACzB7I,EAAMsM,MAAQhP,GAAM0C,EAAMsM,MAAO0B,EAAM,EAAG,GAI1CnF,EAAO,EACPrQ,EAAO,EAEPwH,EAAM3d,KAxYD,EAyYL,KACF,CAKA,GAJA2d,EAAMqM,MAAQ,EACVrM,EAAMqC,OACRrC,EAAMqC,KAAKjkB,MAAO,KAED,EAAb4hB,EAAMwC,UACA,IAAPqG,IAA2B,IAAMA,GAAQ,IAAM,GAAI,CACtD5M,EAAK2D,IAAM,yBACXI,EAAM3d,KAAOypB,GACb,KACF,CACA,GA7ZU,IA6ZE,GAAPjD,GAAwC,CAC3C5M,EAAK2D,IAAM,6BACXI,EAAM3d,KAAOypB,GACb,KACF,CAMA,GAHAtT,GAAQ,EAER7e,EAAiC,GAAnB,IAHdkvB,KAAU,IAIU,IAAhB7I,EAAMwM,MACRxM,EAAMwM,MAAQ7yB,OAEX,GAAIA,EAAMqmB,EAAMwM,MAAO,CAC1BvQ,EAAK2D,IAAM,sBACXI,EAAM3d,KAAOypB,GACb,KACF,CACA9L,EAAMwI,KAAO,GAAK7uB,EAElBsiB,EAAKe,MAAQgD,EAAMsM,MAAQ,EAC3BtM,EAAM3d,KAAc,IAAPwmB,EAlaL,GAka6BgD,GAErChD,EAAO,EACPrQ,EAAO,EAEP,MACF,KAhbS,EAkbP,KAAOA,EAAO,IAAI,CAChB,GAAa,IAATqU,EAAc,MAAMqB,EACxBrB,IACAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CACV,CAGA,GADAwH,EAAMqM,MAAQxD,EAjcJ,IAkcS,IAAd7I,EAAMqM,OAA8B,CACvCpQ,EAAK2D,IAAM,6BACXI,EAAM3d,KAAOypB,GACb,KACF,CACA,GAAkB,MAAd9L,EAAMqM,MAAgB,CACxBpQ,EAAK2D,IAAM,2BACXI,EAAM3d,KAAOypB,GACb,KACF,CACI9L,EAAMqC,OACRrC,EAAMqC,KAAKrhB,KAAQ6nB,GAAS,EAAK,GAEjB,IAAd7I,EAAMqM,QAER2B,EAAK,GAAY,IAAPnF,EACVmF,EAAK,GAAKnF,IAAU,EAAK,IACzB7I,EAAMsM,MAAQhP,GAAM0C,EAAMsM,MAAO0B,EAAM,EAAG,IAI5CnF,EAAO,EACPrQ,EAAO,EAEPwH,EAAM3d,KAjdA,EAmdR,KAndQ,EAqdN,KAAOmW,EAAO,IAAI,CAChB,GAAa,IAATqU,EAAc,MAAMqB,EACxBrB,IACAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CACV,CAEIwH,EAAMqC,OACRrC,EAAMqC,KAAK4C,KAAO4D,GAEF,IAAd7I,EAAMqM,QAER2B,EAAK,GAAY,IAAPnF,EACVmF,EAAK,GAAKnF,IAAU,EAAK,IACzBmF,EAAK,GAAKnF,IAAU,GAAM,IAC1BmF,EAAK,GAAKnF,IAAU,GAAM,IAC1B7I,EAAMsM,MAAQhP,GAAM0C,EAAMsM,MAAO0B,EAAM,EAAG,IAI5CnF,EAAO,EACPrQ,EAAO,EAEPwH,EAAM3d,KA3eF,EA6eN,KA7eM,EA+eJ,KAAOmW,EAAO,IAAI,CAChB,GAAa,IAATqU,EAAc,MAAMqB,EACxBrB,IACAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CACV,CAEIwH,EAAMqC,OACRrC,EAAMqC,KAAK8L,OAAiB,IAAPtF,EACrB7I,EAAMqC,KAAK6C,GAAM2D,GAAQ,GAET,IAAd7I,EAAMqM,QAER2B,EAAK,GAAY,IAAPnF,EACVmF,EAAK,GAAKnF,IAAU,EAAK,IACzB7I,EAAMsM,MAAQhP,GAAM0C,EAAMsM,MAAO0B,EAAM,EAAG,IAI5CnF,EAAO,EACPrQ,EAAO,EAEPwH,EAAM3d,KApgBC,EAsgBT,KAtgBS,EAugBP,GAAkB,KAAd2d,EAAMqM,MAAgB,CAExB,KAAO7T,EAAO,IAAI,CAChB,GAAa,IAATqU,EAAc,MAAMqB,EACxBrB,IACAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CACV,CAEAwH,EAAMnnB,OAASgwB,EACX7I,EAAMqC,OACRrC,EAAMqC,KAAK+L,UAAYvF,GAEP,IAAd7I,EAAMqM,QAER2B,EAAK,GAAY,IAAPnF,EACVmF,EAAK,GAAKnF,IAAU,EAAK,IACzB7I,EAAMsM,MAAQhP,GAAM0C,EAAMsM,MAAO0B,EAAM,EAAG,IAI5CnF,EAAO,EACPrQ,EAAO,CAET,MACSwH,EAAMqC,OACbrC,EAAMqC,KAAKrI,MAAQ,MAErBgG,EAAM3d,KAliBC,EAoiBT,KApiBS,EAqiBP,GAAkB,KAAd2d,EAAMqM,SACRsB,EAAO3N,EAAMnnB,QACFg0B,IAAQc,EAAOd,GACtBc,IACE3N,EAAMqC,OACR1oB,EAAMqmB,EAAMqC,KAAK+L,UAAYpO,EAAMnnB,OAC9BmnB,EAAMqC,KAAKrI,QAEdgG,EAAMqC,KAAKrI,MAAQ,IAAIvb,MAAMuhB,EAAMqC,KAAK+L,YAE1C3b,EAAAO,SACEgN,EAAMqC,KAAKrI,MACXhY,EACA9D,EAGAyvB,EAEAh0B,IAMc,IAAdqmB,EAAMqM,QACRrM,EAAMsM,MAAQhP,GAAM0C,EAAMsM,MAAOtqB,EAAO2rB,EAAMzvB,IAEhD2uB,GAAQc,EACRzvB,GAAQyvB,EACR3N,EAAMnnB,QAAU80B,GAEd3N,EAAMnnB,QAAU,MAAMq1B,EAE5BlO,EAAMnnB,OAAS,EACfmnB,EAAM3d,KAtkBA,EAwkBR,KAxkBQ,EAykBN,GAAkB,KAAd2d,EAAMqM,MAAgB,CACxB,GAAa,IAATQ,EAAc,MAAMqB,EACxBP,EAAO,EACP,GAEEh0B,EAAMqI,EAAM9D,EAAOyvB,KAEf3N,EAAMqC,MAAQ1oB,GACbqmB,EAAMnnB,OAAS,QAClBmnB,EAAMqC,KAAKvoB,MAAQ4B,OAAOyF,aAAaxH,UAElCA,GAAOg0B,EAAOd,GAOvB,GALkB,IAAd7M,EAAMqM,QACRrM,EAAMsM,MAAQhP,GAAM0C,EAAMsM,MAAOtqB,EAAO2rB,EAAMzvB,IAEhD2uB,GAAQc,EACRzvB,GAAQyvB,EACJh0B,EAAO,MAAMu0B,CACnB,MACSlO,EAAMqC,OACbrC,EAAMqC,KAAKvoB,KAAO,MAEpBkmB,EAAMnnB,OAAS,EACfmnB,EAAM3d,KAhmBG,EAkmBX,KAlmBW,EAmmBT,GAAkB,KAAd2d,EAAMqM,MAAgB,CACxB,GAAa,IAATQ,EAAc,MAAMqB,EACxBP,EAAO,EACP,GACEh0B,EAAMqI,EAAM9D,EAAOyvB,KAEf3N,EAAMqC,MAAQ1oB,GACbqmB,EAAMnnB,OAAS,QAClBmnB,EAAMqC,KAAK2C,SAAWtpB,OAAOyF,aAAaxH,UAErCA,GAAOg0B,EAAOd,GAMvB,GALkB,IAAd7M,EAAMqM,QACRrM,EAAMsM,MAAQhP,GAAM0C,EAAMsM,MAAOtqB,EAAO2rB,EAAMzvB,IAEhD2uB,GAAQc,EACRzvB,GAAQyvB,EACJh0B,EAAO,MAAMu0B,CACnB,MACSlO,EAAMqC,OACbrC,EAAMqC,KAAK2C,QAAU,MAEvBhF,EAAM3d,KAvnBA,EAynBR,KAznBQ,EA0nBN,GAAkB,IAAd2d,EAAMqM,MAAgB,CAExB,KAAO7T,EAAO,IAAI,CAChB,GAAa,IAATqU,EAAc,MAAMqB,EACxBrB,IACAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CACV,CAEA,GAAIqQ,KAAwB,MAAd7I,EAAMsM,OAAiB,CACnCrQ,EAAK2D,IAAM,sBACXI,EAAM3d,KAAOypB,GACb,KACF,CAEAjD,EAAO,EACPrQ,EAAO,CAET,CACIwH,EAAMqC,OACRrC,EAAMqC,KAAK0C,KAAQ/E,EAAOqM,OAAS,EAAK,EACxCrM,EAAMqC,KAAKjkB,MAAO,GAEpB6d,EAAKe,MAAQgD,EAAMsM,MAAQ,EAC3BtM,EAAM3d,KAAOwpB,GACb,MACF,KAnpBU,GAqpBR,KAAOrT,EAAO,IAAI,CAChB,GAAa,IAATqU,EAAc,MAAMqB,EACxBrB,IACAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CACV,CAEAyD,EAAKe,MAAQgD,EAAMsM,MAAQL,GAAQpD,GAEnCA,EAAO,EACPrQ,EAAO,EAEPwH,EAAM3d,KAhqBA,GAkqBR,KAlqBQ,GAmqBN,GAAuB,IAAnB2d,EAAMoM,SASR,OAPAnQ,EAAKmE,SAAWwN,EAChB3R,EAAKgE,UAAY1V,EACjB0R,EAAKsG,QAAUrkB,EACf+d,EAAKqG,SAAWuK,EAChB7M,EAAM6I,KAAOA,EACb7I,EAAMxH,KAAOA,EApsBD,EAwsBdyD,EAAKe,MAAQgD,EAAMsM,MAAQ,EAC3BtM,EAAM3d,KAAOwpB,GAEf,KAAKA,GACH,GArtBc,IAqtBV9I,GAptBU,IAotBWA,EAAqB,MAAMmL,EAEtD,KAlrBc,GAmrBZ,GAAIlO,EAAM5O,KAAM,CAEdyX,KAAiB,EAAPrQ,EACVA,GAAe,EAAPA,EAERwH,EAAM3d,KA1qBD,GA2qBL,KACF,CAEA,KAAOmW,EAAO,GAAG,CACf,GAAa,IAATqU,EAAc,MAAMqB,EACxBrB,IACAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CACV,CAQA,OANAwH,EAAM5O,KAAe,EAAPyX,EAGdrQ,GAAQ,EAGQ,GAJhBqQ,KAAU,IAKR,KAAK,EAGH7I,EAAM3d,KA5sBE,GA6sBR,MACF,KAAK,EAKH,GAJAorB,GAAYzN,GAGZA,EAAM3d,KA5sBI,GA3CA,IAwvBN0gB,EAAmB,CAErB8F,KAAU,EACVrQ,GAAQ,EAER,MAAM0V,CACR,CACA,MACF,KAAK,EAGHlO,EAAM3d,KA3tBC,GA4tBP,MACF,KAAK,EACH4Z,EAAK2D,IAAM,qBACXI,EAAM3d,KAAOypB,GAGjBjD,KAAU,EACVrQ,GAAQ,EAER,MACF,KAzuBc,GA+uBZ,IAJAqQ,KAAiB,EAAPrQ,EACVA,GAAe,EAAPA,EAGDA,EAAO,IAAI,CAChB,GAAa,IAATqU,EAAc,MAAMqB,EACxBrB,IACAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CACV,CAEA,IAAY,MAAPqQ,KAAoBA,IAAU,GAAM,OAAS,CAChD5M,EAAK2D,IAAM,+BACXI,EAAM3d,KAAOypB,GACb,KACF,CASA,GARA9L,EAAMnnB,OAAgB,MAAPgwB,EAIfA,EAAO,EACPrQ,EAAO,EAEPwH,EAAM3d,KAjwBK,GAtCG,IAwyBV0gB,EAAqB,MAAMmL,EAEjC,KApwBa,GAqwBXlO,EAAM3d,KApwBI,GAswBZ,KAtwBY,GAwwBV,GADAsrB,EAAO3N,EAAMnnB,OACH,CAGR,GAFI80B,EAAOd,IAAQc,EAAOd,GACtBc,EAAOpjB,IAAQojB,EAAOpjB,GACb,IAATojB,EAAc,MAAMO,EAExBzb,EAAAO,SAAekN,EAAQle,EAAO9D,EAAMyvB,EAAMC,GAE1Cf,GAAQc,EACRzvB,GAAQyvB,EACRpjB,GAAQojB,EACRC,GAAOD,EACP3N,EAAMnnB,QAAU80B,EAChB,KACF,CAEA3N,EAAM3d,KAAOwpB,GACb,MACF,KAxxBa,GA0xBX,KAAOrT,EAAO,IAAI,CAChB,GAAa,IAATqU,EAAc,MAAMqB,EACxBrB,IACAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CACV,CAkBA,GAhBAwH,EAAM2M,KAAkC,KAAnB,GAAP9D,GAEdA,KAAU,EACVrQ,GAAQ,EAERwH,EAAM4M,MAAmC,GAAnB,GAAP/D,GAEfA,KAAU,EACVrQ,GAAQ,EAERwH,EAAM0M,MAAmC,GAAnB,GAAP7D,GAEfA,KAAU,EACVrQ,GAAQ,EAGJwH,EAAM2M,KAAO,KAAO3M,EAAM4M,MAAQ,GAAI,CACxC3Q,EAAK2D,IAAM,sCACXI,EAAM3d,KAAOypB,GACb,KACF,CAGA9L,EAAM6M,KAAO,EACb7M,EAAM3d,KAxzBO,GA0zBf,KA1zBe,GA2zBb,KAAO2d,EAAM6M,KAAO7M,EAAM0M,OAAO,CAE/B,KAAOlU,EAAO,GAAG,CACf,GAAa,IAATqU,EAAc,MAAMqB,EACxBrB,IACAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CACV,CAEAwH,EAAMoK,KAAK6D,EAAMjO,EAAM6M,SAAmB,EAAPhE,EAEnCA,KAAU,EACVrQ,GAAQ,CAEV,CACA,KAAOwH,EAAM6M,KAAO,IAClB7M,EAAMoK,KAAK6D,EAAMjO,EAAM6M,SAAW,EAapC,GAPA7M,EAAMsJ,QAAUtJ,EAAM8M,OACtB9M,EAAMwJ,QAAU,EAEhBz0B,EAAO,CAAEyjB,KAAMwH,EAAMwJ,SACrBjF,EAAM4F,GA74BF,EA64BuBnK,EAAMoK,KAAM,EAAG,GAAIpK,EAAMsJ,QAAS,EAAGtJ,EAAMwK,KAAMz1B,GAC5EirB,EAAMwJ,QAAUz0B,EAAKyjB,KAEjB+L,EAAK,CACPtI,EAAK2D,IAAM,2BACXI,EAAM3d,KAAOypB,GACb,KACF,CAEA9L,EAAM6M,KAAO,EACb7M,EAAM3d,KA91BQ,GAg2BhB,KAh2BgB,GAi2Bd,KAAO2d,EAAM6M,KAAO7M,EAAM2M,KAAO3M,EAAM4M,OAAO,CAC5C,KAGE9B,GAFA5B,EAAOlJ,EAAMsJ,QAAQT,GAAS,GAAK7I,EAAMwJ,SAAW,MAEhC,GAAM,IAC1BuB,EAAkB,MAAP7B,KAFX2B,EAAY3B,IAAS,KAIF1Q,IANZ,CAQP,GAAa,IAATqU,EAAc,MAAMqB,EACxBrB,IACAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CAEV,CACA,GAAIuS,EAAW,GAEblC,KAAUgC,EACVrS,GAAQqS,EAER7K,EAAMoK,KAAKpK,EAAM6M,QAAU9B,MAExB,CACH,GAAiB,KAAbA,EAAiB,CAGnB,IADA3vB,EAAIyvB,EAAY,EACTrS,EAAOpd,GAAG,CACf,GAAa,IAATyxB,EAAc,MAAMqB,EACxBrB,IACAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CACV,CAMA,GAHAqQ,KAAUgC,EACVrS,GAAQqS,EAEW,IAAf7K,EAAM6M,KAAY,CACpB5Q,EAAK2D,IAAM,4BACXI,EAAM3d,KAAOypB,GACb,KACF,CACAnyB,EAAMqmB,EAAMoK,KAAKpK,EAAM6M,KAAO,GAC9Bc,EAAO,GAAY,EAAP9E,GAEZA,KAAU,EACVrQ,GAAQ,CAEV,MACK,GAAiB,KAAbuS,EAAiB,CAGxB,IADA3vB,EAAIyvB,EAAY,EACTrS,EAAOpd,GAAG,CACf,GAAa,IAATyxB,EAAc,MAAMqB,EACxBrB,IACAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CACV,CAIAA,GAAQqS,EAERlxB,EAAM,EACNg0B,EAAO,GAAY,GAJnB9E,KAAUgC,IAMVhC,KAAU,EACVrQ,GAAQ,CAEV,KACK,CAGH,IADApd,EAAIyvB,EAAY,EACTrS,EAAOpd,GAAG,CACf,GAAa,IAATyxB,EAAc,MAAMqB,EACxBrB,IACAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CACV,CAIAA,GAAQqS,EAERlxB,EAAM,EACNg0B,EAAO,IAAa,KAJpB9E,KAAUgC,IAMVhC,KAAU,EACVrQ,GAAQ,CAEV,CACA,GAAIwH,EAAM6M,KAAOc,EAAO3N,EAAM2M,KAAO3M,EAAM4M,MAAO,CAChD3Q,EAAK2D,IAAM,4BACXI,EAAM3d,KAAOypB,GACb,KACF,CACA,KAAO6B,KACL3N,EAAMoK,KAAKpK,EAAM6M,QAAUlzB,CAE/B,CACF,CAGA,GAAIqmB,EAAM3d,OAASypB,GAAO,MAG1B,GAAwB,IAApB9L,EAAMoK,KAAK,KAAY,CACzBnO,EAAK2D,IAAM,uCACXI,EAAM3d,KAAOypB,GACb,KACF,CAcA,GATA9L,EAAMwJ,QAAU,EAEhBz0B,EAAO,CAAEyjB,KAAMwH,EAAMwJ,SACrBjF,EAAM4F,GAAcqB,GAAMxL,EAAMoK,KAAM,EAAGpK,EAAM2M,KAAM3M,EAAMsJ,QAAS,EAAGtJ,EAAMwK,KAAMz1B,GAGnFirB,EAAMwJ,QAAUz0B,EAAKyjB,KAGjB+L,EAAK,CACPtI,EAAK2D,IAAM,8BACXI,EAAM3d,KAAOypB,GACb,KACF,CAaA,GAXA9L,EAAMyJ,SAAW,EAGjBzJ,EAAMuJ,SAAWvJ,EAAM+M,QACvBh4B,EAAO,CAAEyjB,KAAMwH,EAAMyJ,UACrBlF,EAAM4F,GAAcsB,GAAOzL,EAAMoK,KAAMpK,EAAM2M,KAAM3M,EAAM4M,MAAO5M,EAAMuJ,SAAU,EAAGvJ,EAAMwK,KAAMz1B,GAG/FirB,EAAMyJ,SAAW10B,EAAKyjB,KAGlB+L,EAAK,CACPtI,EAAK2D,IAAM,wBACXI,EAAM3d,KAAOypB,GACb,KACF,CAGA,GADA9L,EAAM3d,KAn/BQ,GA3CA,IA+hCV0gB,EAAqB,MAAMmL,EAEjC,KAt/BgB,GAu/BdlO,EAAM3d,KAt/BO,GAw/Bf,KAx/Be,GAy/Bb,GAAIwqB,GAAQ,GAAKtiB,GAAQ,IAAK,CAE5B0R,EAAKmE,SAAWwN,EAChB3R,EAAKgE,UAAY1V,EACjB0R,EAAKsG,QAAUrkB,EACf+d,EAAKqG,SAAWuK,EAChB7M,EAAM6I,KAAOA,EACb7I,EAAMxH,KAAOA,EAEb6P,GAAapM,EAAMsM,GAEnBqF,EAAM3R,EAAKmE,SACXF,EAASjE,EAAKiE,OACd3V,EAAO0R,EAAKgE,UACZ/hB,EAAO+d,EAAKsG,QACZvgB,EAAQia,EAAKja,MACb6qB,EAAO5Q,EAAKqG,SACZuG,EAAO7I,EAAM6I,KACbrQ,EAAOwH,EAAMxH,KAGTwH,EAAM3d,OAASwpB,KACjB7L,EAAMgN,MAAO,GAEf,KACF,CAEA,IADAhN,EAAMgN,KAAO,EAIXlC,GAFA5B,EAAOlJ,EAAMsJ,QAAQT,GAAS,GAAK7I,EAAMwJ,SAAW,MAEhC,GAAM,IAC1BuB,EAAkB,MAAP7B,KAFX2B,EAAY3B,IAAS,KAIJ1Q,IANV,CAQP,GAAa,IAATqU,EAAc,MAAMqB,EACxBrB,IACAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CAEV,CACA,GAAIsS,GAAgC,IAAV,IAAVA,GAAuB,CAIrC,IAHA+C,EAAYhD,EACZiD,EAAUhD,EACViD,EAAWhD,EAKTD,GAHA5B,EAAOlJ,EAAMsJ,QAAQyE,IACXlF,GAAS,GAAMgF,EAAYC,GAAY,IAAoCD,OAEjE,GAAM,IAC1B9C,EAAkB,MAAP7B,IAEP2E,GAJJhD,EAAY3B,IAAS,KAIU1Q,IAPxB,CASP,GAAa,IAATqU,EAAc,MAAMqB,EACxBrB,IACAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CAEV,CAEAqQ,KAAUgF,EACVrV,GAAQqV,EAER7N,EAAMgN,MAAQa,CAChB,CAOA,GALAhF,KAAUgC,EACVrS,GAAQqS,EAER7K,EAAMgN,MAAQnC,EACd7K,EAAMnnB,OAASkyB,EACC,IAAZD,EAAe,CAIjB9K,EAAM3d,KAhkCK,GAikCX,KACF,CACA,GAAc,GAAVyoB,EAAc,CAEhB9K,EAAMgN,MAAO,EACbhN,EAAM3d,KAAOwpB,GACb,KACF,CACA,GAAc,GAAVf,EAAc,CAChB7O,EAAK2D,IAAM,8BACXI,EAAM3d,KAAOypB,GACb,KACF,CACA9L,EAAMhG,MAAkB,GAAV8Q,EACd9K,EAAM3d,KAnlCU,GAqlClB,KArlCkB,GAslChB,GAAI2d,EAAMhG,MAAO,CAGf,IADA5e,EAAI4kB,EAAMhG,MACHxB,EAAOpd,GAAG,CACf,GAAa,IAATyxB,EAAc,MAAMqB,EACxBrB,IACAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CACV,CAEAwH,EAAMnnB,QAAUgwB,GAAS,GAAK7I,EAAMhG,OAAS,EAE7C6O,KAAU7I,EAAMhG,MAChBxB,GAAQwH,EAAMhG,MAEdgG,EAAMgN,MAAQhN,EAAMhG,KACtB,CAEAgG,EAAMiN,IAAMjN,EAAMnnB,OAClBmnB,EAAM3d,KAxmCQ,GA0mChB,KA1mCgB,GA2mCd,KAGEyoB,GAFA5B,EAAOlJ,EAAMuJ,SAASV,GAAS,GAAK7I,EAAMyJ,UAAY,MAElC,GAAM,IAC1BsB,EAAkB,MAAP7B,KAFX2B,EAAY3B,IAAS,KAIF1Q,IANZ,CAQP,GAAa,IAATqU,EAAc,MAAMqB,EACxBrB,IACAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CAEV,CACA,GAAyB,IAAV,IAAVsS,GAAuB,CAI1B,IAHA+C,EAAYhD,EACZiD,EAAUhD,EACViD,EAAWhD,EAKTD,GAHA5B,EAAOlJ,EAAMuJ,SAASwE,IACZlF,GAAS,GAAMgF,EAAYC,GAAY,IAAoCD,OAEjE,GAAM,IAC1B9C,EAAkB,MAAP7B,IAEP2E,GAJJhD,EAAY3B,IAAS,KAIU1Q,IAPxB,CASP,GAAa,IAATqU,EAAc,MAAMqB,EACxBrB,IACAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CAEV,CAEAqQ,KAAUgF,EACVrV,GAAQqV,EAER7N,EAAMgN,MAAQa,CAChB,CAMA,GAJAhF,KAAUgC,EACVrS,GAAQqS,EAER7K,EAAMgN,MAAQnC,EACA,GAAVC,EAAc,CAChB7O,EAAK2D,IAAM,wBACXI,EAAM3d,KAAOypB,GACb,KACF,CACA9L,EAAMyM,OAAS1B,EACf/K,EAAMhG,MAAoB,GAAZ8Q,EACd9K,EAAM3d,KA7pCW,GA+pCnB,KA/pCmB,GAgqCjB,GAAI2d,EAAMhG,MAAO,CAGf,IADA5e,EAAI4kB,EAAMhG,MACHxB,EAAOpd,GAAG,CACf,GAAa,IAATyxB,EAAc,MAAMqB,EACxBrB,IACAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CACV,CAEAwH,EAAMyM,QAAU5D,GAAS,GAAK7I,EAAMhG,OAAS,EAE7C6O,KAAU7I,EAAMhG,MAChBxB,GAAQwH,EAAMhG,MAEdgG,EAAMgN,MAAQhN,EAAMhG,KACtB,CAEA,GAAIgG,EAAMyM,OAASzM,EAAMwI,KAAM,CAC7BvM,EAAK2D,IAAM,gCACXI,EAAM3d,KAAOypB,GACb,KACF,CAGA9L,EAAM3d,KAxrCS,GA0rCjB,KA1rCiB,GA2rCf,GAAa,IAATkI,EAAc,MAAM2jB,EAExB,GADAP,EAAOpF,EAAOhe,EACVyV,EAAMyM,OAASkB,EAAM,CAEvB,IADAA,EAAO3N,EAAMyM,OAASkB,GACX3N,EAAM0I,OACX1I,EAAM6J,KAAM,CACd5N,EAAK2D,IAAM,gCACXI,EAAM3d,KAAOypB,GACb,KACF,CAiBE6B,EAAO3N,EAAM2I,OACfgF,GAAQ3N,EAAM2I,MACdS,EAAOpJ,EAAMyI,MAAQkF,GAGrBvE,EAAOpJ,EAAM2I,MAAQgF,EAEnBA,EAAO3N,EAAMnnB,SAAU80B,EAAO3N,EAAMnnB,QACxCwwB,EAAcrJ,EAAMlQ,MACtB,MAEEuZ,EAAcnJ,EACdkJ,EAAOwE,EAAM5N,EAAMyM,OACnBkB,EAAO3N,EAAMnnB,OAEX80B,EAAOpjB,IAAQojB,EAAOpjB,GAC1BA,GAAQojB,EACR3N,EAAMnnB,QAAU80B,EAChB,GACEzN,EAAO0N,KAASvE,EAAYD,aACnBuE,GACU,IAAjB3N,EAAMnnB,SAAgBmnB,EAAM3d,KA9uCnB,IA+uCb,MACF,KA3uCe,GA4uCb,GAAa,IAATkI,EAAc,MAAM2jB,EACxBhO,EAAO0N,KAAS5N,EAAMnnB,OACtB0R,IACAyV,EAAM3d,KApvCO,GAqvCb,MACF,KAhvCS,GAivCP,GAAI2d,EAAMwC,KAAM,CAEd,KAAOhK,EAAO,IAAI,CAChB,GAAa,IAATqU,EAAc,MAAMqB,EACxBrB,IAEAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CACV,CAaA,GAXA+P,GAAQhe,EACR0R,EAAKoE,WAAakI,EAClBvI,EAAMuM,OAAShE,EACXA,IACFtM,EAAKe,MAAQgD,EAAMsM,MAEdtM,EAAMqM,MAAQ/O,GAAM0C,EAAMsM,MAAOpM,EAAQqI,EAAMqF,EAAMrF,GAAQxL,GAAQiD,EAAMsM,MAAOpM,EAAQqI,EAAMqF,EAAMrF,IAG7GA,EAAOhe,GAEFyV,EAAMqM,MAAQxD,EAAOoD,GAAQpD,MAAW7I,EAAMsM,MAAO,CACxDrQ,EAAK2D,IAAM,uBACXI,EAAM3d,KAAOypB,GACb,KACF,CAEAjD,EAAO,EACPrQ,EAAO,CAGT,CACAwH,EAAM3d,KAhxCE,GAkxCV,KAlxCU,GAmxCR,GAAI2d,EAAMwC,MAAQxC,EAAMqM,MAAO,CAE7B,KAAO7T,EAAO,IAAI,CAChB,GAAa,IAATqU,EAAc,MAAMqB,EACxBrB,IACAhE,GAAQ7mB,EAAM9D,MAAWsa,EACzBA,GAAQ,CACV,CAEA,GAAIqQ,KAAwB,WAAd7I,EAAMuM,OAAqB,CACvCtQ,EAAK2D,IAAM,yBACXI,EAAM3d,KAAOypB,GACb,KACF,CAEAjD,EAAO,EACPrQ,EAAO,CAGT,CACAwH,EAAM3d,KAtyCA,GAwyCR,KAxyCQ,GAyyCNkiB,EAt1Cc,EAu1Cd,MAAM2J,EACR,KAAKpC,GACHvH,GAr1Cc,EAs1Cd,MAAM2J,EACR,KA5yCO,GA6yCL,OAv1Cc,EA01ChB,QACE,OAAOvC,GAsBb,OARA1P,EAAKmE,SAAWwN,EAChB3R,EAAKgE,UAAY1V,EACjB0R,EAAKsG,QAAUrkB,EACf+d,EAAKqG,SAAWuK,EAChB7M,EAAM6I,KAAOA,EACb7I,EAAMxH,KAAOA,GAGTwH,EAAMyI,OAAUF,IAAStM,EAAKgE,WAAaD,EAAM3d,KAAOypB,KACvC9L,EAAM3d,KA50Cd,IApDO,IAg4CuB0gB,KACrC2K,GAAazR,EAAMA,EAAKiE,OAAQjE,EAAKmE,SAAUmI,EAAOtM,EAAKgE,YAC7DD,EAAM3d,KA10CC,IA1CS,IAw3CpBimB,GAAOrM,EAAKqG,SACZiG,GAAQtM,EAAKgE,UACbhE,EAAKwG,UAAY6F,EACjBrM,EAAKoE,WAAakI,EAClBvI,EAAMuM,OAAShE,EACXvI,EAAMwC,MAAQ+F,IAChBtM,EAAKe,MAAQgD,EAAMsM,MAChBtM,EAAMqM,MAAQ/O,GAAM0C,EAAMsM,MAAOpM,EAAQqI,EAAMtM,EAAKmE,SAAWmI,GAAQxL,GAAQiD,EAAMsM,MAAOpM,EAAQqI,EAAMtM,EAAKmE,SAAWmI,IAE/HtM,EAAKC,UAAY8D,EAAMxH,MAAQwH,EAAM5O,KAAO,GAAK,IAC9B4O,EAAM3d,OAASwpB,GAAO,IAAM,IAn2C3B,KAo2CD7L,EAAM3d,MAz2CR,KAy2CyB2d,EAAM3d,KAAiB,IAAM,IACzD,IAATimB,GAAuB,IAATC,GAl5CC,IAk5CcxF,IAAuBwB,IAAQmH,KAC/DnH,GAp4CkB,GAs4CbA,EACT,EAwEA2D,GAtEA,SAAoBjM,GAElB,IAAKA,IAASA,EAAK+D,MACjB,OAAO2L,GAGT,IAAI3L,EAAQ/D,EAAK+D,MAKjB,OAJIA,EAAMlQ,SACRkQ,EAAMlQ,OAAS,MAEjBmM,EAAK+D,MAAQ,KACN0L,EACT,EA2DAvD,GAzDA,SAA0BlM,EAAMoG,GAC9B,IAAIrC,EAGJ,OAAK/D,GAASA,EAAK+D,MAEM,IAAP,GADlBA,EAAQ/D,EAAK+D,OACFwC,MAA0BmJ,IAGrC3L,EAAMqC,KAAOA,EACbA,EAAKjkB,MAAO,EACLstB,IAP4BC,EAQrC,EA8CAvD,GA5CA,SAA8BnM,EAAMqJ,GAClC,IAEItF,EAFAyF,EAAaH,EAAWzsB,OAO5B,OAAKojB,GAAyBA,EAAK+D,MAGhB,KAFnBA,EAAQ/D,EAAK+D,OAEHwC,MA35CE,KA25CYxC,EAAM3d,KACrBspB,GA55CG,KAg6CR3L,EAAM3d,MAGC0a,GAFA,EAEgBuI,EAAYG,EAAY,KAClCzF,EAAMsM,OA37CH,EAi8CdoB,GAAazR,EAAMqJ,EAAYG,EAAYA,IAE/CzF,EAAM3d,KAx5CG,IA1CS,IAq8CpB2d,EAAMoM,SAAW,EAEVV,IAzB4DC,EA0BrE,E,UGz+CA0C,GAAiB,CAGfC,WAAoB,EACpBC,gBAAoB,EACpBC,aAAoB,EACpBC,aAAoB,EACpBC,SAAoB,EACpBC,QAAoB,EACpBC,QAAoB,EAKpBC,KAAoB,EACpBC,aAAoB,EACpBC,YAAoB,EACpBC,SAAmB,EACnBC,gBAAmB,EACnBC,cAAmB,EAEnBC,aAAmB,EAInBC,iBAA0B,EAC1BC,aAA0B,EAC1BC,mBAA0B,EAC1BC,uBAAyB,EAGzBC,WAA0B,EAC1BC,eAA0B,EAC1BC,MAA0B,EAC1BC,QAA0B,EAC1BC,mBAA0B,EAG1BC,SAA0B,EAC1BC,OAA0B,EAE1BC,UAA0B,EAG1BC,WAA0B,G,UCR5BC,GApCA,WAEEz3B,KAAKwI,KAAa,EAElBxI,KAAKysB,KAAa,EAElBzsB,KAAK21B,OAAa,EAElB31B,KAAK0sB,GAAa,EAElB1sB,KAAKwhB,MAAa,KAElBxhB,KAAK41B,UAAa,EAWlB51B,KAAKsB,KAAa,GAIlBtB,KAAKwsB,QAAa,GAIlBxsB,KAAKusB,KAAa,EAElBvsB,KAAK4F,MAAa,CACpB,EL5CA,IAAI8xB,GAAWj7B,OAAOyH,UAAU/D,SAiFhC,SAASw3B,GAAQ50B,GACf,KAAM/C,gBAAgB23B,IAAU,OAAO,IAAIA,GAAQ50B,GAEnD/C,KAAK+C,QAAUkX,EAAAC,OAAa,CAC1BoU,UAAW,MACXrC,WAAY,EACZsC,GAAI,IACHxrB,GAAW,CAAC,GAEf,IAAIyrB,EAAMxuB,KAAK+C,QAIXyrB,EAAIC,KAAQD,EAAIvC,YAAc,GAAOuC,EAAIvC,WAAa,KACxDuC,EAAIvC,YAAcuC,EAAIvC,WACC,IAAnBuC,EAAIvC,aAAoBuC,EAAIvC,YAAa,OAI3CuC,EAAKvC,YAAc,GAAOuC,EAAIvC,WAAa,KACzClpB,GAAWA,EAAQkpB,aACvBuC,EAAIvC,YAAc,IAKhBuC,EAAKvC,WAAa,IAAQuC,EAAIvC,WAAa,IAGf,IAAR,GAAjBuC,EAAIvC,cACPuC,EAAIvC,YAAc,IAItBjsB,KAAKgL,IAAS,EACdhL,KAAKonB,IAAS,GACdpnB,KAAK2uB,OAAS,EACd3uB,KAAK8a,OAAS,GAEd9a,KAAKyjB,KAAS,IAAIsK,GAClB/tB,KAAKyjB,KAAKgE,UAAY,EAEtB,IAAIld,EAAUilB,GACZxvB,KAAKyjB,KACL+K,EAAIvC,YAGN,GAAI1hB,IAAWsrB,GAAAQ,KACb,MAAM,IAAI91B,MAAM0kB,GAAI1a,IAQtB,GALAvK,KAAKmG,OAAS,IAAIsxB,GAElB9H,GAA8B3vB,KAAKyjB,KAAMzjB,KAAKmG,QAG1CqoB,EAAI1B,aAEwB,iBAAnB0B,EAAI1B,WACb0B,EAAI1B,WAAa3H,GAAmBqJ,EAAI1B,YACG,yBAAlC4K,GAAS74B,KAAK2vB,EAAI1B,cAC3B0B,EAAI1B,WAAa,IAAItlB,WAAWgnB,EAAI1B,aAElC0B,EAAIC,MACNlkB,EAASqlB,GAAkC5vB,KAAKyjB,KAAM+K,EAAI1B,eAC3C+I,GAAAQ,MACb,MAAM,IAAI91B,MAAM0kB,GAAI1a,GAI5B,CA4NA,SAASqtB,GAAQpuB,EAAOzG,GACtB,IAAI80B,EAAW,IAAIF,GAAQ50B,GAK3B,GAHA80B,EAASz2B,KAAKoI,GAAO,GAGjBquB,EAAS7sB,IAAO,MAAM6sB,EAASzQ,KAAOnC,GAAI4S,EAAS7sB,KAEvD,OAAO6sB,EAAS/wB,MAClB,CAvMA6wB,GAAQzzB,UAAU9C,KAAO,SAAU4tB,EAAMnlB,GACvC,IAGIU,EAAQ0kB,EACR6I,EAAeC,EAAMC,EAJrBvU,EAAOzjB,KAAKyjB,KACZ6K,EAAYtuB,KAAK+C,QAAQurB,UACzBxB,EAAa9sB,KAAK+C,QAAQ+pB,WAM1BmL,GAAgB,EAEpB,GAAIj4B,KAAK2uB,MAAS,OAAO,EACzBM,EAAQplB,MAAYA,EAAQA,GAAkB,IAAVA,EAAkBgsB,GAAAK,SAAaL,GAAAC,WAG/C,iBAAT9G,EAETvL,EAAKja,MAAQ6b,GAAsB2J,GACF,yBAAxB0I,GAAS74B,KAAKmwB,GACvBvL,EAAKja,MAAQ,IAAIhC,WAAWwnB,GAE5BvL,EAAKja,MAAQwlB,EAGfvL,EAAKsG,QAAU,EACftG,EAAKqG,SAAWrG,EAAKja,MAAMnJ,OAE3B,EAAG,CAkBD,GAjBuB,IAAnBojB,EAAKgE,YACPhE,EAAKiE,OAAS,IAAIzN,EAAAmB,KAAWkT,GAC7B7K,EAAKmE,SAAW,EAChBnE,EAAKgE,UAAY6G,IAGnB/jB,EAASklB,GAAqBhM,EAAMoS,GAAAC,eAErBD,GAAAU,aAAiBzJ,IAC9BviB,EAASqlB,GAAkC5vB,KAAKyjB,KAAMqJ,IAGpDviB,IAAWsrB,GAAAc,cAAmC,IAAlBsB,IAC9B1tB,EAASsrB,GAAAQ,KACT4B,GAAgB,GAGd1tB,IAAWsrB,GAAAS,cAAkB/rB,IAAWsrB,GAAAQ,KAG1C,OAFAr2B,KAAKkvB,MAAM3kB,GACXvK,KAAK2uB,OAAQ,GACN,EAGLlL,EAAKmE,WACgB,IAAnBnE,EAAKgE,WAAmBld,IAAWsrB,GAAAS,eAAqC,IAAlB7S,EAAKqG,UAAmBmF,IAAU4G,GAAAK,UAAcjH,IAAU4G,GAAAG,gBAE1F,WAApBh2B,KAAK+C,QAAQwrB,IAEfuJ,EAAgBvS,GAAmB9B,EAAKiE,OAAQjE,EAAKmE,UAErDmQ,EAAOtU,EAAKmE,SAAWkQ,EACvBE,EAAU1S,GAAmB7B,EAAKiE,OAAQoQ,GAG1CrU,EAAKmE,SAAWmQ,EAChBtU,EAAKgE,UAAY6G,EAAYyJ,EACzBA,GAAQ9d,EAAAO,SAAeiJ,EAAKiE,OAAQjE,EAAKiE,OAAQoQ,EAAeC,EAAM,GAE1E/3B,KAAKmvB,OAAO6I,IAGZh4B,KAAKmvB,OAAOlV,EAAAG,UAAgBqJ,EAAKiE,OAAQjE,EAAKmE,aAY9B,IAAlBnE,EAAKqG,UAAqC,IAAnBrG,EAAKgE,YAC9BwQ,GAAgB,EAGpB,QAAUxU,EAAKqG,SAAW,GAAwB,IAAnBrG,EAAKgE,YAAoBld,IAAWsrB,GAAAS,cAOnE,OALI/rB,IAAWsrB,GAAAS,eACbrH,EAAQ4G,GAAAK,UAINjH,IAAU4G,GAAAK,UACZ3rB,EAASmlB,GAAwB1vB,KAAKyjB,MACtCzjB,KAAKkvB,MAAM3kB,GACXvK,KAAK2uB,OAAQ,EACNpkB,IAAWsrB,GAAAQ,MAIhBpH,IAAU4G,GAAAG,eACZh2B,KAAKkvB,MAAM2G,GAAAQ,MACX5S,EAAKgE,UAAY,GACV,EAIX,EAYAkQ,GAAQzzB,UAAUirB,OAAS,SAAUnU,GACnChb,KAAK8a,OAAO1Z,KAAK4Z,EACnB,EAaA2c,GAAQzzB,UAAUgrB,MAAQ,SAAU3kB,GAE9BA,IAAWsrB,GAAAQ,OACW,WAApBr2B,KAAK+C,QAAQwrB,GAGfvuB,KAAK8G,OAAS9G,KAAK8a,OAAOha,KAAK,IAE/Bd,KAAK8G,OAASmT,EAAAY,cAAoB7a,KAAK8a,SAG3C9a,KAAK8a,OAAS,GACd9a,KAAKgL,IAAMT,EACXvK,KAAKonB,IAAMpnB,KAAKyjB,KAAK2D,GACvB,EA+EAgI,GAAkBuI,GAClBtI,GAAkBuI,GAClBtI,GAnBA,SAAoB9lB,EAAOzG,GAGzB,OAFAA,EAAUA,GAAW,CAAC,GACd0rB,KAAM,EACPmJ,GAAQpuB,EAAOzG,EACxB,EAgBAwsB,GAAkBqI,GN7ZlB,IAAIM,GAAO,CAAC,EAEZC,EAAOD,GAAME,EAASC,GAASxC,IAE/ByC,EAAiBJ,G,IYbLK,G,MAAAA,GAAoH,WAAwB,SAASA,EAAEhjB,GAAG,GAAG,mBAAmB/O,QAAQ,MAAM,IAAIjG,MAAM,6DAA6D,IAAIi4B,EAAE,GAAG51B,EAAE,GAAG,SAAS5B,EAAE0D,GAAG,IAAI,IAAI6zB,EAAE,EAAEhjB,EAAEijB,EAAEn4B,OAAOk4B,EAAEhjB,IAAIgjB,EAAEC,EAAED,GAAG7zB,GAAG9B,EAAExB,KAAKsD,EAAE,CAAC,IAAIgJ,EAAE,IAAIlH,SAAQ,SAAS9B,EAAE6zB,GAAGhjB,EAAE7Q,EAAE6zB,EAAEv3B,EAAE,IAAG0M,EAAE+qB,SAAS,SAAS/zB,GAAG,GAAG,mBAAmBA,EAAE,MAAM,IAAInE,MAAM,yBAAyB,IAAI,IAAIg4B,EAAE,EAAEhjB,EAAE3S,EAAEvC,OAAOk4B,EAAEhjB,IAAIgjB,EAAE7zB,EAAE9B,EAAE21B,IAAI,OAAOC,EAAEp3B,KAAKsD,GAAGgJ,CAAC,EAAE,IAAIwR,EAAExR,EAAEnF,KAAK,OAAOmF,EAAEnF,KAAK,SAAS7D,EAAE6zB,EAAEhjB,GAAG,OAAO2J,EAAErgB,KAAK6O,EAAEhJ,EAAE6zB,QAAG,IAAShjB,GAAG7H,EAAE+qB,SAASljB,GAAG7H,CAAC,EAAEA,CAAC,CAAC,IAAI6H,GAAG+B,QAAQtX,MAAM04B,IAAIC,gBAAgB,IAAIl0B,KAAK,CAAC,u2IAAu2I+zB,EAAElhB,QAAQtX,KAAK0E,EAAE8zB,EAAEE,KAAKF,EAAEI,UAAc1W,EAAE,CAAC1d,KAAK,CAAC9E,IAAI,WAAW,OAAOM,KAAK64B,QAAQ74B,KAAK64B,MAAM,IAAIp0B,KAAK,CAACzE,KAAK0H,SAAS,GAAGoxB,WAAW,CAACxzB,MAAM,WAAW,OAAOtF,KAAK+4B,WAAW/4B,KAAK+4B,SAASr0B,EAAEi0B,gBAAgB34B,KAAKwE,MAAM,GAAGw0B,aAAa,CAAC1zB,MAAM,WAAW,IAAI,IAAIZ,EAAE1E,KAAK0H,OAAO6wB,EAAE7zB,EAAE+C,WAAW8N,EAAE,IAAInN,SAAS1D,GAAG8zB,EAAE,GAAG51B,EAAE,EAAEA,EAAE21B,IAAI31B,EAAE,CAAC,IAAI5B,EAAEuU,EAAE0jB,UAAUr2B,GAAE,GAAI41B,GAAGt1B,OAAOyF,aAAa3H,EAAE,CAAC,OAAOhB,KAAKk5B,QAAQV,CAAC,GAAGW,WAAW,CAAC7zB,MAAM,WAAW,OAAO5B,KAAKqF,MAAM/I,KAAKg5B,eAAe,IAAI,OAAO,SAASt0B,GAAG,KAAKA,aAAaK,aAAa,MAAM,IAAIK,UAAU,kDAAkD,IAAIozB,EAAEY,OAAO,MAAM,IAAI74B,MAAM,+DAA+D,OAAO,IAAIg4B,GAAE,SAASC,EAAE51B,EAAE5B,GAAG,IAAI0M,EAAE,IAAI0rB,OAAO7jB,GAAG2J,EAAE,GAAGxR,EAAE3G,QAAQ,SAASrC,GAAG9B,EAAE8B,EAAE,EAAEgJ,EAAE2rB,UAAU,SAAS30B,GAAG,QAAQA,EAAEA,EAAEsqB,MAAMhsB,MAAM,IAAI,MAAMvB,QAAQiD,EAAEsqB,KAAKxL,OAAO,WAAW9e,EAAEsqB,KAAK5H,KAAK,MAAM,IAAI,UAAU,IAAImR,GAAGhjB,EAAE7Q,EAAEsqB,KAAKvyB,OAAO68B,iBAAiB/jB,EAAE2M,GAAG3M,GAAG2J,EAAE9d,KAAKm3B,GAAGv3B,EAAEu3B,GAAG,MAAM,IAAI,WAAW7qB,EAAE6rB,YAAYf,EAAEtZ,GAAG,MAAM,IAAI,QAAQxR,EAAE6rB,YAAY32B,EAAE,IAAIrC,MAAMmE,EAAEsqB,KAAKvuB,UAAU,MAAM,QAAQiN,EAAE6rB,YAAY32B,EAAE,IAAIrC,MAAM,gCAAgCmE,EAAE1B,OAAO,IAAIuS,CAAC,EAAE7H,EAAE8rB,YAAY,CAACx2B,KAAK,UAAU0E,OAAOhD,GAAG,CAACA,GAAG,GAAE,CAAC,EAAvqM,mBAAmBuM,QAAQA,OAAOC,IAAID,OAAO,GAAGsnB,IAA4BkB,GAAelB,K,gBCA1GmB,GAAiB,SAAez2B,GAC9B,OAAO02B,KAAK12B,EACd,E,kBCmBA,SAAS22B,GAAQ32B,GAEhB,IADA,IAAI42B,EAAQ,IAAIryB,WAAWvE,EAAI5C,QACvBW,EAAI,EAAGA,EAAIiC,EAAI5C,OAAQW,IAC9B64B,EAAM74B,GAAKiC,EAAIlB,WAAWf,GAE3B,OAAO64B,EAAMnyB,MACd,CAlBAoyB,GAAiB,SAA8BC,GAC9C,GAAmB,iBAARA,EAAkB,MAAMx5B,MAAM,+BAGzC,MAAI,WAAWvD,KAAK+8B,GAgBrB,SAAgBC,GAKf,IAAIC,GAHJD,EAAMA,EAAIz7B,QAAQ,SAAU,KAGP2G,QAAQ,KAC7B,IAAI,IAAO+0B,GAAcA,GAAc,EAAG,MAAM,IAAI70B,UAAU,sBAO9D,IAJA,IAAI2N,EAAOinB,EAAI55B,UAAU,EAAG65B,GAAY/4B,MAAM,KAE1Cg5B,GAAS,EACTC,EAAU,WACLn5B,EAAI,EAAGA,EAAI+R,EAAK1S,OAAQW,IAC5B,UAAY+R,EAAK/R,GACpBk5B,GAAS,EACC,GAAKnnB,EAAK/R,GAAGkE,QAAQ,cAC/Bi1B,EAAUpnB,EAAK/R,GAAGZ,UAAU,IAK9B,IAAI4uB,EAAOvX,SAASuiB,EAAI55B,UAAU65B,EAAa,IAE3CC,IAAQlL,EAAO0K,GAAK1K,IAExB,IAAIoL,EAAOR,GAAO5K,GAKlB,OAHAoL,EAAKp3B,KAAO+P,EAAK,IAAM,aACvBqnB,EAAKD,QAAUA,EAERC,CACR,CAhDkCC,CAAON,IAGpCO,GAASP,KAAMA,EAAML,GAAKK,IAEvBH,GAAOG,GACf,E,gBCjBAt9B,OAAO8C,eAAeg7B,GAAS,aAAc,CAC3Cj1B,OAAO,I,UCDT7I,OAAO8C,eAAei7B,GAAS,aAAc,CAC3Cl1B,OAAO,IAETk1B,GAAQ36B,KAAO26B,GAAQC,MAAQD,GAAQE,kBAAoBF,GAAQG,aAAeH,GAAQI,UAAYJ,GAAQK,UAAYL,GAAQM,UAAYN,GAAQO,UAAYP,GAAQQ,sBAAwBR,GAAQS,mBAAqBT,GAAQU,SAAM,E,UCC7Oz+B,OAAO8C,eAAe47B,GAAS,aAAc,CAC3C71B,OAAO,IAET61B,GAAQC,gBAAkBD,GAAQE,gBAAkBF,GAAQG,QAAUH,GAAQI,OAASJ,GAAQK,yBAA2BL,GAAQM,UAAYN,GAAQO,aAAeP,GAAQQ,SAAWR,GAAQS,UAAYT,GAAQU,QAAUV,GAAQW,QAAUX,GAAQY,cAAgBZ,GAAQa,0BAA4Bb,GAAQc,YAAcd,GAAQhwB,QAAUgwB,GAAQe,eAAiBf,GAAQgB,cAAgBhB,GAAQiB,MAAQjB,GAAQz9B,WAAQ,E,UCPrajB,OAAO8C,eAAe88B,GAAS,aAAc,CAC3C/2B,OAAO,IAGT,MAAMg3B,WAAkB/7B,MACtB2K,YAAYzK,EAAU,gBAAiB87B,EAAa,EAAG9xB,EAAa,QAASnE,EAAO,MAClFk2B,MAAM/7B,GACNT,KAAKS,QAAUA,EACfT,KAAKsB,KAAO,YACZtB,KAAKu8B,WAAaA,EAClBv8B,KAAKuK,OAASgyB,EACdv8B,KAAKyK,WAAaA,EAClBzK,KAAKsG,KAAOA,CACd,CAEAm2B,SACE,MAAO,CACLn7B,KAAMtB,KAAKsB,KACXi7B,WAAYv8B,KAAKu8B,WACjBhyB,OAAQvK,KAAKuK,OACbE,WAAYzK,KAAKyK,WACjBhK,QAAST,KAAKS,QACd6F,KAAMtG,KAAKsG,KAEf,EAIF+1B,GAAQ/7B,QAAUg8B,G,UC5BlB7/B,OAAO8C,eAAem9B,GAAS,aAAc,CAC3Cp3B,OAAO,IAETo3B,GAAQC,UAAYD,GAAQE,cAAgBF,GAAQG,aAAeH,GAAQI,wBAAqB,EAKhGJ,GAAQI,mBAAqB,CAAC,UAAW,eAAgB,qBAAsB,cAAe,sBAAuB,aAAc,QAAS,WAAY,gBAAiB,WAAY,WAAY,aAAc,QAAS,gBAAiB,qBAAsB,gBAAiB,uBAAwB,cAAe,YAAa,UAAW,WAAY,6BAA8B,8BAA+B,gBAAiB,gBAAiB,mBAAoB,qBAAsB,kBAAmB,mBAAoB,mBAAoB,oBAAqB,qBAAsB,YAAa,oBAAqB,gBAAiB,uBAAwB,sBAAuB,OAAQ,OAAQ,QAAS,kBAAmB,yBAA0B,eAAgB,eAAgB,yBAA0B,6BAA8B,UAAW,OAAQ,gBAAiB,QAAS,2BAA4B,qBAAsB,kBAAmB,oBAAqB,sBAAuB,oBAAqB,iBAAkB,cAAe,QAAS,UAAW,SAAU,YAAa,mBAAoB,aAAc,wBAAyB,kBAAmB,gBAAiB,eAAgB,kBAAmB,iBAAkB,WAAY,iBAAkB,WAAY,iBAAkB,gBAAiB,sBAK1yCJ,GAAQG,aAAe,CACrB,QAAS,EACT,QAAS,EACT,QAAS,EACT,QAAS,EACT,QAAS,EACT,QAAS,EACT,QAAS,EACT,QAAS,EACT,QAAS,EACT,QAAS,EACT,QAAS,EACT,QAAS,EACT,QAAS,EACT,QAAS,EACT,QAAS,GAOXH,GAAQE,cAAgB,CAAC,UAAW,UAAW,YAAa,SAAU,QAAS,eAK/EF,GAAQC,UAAY,Y,OClChBI,GACAC,G,MARAC,GAAUC,GAAiB,CAAC,EAUhC,SAASC,KACL,MAAM,IAAI58B,MAAM,kCACpB,CACA,SAAS68B,KACL,MAAM,IAAI78B,MAAM,oCACpB,CAqBA,SAAS88B,GAAWC,GAChB,GAAIP,KAAqBQ,WAErB,OAAOA,WAAWD,EAAK,GAG3B,IAAKP,KAAqBI,KAAqBJ,KAAqBQ,WAEhE,OADAR,GAAmBQ,WACZA,WAAWD,EAAK,GAE3B,IAEI,OAAOP,GAAiBO,EAAK,EACjC,CAAE,MAAM54B,GACJ,IAEI,OAAOq4B,GAAiBl+B,KAAK,KAAMy+B,EAAK,EAC5C,CAAE,MAAM54B,GAEJ,OAAOq4B,GAAiBl+B,KAAKmB,KAAMs9B,EAAK,EAC5C,CACJ,CAGJ,EA5CC,WACG,IAEQP,GADsB,mBAAfQ,WACYA,WAEAJ,EAE3B,CAAE,MAAOz4B,GACLq4B,GAAmBI,EACvB,CACA,IAEQH,GADwB,mBAAjBQ,aACcA,aAEAJ,EAE7B,CAAE,MAAO14B,GACLs4B,GAAqBI,EACzB,CACJ,CAnBC,GAwED,IAEIK,GAFAC,GAAQ,GACRC,IAAW,EAEXC,IAAa,EAEjB,SAASC,KACAF,IAAaF,KAGlBE,IAAW,EACPF,GAAap9B,OACbq9B,GAAQD,GAAa9kB,OAAO+kB,IAE5BE,IAAa,EAEbF,GAAMr9B,QACNy9B,KAER,CAEA,SAASA,KACL,IAAIH,GAAJ,CAGA,IAAII,EAAUV,GAAWQ,IACzBF,IAAW,EAGX,IADA,IAAIx8B,EAAMu8B,GAAMr9B,OACVc,GAAK,CAGP,IAFAs8B,GAAeC,GACfA,GAAQ,KACCE,GAAaz8B,GACds8B,IACAA,GAAaG,IAAYI,MAGjCJ,IAAa,EACbz8B,EAAMu8B,GAAMr9B,MAChB,CACAo9B,GAAe,KACfE,IAAW,EAnEf,SAAyBM,GACrB,GAAIjB,KAAuBQ,aAEvB,OAAOA,aAAaS,GAGxB,IAAKjB,KAAuBI,KAAwBJ,KAAuBQ,aAEvE,OADAR,GAAqBQ,aACdA,aAAaS,GAExB,IAEI,OAAOjB,GAAmBiB,EAC9B,CAAE,MAAOv5B,GACL,IAEI,OAAOs4B,GAAmBn+B,KAAK,KAAMo/B,EACzC,CAAE,MAAOv5B,GAGL,OAAOs4B,GAAmBn+B,KAAKmB,KAAMi+B,EACzC,CACJ,CAIJ,CA0CIC,CAAgBH,EAnBZ,CAoBR,CAgBA,SAASI,GAAKb,EAAKzD,GACf75B,KAAKs9B,IAAMA,EACXt9B,KAAK65B,MAAQA,CACjB,CAWA,SAASuE,KAAQ,CA5BjBnB,GAAQoB,SAAW,SAAUf,GACzB,IAAI3/B,EAAO,IAAIsI,MAAM2I,UAAUvO,OAAS,GACxC,GAAIuO,UAAUvO,OAAS,EACnB,IAAK,IAAIW,EAAI,EAAGA,EAAI4N,UAAUvO,OAAQW,IAClCrD,EAAKqD,EAAI,GAAK4N,UAAU5N,GAGhC08B,GAAMt8B,KAAK,IAAI+8B,GAAKb,EAAK3/B,IACJ,IAAjB+/B,GAAMr9B,QAAiBs9B,IACvBN,GAAWS,GAEnB,EAOAK,GAAKj6B,UAAU85B,IAAM,WACjBh+B,KAAKs9B,IAAIr+B,MAAM,KAAMe,KAAK65B,MAC9B,EACAoD,GAAQqB,MAAQ,UAChBrB,GAAQsB,SAAU,EAClBtB,GAAQ9/B,IAAM,CAAC,EACf8/B,GAAQuB,KAAO,GACfvB,GAAQwB,QAAU,GAClBxB,GAAQyB,SAAW,CAAC,EAIpBzB,GAAQ9hB,GAAKijB,GACbnB,GAAQ0B,YAAcP,GACtBnB,GAAQttB,KAAOyuB,GACfnB,GAAQ2B,IAAMR,GACdnB,GAAQ4B,eAAiBT,GACzBnB,GAAQ6B,mBAAqBV,GAC7BnB,GAAQ8B,KAAOX,GACfnB,GAAQ+B,gBAAkBZ,GAC1BnB,GAAQgC,oBAAsBb,GAE9BnB,GAAQ3tB,UAAY,SAAUhO,GAAQ,MAAO,EAAG,EAEhD27B,GAAQiC,QAAU,SAAU59B,GACxB,MAAM,IAAIf,MAAM,mCACpB,EAEA08B,GAAQkC,IAAM,WAAc,MAAO,GAAI,EACvClC,GAAQmC,MAAQ,SAAUC,GACtB,MAAM,IAAI9+B,MAAM,iCACpB,EACA08B,GAAQqC,MAAQ,WAAa,OAAO,CAAG,ECjLvCC,GAAQxgC,WA2IR,SAAoBpB,GAQnB,GAPAA,EAAK,IAAMqC,KAAKd,UAAY,KAAO,IAClCc,KAAK3C,WACJ2C,KAAKd,UAAY,MAAQ,KAC1BvB,EAAK,IACJqC,KAAKd,UAAY,MAAQ,KAC1B,IAAMqgC,GAAeh+B,SAASvB,KAAK9B,OAE/B8B,KAAKd,UACT,OAGD,MAAMwgB,EAAI,UAAY1f,KAAKb,MAC3BxB,EAAKmB,OAAO,EAAG,EAAG4gB,EAAG,kBAKrB,IAAIphB,EAAQ,EACRkhC,EAAQ,EACZ7hC,EAAK,GAAGY,QAAQ,eAAeC,IAChB,OAAVA,IAGJF,IACc,OAAVE,IAGHghC,EAAQlhC,GAAA,IAIVX,EAAKmB,OAAO0gC,EAAO,EAAG9f,EACvB,EA3KA6f,GAAQt+B,KA6LR,SAActB,GACb,IACKA,EACH4/B,GAAQE,QAAQC,QAAQ,QAAS//B,GAEjC4/B,GAAQE,QAAQE,WAAW,QAE7B,CAAE,MAAO34B,GAGT,CACD,EAvMAu4B,GAAQp9B,KA+MR,WACC,IAAIo2B,EACJ,IACCA,EAAIgH,GAAQE,QAAQG,QAAQ,QAC7B,CAAE,MAAO54B,GAGT,EAGKuxB,QAAwB,IAAZ2E,IAA2B,QAASA,KACpD3E,OAAA1yB,GAGD,OAAO0yB,CACR,EA7NAgH,GAAQrgC,UAyGR,WAIC,QAAsB,oBAAXoY,SAA0BA,OAAOuoB,SAAoC,aAAxBvoB,OAAOuoB,QAAQ78B,OAAuBsU,OAAOuoB,QAAQC,UAKpF,oBAAdC,YAA6BA,UAAUC,YAAaD,UAAUC,UAAU38B,cAAc7E,MAAM,4BAM3E,oBAAb8R,UAA4BA,SAAS2vB,iBAAmB3vB,SAAS2vB,gBAAgBC,OAAS5vB,SAAS2vB,gBAAgBC,MAAMC,kBAEpH,oBAAX7oB,QAA0BA,OAAO7V,UAAY6V,OAAO7V,QAAQ2+B,SAAY9oB,OAAO7V,QAAQ4+B,WAAa/oB,OAAO7V,QAAQmjB,QAGrG,oBAAdmb,WAA6BA,UAAUC,WAAaD,UAAUC,UAAU38B,cAAc7E,MAAM,mBAAqB6T,SAAStV,OAAOujC,GAAI,KAAO,IAE9H,oBAAdP,WAA6BA,UAAUC,WAAaD,UAAUC,UAAU38B,cAAc7E,MAAM,sBACtG,EA/HA+gC,GAAQE,QAyOR,WACC,IAGC,OAAOc,YACR,CAAE,MAAOv5B,GAGT,CACD,CAlPkBw5B,GAClBjB,GAAQjgC,QAAU,MACjB,IAAImhC,GAAS,EAEb,MAAO,KACDA,IACJA,GAAS,EACTh/B,QAAQC,KAAK,yIACd,CAEF,EATkB,GAelB69B,GAAQv9B,OAAS,CAChB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAsFDu9B,GAAQvgC,IAAMyC,QAAQ/D,OAAS+D,QAAQzC,KAAQ,MAAO,GAkEtDugC,GAAiB/9B,EAAA,SAAoB+9B,IAErC,MAAM5gC,WAAC+hC,IAAcnB,GAMrBmB,GAAWnsB,EAAI,SAAUjY,GACxB,IACC,OAAOoH,KAAKC,UAAUrH,EACvB,CAAE,MAAO0K,GACR,MAAO,+BAAiCA,EAAMvG,OAC/C,CACD,EJzPA,MAAMuD,MACJ28B,IAC6B,oBAApBC,gBAAkCtpB,OAAS9V,EAAA,SAEhDq/B,GAAStB,GAAM,QAErBpE,GAAQz9B,MAAQmjC,GAKhB,MAAMC,GAAQ,CAAC,EAiDf,SAASC,IAAgBz7B,MACvBA,EAAKsN,KACLA,IAEA,GAAqB,iBAAVtN,EACT,MAAM,IAAI/E,MAAM,+BAAiC+E,EAAQ,IAAMsN,EAEnE,CAMAouB,eAAeC,GAAcC,GAC3B,IAAKA,EAAK12B,GACR,YAAY22B,GAAcD,GAG5B,OAAOA,CACT,CASA,SAASE,GAAeF,GACtB,OAAOA,EAAK14B,OAAOD,MAAKC,GAAQA,EAAKnI,OAASqD,KAAKqF,MAAMP,GAAQ,IACnE,CAcA,SAAS64B,GAAQ13B,EAAK5G,EAAU,CAAC,GAC/B,OAAO49B,GAAMh3B,EAAKlN,OAAOyd,OAAOzd,OAAOyd,OAAO,CAC5CrQ,KAAM,QACL9G,GAAU,CACXgD,QAAStJ,OAAOyd,OAAO,CACrBonB,OAAQ,oBACPv+B,EAAQgD,YACTwC,KAAK04B,IAAe14B,MAAKsX,IAC3B,MAAM7c,EAAO6c,EAAI9Z,QAAQrG,IAAI,gBAAkB,GAE/C,OAAIsD,EAAKxE,MAAM,aACN4iC,GAAevhB,GAAKtX,MAAKjC,IAAS,C,IACvCuZ,E,KACAvZ,MAIAtD,EAAKxE,MAAM,YACNqhB,EAAIrX,OAAOD,MAAKjC,IAAS,C,IAC9BuZ,E,KACAvZ,MAIG,C,IACLuZ,EACF,IACCtX,MAAK,EAACsX,IACPA,EAAGvZ,KACHA,MAKA,IAAKA,GAAsB,KAAduZ,EAAItV,OAAe,CAC9B,MAAMQ,EAAW8U,EAAI9Z,QAAQrG,IAAI,YAAc,GAE/C,GAAIqL,EACF,OAAOs2B,GAAQt2B,EAAUtO,OAAOyd,OAAOzd,OAAOyd,OAAO,CAAC,EAAGnX,GAAU,CACjE0G,OAAQ,MACRnD,KAAM,OAGZ,CAKA,YAAaT,IAATS,EACKuZ,EAIFvZ,CAAA,GAEX,CAYA,SAASi7B,GAAY53B,EAAK63B,EAAgBC,GAAQ,GAChD,OAAIA,IAAUX,GAAMn3B,IAClBm3B,GAAMn3B,GAAO03B,GAAQ13B,EAAK63B,GACnBV,GAAMn3B,IAGRnD,QAAQI,QAAQk6B,GAAMn3B,GAC/B,CAwBAq3B,eAAeG,GAAcD,GAC3B,IAAI9Z,EAAM,GAAG8Z,EAAK32B,UAAU22B,EAAKz2B,oBAAoBy2B,EAAKv3B,MACtDrD,EAAO,KAEX,IACE,MAAMtD,EAAOk+B,EAAKn7B,QAAQrG,IAAI,iBAAmB,aAE7CsD,EAAKxE,MAAM,cACb8H,QAAa46B,EAAKp4B,OAEdxC,EAAKU,OACPogB,GAAO,KAAO9gB,EAAKU,MAEfV,EAAKo7B,oBACPta,GAAO,KAAO9gB,EAAKo7B,oBAGrBta,GAAO,OAAS1jB,KAAKC,UAAU2C,EAAM,KAAM,IAEpCtD,EAAKxE,MAAM,cACpB8H,QAAa46B,EAAK14B,OAEdlC,IACF8gB,GAAO,OAAS9gB,GAGtB,CAAE,MAAOq7B,GACT,CAEA,MAAM,IAAItF,GAAA/7B,QAAoB8mB,EAAK8Z,EAAK32B,OAAQ22B,EAAKz2B,WAAYnE,EACnE,CAaA,SAASs7B,GAAQ38B,EAAKyT,EAAO,IAG3B,KAFAA,EAAOA,EAAKxO,QAGV,OAAOjF,EAGT,IAAI48B,EAAWnpB,EAAKxX,MAAM,KACtB4F,EAAS7B,EAEb,KAAO6B,GAAU+6B,EAASxhC,QAAQ,CAChC,MAAMwB,EAAMggC,EAASl8B,QAErB,IAAK9D,GAAOoE,MAAMC,QAAQY,GACxB,OAAOA,EAAOlG,KAAI8M,GAAKk0B,GAAQl0B,EAAGm0B,EAAS/gC,KAAK,QAEhDgG,EAASA,EAAOjF,EAEpB,CAEA,OAAOiF,CACT,CAmCA,SAASg7B,GAAU/H,GACjB,OAAI9zB,MAAMC,QAAQ6zB,GACTA,EAGF,CAACA,EACV,CA6CA,SAASgI,GAAUC,EAAO7kC,GACxB,MAAM8kC,EAAUD,EAAM9gC,MAAM,KAAK,GACjC,OAAO+gC,EAAUv+B,KAAKqF,MAAM5L,EAAIw8B,KAAKsI,IAAY,IACnD,CA6CA,SAASC,GAAOC,EAAcrzB,GAC5B,MAAMid,EAAM,CAAC,EAEb,SAASqW,EAAsBC,EAASC,GAClCD,GAAWp8B,MAAMC,QAAQm8B,EAAQE,SACnCF,EAAQE,OAAO3gC,SAAQ,EAACgR,KACtBA,MAEIA,IACFmZ,EAAInZ,GAAQmZ,EAAInZ,IAAS,GACzBmZ,EAAInZ,GAAMxR,KAAKkhC,GACjB,GAGN,CAWA,OATAR,GAAUK,GAAcvgC,SAAQ8L,IACP,gBAAnBA,EAAE4D,cAAkC5D,EAAEoB,KACpC7I,MAAMC,QAAQwH,EAAEoB,IAClBpB,EAAEoB,GAAUlN,SAAQygC,GAAWD,EAAsBC,EAAS30B,KAE9D00B,EAAsB10B,EAAEoB,GAAWpB,G,IAIlCqe,CACT,CA1ZAoP,GAAQiB,MAAQ,CACdoG,IAAG5vB,KACDA,EAAItN,MACJA,IAMA,GAJAy7B,GAAgB,C,KACdnuB,E,MACAtN,IAEU,MAARsN,EAAc,OAAOtN,EACzB,GAAY,KAARsN,EAAa,OAAe,IAARtN,EACxB,GAAY,MAARsN,EAAc,OAAe,KAARtN,EACzB,GAAY,WAARsN,EAAmB,OAAe,KAARtN,EAC9B,GAAY,UAARsN,EAAkB,OAAe,KAARtN,EAC7B,GAAY,MAARsN,EAAc,OAAe,MAARtN,EACzB,GAAY,WAARsN,EAAmB,OAAe,MAARtN,EAC9B,MAAM,IAAI/E,MAAM,6BAA+BqS,EACjD,EAEA6vB,IAAG7vB,KACDA,EAAItN,MACJA,IAMA,GAJAy7B,GAAgB,C,KACdnuB,E,MACAtN,IAEU,MAARsN,EAAc,OAAOtN,EACzB,GAAY,KAARsN,EAAa,OAAOtN,EAAQ,IAChC,GAAIsN,EAAKpU,MAAM,MAAO,OAAO8G,EAAQ,QACrC,GAAIsN,EAAKpU,MAAM,MAAO,OAAO8G,EAAQ,OACrC,MAAM,IAAI/E,MAAM,6BAA+BqS,EACjD,EAEA8vB,IAAIC,IACF5B,GAAgB4B,GACTA,EAAGr9B,QA6Bd61B,GAAQgB,cAAgB8E,GAWxB9F,GAAQe,eAAiBkF,GAqEzBjG,GAAQhwB,QAAUk2B,GAmBlBlG,GAAQc,YAAcsF,GAgBtBpG,GAAQa,0BAPR,SAAmC4G,EAAU,IAAKpB,GAChD,MAAM73B,EAAMzG,OAAO0/B,GAASrkC,QAAQ,OAAQ,KAAO,WACnD,OAAOgjC,GAAY53B,EAAK63B,GAAgBqB,OAAMC,IAC5C,MAAM,IAAIviC,MAAM,mDAAmDoJ,OAASm5B,IAAI,GAEpF,EAwCA3H,GAAQY,cAAgBoF,GAkCxBhG,GAAQW,QAAU8F,GAyBlBzG,GAAQU,QAfR,SAAiB52B,EAAKyT,EAAMpT,EAAOy9B,GAAc,GAY/C,OAXArqB,EAAKxO,OAAOhJ,MAAM,KAAK8hC,QAAO,CAACpV,EAAK/rB,EAAKohC,EAAKC,KAC5C,IAAItV,GAAOqV,IAAQC,EAAI7iC,OAAS,EAO9B,OAJIutB,QAAoB/nB,IAAb+nB,EAAI/rB,IAAsBkhC,IACnCnV,EAAI/rB,GAAOqhC,EAAID,EAAM,GAAGzkC,MAAM,YAAc,GAAK,CAAC,GAG7CovB,EAAMA,EAAI/rB,QAAOgE,EANxB+nB,EAAI/rB,GAAOyD,CAOb,GACCL,GACIA,CACT,EAkBAk2B,GAAQS,UAAYkG,GAcpB3G,GAAQQ,SANR,SAAkBjjB,EAAMkqB,GACtB,OAAIlqB,EAAKla,MAAM,UACXka,EAAKla,MAAM,QADiBka,EAEzBxV,OAAO0/B,GAAW,IAAIrkC,QAAQ,OAAQ,IAAM,IAAMma,EAAKna,QAAQ,OAAQ,GAChF,EAuBA48B,GAAQO,aAXR,SAAsByH,EAAY,EAAGC,EAAU,kEAC7C,MAAMt8B,EAAS,GACT3F,EAAMiiC,EAAQ/iC,OAEpB,KAAO8iC,KACLr8B,EAAO1F,KAAKgiC,EAAQ3qB,OAAOxW,KAAKohC,MAAMphC,KAAKqhC,SAAWniC,KAGxD,OAAO2F,EAAOhG,KAAK,GACrB,EAeAq6B,GAAQM,UAAYsG,GA6BpB5G,GAAQK,yBApBR,SAAkC+H,EAAepmC,GAC/C,MAAMqmC,EAAMvhC,KAAKohC,MAAMrlC,KAAKwlC,MAAQ,KAEpC,GAAID,EAAcE,WAChB,OAAOD,EAAMD,EAAcE,WAI7B,GAAIF,EAAcG,aAAc,CAC9B,IAAIC,EAAY5B,GAAUwB,EAAcG,aAAcvmC,GAEtD,GAAIwmC,GAAaA,EAAUC,IACzB,OAAOD,EAAUC,GAErB,CAGA,OAAOJ,EAAM,GACf,EA4CArI,GAAQI,OAAS2G,GAoBjB/G,GAAQG,QALR,SAAiB6G,EAAcrzB,GAC7B,MAAM+0B,EAAO3B,GAAOC,EAAcrzB,GAClC,MAAO,IAAIgjB,IAAUA,EAAMgS,QAAOlxB,GAAQA,EAAO,KAAMixB,IAAMb,QAAO,CAAC7kC,EAAMyU,IAASzU,EAAKwa,OAAOkrB,EAAKjxB,EAAO,MAAM,GACpH,EAsCAuoB,GAAQE,gBA9BR,SAAyB0I,EAAazyB,GAEpC,MAEMyB,GAFY6uB,GAAQmC,EAAa,oBAAsB,IAEtCC,MAAKzL,GAAKA,EAAEv1B,OAASsO,IAE5C,IAAKyB,EACH,MAAM,IAAIxS,MAAM,aAAa+Q,2CAI/B,IAAKrL,MAAMC,QAAQ6M,EAAKkxB,aACtB,MAAM,IAAI1jC,MAAM,uCAAuC+Q,0BAIzD,GAAoB,WAAhBA,GAA6ByB,EAAKkxB,YAAYD,MAAKE,GAAe,OAAVA,EAAE5iC,OAC5D,MAAO,MAIT,MAAMssB,EAAM8O,GAAAE,cAAyBoH,MAAKj2B,GAAKgF,EAAKkxB,YAAYD,MAAKE,GAAKA,EAAE5iC,MAAQyM,MAEpF,IAAK6f,EACH,MAAM,IAAIrtB,MAAM,sCAAwC+Q,GAG1D,OAAOsc,CACT,EA0GAuN,GAAQC,gBA/FR4F,eAA+B9zB,EAAQi3B,EAAQ,IAAKC,EAAS,KAS3D,GALqB,mBAAVl3B,IACTA,QAAeA,KAIbA,GAA2B,iBAAVA,EACnB,OAAOA,EAIT,GAAqB,iBAAVA,EAGT,OAFA2zB,GAAO,4DAA6D3zB,GAE7DrP,KAIT,GAAc,SAAVqP,EACF,OAAOrP,KAIT,GAAc,WAAVqP,EACF,OAAOm3B,OAIT,GAAc,QAAVn3B,EACF,OAAOgkB,IAIT,GAAc,UAAVhkB,EAAoB,CACtB,IAAIlG,EACAs9B,EAAe,KAEnB,IAGE,GAFAA,EAAehtB,OAAOrL,KAAK,GAAI,mBAE1Bq4B,EACH,MAAM,IAAI/jC,MAAM,kCAEpB,CAAE,MAAOmE,GACPsC,EAAQtC,CACV,CAEA,OAAK4/B,IACHzD,GAAO,kDAAmD75B,GAEnDnJ,KAIX,CAGA,GAAc,SAAVqP,EAAmB,CACrB,IAAIlG,EACAs9B,EAAe,KAEnB,IAGE,GAFAA,EAAehtB,OAAOrL,KAAK,GAAI,iBAAkB,CAAC,UAAYm4B,EAAQ,SAAWD,EAAO,YAAa,cAAe,WAAY,QAAUI,OAAOH,OAASA,GAAU,EAAG,SAAWG,OAAOJ,MAAQA,GAAS,GAAGrjC,KAAK,OAE7MwjC,EACH,MAAM,IAAI/jC,MAAM,uCAEpB,CAAE,MAAOmE,GACPsC,EAAQtC,CACV,CAEA,OAAK4/B,IACHzD,GAAO,kDAAmD75B,GAEnDnJ,KAIX,CAGA,MAAM2mC,EAAaC,OAAOv3B,GAE1B,OAAIs3B,IAIJ3D,GAAO,gDAAiD3zB,GAEjDrP,KACT,E,OKjlBA6mC,G,YCZIC,GAAQ,SAAUC,GACpB,OAAOA,GAAMA,EAAG3iC,MAAQA,MAAQ2iC,CAClC,EAGAC,GAEEF,GAA2B,iBAAdG,YAA0BA,aACvCH,GAAuB,iBAAVrtB,QAAsBA,SACnCqtB,GAAqB,iBAAR9mC,MAAoBA,OACjC8mC,GAAuB,iBAAV3zB,GAAsBA,IAElC,WAAc,OAAOhR,IAAM,CAA3B,IAAmC+kC,SAAS,cAATA,G,UCHtCC,GCNAC,KCHAC,GAAiB,SAAU/hC,GACzB,IACE,QAASA,GACX,CAAE,MAAO6D,GACP,OAAO,CACT,CACF,IDHwB,WACtB,OAA8E,GAAvEvK,OAAO8C,eAAe,CAAC,EAAG,EAAG,CAAEG,IAAK,WAAc,OAAO,CAAG,IAAK,EAC1E,IDJA,IAAIylC,GAA6B,CAAC,EAAEC,qBAChCC,GAA2B5oC,OAAO2S,yBAGlCk2B,GAAcD,KAA6BF,GAA2BtmC,KAAK,CAAE,EAAG,GAAK,GAIzFmmC,GAAYM,GAAc,SAA8BC,GACtD,IAAIn4B,EAAai4B,GAAyBrlC,KAAMulC,GAChD,QAASn4B,GAAcA,EAAW5N,UACpC,EAAI2lC,G,OGZJK,GAAiB,SAAUC,EAAQngC,GACjC,MAAO,CACL9F,aAAuB,EAATimC,GACdhmC,eAAyB,EAATgmC,GAChBp4B,WAAqB,EAATo4B,GACZngC,MAAOA,EAEX,E,gBCPIogC,GAAW,CAAC,EAAEvlC,SAElBwlC,GAAiB,SAAUf,GACzB,OAAOc,GAAS7mC,KAAK+lC,GAAIvjC,MAAM,GAAG,EACpC,ECDA,IAAIukC,GAAQ,GAAG1kC,MAGf2kC,GAAiBX,IAAM,WAGrB,OAAQzoC,OAAO,KAAK2oC,qBAAqB,EAC3C,IAAK,SAAUR,GACb,MAAsB,UAAfe,GAAQf,GAAkBgB,GAAM/mC,KAAK+lC,EAAI,IAAMnoC,OAAOmoC,EAC/D,EAAInoC,O,OCVJqpC,GAAiB,SAAUlB,GACzB,GAAU/+B,MAAN++B,EAAiB,MAAMx/B,UAAU,wBAA0Bw/B,GAC/D,OAAOA,CACT,ECDAmB,GAAiB,SAAUnB,GACzB,OAAOiB,GAAcC,GAAuBlB,GAC9C,E,UCNAoB,GAAiB,SAAUpB,GACzB,MAAqB,iBAAPA,EAAyB,OAAPA,EAA4B,mBAAPA,CACvD,ECIAqB,GAAiB,SAAUz8B,EAAO08B,GAChC,IAAKF,GAASx8B,GAAQ,OAAOA,EAC7B,IAAI6P,EAAIza,EACR,GAAIsnC,GAAoD,mBAAxB7sB,EAAK7P,EAAMrJ,YAA4B6lC,GAASpnC,EAAMya,EAAGxa,KAAK2K,IAAS,OAAO5K,EAC9G,GAAmC,mBAAvBya,EAAK7P,EAAM28B,WAA2BH,GAASpnC,EAAMya,EAAGxa,KAAK2K,IAAS,OAAO5K,EACzF,IAAKsnC,GAAoD,mBAAxB7sB,EAAK7P,EAAMrJ,YAA4B6lC,GAASpnC,EAAMya,EAAGxa,KAAK2K,IAAS,OAAO5K,EAC/G,MAAMwG,UAAU,0CAClB,E,OCbIghC,GAAiB,CAAC,EAAE1pC,eAExB2pC,GAAiB,SAAUzB,EAAI/iC,GAC7B,OAAOukC,GAAevnC,KAAK+lC,EAAI/iC,EACjC,E,UCDIykC,GAAWzB,GAAAv0B,SAEXi2B,GAASP,GAASM,KAAaN,GAASM,GAASE,eAErDC,GAAiB,SAAU7B,GACzB,OAAO2B,GAASD,GAASE,cAAc5B,GAAM,CAAC,CAChD,ECJA8B,IAAkBzB,KAAgBC,IAAM,WACtC,OAEQ,GAFDzoC,OAAO8C,eAAeknC,GAAc,OAAQ,IAAK,CACtD/mC,IAAK,WAAc,OAAO,CAAG,IAC5B84B,CACL,IdDA,IeCAmO,G,GfDIC,GAAiCnqC,OAAO2S,yB,GAI5Cs1B,GAAYO,GAAc2B,GAAiC,SAAkCC,EAAGC,GAG9F,GAFAD,EAAId,GAAgBc,GACpBC,EAAIb,GAAYa,GAAG,GACfJ,GAAgB,IAClB,OAAOE,GAA+BC,EAAGC,EAC3C,CAAE,MAAO9/B,GAAqB,CAC9B,GAAIq/B,GAAIQ,EAAGC,GAAI,OAAOtB,IAA0BR,GAA6BnmC,KAAKgoC,EAAGC,GAAID,EAAEC,GAC7F,E,MgBjBAC,GAAiB,SAAUnC,GACzB,IAAKoB,GAASpB,GACZ,MAAMx/B,UAAUlC,OAAO0hC,GAAM,qBAC7B,OAAOA,CACX,EDDA,IAAIoC,GAAuBvqC,OAAO8C,eAIlConC,GAAY1B,GAAc+B,GAAuB,SAAwBH,EAAGC,EAAGG,GAI7E,GAHAF,GAASF,GACTC,EAAIb,GAAYa,GAAG,GACnBC,GAASE,GACLP,GAAgB,IAClB,OAAOM,GAAqBH,EAAGC,EAAGG,EACpC,CAAE,MAAOjgC,GAAqB,CAC9B,GAAI,QAASigC,GAAc,QAASA,EAAY,MAAM7hC,UAAU,2BAEhE,MADI,UAAW6hC,IAAYJ,EAAEC,GAAKG,EAAW3hC,OACtCuhC,CACT,EEfAK,GAAiBjC,GAAc,SAAUh2B,EAAQpN,EAAKyD,GACpD,OAAOqhC,GAAuB13B,EAAQpN,EAAK2jC,GAAyB,EAAGlgC,GACzE,EAAI,SAAU2J,EAAQpN,EAAKyD,GAEzB,OADA2J,EAAOpN,GAAOyD,EACP2J,CACT,E,UCNAk4B,GAAiB,SAAUtlC,EAAKyD,GAC9B,IACE4hC,GAA4BrC,GAAQhjC,EAAKyD,EAC3C,CAAE,MAAO0B,GACP69B,GAAOhjC,GAAOyD,CAChB,CAAE,OAAOA,CACX,E,gBCNI8hC,GAAS,qBACTC,GAAQxC,GAAOuC,KAAWD,GAAUC,GAAQ,CAAC,GAEjDE,GAAiBD,GCJjB,IAAIE,GAAmBxC,SAAS5kC,SAGE,mBAAvBmnC,GAAAE,gBACTF,GAAAE,cAAsB,SAAU5C,GAC9B,OAAO2C,GAAiB1oC,KAAK+lC,EAC/B,GAGF6C,GAAiBH,GAAAE,c,UCRbE,GAAU7C,GAAA8C,QAEdC,GAAoC,mBAAZF,IAA0B,cAAc1qC,KAAKyqC,GAAcC,K,WCFlFG,GAAiB,SAAUhmC,EAAKyD,GAC/B,OAAOgiC,GAAMzlC,KAASylC,GAAMzlC,QAAiBgE,IAAVP,EAAsBA,EAAQ,CAAC,EACpE,GAAG,WAAY,IAAIlE,KAAK,CACtBq9B,QAAS,QACT50B,KAAyB,SACzBi+B,UAAW,yC,OCRTC,GAAK,EACLC,GAAU/lC,KAAKqhC,SAEnB2E,GAAiB,SAAUpmC,GACzB,MAAO,UAAYqB,YAAe2C,IAARhE,EAAoB,GAAKA,GAAO,QAAUkmC,GAAKC,IAAS7nC,SAAS,GAC7F,ECFA,IAAI+nC,GAAOL,GAAO,QAElBM,GAAiB,SAAUtmC,GACzB,OAAOqmC,GAAKrmC,KAASqmC,GAAKrmC,GAAOomC,GAAIpmC,GACvC,E,UCPAumC,GAAiB,CAAC,ECSlB,IACIC,GAAKC,GAAKC,GADVC,GAAU3D,GAAA8C,QAgBd,GAAIC,GAAiB,CACnB,IAAIa,GAAQnB,GAAA9f,QAAiB8f,GAAA9f,MAAe,IAAIghB,IAC5CE,GAAQD,GAAM/oC,IACdipC,GAAQF,GAAMx/B,IACd2/B,GAAQH,GAAM7oC,IAClByoC,GAAM,SAAUzD,EAAIiE,GAGlB,OAFAA,EAASC,OAASlE,EAClBgE,GAAM/pC,KAAK4pC,GAAO7D,EAAIiE,GACfA,CACT,EACAP,GAAM,SAAU1D,GACd,OAAO8D,GAAM7pC,KAAK4pC,GAAO7D,IAAO,CAAC,CACnC,EACA2D,GAAM,SAAU3D,GACd,OAAO+D,GAAM9pC,KAAK4pC,GAAO7D,EAC3B,CACF,KAAO,CACL,IAAImE,GAAQZ,GAAU,SACtBC,GAAWW,KAAS,EACpBV,GAAM,SAAUzD,EAAIiE,GAGlB,OAFAA,EAASC,OAASlE,EAClBsC,GAA4BtC,EAAImE,GAAOF,GAChCA,CACT,EACAP,GAAM,SAAU1D,GACd,OAAOyB,GAAUzB,EAAImE,IAASnE,EAAGmE,IAAS,CAAC,CAC7C,EACAR,GAAM,SAAU3D,GACd,OAAOyB,GAAUzB,EAAImE,GACvB,CACF,CChDA,IAAIC,IDkDJC,GAAiB,CACfrpC,IAAKyoC,GACL3oC,IAAK4oC,GACLr/B,IAAKs/B,GACLW,QAjDY,SAAUtE,GACtB,OAAO2D,GAAI3D,GAAM0D,GAAI1D,GAAMyD,GAAIzD,EAAI,CAAC,EACtC,EAgDEuE,UA9Cc,SAAUC,GACxB,OAAO,SAAUxE,GACf,IAAIpd,EACJ,IAAKwe,GAASpB,KAAQpd,EAAQ8gB,GAAI1D,IAAK5hC,OAASomC,EAC9C,MAAMhkC,UAAU,0BAA4BgkC,EAAO,aACnD,OAAO5hB,CACX,CACF,IChBuB9nB,IACnB2pC,GAAuBJ,GAAAC,QACvBI,GAAWpmC,OAAOA,QAAQhC,MAAM,WAEnCqoC,GAAiB,SAAU1C,EAAGhlC,EAAKyD,EAAOvC,GACzC,IAGIykB,EAHAgiB,IAASzmC,KAAYA,EAAQymC,OAC7BC,IAAS1mC,KAAYA,EAAQvD,WAC7BkqC,IAAc3mC,KAAYA,EAAQ2mC,YAElB,mBAATpkC,IACS,iBAAPzD,GAAoBwkC,GAAI/gC,EAAO,SACxC4hC,GAA4B5hC,EAAO,OAAQzD,IAE7C2lB,EAAQ6hB,GAAqB/jC,IAClBsP,SACT4S,EAAM5S,OAAS00B,GAASxoC,KAAmB,iBAAPe,EAAkBA,EAAM,MAG5DglC,IAAMhC,IAIE2E,GAEAE,GAAe7C,EAAEhlC,KAC3B4nC,GAAS,UAFF5C,EAAEhlC,GAIP4nC,EAAQ5C,EAAEhlC,GAAOyD,EAChB4hC,GAA4BL,EAAGhlC,EAAKyD,IATnCmkC,EAAQ5C,EAAEhlC,GAAOyD,EAChB6hC,GAAUtlC,EAAKyD,EAUxB,GAAGy/B,SAAS7gC,UAAW,YAAY,WACjC,MAAsB,mBAARlE,MAAsBgpC,GAAiBhpC,MAAM4U,QAAU6yB,GAAcznC,KACrF,I,mBCrCA2pC,GAAiB9E,GCCjB,ICIA+E,GDJIC,GAAY,SAAUC,GACxB,MAA0B,mBAAZA,EAAyBA,OAAWjkC,CACpD,EAEAkkC,GAAiB,SAAU1sC,EAAWoM,GACpC,OAAOmF,UAAUvO,OAAS,EAAIwpC,GAAUF,GAAKtsC,KAAewsC,GAAUhF,GAAOxnC,IACzEssC,GAAKtsC,IAAcssC,GAAKtsC,GAAWoM,IAAWo7B,GAAOxnC,IAAcwnC,GAAOxnC,GAAWoM,EAC3F,E,aEVIugC,GAAO/nC,KAAKgoC,KACZC,GAAQjoC,KAAKohC,MAIjB8G,GAAiB,SAAUC,GACzB,OAAOh0B,MAAMg0B,GAAYA,GAAY,GAAKA,EAAW,EAAIF,GAAQF,IAAMI,EACzE,ECLA,IAAIC,GAAMpoC,KAAKwwB,IAIf6X,GAAiB,SAAUF,GACzB,OAAOA,EAAW,EAAIC,GAAIF,GAAUC,GAAW,kBAAoB,CACrE,E,OCNIG,GAAMtoC,KAAKgS,IACXu2B,GAAMvoC,KAAKwwB,IAKfgY,GAAiB,SAAUnsC,EAAO+B,GAChC,IAAIqqC,EAAUP,GAAU7rC,GACxB,OAAOosC,EAAU,EAAIH,GAAIG,EAAUrqC,EAAQ,GAAKmqC,GAAIE,EAASrqC,EAC/D,ECNA,IAAIsqC,GAAe,SAAUC,GAC3B,OAAO,SAAUC,EAAOC,EAAIC,GAC1B,IAGIzlC,EAHAuhC,EAAId,GAAgB8E,GACpBxqC,EAASiqC,GAASzD,EAAExmC,QACpB/B,EAAQmsC,GAAgBM,EAAW1qC,GAIvC,GAAIuqC,GAAeE,GAAMA,GAAI,KAAOzqC,EAAS/B,GAG3C,IAFAgH,EAAQuhC,EAAEvoC,OAEGgH,EAAO,OAAO,OAEtB,KAAMjF,EAAS/B,EAAOA,IAC3B,IAAKssC,GAAetsC,KAASuoC,IAAMA,EAAEvoC,KAAWwsC,EAAI,OAAOF,GAAetsC,GAAS,EACnF,OAAQssC,IAAe,CAC3B,CACF,E,GAEiB,CAGfI,SAAUL,IAAa,GAGvBzlC,QAASylC,IAAa,IC5BpBzlC,QAGJ+lC,GAAiB,SAAUh8B,EAAQtO,GACjC,IAGIkB,EAHAglC,EAAId,GAAgB92B,GACpBjO,EAAI,EACJ8F,EAAS,GAEb,IAAKjF,KAAOglC,GAAIR,GAAI+B,GAAYvmC,IAAQwkC,GAAIQ,EAAGhlC,IAAQiF,EAAO1F,KAAKS,GAEnE,KAAOlB,EAAMN,OAASW,GAAOqlC,GAAIQ,EAAGhlC,EAAMlB,EAAMK,SAC7CkqC,GAAQpkC,EAAQjF,IAAQiF,EAAO1F,KAAKS,IAEvC,OAAOiF,CACT,E,IChBAqkC,G,MNGIC,IOFJC,GAAiB,CACf,cACA,iBACA,gBACA,uBACA,iBACA,WACA,YPLe1yB,OAAmB,SAAU,aAI9CixB,GAAYntC,OAAO2J,qBAAuB,SAA6BygC,GACrE,OAAOoE,GAAmBpE,EAAGuE,GAC/B,EMTAD,GAAY1uC,OAAO6uC,sBEMnBC,GAAiBxB,GAAW,UAAW,YAAc,SAAiBnF,GACpE,IAAIjjC,EAAOioC,GAA4B7C,GAASnC,IAC5C0G,EAAwBH,GAC5B,OAAOG,EAAwB3pC,EAAKgX,OAAO2yB,EAAsB1G,IAAOjjC,CAC1E,ECLA6pC,GAAiB,SAAUt+B,EAAQ0H,GAIjC,IAHA,IAAIjT,EAAO4pC,GAAQ32B,GACfrV,EAAiBonC,GACjBv3B,EAA2Bs1B,GACtB1jC,EAAI,EAAGA,EAAIW,EAAKtB,OAAQW,IAAK,CACpC,IAAIa,EAAMF,EAAKX,GACVqlC,GAAIn5B,EAAQrL,IAAMtC,EAAe2N,EAAQrL,EAAKuN,EAAyBwF,EAAQ/S,GACtF,CACF,E,UCXI4pC,GAAc,kBAEdC,GAAW,SAAUC,EAASC,GAChC,IAAItmC,EAAQumC,GAAKC,GAAUH,IAC3B,OAAOrmC,GAASymC,IACZzmC,GAAS0mC,KACW,mBAAbJ,EAA0B1G,GAAM0G,KACrCA,EACR,EAEIE,GAAYJ,GAASO,UAAY,SAAUC,GAC7C,OAAOhpC,OAAOgpC,GAAQ3tC,QAAQktC,GAAa,KAAKpoC,aAClD,EAEIwoC,GAAOH,GAAS1c,KAAO,CAAC,EACxBgd,GAASN,GAASS,OAAS,IAC3BJ,GAAWL,GAASU,SAAW,IAEnCC,GAAiBX,GCEjBY,GAAiB,SAAUvpC,EAAS6R,GAClC,IAGY1H,EAAQrL,EAAK0qC,EAAgBC,EAAgBp/B,EAHrDq/B,EAAS1pC,EAAQmK,OACjBw/B,EAAS3pC,EAAQc,OACjB8oC,EAAS5pC,EAAQ6pC,KASrB,GANE1/B,EADEw/B,EACO7H,GACA8H,EACA9H,GAAO4H,IAAWtF,GAAUsF,EAAQ,CAAC,IAEpC5H,GAAO4H,IAAW,CAAC,GAAGvoC,UAEtB,IAAKrC,KAAO+S,EAAQ,CAQ9B,GAPA43B,EAAiB53B,EAAO/S,GAGtB0qC,EAFExpC,EAAQ2mC,aACVt8B,EAAay/B,GAAyB3/B,EAAQrL,KACfuL,EAAW9H,MACpB4H,EAAOrL,IACtBwqC,GAASK,EAAS7qC,EAAM4qC,GAAUE,EAAS,IAAM,KAAO9qC,EAAKkB,EAAQ+pC,cAE5CjnC,IAAnB0mC,EAA8B,CAC3C,UAAWC,UAA0BD,EAAgB,SACrDf,GAA0BgB,EAAgBD,EAC5C,EAEIxpC,EAAQwL,MAASg+B,GAAkBA,EAAeh+B,OACpD24B,GAA4BsF,EAAgB,QAAQ,GAGtDjD,GAASr8B,EAAQrL,EAAK2qC,EAAgBzpC,EACxC,CACF,E,gBCjDAgqC,GAAiB9mC,MAAMC,SAAW,SAAiB6zB,GACjD,MAAuB,SAAhB4L,GAAQ5L,EACjB,E,UCNAiT,GAAiB,SAAUpI,GACzB,GAAiB,mBAANA,EACT,MAAMx/B,UAAUlC,OAAO0hC,GAAM,sBAC7B,OAAOA,CACX,ECDAqI,GAAiB,SAAU5zB,EAAI6zB,EAAM7sC,GAEnC,GADA2sC,GAAU3zB,QACGxT,IAATqnC,EAAoB,OAAO7zB,EAC/B,OAAQhZ,GACN,KAAK,EAAG,OAAO,WACb,OAAOgZ,EAAGxa,KAAKquC,EACjB,EACA,KAAK,EAAG,OAAO,SAAU1U,GACvB,OAAOnf,EAAGxa,KAAKquC,EAAM1U,EACvB,EACA,KAAK,EAAG,OAAO,SAAUA,EAAGtQ,GAC1B,OAAO7O,EAAGxa,KAAKquC,EAAM1U,EAAGtQ,EAC1B,EACA,KAAK,EAAG,OAAO,SAAUsQ,EAAGtQ,EAAGxI,GAC7B,OAAOrG,EAAGxa,KAAKquC,EAAM1U,EAAGtQ,EAAGxI,EAC7B,EAEF,OAAO,WACL,OAAOrG,EAAGpa,MAAMiuC,EAAMt+B,UACxB,CACF,EChBA,IAAIu+B,GAAmB,SAAUjgC,EAAQkgC,EAAUx4B,EAAQy4B,EAAW5jB,EAAO5I,EAAOysB,EAAQnkC,GAM1F,IALA,IAGIokC,EAHAC,EAAc/jB,EACdgkB,EAAc,EACdC,IAAQJ,GAASL,GAAKK,EAAQnkC,EAAS,GAGpCskC,EAAcJ,GAAW,CAC9B,GAAII,KAAe74B,EAAQ,CAGzB,GAFA24B,EAAUG,EAAQA,EAAM94B,EAAO64B,GAAcA,EAAaL,GAAYx4B,EAAO64B,GAEzE5sB,EAAQ,GAAKksB,GAAQQ,GACvBC,EAAcL,GAAiBjgC,EAAQkgC,EAAUG,EAASjD,GAASiD,EAAQltC,QAASmtC,EAAa3sB,EAAQ,GAAK,MACzG,CACL,GAAI2sB,GAAe,iBAAkB,MAAMpoC,UAAU,sCACrD8H,EAAOsgC,GAAeD,CACxB,CAEAC,GACF,CACAC,GACF,CACA,OAAOD,CACT,EAEAG,GAAiBR,G,OC3BjBS,GAAiB,SAAUxD,GACzB,OAAO3tC,OAAOqpC,GAAuBsE,GACvC,E,gBCJAyD,ICAAC,KAAmBrxC,OAAO6uC,wBAA0BpG,IAAM,WAGxD,OAAQhiC,OAAOqB,SACjB,ODFMA,OAAOgK,MAEkB,iBAAnBhK,OAAOkB,SECnB,IAAIsoC,GAAwBlG,GAAO,OAC/BmG,GAASnJ,GAAAtgC,OACT0pC,GAAwBJ,GAAoBG,GAASA,IAAUA,GAAOE,eAAiBjG,GCLvFkG,IDOJC,GAAiB,SAAU9sC,GAIvB,OAHG+kC,GAAI0H,GAAuBzsC,KAC1BwsC,IAAiBzH,GAAI2H,GAAQ1sC,GAAOysC,GAAsBzsC,GAAQ0sC,GAAO1sC,GACxEysC,GAAsBzsC,GAAQ2sC,GAAsB,UAAY3sC,IAC9DysC,GAAsBzsC,EACjC,GCZ8B,WAI9B+sC,GAAiB,SAAUC,EAAejuC,GACxC,IAAIkuC,EASF,OARExB,GAAQuB,KAGM,mBAFhBC,EAAID,EAAcpjC,cAEaqjC,IAAMtoC,QAAS8mC,GAAQwB,EAAErqC,WAC/C8hC,GAASuI,IAEN,QADVA,EAAIA,EAAEJ,OACUI,OAAI1oC,GAH+C0oC,OAAI1oC,GAKlE,SAAWA,IAAN0oC,EAAkBtoC,MAAQsoC,GAAc,IAAXluC,EAAe,EAAIA,EAChE,ECTAisC,GAAE,CAAEp/B,OAAQ,QAASshC,OAAO,GAAQ,CAClCC,KAAM,WACJ,IAAIC,EAAW9/B,UAAUvO,OAASuO,UAAU,QAAK/I,EAC7CghC,EAAI+G,GAAS5tC,MACbqtC,EAAY/C,GAASzD,EAAExmC,QACvBsuC,EAAIN,GAAmBxH,EAAG,GAE9B,OADA8H,EAAEtuC,OAASstC,GAAiBgB,EAAG9H,EAAGA,EAAGwG,EAAW,OAAgBxnC,IAAb6oC,EAAyB,EAAIvE,GAAUuE,IACnFC,CACT,I,sBCbFC,GAAiBnyC,OAAOkF,MAAQ,SAAcklC,GAC5C,OAAOoE,GAAmBpE,EAAGwE,GAC/B,ECAAwD,GAAiB5J,GAAcxoC,OAAO68B,iBAAmB,SAA0BuN,EAAGiI,GACpF/H,GAASF,GAKT,IAJA,IAGIhlC,EAHAF,EAAOitC,GAAWE,GAClBzuC,EAASsB,EAAKtB,OACd/B,EAAQ,EAEL+B,EAAS/B,GAAOqoC,GAAuBE,EAAGhlC,EAAMF,EAAKrD,KAAUwwC,EAAWjtC,IACjF,OAAOglC,CACT,E,UCbAkI,GAAiBhF,GAAW,WAAY,mBCMxC,IA2CIiF,GAzCAC,GAAY,YACZC,GAAS,SACTC,GAAWhH,GAAU,YAErBiH,GAAmB,WAA0B,EAE7CC,GAAY,SAAUC,GACxB,MARO,IAQKJ,GATL,IASmBI,EAAnBC,KAAwCL,GATxC,GAUT,EAkCIM,GAAkB,WACpB,IAEER,GAAkB1+B,SAASm/B,QAAU,IAAIC,cAAc,WACzD,CAAE,MAAO1oC,GAAsB,CA1BF,IAIzB2oC,EAFAC,EACAC,EAwBJL,GAAkBR,GApCY,SAAUc,GACxCA,EAAgBC,MAAMV,GAAU,KAChCS,EAAgBE,QAChB,IAAIC,EAAOH,EAAgBI,aAAazzC,OAExC,OADAqzC,EAAkB,KACXG,CACT,CA8BsCE,CAA0BnB,KAzB1DY,EAASnJ,GAAsB,UAC/BoJ,EAAK,OAASX,GAAS,IAE3BU,EAAO1P,MAAMrtB,QAAU,OACvBk8B,GAAAqB,YAAiBR,GAEjBA,EAAOl1B,IAAMxX,OAAO2sC,IACpBF,EAAiBC,EAAOS,cAAc//B,UACvBrE,OACf0jC,EAAeI,MAAMV,GAAU,sBAC/BM,EAAeK,QACRL,EAAe5rC,GAgBtB,IADA,IAAI1D,EAASgrC,GAAAhrC,OACNA,YAAiBmvC,GAAgBP,IAAW5D,GAAYhrC,IAC/D,OAAOmvC,IACT,EAEApH,GAAW+G,KAAY,EAIvBmB,GAAiB7zC,OAAOwO,QAAU,SAAgB47B,EAAGiI,GACnD,IAAIhoC,EAQJ,OAPU,OAAN+/B,GACFuI,GAAiBH,IAAalI,GAASF,GACvC//B,EAAS,IAAIsoC,GACbA,GAAiBH,IAAa,KAE9BnoC,EAAOqoC,IAAYtI,GACd//B,EAAS0oC,UACM3pC,IAAfipC,EAA2BhoC,EAAS+nC,GAAiB/nC,EAAQgoC,EACtE,ECzEA,IAAIyB,GAAcnC,GAAgB,eAC9BoC,GAAiBvqC,MAAM/B,UAIQ2B,MAA/B2qC,GAAeD,KACjB5J,GAAuB6J,GAAgBD,GAAa,CAClD9wC,cAAc,EACd6F,MAAOgrC,GAAO,QAKD,SAAUzuC,GACzB2uC,GAAeD,IAAa1uC,IAAO,CACrC,CCdA4uC,CAAiB,QCCjBh0C,OAAO8C,eAAemxC,GAAS,aAAc,CAC3CprC,OAAO,I,UCLT7I,OAAO8C,eAAeoxC,GAAS,aAAc,CAC3CrrC,OAAO,IAGTqrC,GAAQrwC,QAAU,CAChBswC,QAAS,4CACTC,aAAc,qHACdC,WAAY,8DACZC,cAAe,8FDQjB,MAAM1mC,SACJ2mC,IAC6B,oBAApBpQ,gBAAkCtpB,OAAS9V,EAAA,SAEhDyvC,GAAQ9V,GAAAz9B,MAAY2B,OAAO,UA4EjC,SAAS6xC,GAAWjsC,EAAKyT,EAAMy4B,EAAOC,EAAOC,EAAQvnC,GACnD,MAAM+X,EAAOsZ,GAAAW,QAAc72B,EAAKyT,GAEhC,GAAImJ,EAAM,CACR,MAAM3b,EAAUD,MAAMC,QAAQ2b,GAC9B,OAAOrb,QAAQ8qC,IAAInW,GAAAS,UAAgB/Z,GAAMiiB,OAAOtnC,SAASoE,KAAI,CAACgR,EAAM5Q,KAClE,MAAMuwC,EAAM3/B,EAAK4/B,UAEjB,GAAID,EACF,OAlCR,SAAgBE,EAAOL,EAAOC,EAAQvnC,GAiBpC,OAhBKsnC,EAAMK,KAITL,EAAMK,GAASJ,EAAOlmC,QAAQ,CAC5BxB,IAAK8nC,E,OACL3nC,IACCvB,MAAKsX,IACNuxB,EAAMK,GAAS5xB,EACRA,KACN7Y,IAED,aADOoqC,EAAMK,GACPzqC,CAAA,KAIHR,QAAQI,QAAQwqC,EAAMK,GAC/B,CAgBeC,CAAOH,EAAKH,EAAOC,EAAQvnC,GAAQvB,MAAKopC,IACzCR,IACEjrC,EACEwS,EAAKxT,QAAQ,OAAQ,EACvBi2B,GAAAU,QAAc52B,EAAK,GAAGyT,EAAKna,QAAQ,KAAM,IAAIyC,QAAS2wC,GAEtDxW,GAAAU,QAAc52B,EAAK,GAAGyT,KAAQ1X,IAAK2wC,GAGrCxW,GAAAU,QAAc52B,EAAKyT,EAAMi5B,G,IAG5B9O,OAAMC,IAEP,GAAkB,MAAdA,EAAGv4B,OACL,MAAMu4B,CAAA,GAEV,IAGN,CACF,CAWA,SAAS8O,GAAY3sC,EAAK4sC,EAAaT,EAAOC,EAAQvnC,GAEpD,IAAIgoC,EAAQ3W,GAAAS,UAAgBiW,EAAYE,mBAAmBjO,OAAOtnC,SACjEoE,KAAI8X,GAAQxV,OAAOwV,GAAMxO,SAAQ45B,OAAOtnC,SAczC,GAXAs1C,EAAQA,EAAMhO,QAAO,CAAC/1B,EAAG/M,MACT8wC,EAAM5sC,QAAQ6I,EAAG/M,EAAI,IAEvB,KACViwC,GAAM,iCAAoCljC,IACnC,MAMN+jC,EAAMzxC,OACT,OAAOmG,QAAQI,UAKjB,MAAMorC,EAAS,CAAC,EAChBF,EAAMlwC,SAAQ8W,IACZ,MAAMvX,EAAMuX,EAAKxX,MAAM,KAAKb,OAEvB2xC,EAAO7wC,KACV6wC,EAAO7wC,GAAO,IAGhB6wC,EAAO7wC,GAAKC,KAAKsX,EAAA,IAInB,IAAIu5B,EAAOzrC,QAAQI,UAOnB,OANAnK,OAAOkF,KAAKqwC,GAAQE,OAAOtwC,SAAQT,IACjC,MAAMgxC,EAAQH,EAAO7wC,GACrB8wC,EAAOA,EAAK1pC,MAAK,IAAM/B,QAAQ8qC,IAAIa,EAAMvxC,KAAI8X,GACpCw4B,GAAWjsC,EAAKyT,IAAQm5B,EAAYV,MAAOC,EAAOC,EAAQvnC,OACnE,IAEKmoC,CACT,CAyxBAvB,GAAQpwC,QA1wBR,MAKE4K,YAAYknC,EAAa5qB,GAIvBxnB,KAAKo8B,MAAQjB,GAAAiB,MAEb,MAAMiW,EAAyB,iBAAT7qB,EAAoB,CACxC8qB,UAAW9qB,GACTA,EAGJ,IAAK6qB,EAAOC,YAAcD,EAAOC,UAAU9zC,MAAM,iBAC/C,MAAM,IAAI+B,MAAM,kEAGlBP,KAAKwnB,MAAQ6qB,EACbryC,KAAKoyC,YAAcA,EACnBpyC,KAAKuyC,aAAe,KACpB,MAAMlB,EAASrxC,KAEfA,KAAKwyC,QAAU,CACTC,SACF,OAAOpB,EAAOqB,cAChB,EAEAC,KAAM,CAACnR,EAAiB,CAAC,KACvB,MAAMiR,EAAKzyC,KAAKwyC,QAAQC,GACxB,OAAOA,EAAKzyC,KAAKmL,QAAQ1O,OAAOyd,OAAOzd,OAAOyd,OAAO,CAAC,EAAGsnB,GAAiB,CACxE73B,IAAK,WAAW8oC,OACZjsC,QAAQC,OAAO,IAAIlG,MAAM,4BAA4B,EAE7D4K,QAAS,CAACq2B,EAAgBqQ,EAAc,CAAC,IACnC7xC,KAAKwyC,QAAQC,GACR,WACL,MAAM1vC,QA7MlBi+B,eAA6BQ,EAAgB6P,GAC3C,MAAMriC,EAAOmsB,GAAAQ,SAAe,IAAK0V,EAAO7pB,MAAM8qB,WAE9CtR,eAAe4R,EAAcC,GAC3B,MAAMvhC,EAAeuhC,EAAKn7B,SAASxW,MAAM,KAAKoY,MAE9C,IAAKhI,EACH,MAAM,IAAI/Q,MAAM,gBAAgBsyC,MAGlC,IAA2D,GAAvDnW,GAAAI,mBAA8B53B,QAAQoM,GACxC,MAAM,IAAI/Q,MAAM,kBAAkB+Q,2BAGpC,MAAMyyB,QAAoB5I,GAAAa,0BAAgCqV,EAAO7pB,MAAM8qB,WACjErO,EAAc9I,GAAAE,gBAAsB0I,EAAazyB,GAIvD,OAFAuhC,EAAKxuC,aAAazE,IAAIqkC,EAAaoN,EAAOmB,QAAQC,IAE3CI,EAAKj7B,IACd,CAEA,MAA6B,iBAAlB4pB,GAA8BA,aAA0B9I,IAC1D,CACL/uB,UAAWipC,EAAc,IAAIla,IAAI8I,EAAiB,GAAIxyB,MAI1DwyB,EAAe73B,UAAYipC,EAAc,IAAIla,IAAI8I,EAAe73B,IAAM,GAAIqF,IACnEwyB,EACT,CA+KkCsR,CAActR,EAAgBxhC,MACpD,OAAOA,KAAKmL,QAAQpI,EAAS8uC,EAC/B,EAHO,GAKArrC,QAAQC,OAAO,IAAIlG,MAAM,8BAKtCP,KAAK+yC,UAAY,CACXN,SACF,OAAOpB,EAAO2B,gBAChB,EAEAL,KAAM,CAACnR,EAAiB,CAAC,KACvB,MAAMiR,EAAKzyC,KAAK+yC,UAAUN,GAC1B,OAAOA,EAAKzyC,KAAKmL,QAAQ1O,OAAOyd,OAAOzd,OAAOyd,OAAO,CAAC,EAAGsnB,GAAiB,CACxE73B,IAAK,aAAa8oC,OACdjsC,QAAQC,OAAO,IAAIlG,MAAM,8BAA8B,GAIjEP,KAAKizC,KAAO,CACNC,eACF,OAAO7B,EAAO8B,aAChB,EAEIV,SACF,OAAOpB,EAAO+B,WAChB,EAEI9hC,mBACF,OAAO+/B,EAAOgC,aAChB,EAEAV,KAAM,CAACnR,EAAiB,CAAC,KACvB,MAAM0R,EAAWlzC,KAAKizC,KAAKC,SAC3B,OAAOA,EAAWlzC,KAAKmL,QAAQ1O,OAAOyd,OAAOzd,OAAOyd,OAAO,CAAC,EAAGsnB,GAAiB,CAC9E73B,IAAKupC,KACD1sC,QAAQC,OAAO,IAAIlG,MAAM,yBAAyB,GAK5DP,KAAKszC,QAAQlB,EAAYmB,KAC3B,CAWAD,QAAQE,GACN,GAAqB,mBAAVA,EAAsB,CAC/B,MAAMzwC,EAAU,CACd6/B,QAAS5iC,KAAKwnB,MAAM8qB,UAAU/zC,QAAQ,MAAO,KAEzCk1C,EAAczzC,KAAK0zC,SAAS,8BAElC,GAAID,EACF1wC,EAAQoW,KAAO,CACb6oB,MAAOyR,OAEJ,CACL,MAAMx6B,SACJA,EAAQC,SACRA,GACElZ,KAAKwnB,MAELvO,GAAYC,IACdnW,EAAQoW,KAAO,CACb85B,KAAMh6B,EACN06B,KAAMz6B,GAGZ,CAEAlZ,KAAK4zC,IAAMJ,EAAOzwC,GAClB,MAAM8wC,EAAY7zC,KAAK0zC,SAAS,yBAE5BG,IACF7zC,KAAKwyC,QAAQoB,IAAMJ,EAAO/2C,OAAOyd,OAAOzd,OAAOyd,OAAO,CAAC,EAAGnX,GAAU,CAClEyvC,QAASqB,KAGf,CAEA,OAAO7zC,IACT,CAOA0yC,eACE,MAAMnP,EAAgBvjC,KAAKwnB,MAAM+b,cAEjC,OAAIA,EAGGA,EAAciP,QAWZjP,EAAciP,UAVbxyC,KAAKwnB,MAAMssB,OAAS,IAAIt1C,MAAM,0BAIlCyyC,GAAM,+FAHNA,GAAMN,GAAArwC,QAAkBuwC,aAAc,UAAW,WAM5C,OAMP7wC,KAAKwnB,MAAMusB,aACb9C,GAAMN,GAAArwC,QAAkBwwC,WAAY,kCAEpCG,GAAMN,GAAArwC,QAAkBywC,cAAe,oBAGlC,KACT,CASAiC,iBACE,MAAMzP,EAAgBvjC,KAAKwnB,MAAM+b,cAEjC,OAAIA,EAGGA,EAAcwP,UAWZxP,EAAcwP,YAVb/yC,KAAKwnB,MAAMssB,OAAS,IAAIt1C,MAAM,4BAIlCyyC,GAAM,4JAHNA,GAAMN,GAAArwC,QAAkBuwC,aAAc,YAAa,aAM9C,OAMP7wC,KAAKwnB,MAAMusB,aACb9C,GAAMN,GAAArwC,QAAkBwwC,WAAY,oCAEpCG,GAAMN,GAAArwC,QAAkBywC,cAAe,sBAGlC,KACT,CAQAiD,aACE,MAAMzQ,EAAgBvjC,KAAKwnB,MAAM+b,cAEjC,GAAIA,EAAe,CACjB,MAAM0Q,EAAU1Q,EAAc2Q,SACxBJ,EAAQ9zC,KAAKwnB,MAAMssB,OAAS,GAGlC,IAAKG,EAAS,CACZ,MAAME,EAAYL,EAAMt1C,MAAM,cACxB41C,EAAaN,EAAMt1C,MAAM,eACzB61C,EAAcP,EAAMt1C,MAAM,gBAShC,OAHEyyC,GAJGkD,IAAeE,GAAeD,GAI3B,4EAHA,gKAMD,IACT,CAEA,OAAOjZ,GAAAM,UAAgBwY,EAASj0C,KAAKoyC,YACvC,CAQA,OANIpyC,KAAKwnB,MAAMusB,aACb9C,GAAMN,GAAArwC,QAAkBwwC,WAAY,gBAEpCG,GAAMN,GAAArwC,QAAkBywC,cAAe,YAGlC,IACT,CAQAoC,cACE,MAAMc,EAAUj0C,KAAKg0C,aAErB,OAAIC,EACKA,EAAQK,QAGV,IACT,CAMAlB,YACE,MAAMkB,EAAUt0C,KAAKmzC,cAErB,OAAImB,EACKA,EAAQpzC,MAAM,KAAK,GAGrB,IACT,CAOAmyC,cACE,MAAMiB,EAAUt0C,KAAKmzC,cAErB,OAAImB,EACKA,EAAQpzC,MAAM,KAAK,GAGrB,IACT,CAOAqzC,yBACE,MAAMd,EAAczzC,KAAK0zC,SAAS,8BAElC,GAAID,EACF,MAAO,UAAYA,EAGrB,MAAMx6B,SACJA,EAAQC,SACRA,GACElZ,KAAKwnB,MAET,OAAIvO,GAAYC,EACP,SAAWlZ,KAAKoyC,YAAYoC,KAAKv7B,EAAW,IAAMC,GAGpD,IACT,CAOA8nB,oBACE,MAAMvB,EAAUz/B,KAAKoyC,YAAYqC,aAC3B5yC,QAAY49B,EAAQ//B,IAAIg9B,GAAAC,WAE1B96B,SACI49B,EAAQiV,MAAM7yC,SAGhB49B,EAAQiV,MAAMhY,GAAAC,WACpB38B,KAAKwnB,MAAM+b,cAAgB,CAAC,CAC9B,CAWAt4B,OAAO0pC,EAAUnT,EAAiB,CAAC,GACjC,OAAOxhC,KAAKmL,QAAQ1O,OAAOyd,OAAOzd,OAAOyd,OAAO,CAAC,EAAGsnB,GAAiB,CACnE73B,IAAK,GAAGgrC,EAASrjC,eACjB7H,OAAQ,OACRnD,KAAM5C,KAAKC,UAAUgxC,GACrB5uC,QAAStJ,OAAOyd,OAAO,CAErB,eAAgB,oBACfsnB,EAAez7B,WAEtB,CAYA6uC,OAAOD,EAAUnT,EAAiB,CAAC,GACjC,OAAOxhC,KAAKmL,QAAQ1O,OAAOyd,OAAOzd,OAAOyd,OAAO,CAAC,EAAGsnB,GAAiB,CACnE73B,IAAK,GAAGgrC,EAASrjC,gBAAgBqjC,EAASlC,KAC1ChpC,OAAQ,MACRnD,KAAM5C,KAAKC,UAAUgxC,GACrB5uC,QAAStJ,OAAOyd,OAAO,CAErB,eAAgB,oBACfsnB,EAAez7B,WAEtB,CAYA8uC,OAAOlrC,EAAK63B,EAAiB,CAAC,GAC5B,OAAOxhC,KAAKmL,QAAQ1O,OAAOyd,OAAOzd,OAAOyd,OAAO,CAAC,EAAGsnB,GAAiB,C,IACnE73B,EACAF,OAAQ,WAEZ,CAUAu3B,cAAcQ,EAAgBqQ,EAAc,CAAC,EAAGiD,EAAgB,CAAC,GAC/D,IAAIC,EAEJ,MAAMC,EAAe7Z,GAAAz9B,MAAY2B,OAAO,kBAExC,IAAKmiC,EACH,MAAM,IAAIjhC,MAAM,0DAIlB,IAAIoJ,EAEyB,iBAAlB63B,GAA8BA,aAA0B9I,KACjE/uB,EAAMzG,OAAOs+B,GACbA,EAAiB,CAAC,GAElB73B,EAAMzG,OAAOs+B,EAAe73B,KAG9BA,EAAMwxB,GAAAQ,SAAehyB,EAAK3J,KAAKwnB,MAAM8qB,WACrC,MAAMvvC,EAAU,CACdouC,OAA6B,IAAtBU,EAAYV,MACnB1C,OAAQoD,EAAYpD,KACpBwG,UAA4C,QAAhCF,EAAKlD,EAAYoD,iBAA8B,IAAPF,EAAgBA,EAAK,EACzEhD,kBAAmBF,EAAYE,mBAAqB,GACpDmD,iBAAiD,IAAhCrD,EAAYqD,gBAC7BC,OAAqC,mBAAtBtD,EAAYsD,OAAuBtD,EAAYsD,YAAStvC,GAEnEiE,EAAS03B,EAAe13B,aAAUjE,EAKxC,OAHY9C,EAAQmyC,gBAAkBl1C,KAAKo1C,gBAAgB,C,OACzDtrC,IACCvB,MAAK,IAAMi5B,IAAkBh7B,QAAQI,QAAQ46B,IAG/Cj5B,MAAKi5B,IACJ,MAAM6T,EAAar1C,KAAKu0C,yBAQxB,OANIc,IACF7T,EAAez7B,QAAUtJ,OAAOyd,OAAOzd,OAAOyd,OAAO,CAAC,EAAGsnB,EAAez7B,SAAU,CAChFuvC,cAAeD,KAIZ7T,CAAA,IAERj5B,MAAKi5B,IACJwT,EAAa,mCAAoCrrC,EAAK63B,EAAgBz+B,GAC/Do4B,GAAAhwB,QAAcxB,EAAK63B,MAE3BqB,OAAM7B,MAAMh6B,IACX,GAAoB,KAAhBA,EAAMuD,OAAe,CAEvB,IAAKvK,KAAK0zC,SAAS,8BACjB,MAAM,IAAInzC,MAAM,wEAKlB,IAAKwC,EAAQmyC,gBAGX,MAFAF,EAAa,4GACPh1C,KAAKu1C,cACL,IAAIh1C,MAAMowC,GAAArwC,QAAkBswC,SAOpC,MAFAoE,EAAa,wDACPh1C,KAAKu1C,cACL,IAAIh1C,MAAMowC,GAAArwC,QAAkBswC,QACpC,CAEA,MAAM5pC,CAAA,IAEP67B,OAAM77B,IAKL,MAJoB,KAAhBA,EAAMuD,QACRyqC,EAAa,kFAGThuC,CAAA,IACLuB,MAAKymB,GAEDA,EACc,iBAARA,GACPA,aAAgBgiB,GADgBhiB,EAG7B,OAAOwmB,IACc,UAAtBA,EAAMlkC,mBACF9K,QAAQ8qC,KAAKkE,EAAMC,OAAS,IAAI70C,KAAIgR,GAAQggC,GAAYhgC,EAAK+iC,SAAU5xC,EAAS+xC,EAAe90C,KAAM8J,YAErG8nC,GAAY4D,EAAOzyC,EAAS+xC,EAAe90C,KAAM8J,GAGlD0rC,GAPF,CAQJxmB,GACFzmB,MAAKy4B,MAAMwU,IACV,GAAIA,GAA+B,UAAtBA,EAAMlkC,aAA0B,CAC3C,MAAMokC,EAAQF,EAAMG,MAAQ,GAU5B,GARI5yC,EAAQ0rC,OACV+G,GAASA,EAAMC,OAAS,IAAI70C,KAAI60C,GAASA,EAAMd,YAG7C5xC,EAAQoyC,cACJpyC,EAAQoyC,OAAOK,EAAO/4C,OAAOyd,OAAO,CAAC,EAAG46B,MAG1C/xC,EAAQkyC,UAAW,CACvB,MAAMvvC,EAAOgwC,EAAM1R,MAAKz0B,GAAmB,QAAdA,EAAEqmC,WAG/B,GAFAJ,EAAQra,GAAAS,UAAgB4Z,GAEpB9vC,GAAQA,EAAKiE,IAAK,CACpB,MAAMksC,QAAiB71C,KAAKmL,QAAQ,CAClCxB,IAAKjE,EAAKiE,I,OAKVG,GACC/G,EAAS+xC,GAEZ,OAAI/xC,EAAQoyC,OACH,KAGLpyC,EAAQgvC,kBAAkB1xC,QAC5B5D,OAAOyd,OAAO46B,EAAee,EAASC,YAC/BN,EAAM78B,OAAOwiB,GAAAS,UAAgBia,EAAS7mB,MAAQ6mB,KAGhDL,EAAM78B,OAAOwiB,GAAAS,UAAgBia,GACtC,CACF,CACF,CAEA,OAAOL,CAAA,IAERjtC,MAAKitC,IACJ,GAAIzyC,EAAQouC,MACV2D,EAAgB,CAAC,OACZ,IAAK/xC,EAAQoyC,QAAUpyC,EAAQgvC,kBAAkB1xC,OACtD,MAAO,CACL2uB,KAAMwmB,EACNM,WAAYhB,GAIhB,OAAOU,CAAA,IAjESxmB,GAoEtB,CAYAomB,gBAAgB5T,EAAiB,CAAC,GAChC,MAAMiS,EAAczzC,KAAK0zC,SAAS,8BAC5BqC,EAAe/1C,KAAK0zC,SAAS,+BAC7BsC,EAAYh2C,KAAKwnB,MAAMwuB,WAAa,EAE1C,OAAIvC,GAAesC,GAAgBC,EAAY,GAAKh4C,KAAKwlC,MAAQ,IACxDxjC,KAAKi2C,QAAQzU,GAGfh7B,QAAQI,QAAQ5G,KAAKwnB,MAC9B,CAgBAyuB,QAAQzU,EAAiB,CAAC,GACxB,IAAIuT,EAAImB,EAER,MAAMC,EAAehb,GAAAz9B,MAAY2B,OAAO,kBACxC82C,EAAa,+CACb,MAAMJ,EAAkG,QAAlFG,EAA2B,QAArBnB,EAAK/0C,KAAKwnB,aAA0B,IAAPutB,OAAgB,EAASA,EAAGxR,qBAAkC,IAAP2S,OAAgB,EAASA,EAAGE,cAE5I,IAAKL,EACH,MAAM,IAAIx1C,MAAM,8CAGlB,MAAM81C,EAAWr2C,KAAKwnB,MAAM6uB,SAE5B,IAAKA,EACH,MAAM,IAAI91C,MAAM,yCAGlB,MAAM+1C,EAASt2C,KAAK0zC,SAAS,wBAA0B,GACjD6C,EAAmBD,EAAOE,OAAO,uBAAwB,EACzDC,EAAkBH,EAAOE,OAAO,sBAAuB,EAE7D,IAAKD,IAAqBE,EACxB,MAAM,IAAIl2C,MAAM,sEAOlB,IAAKP,KAAKuyC,aAAc,CACtB,MAAMmE,EAAwBj6C,OAAOyd,OAAOzd,OAAOyd,OAAO,CACxDtQ,YAAa5J,KAAKoyC,YAAYrvC,QAAQ4zC,6BAA+B,eACpEnV,GAAiB,CAClB/3B,OAAQ,OACRI,KAAM,OACN9D,QAAStJ,OAAOyd,OAAOzd,OAAOyd,OAAO,CAAC,EAAGsnB,EAAez7B,SAAW,CAAC,GAAI,CACtE,eAAgB,sCAElBO,KAAM,0CAA0C2P,mBAAmB8/B,OAGrE,KAAM,kBAAmBW,EAAsB3wC,SAAU,CACvD,MAAM6wC,aACJA,EAAYC,SACZA,GACE72C,KAAKwnB,MAELovB,IAEFF,EAAsB3wC,QAAQ+wC,cAAgB,SAAW92C,KAAKoyC,YAAYoC,KAAKqC,EAAW,IAAMD,GAEpG,CAEA52C,KAAKuyC,aAAepX,GAAAhwB,QAAckrC,EAAUK,GAAuBnuC,MAAKymB,IACtE,IAAKA,EAAK0U,aACR,MAAM,IAAInjC,MAAM,4BAMlB,OAHA41C,EAAa,wCAAyCnnB,GACtDvyB,OAAOyd,OAAOla,KAAKwnB,MAAM+b,cAAevU,GACxChvB,KAAKwnB,MAAMwuB,UAAY7a,GAAAK,yBAA+BxM,EAAMhvB,KAAKoyC,aAC1DpyC,KAAKwnB,KAAK,IAChBqb,OAAM77B,IACP,IAAI+tC,EAAImB,EAOR,MALuF,QAAlFA,EAA2B,QAArBnB,EAAK/0C,KAAKwnB,aAA0B,IAAPutB,OAAgB,EAASA,EAAGxR,qBAAkC,IAAP2S,OAAgB,EAASA,EAAGE,iBACzHD,EAAa,yDACNn2C,KAAKwnB,MAAM+b,cAAc6S,eAG5BpvC,CAAA,IACL+vC,SAAQ,KACT/2C,KAAKuyC,aAAe,KACpB,MAAM1wC,EAAM7B,KAAKwnB,MAAM3lB,IAEnBA,EACF7B,KAAKoyC,YAAYqC,aAAa70C,IAAIiC,EAAK7B,KAAKwnB,OAE5C2uB,EAAa,iEAGnB,CAEA,OAAOn2C,KAAKuyC,YACd,CAoBAhX,OAAO4G,EAAcrzB,GACnB,OAAOqsB,GAAAI,OAAa4G,EAAcrzB,EACpC,CAoBAwsB,QAAQ6G,EAAcrzB,GACpB,OAAOqsB,GAAAG,QAAc6G,EAAcrzB,EACrC,CAgBAgtB,QAAQ72B,EAAKyT,EAAO,IAClB,OAAOyiB,GAAAW,QAAc72B,EAAKyT,EAC5B,CAeAg7B,SAASh7B,EAAO,IACd,OAAOyiB,GAAAW,QAAcr/B,OAAOyd,OAAO,CAAC,EAAGla,KAAKwnB,OAAQ9O,EACtD,CAOAs+B,iBACE,OAAO7b,GAAAa,0BAAgCh8B,KAAKwnB,MAAM8qB,WAAW/pC,MAAKsgC,GAAYA,EAASoO,aACzF,CAUAC,iBACE,OAAOl3C,KAAKg3C,iBAAiBzuC,MAAKjM,IAChC,IAAIy4C,EAEJ,OAA6C,QAArCA,EAAKrY,GAAAG,aAAwBvgC,UAAuB,IAAPy4C,EAAgBA,EAAK,CAAC,GAE/E,GhE77BFt4C,OAAO8C,eAAei7B,GAAS,MAAO,CACpCh7B,YAAY,EACZE,IAAK,WACH,OAAOg9B,GAAAC,SACT,IAEF,MAAMwa,GAAQhc,GAAAz9B,MAAY2B,OAAO,UAEjC,SAAS+3C,KACP,MAAyB,iBAAX9/B,MAChB,CASA,SAAS+/B,GAAmBzU,EAAU,IAAKpB,GACzC,MAAM73B,EAAMzG,OAAO0/B,GAASrkC,QAAQ,OAAQ,KAAO,kCACnD,OAAO48B,GAAAc,YAAkBtyB,EAAK63B,GAAgBqB,OAAMC,IAClD,MAAM,IAAIviC,MAAM,wCAAwCoJ,OAASm5B,EAAGriC,UAAS,GAEjF,CAOA,SAAS62C,GAAuC1U,EAAU,IAAKpB,GAC7D,OAAO6V,GAAmBzU,EAASpB,GAAgBj5B,MAAKwK,IACtD,IAAKA,EAAKwkC,yBAA2BxkC,EAAKykC,eACxC,MAAM,IAAIj3C,MAAM,yBAGlB,MAAO,CACLk3C,gBAAiB1kC,EAAK2kC,uBAAyB,GAC/C3D,aAAchhC,EAAKwkC,uBACnBlB,SAAUtjC,EAAKykC,eACjB,GAEJ,CAMA,SAASG,GAA8C/U,EAAU,IAAKpB,GACpE,OAAOrG,GAAAa,0BAAgC4G,EAASpB,GAAgBj5B,MAAKwK,IACnE,MACM6kC,GAAczc,GAAAW,QAAc/oB,GAAQ,CAAC,EAAG,8BAAgC,IAAI+wB,QAAOp/B,GAD3E,0EACgFA,EAAEiF,MAAe/I,KAAI8M,GAAKA,EAAEiE,YAAW,GAC/Hic,EAAM,CACV6pB,gBAAiB,GACjB1D,aAAc,GACdsC,SAAU,IAmBZ,OAhBIuB,GACFA,EAAWh2C,SAAQ6P,IACD,aAAZA,EAAI9H,MACNikB,EAAI6pB,gBAAkBhmC,EAAIomC,UAGZ,cAAZpmC,EAAI9H,MACNikB,EAAImmB,aAAetiC,EAAIomC,UAGT,UAAZpmC,EAAI9H,MACNikB,EAAIyoB,SAAW5kC,EAAIomC,SAAQ,IAK1BjqB,CAAA,GAEX,CAUA,SAASkqB,GAAIC,GACX,MAAM52C,EAAM42C,EAAM13C,OACZ23C,EAAS,GACf,IAAIC,GAAW,EACf,OAAO,IAAIzxC,SAAQ,CAACI,EAASH,KAe3B,SAASyxC,EAAQlxC,GACXgxC,EAAO52C,KAAK4F,KAAW7F,GACzBsF,EAAO,IAAIlG,MAAMy3C,EAAOp3C,KAAI8D,GAAKA,EAAEjE,UAASK,KAAK,OAErD,CAEAi3C,EAAMn2C,SAAQ2T,IACZA,EAAEpO,QAAQoB,MAAKzB,GArBjB,SAAmBmrC,EAAMnrC,GACvBmrC,EAAKkG,UAAW,EAEXF,IACHA,GAAW,EACXF,EAAMn2C,SAAQ2T,IACPA,EAAE4iC,UACL5iC,EAAE6iC,WAAW5sC,OAAK,IAGtB5E,EAAQE,GAEZ,CAS2BuxC,CAAU9iC,EAAGzO,IAASoxC,EAAA,GACjD,GAEJ,CAWA,SAASI,GAAsBn7C,EAAKylC,EAAU,KAC5C,MAAMxyB,EAAkBjT,EAAIo7C,qBACtBC,EAAmB,IAAIpoC,EACvBqoC,EAAmB,IAAIroC,EAC7B,OAAO0nC,GAAI,CAAC,CACVM,WAAYI,EACZrxC,QAASmwC,GAAuC1U,EAAS,CACvD94B,OAAQ0uC,EAAiB1uC,UAE1B,CACDsuC,WAAYK,EACZtxC,QAASwwC,GAA8C/U,EAAS,CAC9D94B,OAAQ2uC,EAAiB3uC,WAG/B,CAeAk3B,eAAe0X,GAAUv7C,EAAKw7C,EAAS,CAAC,EAAGC,GAAc,GAEvD,MAAMC,aACJA,EAAYjC,aACZA,EAAYkC,kBACZA,EAAiBjF,UACjBA,EAASkF,YACTA,EAAWC,UACXA,EAAS9rC,OACTA,EAAMi3B,MACNA,EAAKC,OACLA,GACEuU,EACJ,IAAIM,IACFA,EAAGC,OACHA,EAAMC,eACNA,EAAcC,YACdA,EAAWtF,MACXA,EAAQ,GAAA+C,SACRA,EAAQwC,iBACRA,GACEV,EACJ,MAAMhvC,EAAMxM,EAAIm8C,SACV7Z,EAAUtiC,EAAIs3C,aAEpBwE,EAAMtvC,EAAItF,aAAa3E,IAAI,QAAUu5C,EACrCE,EAAiBxvC,EAAItF,aAAa3E,IAAI,mBAAqBy5C,EAC3DD,EAASvvC,EAAItF,aAAa3E,IAAI,WAAaw5C,EAEtCrC,IACHA,EAAWmC,GAGRI,IACHA,EAAcP,GAGXO,EAEOA,EAAY56C,MAAM,mBAC5B46C,EAAcj8C,EAAIgb,SAASihC,IAF3BA,EAAcj8C,EAAIgb,SAAS,KAK7B,MAAMm6B,EAAYpvC,OAAO+1C,GAAOE,GAAkB,IAElD,IAAK7G,EACH,MAAM,IAAI/xC,MAAM,uFAYlB,GATI04C,GACF9B,GAAM,sBAAuB+B,EAAS,MAAQ,cAI5CA,IAAWpF,EAAMt1C,MAAM,YACzBs1C,GAAS,WAGPsD,KAAa,CACf,MAAMmC,EAAUC,KACVC,EAAUC,MAEXH,GAAWE,KAAiC,IAArBJ,IAAkD,IAArBA,IAKvDA,EAAmBE,EAGnB93C,QAAQC,KAAK,0TAEjB,CAIA,MAAMi4C,QAAela,EAAQ//B,IAAIg9B,GAAAC,iBAC3B8C,EAAQiV,MAAMiF,GAEpB,MAAMC,EAAWze,GAAAO,aAAmB,IAC9BlU,EAAQ,C,SACZqvB,E,MACA/C,E,YACAsF,E,UACA9G,E,aACAsE,EACArT,cAAe,CAAC,EAChB1hC,IAAK+3C,E,iBACLP,KAEgCjC,MAAcjc,GAAAW,QAAc3+B,EAAK,6CAG3DsiC,EAAQ7/B,IAAI88B,GAAAC,UAAsBid,GAItCd,GACFr8C,OAAOyd,OAAOsN,EAAM+b,cAAeuV,GAIjCjF,GACFp3C,OAAOyd,OAAOsN,EAAM+b,cAAe,CACjCiP,QAASqB,IAKTkF,GACFt8C,OAAOyd,OAAOsN,EAAM+b,cAAe,CACjCwP,UAAWgG,IAIf,IAAIc,EAAcT,EAAc,UAAYnjC,mBAAmB2jC,GAE/D,GAAIT,IAAmBF,EAIrB,OAHA9B,GAAM,+BACA1X,EAAQ7/B,IAAIg6C,EAAUpyB,GAExBoxB,EACKiB,QAGI18C,EAAI0N,SAASgvC,GAI5B,MAAMjC,QAAmBU,GAAsBn7C,EAAKm1C,GAIpD,GAHA71C,OAAOyd,OAAOsN,EAAOowB,SACfnY,EAAQ7/B,IAAIg6C,EAAUpyB,IAEvBA,EAAMusB,aACT,OAAI6E,EACKiB,QAGI18C,EAAI0N,SAASgvC,GAI5B,MAAMC,EAAiB,CAAC,qBAAsB,aAAe7jC,mBAAmB4gC,GAAY,IAAK,SAAW5gC,mBAAmB69B,GAAQ,gBAAkB79B,mBAAmBmjC,GAAc,OAASnjC,mBAAmBq8B,GAAY,SAAWr8B,mBAAmB2jC,IAQhQ,GANIV,GACFY,EAAe14C,KAAK,UAAY6U,mBAAmBijC,IAGrDW,EAAcryB,EAAMusB,aAAe,IAAM+F,EAAeh5C,KAAK,KAEzD83C,EACF,OAAOiB,EAGT,IAAI3sC,IAAUkqC,KA8BZ,aAAaj6C,EAAI0N,SAASgvC,GA9B5B,CACE,IAAIE,EAGJ,GAFAA,QAAY5e,GAAAC,gBAAsBluB,EAAQi3B,EAAOC,GAE7C2V,IAAQl8C,KACV,IAGEk8C,EAAIC,eAAera,WAAWga,GAC9BI,EAAIC,eAAeta,QAAQka,EAAUl2C,KAAKC,UAAU6jB,GACtD,CAAE,MAAOsb,GACP3H,GAAAz9B,MAAY,4GAA6GolC,GACzHiX,EAAMl8C,IACR,CAGF,GAAIk8C,IAAQl8C,KACV,IACEk8C,EAAIhvC,SAAS6M,KAAOiiC,EACpBh8C,KAAKwO,iBAAiB,UAAW4tC,GACnC,CAAE,MAAOnX,GACP3H,GAAAz9B,MAAY,sGAAuGolC,GACnHjlC,KAAKkN,SAAS6M,KAAOiiC,CACvB,MAEAh8C,KAAKkN,SAAS6M,KAAOiiC,CAKG,CAE9B,CAUA,SAASL,KACP,IACE,OAAO37C,OAASqzB,KAAOmT,SAAWxmC,IACpC,CAAE,MAAO6G,GACP,OAAO,CACT,CACF,CAWA,SAASg1C,KACP,IACE,OAAO77C,OAASqzB,OAASgpB,QAAUA,SAAWr8C,QAAUyZ,OAAOhW,IACjE,CAAE,MAAOoD,GACP,OAAO,CACT,CACF,CASA,SAASu1C,GAAUv1C,GACE,gBAAfA,EAAEsqB,KAAKhsB,MAA0B0B,EAAE0U,SAAW,IAAIsf,IAAI76B,KAAKkN,SAAS6M,MAAMwB,SAC5E9B,OAAO9K,oBAAoB,UAAWytC,IACtC3iC,OAAOvM,SAAS6M,KAAOlT,EAAEsqB,KAAKrlB,IAElC,CASAq3B,eAAemZ,GAAah9C,GAC1B,IAAI43C,EAAImB,EAER,MAAMvsC,EAAMxM,EAAIm8C,SACVc,EAAUj9C,EAAIs3C,aACdkE,EAAShvC,EAAItF,aACnB,IAAIxC,EAAM82C,EAAOj5C,IAAI,SACrB,MAAMkT,EAAO+lC,EAAOj5C,IAAI,QAClB26C,EAAY1B,EAAOj5C,IAAI,SACvB46C,EAAuB3B,EAAOj5C,IAAI,qBAexC,GAbKmC,IACHA,QAAYu4C,EAAQ16C,IAAIg9B,GAAAC,YAYtB0d,GAAaC,EACf,MAAM,IAAI/5C,MAAM,CAAC85C,EAAWC,GAAsBxW,OAAOtnC,SAASsE,KAAK,OAKzE,GAFAq2C,GAAM,oBAAqBt1C,EAAK+Q,IAE3B/Q,EACH,MAAM,IAAItB,MAAM,0DAIlB,IAAIinB,QAAc4yB,EAAQ16C,IAAImC,GAC9B,MAAM04C,GAA4BnD,MAAcjc,GAAAW,QAAc3+B,EAAK,qCAGnE,GAAIi6C,MAAe5vB,IAAUA,EAAM6xB,iBAAkB,CACnD,MAAME,EAAUC,KACVC,EAAUC,KAOhB,IAAKH,GAAWE,KAAa9vC,EAAItF,aAAa3E,IAAI,YAAa,CAC7DiK,EAAItF,aAAazE,IAAI,WAAY,KACjC,MAAMgY,KACJA,EAAIwB,OACJA,GACEzP,EAiBJ,OAfI4vC,GACFlV,OAAO7K,YAAY,CACjBx2B,KAAM,eACN2G,IAAKiO,GACJwB,GAGDqgC,IACFS,OAAO1gB,YAAY,CACjBx2B,KAAM,eACN2G,IAAKiO,GACJwB,GACH9B,OAAO04B,SAGF,IAAIxpC,SAAQ,QACrB,CACF,CAEAmD,EAAItF,aAAawwC,OAAO,YAExB,MAAM2F,EAAW7B,EAAO1vC,IAAI,SAkC5B,GAhCImuC,MAAejc,GAAAW,QAAc3+B,EAAK,mCAAqCyV,GAAQ4nC,KAI7E5nC,IACF+lC,EAAO9D,OAAO,QACdsC,GAAM,yCASJqD,GAAYD,IACd5B,EAAO9D,OAAO,SACdsC,GAAM,0CASJ7/B,OAAOmjC,QAAQC,cACjBpjC,OAAOmjC,QAAQC,aAAa,CAAC,EAAG,GAAI/wC,EAAIiO,QAKvC4P,EACH,MAAM,IAAIjnB,MAAM,8CAQlB,MAHoBqS,IAAwC,QAA9BmiC,EAAKvtB,EAAM+b,qBAAkC,IAAPwR,OAAgB,EAASA,EAAGrR,gBAG7Elc,EAAM6uB,SAAU,CACjC,IAAKzjC,EACH,MAAM,IAAIrS,MAAM,oCAGlB42C,GAAM,sDACN,MAAM3V,EAAiBmZ,GAAkBx9C,EAAKyV,EAAM4U,GACpD2vB,GAAM,4BAA6B3V,GAInC,MAAM+B,QAAsBpI,GAAAhwB,QAAcqc,EAAM6uB,SAAU7U,GAG1D,GAFA2V,GAAM,qBAAsB5T,IAEvBA,EAAcG,aACjB,MAAM,IAAInjC,MAAM,kCAIlBinB,EAAMwuB,UAAY7a,GAAAK,yBAA+B+H,EAAepmC,GAGhEqqB,EAAQ/qB,OAAOyd,OAAOzd,OAAOyd,OAAO,CAAC,EAAGsN,GAAQ,C,cAC9C+b,UAEI6W,EAAQx6C,IAAIiC,EAAK2lB,GACvB2vB,GAAM,4BACR,MACEA,IAAsC,QAA9BjB,EAAK1uB,EAAM+b,qBAAkC,IAAP2S,OAAgB,EAASA,EAAGxS,cAAgB,qBAAuB,2BAG/G6W,SACIH,EAAQx6C,IAAI88B,GAAAC,UAAsB96B,GAG1C,MAAMwvC,EAAS,IAAIX,GAAApwC,QAAiBnD,EAAKqqB,GAEzC,OADA2vB,GAAM,8BAA+B9F,GAC9BA,CACT,CAQA,SAASsJ,GAAkBx9C,EAAKyV,EAAM4U,GACpC,MAAM4xB,YACJA,EAAWxC,aACXA,EAAYP,SACZA,EAAQQ,SACRA,GACErvB,EAEJ,IAAK4xB,EACH,MAAM,IAAI74C,MAAM,6BAGlB,IAAK81C,EACH,MAAM,IAAI91C,MAAM,0BAGlB,IAAKs2C,EACH,MAAM,IAAIt2C,MAAM,0BAGlB,MAAMihC,EAAiB,CACrB/3B,OAAQ,OACR1D,QAAS,CACP,eAAgB,qCAElBO,KAAM,QAAQsM,gDAAmDqD,mBAAmBmjC,MAiBtF,OARIxC,GACFpV,EAAez7B,QAAQuvC,cAAgB,SAAWn4C,EAAIq3C,KAAKqC,EAAW,IAAMD,GAC5EO,GAAM,qEAAsE3V,EAAez7B,QAAQuvC,iBAEnG6B,GAAM,wEACN3V,EAAel7B,MAAQ,cAAc2P,mBAAmB4gC,MAGnDrV,CACT,CArkBAhH,GAAQS,mBAAqBoc,GAsH7B7c,GAAQQ,sBAAwBsd,GAyMhC9d,GAAQO,UAAY2d,GAgBpBle,GAAQM,UAAY0e,GAiBpBhf,GAAQK,UAAY6e,GAcpBlf,GAAQI,UAAYqf,GAsKpBzf,GAAQG,aAAewf,GAmDvB3f,GAAQE,kBAAoBigB,GAqB5BngB,GAAQC,MAdRuG,eAAqB7jC,EAAKk7C,EAAWH,GACnC,IAAIjG,EAAOkI,GAAah9C,GAUxB,OARIk7C,IACFpG,EAAOA,EAAK1pC,KAAK8vC,IAGfH,IACFjG,EAAOA,EAAKpP,MAAMqV,IAGbjG,CACT,EAmEAzX,GAAQ36B,KAjCRmhC,eAAoB7jC,EAAK4F,GACvB,MAAM4G,EAAMxM,EAAIm8C,SACV1mC,EAAOjJ,EAAItF,aAAa3E,IAAI,QAC5B8nB,EAAQ7d,EAAItF,aAAa3E,IAAI,SAEnC,GAAIkT,GAAQ4U,EACV,OAAO2yB,GAAah9C,GAMtB,MAAMsiC,EAAUtiC,EAAIs3C,aACd5yC,EAAM2lB,SAAgBiY,EAAQ//B,IAAIg9B,GAAAC,WAClCie,QAAenb,EAAQ//B,IAAImC,GAEjC,OAAI+4C,EACK,IAAIlK,GAAApwC,QAAiBnD,EAAKy9C,GAI5BlC,GAAUv7C,EAAK4F,GAASwF,MAAK,IAQ3B,IAAI/B,SAAQ,UAEvB,E,UkEjsBA/J,OAAO8C,eAAes7C,GAAS,aAAc,CAC3Cv1C,OAAO,IA6CTu1C,GAAQv6C,QA1CR,MAKE0gC,UAAUn/B,GACR,MAAMyD,EAAQ00C,eAAen4C,GAE7B,OAAIyD,EACK5B,KAAKqF,MAAMzD,GAGb,IACT,CAOA07B,UAAUn/B,EAAKyD,GAEb,OADA00C,eAAen4C,GAAO6B,KAAKC,UAAU2B,GAC9BA,CACT,CAQA07B,YAAYn/B,GACV,OAAIA,KAAOm4C,wBACFA,eAAen4C,IACf,EAIX,GnEoHF04B,GAAQj6B,QAhJR,MAIE4K,YAAYnI,EAAU,CAAC,GAIrB/C,KAAK6yC,KAAO,KAKZ7yC,KAAK86C,SAAW,KAChB96C,KAAK+C,QAAUtG,OAAOyd,OAAO,CAG3B6gC,uBAAuB,EAUvBR,2BAA2B,EAc3B5D,4BAA6B,eAC5B5zC,EACL,CAMAoV,SAASO,GACP,OAAO,IAAIggB,IAAIhgB,EAAM1Y,KAAKs5C,SAAS1hC,MAAMA,IAC3C,CAQI27B,WAEF,MAAuB,mBAATA,KAAsBA,KAAO,IAC7C,CAOA+F,SAKE,OAJKt5C,KAAK6yC,OACR7yC,KAAK6yC,KAAO,IAAIna,IAAI3tB,SAAW,KAG1B/K,KAAK6yC,IACd,CAOAhoC,SAAS0jB,GACPxjB,SAAS6M,KAAO2W,CAClB,CAOAkmB,aAKE,OAJKz0C,KAAK86C,WACR96C,KAAK86C,SAAW,IAAID,GAAAv6C,SAGfN,KAAK86C,QACd,CAOAvC,qBACE,OAAOnoC,eACT,CAMAupB,KAAK12B,GACH,OAAOqU,OAAOqiB,KAAK12B,EACrB,CAMAuxC,KAAKvxC,GACH,OAAOqU,OAAOk9B,KAAKvxC,EACrB,CAUA+3C,cACE,MAAO,CACLvgB,MAAO,IAAI98B,IAAS68B,GAAAC,MAAcz6B,QAASrC,GAC3Co9B,UAAWh4B,GAAWy3B,GAAAO,UAAkB/6B,KAAM+C,GAC9ClD,KAAMkD,GAAWy3B,GAAA36B,KAAaG,KAAM+C,GACpCsuC,OAAQ7pB,GAAS,IAAIkpB,GAAApwC,QAAiBN,KAAMwnB,GAC5CzkB,QAAS/C,KAAK+C,QAElB,GoEvJF,MAAMk4C,GAAU,IAAI1gB,GAAAj6B,SACdm6B,MACJygB,GAAKngB,UACLogB,GAASt7C,KACTu7C,GAAI/J,OACJgK,GAAMt4C,QACNu4C,IACEL,GAAQD,cAOZ,GAA8B,oBAAnBpa,gBAAgC,CACzC,MAAM58B,EAAQxC,EAAA,SAEdA,EAAA,SAEK8V,OAAOtT,QACVsT,OAAOtT,MAAQA,EAAM1D,QACrBgX,OAAOxR,QAAU9B,EAAM8B,QACvBwR,OAAO/N,QAAUvF,EAAMuF,QACvB+N,OAAOjN,SAAWrG,EAAMqG,SAE5B,CAGA,MAAMkxC,GAAO,CACXnrC,gBAAiBkH,OAAOlH,gB,OACxBirC,GACAG,OAAQ,CACNC,SAAUH,G,MACVJ,G,UACAC,G,KACAC,KAGJM,GAAiBH,G,aC3CjBI,GAAiBj4C,KAAKqF,MAAM,oE,WCA5B6yC,GAAiB,CAAC,GACH,UAAYp6C,EAAA,SAC3Bo6C,GAAe,UAAYp6C,EAAA,SAC3Bo6C,GAAe,UAAYp6C,EAAA,SAC3Bo6C,GAAe,UAAYp6C,EAAA,SAC3Bo6C,GAAe,UAAYp6C,EAAA,SAC3Bo6C,GAAe,UAAYp6C,EAAA,SAC3Bo6C,GAAe,UAAYp6C,EAAA,SCmB3Bq6C,GAAiB,CAACjH,OAAQ,SAAUzjC,EAAYstB,GAC9C,IAAIqd,EAAcrd,EACdrtB,EAAO5P,EAAA,SAEX,IACIgR,EADAupC,EAAS3qC,EAAKC,eAAeF,GAEjC,GAAI4qC,EAAQ,CACV,IAAIhpC,EAAO5B,EAAW4B,KACtB,GAAIA,EAAM,CACR,IAAIuC,EAAOvC,EAAKL,IAChB,GAAI4C,EACF,IAAK,IAAIC,KAAKD,EAAM,CAClB,IAAI0mC,EAAa5qC,EAAKqB,eAAe8C,GACrC,GAAIymC,EAAY,CACdxpC,EAAgBwpC,EAChB,KACF,CACF,CAEJ,CACF,MAEExpC,EAAgBrB,EAAWqB,cAI7B,IAAIypC,EAAc,GAClB,IAAK,IAAqCC,EAAjCl7C,EAAE,EAAGG,EAAIw6C,GAAgBt7C,OAAYW,EAAEG,IAAQ+6C,EAAGP,GAAgB36C,KACtEoQ,EAAKU,gBAAgBU,EAAe0pC,KAAOl7C,EACzC86C,GAAgB1qC,EAAKU,gBAAgBgqC,EAAaI,IACrDD,EAAY76C,KAAK86C,GAGrB,IAAIC,EAAgBF,EAAY,GAChC,IAAK,IAAIG,KAAQH,EAAYI,UAC3BlrC,EAAayqC,GAAWQ,GAAMjrC,GAGhC,GAAI8qC,EAAY57C,OACd,GAAI07C,EAAQ,CAEV,IAAIhpC,EAAO5B,EAAW4B,KACjBA,IACHA,EAAO5B,EAAW4B,KAAO,CAAC,GAC5B,IAGIupC,EAHAhnC,EAAOvC,EAAKL,IACX4C,IACHA,EAAOvC,EAAKL,IAAM,IAGpB,IAAK,IAAI6C,KAAKD,EAAM,CAElB,GADclE,EAAKqB,eAAe8C,GACrB,CACX+mC,EAAa/mC,EACb,KACF,CACF,CACA,IAAIgnC,EAAiBnrC,EAAKmB,eAAe4pC,GACrCG,GACFA,EAAW1pC,KAAO2pC,SACXD,EAAWzpC,SAGlByC,EAAKlU,KAAK,CAACwR,KAAM2pC,GACrB,MAEEprC,EAAWqB,cAAgB2pC,EAG/B,OAAOhrC,CACT,GCpFA,IAAIqrC,GAAe,KACfC,GAAe,KACfC,GAAe,KACfC,GAAa,KACbC,GAAU,CAACC,SAAS,EAAOC,MAAM,EAAOC,SAAS,EAAOC,MAAM,GAOlE,SAASC,GAAiBC,EAAOC,GAE/B,GAAID,GAAgC,kBAAvBA,EAAM5rC,aAAkC,CAEnD,IAMIgC,EANA7S,EAAU,iCAAmC+7C,GAAnC,4IAQd,IACEU,EAAQE,EAAAvB,IAAcjH,OAAOsI,GAC7B5pC,EAAS+pC,OAAOC,KAAKC,iCAAiCL,EACxD,CACA,MAAMl2C,GACJvF,QAAQuF,MAAM,SAAUA,GACxB41C,GAAQE,MAAO,EACfU,GAAkB/8C,EAAU,cAAcuG,EAAM,IAClD,CAEA,GAAIsM,EAAQ,CAEN6pC,IACF7pC,EAAOmqC,cAAgBN,GAIzB7pC,EAAOL,gBAAkB,CACvBE,gBAAgB,EAChBD,kBAAkB,GAIpB,IACEmqC,OAAOC,KAAKI,cAAcpqC,EAAQ,aAAa/K,MAAK,YAkC5D,WACE,IAAIo1C,EAAWrtC,SAASstC,eAAe,gBACnCC,EAAevtC,SAASwtC,cAAc,UACtCC,EAAQ,GACZ,GAAInB,GAAQC,SAAWD,GAAQE,MAAQe,EAAc,CAEnD,GADAE,EAAQ,+CAAiDvB,GACrDI,GAAQG,QACV,GAAIH,GAAQI,KACVe,GAAS,yBAA2BtB,QAGpC,OAAQG,GAAQoB,gBACd,IAAK,QACHD,GAAS,+CAAiDtB,GAC1D,MACF,IAAK,QACHsB,GAAS,+CAAiDtB,GAC1D,MACF,IAAK,SACHsB,GAAS,8CAAgDtB,GACzD,MACF,IAAK,QACHsB,GAAS,+CAAiDtB,GAC1D,MACF,QACEsB,GAAS,uDAAyDtB,QAIjEG,GAAQqB,UAAYrB,GAAQsB,KACnCH,GAAS,gDAAkDrB,GAEpDE,GAAQqB,SAAWrB,GAAQsB,OAClCH,GAAS,mDAAqDrB,IAGhEqB,GAAS,IAET,IAAII,EAAiBd,OAAOC,KAAKc,2BACjC,GAAID,GAAkBA,EAAe99C,OAAS,EAAG,CAC/C09C,GAAS,kDAET,IAAIM,EAAa/tC,SAASstC,eAAe,uBACrCS,IAAYA,EAAWne,MAAMrtB,QAAU,IAGzBvC,SAASstC,eAAe,mBAC9BU,UAAYH,EAAer9C,KAAK,SAC9C,CACF,CAEA68C,EAASY,YAAeR,EAExBS,IAAkB,EACpB,CAvFUC,EACF,GACF,CACA,MAAMz3C,GACJvF,QAAQuF,MAAM,SAAUA,GACxB41C,GAAQE,MAAO,EACfU,GAAkB/8C,EACpB,CACF,CACF,CAEF,CAOA,SAAS+9C,GAAkBE,GACzB,IAAIC,EAAaruC,SAASstC,eAAe,cAEvCe,EAAWze,MAAMrtB,QADf6rC,EACyB,GAGA,MAE/B,CAuFA,SAASE,GAAkBC,EAAMC,GAE/B96C,MAAM66C,GACHt2C,MAAKsX,GACAA,EAAIrV,GACCqV,EAAI/W,OAGJtC,QAAQC,OAAO,yBAA2Bo4C,KAGpDt2C,MAAKO,IACJ,IAAIA,GAA8B,kBAAtBA,EAAKwI,aAKf,OAAO9K,QAAQC,OAAO,yCAA2Co4C,GAJjEjC,GAAQE,MAAO,EACfG,GAAiBn0C,EAAMg2C,EAG0C,IAGpEjc,OAAM77B,IACLvF,QAAQuF,MAAM,SAAUA,GAEtBw2C,GADmB,iBAAVx2C,EACSA,EAGA,qCAAuC63C,EAAA,GAKjE,CAuMA,SAASrB,GAAkB/8C,GACzB,GAAIA,EAAS,CACI6P,SAASstC,eAAe,YAC9B1d,MAAMrtB,QAAU,GACRvC,SAASstC,eAAe,oBAC9BW,YAAc99C,CAC3B,CAEA+9C,IAAkB,EACpB,CAMA,SAASO,KACP,IAAIC,EAAW1uC,SAASstC,eAAe,YACnCoB,IAAUA,EAAS9e,MAAMrtB,QAAU,QACvC,IAAIosC,EAAa3uC,SAASstC,eAAe,oBACrCqB,IAAYA,EAAWV,YAAa,IACxC,IAAIZ,EAAWrtC,SAASstC,eAAe,gBACnCD,IAAUA,EAASY,YAAc,IACrC,IAAIW,EAAc5uC,SAASstC,eAAe,mBACtCsB,IAAaA,EAAYX,YAAc,IACvCW,IAAaA,EAAYhf,MAAMrtB,QAAU,QAC7C,IAAIwrC,EAAa/tC,SAASstC,eAAe,uBACrCS,IAAYA,EAAWne,MAAMrtB,QAAU,QAG3C,IAAIssC,EAAgB7uC,SAASstC,eAAe,aAC5C,KAAOuB,EAAcC,YACnBD,EAAcE,YAAYF,EAAcG,WAI1CjC,OAAOC,KAAKiC,eAAe,MAE3Bf,IAAkB,EAEpB,CAkCA,SAASgB,KAEP5C,GAAU,CAACC,SAAS,EAAOC,MAAM,EAAOC,SAAS,EAAOC,MAAM,EAAOiB,SAAS,EAAOC,MAAM,GAGvF1B,IACFI,GAAQC,SAAU,EAClB2B,IAAkB,GAEd7B,GAEEF,IACFG,GAAQG,SAAU,EAjP1B,SAAqC0C,EAAYZ,GAE/C,IAAIC,EAAc,GAEdW,GACFz7C,MAAMy7C,GACHl3C,MAAKoC,IACJ,GAAIA,EAASH,GAIX,OAAOG,EAASnG,OAHhB,MAAMmG,EAASH,EAGK,IAGrBjC,MAAKoC,IACN,IAAIhE,EAAS,IAAIO,WACjBP,EAAOE,OAAS,SAAS2I,GAEvB,IACE,IAKIkwC,EALWlwC,EAAMtC,OAAOpG,OAKDvI,QAAQ,sCAAuC,IAE1E,MAGMohD,EAHUhmB,KAAK+lB,GAGIx+C,MAAM,IAAIN,KAAI,SAASsjC,GAAG,OAAOA,EAAEniC,WAAW,EAAI,IAGrE69C,EAAU,IAAIp4C,WAAWm4C,GAGzBE,EAAezC,EAAA9kB,GAAKwnB,QAAQF,GAK5BG,EAAa,IAAIjmC,YAAY+lC,GACnC,IAAIG,EAAc,GACd7+C,EAAM4+C,EAAW1/C,OACrB,IAAK,IAAIW,EAAI,EAAGA,EAAIG,EAAKH,IACvBg/C,GAAgB98C,OAAOyF,aAAao3C,EAAW/+C,IAIjD,MAAMi/C,EAAS7C,EAAAtjB,GAAA,CAAOkmB,GAYtB5C,EAAA3jB,GAAA,CAAMwmB,GAQH13C,MAAK,SAAS23C,GACb,GAAIj6C,MAAMC,QAAQg6C,IAAmBA,EAAe7/C,OAAS,EAAG,CAE9D,IAAI8/C,EAAa,CAAC,EAEdC,EAAYF,EAAelc,MAAK,SAASqc,GAAQ,MAAqB,wBAAdA,EAAK/+C,IAA+B,IAEhG,GAAI8+C,EAAW,CACb,IAAIE,EAAmBF,EAAUjnB,aACjC,IAAK,IAAIn4B,EAAE,EAAG0S,EAAO4sC,EAAiBC,MAAMlgD,OAAQW,EAAE0S,EAAM1S,IAAK,CAC/D,IAAIw/C,EAAWF,EAAiBC,MAAMv/C,GACR,aAA1Bw/C,EAASlvC,cAAyD,eAA1BkvC,EAASlvC,eACnD6uC,EAAWK,EAASC,UAAYD,EAEpC,CAEA,IAAK,IAAIjsC,EAAE,EAAGC,EAAO0rC,EAAe7/C,OAAQkU,EAAEC,EAAMD,IAAK,CACvD,IAAImsC,EAAgBR,EAAe3rC,GAC/BisC,EAAWL,EAAWO,EAAcp/C,KAAK/C,QAAQ,aAAc,MAC/DiiD,GAAuC,aAA1BA,EAASlvC,cAAyD,eAA1BkvC,EAASlvC,eAChEkvC,EAASG,YAAcD,EAAcvnB,aACrC2lB,EAAY19C,KAAKo/C,GAErB,CACF,MAGE1B,EAjIpB,SAAkCoB,GAEhC,IAAIpB,EAAc,GAElB,IAAK,IAAIvqC,EAAE,EAAGC,EAAO0rC,EAAe7/C,OAAQkU,EAAEC,EAAMD,IAAK,CACvD,IACImsC,EAAgBR,EAAe3rC,GAEnC,GAAImsC,EAAcp/C,KAAK9C,MAAM,qBAAsB,CACjD,IAAImiD,EAAcD,EAAcvnB,cAC5BwnB,GAA6C,aAA7BA,EAAYrvC,cAA4D,eAA7BqvC,EAAYrvC,cACzEwtC,EAAY19C,KAAK,CACfq/C,SAAUC,EAAcp/C,KAAK/C,QAAQ,aAAc,IACnDoiD,YAAaA,EACbh3C,IAAKg3C,EAAYh3C,IACjB80B,QAASkiB,EAAYliB,QACrBntB,aAAcqvC,EAAYrvC,cAGhC,CACF,CAEA,OAAOwtC,CACT,CA0GkC8B,CAAyBV,GAQzCtD,GAAQI,MAAO,EACf4B,GAAkBC,EAAMC,EAC1B,MAEElC,GAAQI,MAAO,EACfJ,GAAQoB,eAAiB,QACzBY,GAAkBC,EAAMC,EAE5B,IACCjc,OAAM,SAAU77B,GACfvF,QAAQuF,MAAM,cAAey4C,EAAYz4C,GACzC41C,GAAQI,MAAO,EACfJ,GAAQoB,eAAiB,QAEzBY,GAAkBC,EACpB,GAEJ,CACA,MAAM73C,GACJvF,QAAQzC,IAAI,cAAeygD,EAAYz4C,GACvC41C,GAAQI,MAAO,EACfJ,GAAQoB,eAAiB,QAEzBY,GAAkBC,EACpB,CAEF,EAEAl4C,EAAOI,QAAU,SAAUC,GACzBvF,QAAQuF,MAAM,mBAAoBy4C,EAAYz4C,GAC9C41C,GAAQI,MAAO,EACf6D,OAAO7C,eAAiB,SAExBY,GAAkBC,EACpB,EAEAl4C,EAAOm6C,cAAcn2C,EAAA,IAEtBk4B,OAAM77B,IACLvF,QAAQuF,MAAM,eAAgBy4C,EAAYz4C,GAC1C41C,GAAQI,MAAO,EACfJ,GAAQoB,eAAiB,QAEzBY,GAAkBC,EAAA,GAG1B,CA6FQkC,CAA4BtE,GAAcD,KAI1CoC,GAAkBpC,IAMhBE,IACFE,GAAQqB,SAAU,EAlD1B,SAA6C+C,GAC3C,IACE,IAAIzN,EAAO6J,EAAA1B,IAAKrK,OAAO2P,GACvB3D,OAAOC,KAAKiC,eAAehM,GAE3B8J,OAAOC,KAAK2D,wBAAuB,SAASC,QACxBr7C,IAAdq7C,EACFtE,GAAQsB,MAAO,GAGftB,GAAQsB,MAAO,EACfb,OAAOC,KAAKiC,eAAe,OAE7BX,GAAkBpC,GACpB,GACF,CACA,MAAO93C,GACLk4C,GAAQsB,MAAO,EACfz8C,QAAQzC,IAAI0F,GACZk6C,GAAkBpC,GACpB,CACF,CA8BQ2E,CAAoCzE,KAIpCkC,GAAkBpC,KAMtBgB,GAAkB,kDAGtB,CA0EAlmC,OAAO8pC,IAAM,C,cAnbN,WACL,IAAIlC,EAAc5uC,SAASstC,eAAe,mBACtCS,EAAa/tC,SAASstC,eAAe,uBACP,SAA9BsB,EAAYhf,MAAMrtB,SACpBqsC,EAAYhf,MAAMrtB,QAAU,GAC5BwrC,EAAWE,YAAc,0BAGzBW,EAAYhf,MAAMrtB,QAAU,OAC5BwrC,EAAWE,YAAc,wBAE7B,E,WAkWO,WAELQ,KAGA,IAAIsC,EAAa/wC,SAASstC,eAAe,iBACrC0D,EAAYhqC,OAAOvM,SAAS6M,KAC5B2pC,EAAYnE,EAAAxjC,EAAA,CAAM0nC,GAAW,GACjC9E,GAAe+E,GAAaA,EAAUlrC,MAAQkrC,EAAUlrC,MAAMqd,EAAI,KAClE+oB,GAAe8E,GAAaA,EAAUlrC,MAAQkrC,EAAUlrC,MAAMtI,EAAI,KAClE2uC,GAAe6E,GAAaA,EAAUlrC,MAAQkrC,EAAUlrC,MAAM6I,EAAI,KAG7Ds9B,IAKCC,KACFE,IAAa,GAEf6C,MAPA6B,EAAWnhB,MAAMrtB,QAAU,EAS/B,E,kBAMO,WAQLksC,KAEiBzuC,SAASstC,eAAe,iBAE9B1d,MAAMrtB,QAAU,GAC3B2pC,GAAelsC,SAASstC,eAAe,oBAAoBt4C,MAC3Dm3C,GAAensC,SAASstC,eAAe,cAAct4C,MACrDo3C,GAAepsC,SAASstC,eAAe,iBAAiBt4C,MACxDq3C,GAAarsC,SAASstC,eAAe,gBAAgB4D,QAErDhC,IAEF,E,kBAOO,SAA2BiC,EAAeC,GAC/C,IAAIC,EAAarxC,SAASstC,eAAe6D,GACrCE,IACFA,EAAWC,UAAW,GAExB,IAAIC,EAAYvxC,SAASstC,eAAe8D,GACpCG,IACFA,EAAUD,UAAW,EAGzB","sources":["node_modules/is-base64/is-base64.js","node_modules/debug/src/common.js","node_modules/ms/index.js","node_modules/cross-fetch/dist/browser-ponyfill.js","node_modules/abortcontroller-polyfill/dist/abortcontroller-polyfill-only.js","node_modules/lforms-updater/source/versionUpdates/29.0.0.js","node_modules/lforms-updater/source/util.js","node_modules/lforms-updater/source/versionUpdates/28.0.0.js","node_modules/lforms-updater/source/versionUpdates/26.0.0.js","node_modules/lforms-updater/source/versionUpdates/25.0.0.js","node_modules/lforms-updater/source/versionUpdates/24.0.0.js","node_modules/lforms-updater/source/versionUpdates/23.0.0.js","node_modules/lforms-updater/source/versionUpdates/22.0.0.js","node_modules/requires-port/index.js","node_modules/querystringify/index.js","node_modules/url-parse/index.js","node_modules/pako/lib/utils/common.js","node_modules/pako/lib/deflate.js","node_modules/pako/lib/zlib/deflate.js","node_modules/pako/lib/zlib/trees.js","node_modules/pako/index.js","node_modules/pako/lib/zlib/adler32.js","node_modules/pako/lib/zlib/crc32.js","node_modules/pako/lib/zlib/messages.js","node_modules/pako/lib/utils/strings.js","node_modules/pako/lib/zlib/zstream.js","node_modules/pako/lib/inflate.js","node_modules/pako/lib/zlib/inflate.js","node_modules/pako/lib/zlib/inffast.js","node_modules/pako/lib/zlib/inftrees.js","node_modules/pako/lib/zlib/constants.js","node_modules/pako/lib/zlib/gzheader.js","node_modules/js-untar-lhc/build/dist/untar.js","node_modules/atob-lite/atob-browser.js","node_modules/string-to-arraybuffer/index.js","node_modules/fhirclient/lib/adapters/BrowserAdapter.js","node_modules/fhirclient/lib/smart.js","node_modules/fhirclient/lib/lib.js","node_modules/fhirclient/lib/HttpError.js","node_modules/fhirclient/lib/settings.js","node_modules/process/browser.js","node_modules/debug/src/browser.js","node_modules/fhirclient/node_modules/core-js/internals/object-get-own-property-descriptor.js","node_modules/fhirclient/node_modules/core-js/internals/global.js","node_modules/fhirclient/node_modules/core-js/internals/object-property-is-enumerable.js","node_modules/fhirclient/node_modules/core-js/internals/descriptors.js","node_modules/fhirclient/node_modules/core-js/internals/fails.js","node_modules/fhirclient/node_modules/core-js/internals/create-property-descriptor.js","node_modules/fhirclient/node_modules/core-js/internals/classof-raw.js","node_modules/fhirclient/node_modules/core-js/internals/indexed-object.js","node_modules/fhirclient/node_modules/core-js/internals/require-object-coercible.js","node_modules/fhirclient/node_modules/core-js/internals/to-indexed-object.js","node_modules/fhirclient/node_modules/core-js/internals/is-object.js","node_modules/fhirclient/node_modules/core-js/internals/to-primitive.js","node_modules/fhirclient/node_modules/core-js/internals/has.js","node_modules/fhirclient/node_modules/core-js/internals/document-create-element.js","node_modules/fhirclient/node_modules/core-js/internals/ie8-dom-define.js","node_modules/fhirclient/node_modules/core-js/internals/object-define-property.js","node_modules/fhirclient/node_modules/core-js/internals/an-object.js","node_modules/fhirclient/node_modules/core-js/internals/create-non-enumerable-property.js","node_modules/fhirclient/node_modules/core-js/internals/set-global.js","node_modules/fhirclient/node_modules/core-js/internals/shared-store.js","node_modules/fhirclient/node_modules/core-js/internals/inspect-source.js","node_modules/fhirclient/node_modules/core-js/internals/native-weak-map.js","node_modules/fhirclient/node_modules/core-js/internals/shared.js","node_modules/fhirclient/node_modules/core-js/internals/uid.js","node_modules/fhirclient/node_modules/core-js/internals/shared-key.js","node_modules/fhirclient/node_modules/core-js/internals/hidden-keys.js","node_modules/fhirclient/node_modules/core-js/internals/internal-state.js","node_modules/fhirclient/node_modules/core-js/internals/redefine.js","node_modules/fhirclient/node_modules/core-js/internals/path.js","node_modules/fhirclient/node_modules/core-js/internals/get-built-in.js","node_modules/fhirclient/node_modules/core-js/internals/object-get-own-property-names.js","node_modules/fhirclient/node_modules/core-js/internals/to-integer.js","node_modules/fhirclient/node_modules/core-js/internals/to-length.js","node_modules/fhirclient/node_modules/core-js/internals/to-absolute-index.js","node_modules/fhirclient/node_modules/core-js/internals/array-includes.js","node_modules/fhirclient/node_modules/core-js/internals/object-keys-internal.js","node_modules/fhirclient/node_modules/core-js/internals/object-get-own-property-symbols.js","node_modules/fhirclient/node_modules/core-js/internals/enum-bug-keys.js","node_modules/fhirclient/node_modules/core-js/internals/own-keys.js","node_modules/fhirclient/node_modules/core-js/internals/copy-constructor-properties.js","node_modules/fhirclient/node_modules/core-js/internals/is-forced.js","node_modules/fhirclient/node_modules/core-js/internals/export.js","node_modules/fhirclient/node_modules/core-js/internals/is-array.js","node_modules/fhirclient/node_modules/core-js/internals/a-function.js","node_modules/fhirclient/node_modules/core-js/internals/function-bind-context.js","node_modules/fhirclient/node_modules/core-js/internals/flatten-into-array.js","node_modules/fhirclient/node_modules/core-js/internals/to-object.js","node_modules/fhirclient/node_modules/core-js/internals/use-symbol-as-uid.js","node_modules/fhirclient/node_modules/core-js/internals/native-symbol.js","node_modules/fhirclient/node_modules/core-js/internals/well-known-symbol.js","node_modules/fhirclient/node_modules/core-js/internals/array-species-create.js","node_modules/fhirclient/node_modules/core-js/modules/es.array.flat.js","node_modules/fhirclient/node_modules/core-js/internals/object-keys.js","node_modules/fhirclient/node_modules/core-js/internals/object-define-properties.js","node_modules/fhirclient/node_modules/core-js/internals/html.js","node_modules/fhirclient/node_modules/core-js/internals/object-create.js","node_modules/fhirclient/node_modules/core-js/internals/add-to-unscopables.js","node_modules/fhirclient/node_modules/core-js/modules/es.array.unscopables.flat.js","node_modules/fhirclient/lib/Client.js","node_modules/fhirclient/lib/strings.js","node_modules/fhirclient/lib/storage/BrowserStorage.js","node_modules/fhirclient/lib/entry/browser.js","node_modules/lforms-updater/source/versionList.json","node_modules/lforms-updater/source/updateFns.js","node_modules/lforms-updater/source/index.js","source/js/app.js"],"sourcesContent":["(function(root) {\n  'use strict';\n\n  function isBase64(v, opts) {\n    if (v instanceof Boolean || typeof v === 'boolean') {\n      return false\n    }\n    if (!(opts instanceof Object)) {\n      opts = {}\n    }\n    if (opts.hasOwnProperty('allowBlank') && !opts.allowBlank && v === '') {\n      return false\n    }\n\n    var regex = '(?:[A-Za-z0-9+\\\\/]{4})*(?:[A-Za-z0-9+\\\\/]{2}==|[A-Za-z0-9+\\/]{3}=)?';\n\n    if (opts.mime) {\n      regex = '(data:\\\\w+\\\\/[a-zA-Z\\\\+\\\\-\\\\.]+;base64,)?' + regex\n    }\n\n    if (opts.paddingRequired === false) {\n      regex = '(?:[A-Za-z0-9+\\\\/]{4})*(?:[A-Za-z0-9+\\\\/]{2}(==)?|[A-Za-z0-9+\\\\/]{3}=?)?'\n    }\n\n    return (new RegExp('^' + regex + '$', 'gi')).test(v);\n  }\n\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = isBase64;\n    }\n    exports.isBase64 = isBase64;\n  } else if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return isBase64;\n    });\n  } else {\n    root.isBase64 = isBase64;\n  }\n})(this);\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","var global = typeof self !== 'undefined' ? self : this;\nvar __self__ = (function () {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = global.DOMException\n}\nF.prototype = global;\nreturn new F();\n})();\n(function(self) {\n\nvar irrelevant = (function (exports) {\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n  return exports;\n\n})({});\n})(__self__);\n__self__.fetch.ponyfill = true;\n// Remove \"polyfill\" property added by whatwg-fetch\ndelete __self__.fetch.polyfill;\n// Choose between native implementation (global) or custom implementation (__self__)\n// var ctx = global.fetch ? global : __self__;\nvar ctx = __self__; // this line disable service worker support temporarily\nexports = ctx.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = ctx.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = ctx.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = ctx.Headers\nexports.Request = ctx.Request\nexports.Response = ctx.Response\nmodule.exports = exports\n","(function (factory) {\n  typeof define === 'function' && define.amd ? define(factory) :\n  factory();\n}((function () { 'use strict';\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n\n    try {\n      Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _createSuper(Derived) {\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n    return function _createSuperInternal() {\n      var Super = _getPrototypeOf(Derived),\n          result;\n\n      if (hasNativeReflectConstruct) {\n        var NewTarget = _getPrototypeOf(this).constructor;\n\n        result = Reflect.construct(Super, arguments, NewTarget);\n      } else {\n        result = Super.apply(this, arguments);\n      }\n\n      return _possibleConstructorReturn(this, result);\n    };\n  }\n\n  function _superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = _getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function _get(target, property, receiver) {\n    if (typeof Reflect !== \"undefined\" && Reflect.get) {\n      _get = Reflect.get;\n    } else {\n      _get = function _get(target, property, receiver) {\n        var base = _superPropBase(target, property);\n\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return _get(target, property, receiver || target);\n  }\n\n  var Emitter = /*#__PURE__*/function () {\n    function Emitter() {\n      _classCallCheck(this, Emitter);\n\n      Object.defineProperty(this, 'listeners', {\n        value: {},\n        writable: true,\n        configurable: true\n      });\n    }\n\n    _createClass(Emitter, [{\n      key: \"addEventListener\",\n      value: function addEventListener(type, callback, options) {\n        if (!(type in this.listeners)) {\n          this.listeners[type] = [];\n        }\n\n        this.listeners[type].push({\n          callback: callback,\n          options: options\n        });\n      }\n    }, {\n      key: \"removeEventListener\",\n      value: function removeEventListener(type, callback) {\n        if (!(type in this.listeners)) {\n          return;\n        }\n\n        var stack = this.listeners[type];\n\n        for (var i = 0, l = stack.length; i < l; i++) {\n          if (stack[i].callback === callback) {\n            stack.splice(i, 1);\n            return;\n          }\n        }\n      }\n    }, {\n      key: \"dispatchEvent\",\n      value: function dispatchEvent(event) {\n        if (!(event.type in this.listeners)) {\n          return;\n        }\n\n        var stack = this.listeners[event.type];\n        var stackToCall = stack.slice();\n\n        for (var i = 0, l = stackToCall.length; i < l; i++) {\n          var listener = stackToCall[i];\n\n          try {\n            listener.callback.call(this, event);\n          } catch (e) {\n            Promise.resolve().then(function () {\n              throw e;\n            });\n          }\n\n          if (listener.options && listener.options.once) {\n            this.removeEventListener(event.type, listener.callback);\n          }\n        }\n\n        return !event.defaultPrevented;\n      }\n    }]);\n\n    return Emitter;\n  }();\n\n  var AbortSignal = /*#__PURE__*/function (_Emitter) {\n    _inherits(AbortSignal, _Emitter);\n\n    var _super = _createSuper(AbortSignal);\n\n    function AbortSignal() {\n      var _this;\n\n      _classCallCheck(this, AbortSignal);\n\n      _this = _super.call(this); // Some versions of babel does not transpile super() correctly for IE <= 10, if the parent\n      // constructor has failed to run, then \"this.listeners\" will still be undefined and then we call\n      // the parent constructor directly instead as a workaround. For general details, see babel bug:\n      // https://github.com/babel/babel/issues/3041\n      // This hack was added as a fix for the issue described here:\n      // https://github.com/Financial-Times/polyfill-library/pull/59#issuecomment-477558042\n\n      if (!_this.listeners) {\n        Emitter.call(_assertThisInitialized(_this));\n      } // Compared to assignment, Object.defineProperty makes properties non-enumerable by default and\n      // we want Object.keys(new AbortController().signal) to be [] for compat with the native impl\n\n\n      Object.defineProperty(_assertThisInitialized(_this), 'aborted', {\n        value: false,\n        writable: true,\n        configurable: true\n      });\n      Object.defineProperty(_assertThisInitialized(_this), 'onabort', {\n        value: null,\n        writable: true,\n        configurable: true\n      });\n      return _this;\n    }\n\n    _createClass(AbortSignal, [{\n      key: \"toString\",\n      value: function toString() {\n        return '[object AbortSignal]';\n      }\n    }, {\n      key: \"dispatchEvent\",\n      value: function dispatchEvent(event) {\n        if (event.type === 'abort') {\n          this.aborted = true;\n\n          if (typeof this.onabort === 'function') {\n            this.onabort.call(this, event);\n          }\n        }\n\n        _get(_getPrototypeOf(AbortSignal.prototype), \"dispatchEvent\", this).call(this, event);\n      }\n    }]);\n\n    return AbortSignal;\n  }(Emitter);\n  var AbortController = /*#__PURE__*/function () {\n    function AbortController() {\n      _classCallCheck(this, AbortController);\n\n      // Compared to assignment, Object.defineProperty makes properties non-enumerable by default and\n      // we want Object.keys(new AbortController()) to be [] for compat with the native impl\n      Object.defineProperty(this, 'signal', {\n        value: new AbortSignal(),\n        writable: true,\n        configurable: true\n      });\n    }\n\n    _createClass(AbortController, [{\n      key: \"abort\",\n      value: function abort() {\n        var event;\n\n        try {\n          event = new Event('abort');\n        } catch (e) {\n          if (typeof document !== 'undefined') {\n            if (!document.createEvent) {\n              // For Internet Explorer 8:\n              event = document.createEventObject();\n              event.type = 'abort';\n            } else {\n              // For Internet Explorer 11:\n              event = document.createEvent('Event');\n              event.initEvent('abort', false, false);\n            }\n          } else {\n            // Fallback where document isn't available:\n            event = {\n              type: 'abort',\n              bubbles: false,\n              cancelable: false\n            };\n          }\n        }\n\n        this.signal.dispatchEvent(event);\n      }\n    }, {\n      key: \"toString\",\n      value: function toString() {\n        return '[object AbortController]';\n      }\n    }]);\n\n    return AbortController;\n  }();\n\n  if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n    // These are necessary to make sure that we get correct output for:\n    // Object.prototype.toString.call(new AbortController())\n    AbortController.prototype[Symbol.toStringTag] = 'AbortController';\n    AbortSignal.prototype[Symbol.toStringTag] = 'AbortSignal';\n  }\n\n  function polyfillNeeded(self) {\n    if (self.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL) {\n      console.log('__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill');\n      return true;\n    } // Note that the \"unfetch\" minimal fetch polyfill defines fetch() without\n    // defining window.Request, and this polyfill need to work on top of unfetch\n    // so the below feature detection needs the !self.AbortController part.\n    // The Request.prototype check is also needed because Safari versions 11.1.2\n    // up to and including 12.1.x has a window.AbortController present but still\n    // does NOT correctly implement abortable fetch:\n    // https://bugs.webkit.org/show_bug.cgi?id=174980#c2\n\n\n    return typeof self.Request === 'function' && !self.Request.prototype.hasOwnProperty('signal') || !self.AbortController;\n  }\n\n  (function (self) {\n\n    if (!polyfillNeeded(self)) {\n      return;\n    }\n\n    self.AbortController = AbortController;\n    self.AbortSignal = AbortSignal;\n  })(typeof self !== 'undefined' ? self : global);\n\n})));\n","'use strict';\n\n/**\n *  The update function for updating forms or resources to the version in this filename.\n * @return the updated form or resource.\n */\nmodule.exports = function (parsedJSON) {\n  // In this version, the calculatedExpresion URI changed.  This\n  // affects both LForms definitions and Questionnaires.\n\n  let util = require('../util');\n  if (!util.isFHIRResource(parsedJSON) || parsedJSON.resourceType === 'Questionnaire') {\n    util.findExtensions(parsedJSON, function (extArray) {\n      for (let ext of extArray) {\n        if (ext.url === 'http://hl7.org/fhir/StructureDefinition/questionnaire-launchContext') {\n          ext.url = 'http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext';\n        }\n      }\n    });\n  }\n  return parsedJSON;\n};\n","// Utility functions used by other modules in this package.\n\n'use strict';\n\nconst VERSION_REGEX = /^lformsVersion: (.+)$/;\n\nmodule.exports = {\n  /**\n   *  Returns true if the given parsed JSON is a FHIR resource.\n   */\n  isFHIRResource: function (parsedJSON) {\n    return !!parsedJSON.resourceType;\n  },\n\n\n  /**\n   *  Finds extension arrays in the given structure, and calls the callback\n   *  for each array found, passing it as a parameter.\n   */\n  findExtensions: function (parsedJSON, callback) {\n    if (parsedJSON.extension)\n      callback(parsedJSON.extension);\n    let items = parsedJSON.item || parsedJSON.items; // \"items\" is the LForms format\n    if (items) {\n      for (let i of items)\n        this.findExtensions(i, callback);\n    }\n  },\n\n\n  /**\n   *  Finds the item by searching extension arrays in the given structure, and calls the callback\n   *  for each array found, passing the item as a parameter.\n   */\n  findItemByExtension: function (parsedJSON, callback) {\n    if (parsedJSON.extension)\n      callback(parsedJSON);\n    let items = parsedJSON.item || parsedJSON.items; // \"items\" is the LForms format\n    if (items) {\n      for (let i of items)\n        this.findItemByExtension(i, callback);\n    }\n  },\n\n\n  /**\n   *  Returns true if the first version is less than the second version.\n   *  Assumption: There are always three numeric parts in the version strings,\n   *  separated by periods.\n   * @param left the first version (left of the < operator).  This can be\n   *  undefined or null; in that case the return value is true.\n   * @param right the second version (right of the < operator)\n   */\n  versionLessThan: function (left, right) {\n    let rtn;\n    if (!left)\n      rtn = true; // unversioned case\n    else {\n      let leftParts = left.split('.');\n      let rightParts = right.split('.');\n      for (let i=0; i<3 && rtn === undefined; ++i) {\n        let lp = parseInt(leftParts[i]), rp = parseInt(rightParts[i]);\n        if (lp != rp)\n          rtn = lp < rp\n      }\n      if (rtn === undefined)\n        rtn = false;\n    }\n    return rtn;\n  },\n\n\n  /**\n   *  Returns a FHIR tag display string for a given LForms version string.\n   * @param lformsVersion The LForms SemVer string for which a tag is needed.\n   */\n  makeVersionTag: function (lformsVersion) {\n    return 'lformsVersion: '+lformsVersion;\n  },\n\n\n  /**\n   *  Returns the LForms SemVer version from the given FHIR tag object,\n   *  or null if the given tag string does not indicate an LForms version.\n   * @param tag A FHIR tag object\n   */\n  versionFromTag: function(tag) {\n    let rtn = null;\n    // Currently the version is on the \"code\" attribute, but originally it was\n    // on the \"display\" attribute, so we check both.\n    let versionStr = tag.code || tag.display;\n    let md = versionStr.match(VERSION_REGEX);\n    if (md)\n      rtn = md[1];\n    return rtn;\n  },\n\n\n  /**\n   *  Returns true if there is a LForms tag in the FHIR resource\n   * @param parsedJSON the updated resource\n   */\n  hasLformsTag(parsedJSON) {\n    if (parsedJSON.meta && parsedJSON.meta.tag) {\n      for (const tag of parsedJSON.meta.tag) {\n        if (tag.code && tag.code.match(VERSION_REGEX)) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n}\n","'use strict';\n\n/**\n *  The update function for updating forms or resources to the version in this filename.\n * @return the updated form or resource.\n */\nmodule.exports = function (parsedJSON) {\n  // If an observationLinkPeriod extension is used we add observationExtract\n  // This affects LForms and versioned Questionnaires\n\n  let util = require('../util');\n  if (!util.isFHIRResource(parsedJSON) ||\n      (parsedJSON.resourceType === 'Questionnaire' && util.hasLformsTag(parsedJSON))) {\n    util.findExtensions(parsedJSON, function (extArray) {\n      for (const ext of extArray) {\n        // If the observationLinkPeriod is used then add the observationExtract extension too\n        if (ext.url === 'http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-observationLinkPeriod') {\n          extArray.push({\n            url: 'http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-observationExtract',\n            valueBoolean: true\n          });\n          break;\n        }\n      }\n    });\n  }\n  \n  return parsedJSON;\n};\n","'use strict';\n\n/**\n *  The update function for updating forms or resources to the version in this filename.\n * @return the updated form or resource.\n */\nmodule.exports = function (parsedJSON) {\n  // In this version new defaults were provided for templateOptions to hide the header\n  // and the form controls. This only affects LForms.\n\n  let util = require('../util');\n  if (!util.isFHIRResource(parsedJSON)) {\n    if (typeof parsedJSON.templateOptions === 'object') {\n      // If template options were specified we won't override them\n\n      if (parsedJSON.templateOptions.hideFormControls === undefined) {\n        parsedJSON.templateOptions.hideFormControls = false;\n      }\n\n      if (parsedJSON.templateOptions.showFormHeader === undefined) {\n        parsedJSON.templateOptions.showFormHeader = true;\n      }\n\n    } else {\n      // If template options were not specified then add the previous defaults\n      parsedJSON.templateOptions = {\n        hideFormControls: false,\n        showFormHeader: true\n      }\n    }\n  }\n\n  return parsedJSON;\n};\n","'use strict';\n\n/**\n *  The update function for updating forms or resources to the version in this filename.\n * @return the updated form or resource.\n */\nmodule.exports = function (parsedJSON) {\n  // In this version, the calculatedExpresion URI changed.  This\n  // affects both LForms definitions and Questionnaires.\n\n  let util = require('../util');\n  if (!util.isFHIRResource(parsedJSON) || parsedJSON.resourceType === 'Questionnaire') {\n    util.findExtensions(parsedJSON, function (extArray) {\n      for (let ext of extArray) {\n        if (ext.url === \"http://hl7.org/fhir/StructureDefinition/questionnaire-calculatedExpression\")\n          ext.url = \"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression\";\n      }\n    });\n  }\n  return parsedJSON;\n};\n","'use strict';\n\nconst PATH_DELIMITER = \"/\";\n\n/**\n * Generate linkId from questionCode and replace questionCode in form controls\n * with linkId.\n * @param lfData a LForms form definition data object\n */\nfunction convertCodeToLinkId(lfData) {\n  _addLinkId(lfData.items, '', lfData);\n  _convertFormControls(lfData.items);\n  _removeTempFields(lfData.items)\n}\n\n/**\n * Remove the temporary fields created during the conversion\n * @param items a list of LForms items\n * @private\n */\nfunction _removeTempFields(items) {\n  // for each item on this level\n  for (var i = 0, iLen = items.length; i < iLen; i++) {\n    var item = items[i];\n    delete item._parentItem;\n    delete item._codePath;\n    // process the sub items\n    if (item.items && item.items.length > 0) {\n      _removeTempFields(item.items);\n    }\n  }\n}\n\n/**\n * Generate linkId from questionCode\n * @param items a list of LForms items\n * @param parentItemCodePath the codePath of the parent item\n * @param parentItem the parent item\n * @private\n */\nfunction _addLinkId(items, parentItemCodePath, parentItem) {\n\n  var iLen = items.length, prevSibling = null, itemId = 1;\n\n  // for each item on this level\n  for (var i = 0; i < iLen; i++) {\n    var item = items[i];\n\n    var questionRepeatable = item.questionCardinality && item.questionCardinality.max &&\n        (item.questionCardinality.max === \"*\" || parseInt(item.questionCardinality.max) > 1);\n\n    // id\n    if (questionRepeatable && prevSibling && prevSibling.questionCode === item.questionCode) {\n      itemId += 1;\n    } else {\n      itemId = 1;\n    }\n\n    // codePath as linkId\n    var codePath = parentItemCodePath + PATH_DELIMITER + item.questionCode;\n\n    item._parentItem = parentItem;\n    item._codePath = codePath;\n\n    // linkId for Questionnaire\n    if (!item.linkId) {\n      item.linkId = codePath;\n    }\n    // keep a reference to the previous item for checking repeating items.\n    prevSibling = item;\n\n    // process the sub items\n    if (item.items && item.items.length > 0) {\n      _addLinkId(item.items, codePath, item);\n    }\n  }\n}\n\n\n/**\n * Convert questionCode in all form controls (skip logic, data control, calculation method)\n * to linkId\n * @param items a list of LForms items\n * @private\n */\nfunction _convertFormControls(items) {\n\n  for(var i=0, iLen=items.length; i<iLen; i++) {\n    var item = items[i];\n    // convert code in skip logic to be linkId\n    if (item.skipLogic && item.skipLogic.conditions) {\n      for (var j = 0, jLen = item.skipLogic.conditions.length; j < jLen; j++) {\n        var condition = item.skipLogic.conditions[j];\n        var sourceItem = _findItemsUpwardsAlongAncestorTree(item, condition.source); // source is still a code\n        condition.source = sourceItem.linkId;\n      } // end of conditions loop\n    }\n\n    // convert code in dataControl to be linkId\n    if (item.dataControl) {\n      for (var j= 0, jLen=item.dataControl.length; j<jLen; j++) {\n        var source = item.dataControl[j].source;\n\n        // has a source configuration\n        if (source && (!source.sourceType || source.sourceType === \"INTERNAL\") &&\n            source.sourceItemCode) {\n          // get the source item object\n          var sourceItem = _findItemsUpwardsAlongAncestorTree(item, source.sourceItemCode);\n          if (!sourceItem) {\n            // This is an error in the form definition.  Provide a useful\n            // debugging message.\n            throw new Error(\"Data control for item '\"+item.question+ \"' refers to source item '\"+source.sourceItemCode+\n                \"' which was not found as a sibling, ancestor, or ancestor sibling.\");\n          }\n          source.sourceLinkId = sourceItem.linkId;\n          delete source.sourceItemCode;\n        }\n      }\n    }\n\n    // convert code in calculationMethod to be linkId\n    if (item.calculationMethod && item.calculationMethod.value && Array.isArray(item.calculationMethod.value)) {\n      var newValue = [];\n      for (var j= 0, jLen=item.calculationMethod.value.length; j<jLen; j++) {\n        var questionCode = item.calculationMethod.value[j];\n        var sourceItem = _findItemsUpwardsAlongAncestorTree(item, questionCode);\n        newValue.push(sourceItem.linkId);\n      }\n\n      item.calculationMethod.value = newValue;\n    }\n\n    if (item.items && item.items.length > 0) {\n      _convertFormControls(item.items);\n    }\n  }\n\n}\n\n\n/**\n * Search upwards along the tree structure to find the item with a matching questionCode\n * @param item the item to start with\n * @param questionCode the code of an item\n * @returns {}\n * @private\n */\nfunction _findItemsUpwardsAlongAncestorTree(item, questionCode) {\n  var sourceItem = null;\n\n  // check siblings\n  if (item._parentItem && Array.isArray(item._parentItem.items)) {\n    for (var i= 0, iLen= item._parentItem.items.length; i<iLen; i++) {\n      if (item._parentItem.items[i].questionCode === questionCode) {\n        sourceItem = item._parentItem.items[i];\n        break;\n      }\n    }\n  }\n  // check ancestors and each ancestors siblings\n  if (!sourceItem) {\n    var parentItem = item._parentItem;\n    while (parentItem) {\n      var foundSource = false;\n      // check the ancestor\n      if (parentItem.questionCode === questionCode) {\n        sourceItem = parentItem;\n        foundSource = true;\n      }\n      // check the ancestors siblings\n      else if (parentItem._parentItem && Array.isArray(parentItem._parentItem.items)){\n        var parentSiblings = parentItem._parentItem.items;\n        for (var i= 0, iLen= parentSiblings.length; i<iLen; i++) {\n          if (parentSiblings[i].questionCode === questionCode) {\n            sourceItem = parentSiblings[i];\n            foundSource = true;\n            break;\n          }\n        }\n      }\n      if (foundSource)\n        break;\n\n      parentItem = parentItem._parentItem;\n    }\n  }\n  return sourceItem;\n}\n\n\n/**\n *  The update function for updating forms or resources to the version in this filename.\n * @param parsedJSON either an LForms definition or a resource generated by\n *  LForms.\n * @return the updated form or resource.\n */\nmodule.exports = function (parsedJSON) {\n\n  let util = require('../util');\n  // if it is LForms form data object\n  if (!util.isFHIRResource(parsedJSON) && parsedJSON.items) {\n    convertCodeToLinkId(parsedJSON);\n  }\n  return parsedJSON;\n};\n","'use strict';\n\n/**\n *  The update function for updating forms or resources to the version in this filename.\n * @param parsedJSON either an LForms definition or a resource generated by\n *  LForms.\n * @return the updated form or resource.\n */\nmodule.exports = function (parsedJSON) {\n  // In this version, the lformsVersion tag changed to have its value on the\n  // \"code\" field rather than the \"display\" field (because the HAPI FHIR server\n  // requires a \"code\" for tags).\n  let util = require('../util');\n  let meta = parsedJSON.meta;\n  if (meta) {\n    let tags = meta.tag;\n    if (tags) {\n      for (let t of tags) {\n        let version = util.versionFromTag(t);\n        if (version) {\n          // Move the version string from \"display\" to \"code\".  The index.js\n          // code will handle updating the version number.\n          if (t.display && !t.code) {\n            t.code = t.display;\n            delete t.display;\n          }\n          break;\n        }\n      }\n    }\n  }\n\n  // In this version the extension in Questionnaire for answer repeats is removed, and replaced with repeats = true.\n  if (parsedJSON.resourceType === 'Questionnaire') {\n    util.findItemByExtension(parsedJSON, function (item) {\n      if (item.extension) {\n        for (let i=0; i< item.extension.length; i++) {\n          let ext = item.extension[i];\n          if (ext.url === \"http://hl7.org/fhir/StructureDefinition/questionnaire-answerRepeats\") {\n            item.repeats = true;\n            item.extension.splice(i, 1);\n            i = i - 1;\n          }\n        }\n      }\n    });\n  }\n\n  return parsedJSON;\n};\n","'use strict';\n\n/**\n *  The update function for updating forms or resources to the version in this filename.\n * @return the updated form or resource.\n */\nmodule.exports = function (parsedJSON) {\n  // In this version, the observationLinkPeriod extension changed.  This\n  // affects both LForms definitions and Questionnaires.\n\n  let util = require('../util');\n  if (!util.isFHIRResource(parsedJSON) || parsedJSON.resourceType === 'Questionnaire') {\n    util.findExtensions(parsedJSON, function (extArray) {\n      for (let ext of extArray) {\n        if (ext.url === \"http://hl7.org/fhir/StructureDefinition/questionnaire-observationLinkPeriod\")\n          ext.url = \"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-observationLinkPeriod\";\n      }\n    });\n  }\n  return parsedJSON;\n};\n","'use strict';\n\n/**\n * Check if we're required to add a port number.\n *\n * @see https://url.spec.whatwg.org/#default-port\n * @param {Number|String} port Port number we need to check\n * @param {String} protocol Protocol we need to check against.\n * @returns {Boolean} Is it a default port for the given protocol\n * @api private\n */\nmodule.exports = function required(port, protocol) {\n  protocol = protocol.split(':')[0];\n  port = +port;\n\n  if (!port) return false;\n\n  switch (protocol) {\n    case 'http':\n    case 'ws':\n    return port !== 80;\n\n    case 'https':\n    case 'wss':\n    return port !== 443;\n\n    case 'ftp':\n    return port !== 21;\n\n    case 'gopher':\n    return port !== 70;\n\n    case 'file':\n    return false;\n  }\n\n  return port !== 0;\n};\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , undef;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = []\n    , value\n    , key;\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key];\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value);\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue;\n      pairs.push(key +'='+ value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n","'use strict';\n\nvar required = require('requires-port')\n  , qs = require('querystringify')\n  , controlOrWhitespace = /^[\\x00-\\x20\\u00a0\\u1680\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]+/\n  , CRHTLF = /[\\n\\r\\t]/g\n  , slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//\n  , port = /:\\d+$/\n  , protocolre = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\\\/]+)?([\\S\\s]*)/i\n  , windowsDriveLetter = /^[a-zA-Z]:/;\n\n/**\n * Remove control characters and whitespace from the beginning of a string.\n *\n * @param {Object|String} str String to trim.\n * @returns {String} A new string representing `str` stripped of control\n *     characters and whitespace from its beginning.\n * @public\n */\nfunction trimLeft(str) {\n  return (str ? str : '').toString().replace(controlOrWhitespace, '');\n}\n\n/**\n * These are the parse rules for the URL parser, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\nvar rules = [\n  ['#', 'hash'],                        // Extract from the back.\n  ['?', 'query'],                       // Extract from the back.\n  function sanitize(address, url) {     // Sanitize what is left of the address\n    return isSpecial(url.protocol) ? address.replace(/\\\\/g, '/') : address;\n  },\n  ['/', 'pathname'],                    // Extract from the back.\n  ['@', 'auth', 1],                     // Extract from the front.\n  [NaN, 'host', undefined, 1, 1],       // Set left over value.\n  [/:(\\d*)$/, 'port', undefined, 1],    // RegExp the back.\n  [NaN, 'hostname', undefined, 1, 1]    // Set left over.\n];\n\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\nvar ignore = { hash: 1, query: 1 };\n\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @public\n */\nfunction lolcation(loc) {\n  var globalVar;\n\n  if (typeof window !== 'undefined') globalVar = window;\n  else if (typeof global !== 'undefined') globalVar = global;\n  else if (typeof self !== 'undefined') globalVar = self;\n  else globalVar = {};\n\n  var location = globalVar.location || {};\n  loc = loc || location;\n\n  var finaldestination = {}\n    , type = typeof loc\n    , key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new Url(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new Url(loc, {});\n    for (key in ignore) delete finaldestination[key];\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) continue;\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n}\n\n/**\n * Check whether a protocol scheme is special.\n *\n * @param {String} The protocol scheme of the URL\n * @return {Boolean} `true` if the protocol scheme is special, else `false`\n * @private\n */\nfunction isSpecial(scheme) {\n  return (\n    scheme === 'file:' ||\n    scheme === 'ftp:' ||\n    scheme === 'http:' ||\n    scheme === 'https:' ||\n    scheme === 'ws:' ||\n    scheme === 'wss:'\n  );\n}\n\n/**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase.\n * @property {Boolean} slashes `true` if protocol is followed by \"//\", else `false`.\n * @property {String} rest Rest of the URL that is not part of the protocol.\n */\n\n/**\n * Extract protocol information from a URL with/without double slash (\"//\").\n *\n * @param {String} address URL we want to extract from.\n * @param {Object} location\n * @return {ProtocolExtract} Extracted information.\n * @private\n */\nfunction extractProtocol(address, location) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n  location = location || {};\n\n  var match = protocolre.exec(address);\n  var protocol = match[1] ? match[1].toLowerCase() : '';\n  var forwardSlashes = !!match[2];\n  var otherSlashes = !!match[3];\n  var slashesCount = 0;\n  var rest;\n\n  if (forwardSlashes) {\n    if (otherSlashes) {\n      rest = match[2] + match[3] + match[4];\n      slashesCount = match[2].length + match[3].length;\n    } else {\n      rest = match[2] + match[4];\n      slashesCount = match[2].length;\n    }\n  } else {\n    if (otherSlashes) {\n      rest = match[3] + match[4];\n      slashesCount = match[3].length;\n    } else {\n      rest = match[4]\n    }\n  }\n\n  if (protocol === 'file:') {\n    if (slashesCount >= 2) {\n      rest = rest.slice(2);\n    }\n  } else if (isSpecial(protocol)) {\n    rest = match[4];\n  } else if (protocol) {\n    if (forwardSlashes) {\n      rest = rest.slice(2);\n    }\n  } else if (slashesCount >= 2 && isSpecial(location.protocol)) {\n    rest = match[4];\n  }\n\n  return {\n    protocol: protocol,\n    slashes: forwardSlashes || isSpecial(protocol),\n    slashesCount: slashesCount,\n    rest: rest\n  };\n}\n\n/**\n * Resolve a relative URL pathname against a base URL pathname.\n *\n * @param {String} relative Pathname of the relative URL.\n * @param {String} base Pathname of the base URL.\n * @return {String} Resolved pathname.\n * @private\n */\nfunction resolve(relative, base) {\n  if (relative === '') return base;\n\n  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/'))\n    , i = path.length\n    , last = path[i - 1]\n    , unshift = false\n    , up = 0;\n\n  while (i--) {\n    if (path[i] === '.') {\n      path.splice(i, 1);\n    } else if (path[i] === '..') {\n      path.splice(i, 1);\n      up++;\n    } else if (up) {\n      if (i === 0) unshift = true;\n      path.splice(i, 1);\n      up--;\n    }\n  }\n\n  if (unshift) path.unshift('');\n  if (last === '.' || last === '..') path.push('');\n\n  return path.join('/');\n}\n\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my OCD.\n *\n * It is worth noting that we should not use `URL` as class name to prevent\n * clashes with the global URL instance that got introduced in browsers.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} [location] Location defaults for relative paths.\n * @param {Boolean|Function} [parser] Parser for the query string.\n * @private\n */\nfunction Url(address, location, parser) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n\n  if (!(this instanceof Url)) {\n    return new Url(address, location, parser);\n  }\n\n  var relative, extracted, parse, instruction, index, key\n    , instructions = rules.slice()\n    , type = typeof location\n    , url = this\n    , i = 0;\n\n  //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) parser = qs.parse;\n\n  location = lolcation(location);\n\n  //\n  // Extract protocol information before running the instructions.\n  //\n  extracted = extractProtocol(address || '', location);\n  relative = !extracted.protocol && !extracted.slashes;\n  url.slashes = extracted.slashes || relative && location.slashes;\n  url.protocol = extracted.protocol || location.protocol || '';\n  address = extracted.rest;\n\n  //\n  // When the authority component is absent the URL starts with a path\n  // component.\n  //\n  if (\n    extracted.protocol === 'file:' && (\n      extracted.slashesCount !== 2 || windowsDriveLetter.test(address)) ||\n    (!extracted.slashes &&\n      (extracted.protocol ||\n        extracted.slashesCount < 2 ||\n        !isSpecial(url.protocol)))\n  ) {\n    instructions[3] = [/(.*)/, 'pathname'];\n  }\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n\n    if (typeof instruction === 'function') {\n      address = instruction(address, url);\n      continue;\n    }\n\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      index = parse === '@'\n        ? address.lastIndexOf(parse)\n        : address.indexOf(parse);\n\n      if (~index) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if ((index = parse.exec(address))) {\n      url[key] = index[1];\n      address = address.slice(0, index.index);\n    }\n\n    url[key] = url[key] || (\n      relative && instruction[3] ? location[key] || '' : ''\n    );\n\n    //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n    if (instruction[4]) url[key] = url[key].toLowerCase();\n  }\n\n  //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n  if (parser) url.query = parser(url.query);\n\n  //\n  // If the URL is relative, resolve the pathname against the base URL.\n  //\n  if (\n      relative\n    && location.slashes\n    && url.pathname.charAt(0) !== '/'\n    && (url.pathname !== '' || location.pathname !== '')\n  ) {\n    url.pathname = resolve(url.pathname, location.pathname);\n  }\n\n  //\n  // Default to a / for pathname if none exists. This normalizes the URL\n  // to always have a /\n  //\n  if (url.pathname.charAt(0) !== '/' && isSpecial(url.protocol)) {\n    url.pathname = '/' + url.pathname;\n  }\n\n  //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n  if (!required(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  }\n\n  //\n  // Parse down the `auth` for the username and password.\n  //\n  url.username = url.password = '';\n\n  if (url.auth) {\n    index = url.auth.indexOf(':');\n\n    if (~index) {\n      url.username = url.auth.slice(0, index);\n      url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n      url.password = url.auth.slice(index + 1);\n      url.password = encodeURIComponent(decodeURIComponent(url.password))\n    } else {\n      url.username = encodeURIComponent(decodeURIComponent(url.auth));\n    }\n\n    url.auth = url.password ? url.username +':'+ url.password : url.username;\n  }\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  //\n  // The href is just the compiled result.\n  //\n  url.href = url.toString();\n}\n\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} part          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function\n *                               used to parse the query.\n *                               When setting the protocol, double slash will be\n *                               removed from the final url if it is true.\n * @returns {URL} URL instance for chaining.\n * @public\n */\nfunction set(part, value, fn) {\n  var url = this;\n\n  switch (part) {\n    case 'query':\n      if ('string' === typeof value && value.length) {\n        value = (fn || qs.parse)(value);\n      }\n\n      url[part] = value;\n      break;\n\n    case 'port':\n      url[part] = value;\n\n      if (!required(value, url.protocol)) {\n        url.host = url.hostname;\n        url[part] = '';\n      } else if (value) {\n        url.host = url.hostname +':'+ value;\n      }\n\n      break;\n\n    case 'hostname':\n      url[part] = value;\n\n      if (url.port) value += ':'+ url.port;\n      url.host = value;\n      break;\n\n    case 'host':\n      url[part] = value;\n\n      if (port.test(value)) {\n        value = value.split(':');\n        url.port = value.pop();\n        url.hostname = value.join(':');\n      } else {\n        url.hostname = value;\n        url.port = '';\n      }\n\n      break;\n\n    case 'protocol':\n      url.protocol = value.toLowerCase();\n      url.slashes = !fn;\n      break;\n\n    case 'pathname':\n    case 'hash':\n      if (value) {\n        var char = part === 'pathname' ? '/' : '#';\n        url[part] = value.charAt(0) !== char ? char + value : value;\n      } else {\n        url[part] = value;\n      }\n      break;\n\n    case 'username':\n    case 'password':\n      url[part] = encodeURIComponent(value);\n      break;\n\n    case 'auth':\n      var index = value.indexOf(':');\n\n      if (~index) {\n        url.username = value.slice(0, index);\n        url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n        url.password = value.slice(index + 1);\n        url.password = encodeURIComponent(decodeURIComponent(url.password));\n      } else {\n        url.username = encodeURIComponent(decodeURIComponent(value));\n      }\n  }\n\n  for (var i = 0; i < rules.length; i++) {\n    var ins = rules[i];\n\n    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();\n  }\n\n  url.auth = url.password ? url.username +':'+ url.password : url.username;\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  url.href = url.toString();\n\n  return url;\n}\n\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String} Compiled version of the URL.\n * @public\n */\nfunction toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;\n\n  var query\n    , url = this\n    , host = url.host\n    , protocol = url.protocol;\n\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';\n\n  var result =\n    protocol +\n    ((url.protocol && url.slashes) || isSpecial(url.protocol) ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) result += ':'+ url.password;\n    result += '@';\n  } else if (url.password) {\n    result += ':'+ url.password;\n    result += '@';\n  } else if (\n    url.protocol !== 'file:' &&\n    isSpecial(url.protocol) &&\n    !host &&\n    url.pathname !== '/'\n  ) {\n    //\n    // Add back the empty userinfo, otherwise the original invalid URL\n    // might be transformed into a valid one with `url.pathname` as host.\n    //\n    result += '@';\n  }\n\n  //\n  // Trailing colon is removed from `url.host` when it is parsed. If it still\n  // ends with a colon, then add back the trailing colon that was removed. This\n  // prevents an invalid URL from being transformed into a valid one.\n  //\n  if (host[host.length - 1] === ':' || (port.test(url.hostname) && !url.port)) {\n    host += ':';\n  }\n\n  result += host + url.pathname;\n\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) result += '?' !== query.charAt(0) ? '?'+ query : query;\n\n  if (url.hash) result += url.hash;\n\n  return result;\n}\n\nUrl.prototype = { set: set, toString: toString };\n\n//\n// Expose the URL parser and some additional properties that might be useful for\n// others or testing.\n//\nUrl.extractProtocol = extractProtocol;\nUrl.location = lolcation;\nUrl.trimLeft = trimLeft;\nUrl.qs = qs;\n\nmodule.exports = Url;\n","'use strict';\n\n\nvar TYPED_OK =  (typeof Uint8Array !== 'undefined') &&\n                (typeof Uint16Array !== 'undefined') &&\n                (typeof Int32Array !== 'undefined');\n\nfunction _has(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nexports.assign = function (obj /*from1, from2, from3, ...*/) {\n  var sources = Array.prototype.slice.call(arguments, 1);\n  while (sources.length) {\n    var source = sources.shift();\n    if (!source) { continue; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be non-object');\n    }\n\n    for (var p in source) {\n      if (_has(source, p)) {\n        obj[p] = source[p];\n      }\n    }\n  }\n\n  return obj;\n};\n\n\n// reduce buffer size, avoiding mem copy\nexports.shrinkBuf = function (buf, size) {\n  if (buf.length === size) { return buf; }\n  if (buf.subarray) { return buf.subarray(0, size); }\n  buf.length = size;\n  return buf;\n};\n\n\nvar fnTyped = {\n  arraySet: function (dest, src, src_offs, len, dest_offs) {\n    if (src.subarray && dest.subarray) {\n      dest.set(src.subarray(src_offs, src_offs + len), dest_offs);\n      return;\n    }\n    // Fallback to ordinary array\n    for (var i = 0; i < len; i++) {\n      dest[dest_offs + i] = src[src_offs + i];\n    }\n  },\n  // Join array of chunks to single array.\n  flattenChunks: function (chunks) {\n    var i, l, len, pos, chunk, result;\n\n    // calculate data length\n    len = 0;\n    for (i = 0, l = chunks.length; i < l; i++) {\n      len += chunks[i].length;\n    }\n\n    // join chunks\n    result = new Uint8Array(len);\n    pos = 0;\n    for (i = 0, l = chunks.length; i < l; i++) {\n      chunk = chunks[i];\n      result.set(chunk, pos);\n      pos += chunk.length;\n    }\n\n    return result;\n  }\n};\n\nvar fnUntyped = {\n  arraySet: function (dest, src, src_offs, len, dest_offs) {\n    for (var i = 0; i < len; i++) {\n      dest[dest_offs + i] = src[src_offs + i];\n    }\n  },\n  // Join array of chunks to single array.\n  flattenChunks: function (chunks) {\n    return [].concat.apply([], chunks);\n  }\n};\n\n\n// Enable/Disable typed arrays use, for testing\n//\nexports.setTyped = function (on) {\n  if (on) {\n    exports.Buf8  = Uint8Array;\n    exports.Buf16 = Uint16Array;\n    exports.Buf32 = Int32Array;\n    exports.assign(exports, fnTyped);\n  } else {\n    exports.Buf8  = Array;\n    exports.Buf16 = Array;\n    exports.Buf32 = Array;\n    exports.assign(exports, fnUntyped);\n  }\n};\n\nexports.setTyped(TYPED_OK);\n","'use strict';\n\n\nvar zlib_deflate = require('./zlib/deflate');\nvar utils        = require('./utils/common');\nvar strings      = require('./utils/strings');\nvar msg          = require('./zlib/messages');\nvar ZStream      = require('./zlib/zstream');\n\nvar toString = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nvar Z_NO_FLUSH      = 0;\nvar Z_FINISH        = 4;\n\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\nvar Z_SYNC_FLUSH    = 2;\n\nvar Z_DEFAULT_COMPRESSION = -1;\n\nvar Z_DEFAULT_STRATEGY    = 0;\n\nvar Z_DEFLATED  = 8;\n\n/* ===========================================================================*/\n\n\n/**\n * class Deflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[deflate]],\n * [[deflateRaw]] and [[gzip]].\n **/\n\n/* internal\n * Deflate.chunks -> Array\n *\n * Chunks of output data, if [[Deflate#onData]] not overridden.\n **/\n\n/**\n * Deflate.result -> Uint8Array|Array\n *\n * Compressed result, generated by default [[Deflate#onData]]\n * and [[Deflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Deflate#push]] with `Z_FINISH` / `true` param)  or if you\n * push a chunk with explicit flush (call [[Deflate#push]] with\n * `Z_SYNC_FLUSH` param).\n **/\n\n/**\n * Deflate.err -> Number\n *\n * Error code after deflate finished. 0 (Z_OK) on success.\n * You will not need it in real life, because deflate errors\n * are possible only on wrong options or bad `onData` / `onEnd`\n * custom handlers.\n **/\n\n/**\n * Deflate.msg -> String\n *\n * Error message, if [[Deflate.err]] != 0\n **/\n\n\n/**\n * new Deflate(options)\n * - options (Object): zlib deflate options.\n *\n * Creates new deflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `level`\n * - `windowBits`\n * - `memLevel`\n * - `strategy`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw deflate\n * - `gzip` (Boolean) - create gzip wrapper\n * - `to` (String) - if equal to 'string', then result will be \"binary string\"\n *    (each char code [0..255])\n * - `header` (Object) - custom header for gzip\n *   - `text` (Boolean) - true if compressed data believed to be text\n *   - `time` (Number) - modification time, unix timestamp\n *   - `os` (Number) - operation system code\n *   - `extra` (Array) - array of bytes with extra data (max 65536)\n *   - `name` (String) - file name (binary string)\n *   - `comment` (String) - comment (binary string)\n *   - `hcrc` (Boolean) - true if header crc should be added\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , chunk1 = Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * var deflate = new pako.Deflate({ level: 3});\n *\n * deflate.push(chunk1, false);\n * deflate.push(chunk2, true);  // true -> last chunk\n *\n * if (deflate.err) { throw new Error(deflate.err); }\n *\n * console.log(deflate.result);\n * ```\n **/\nfunction Deflate(options) {\n  if (!(this instanceof Deflate)) return new Deflate(options);\n\n  this.options = utils.assign({\n    level: Z_DEFAULT_COMPRESSION,\n    method: Z_DEFLATED,\n    chunkSize: 16384,\n    windowBits: 15,\n    memLevel: 8,\n    strategy: Z_DEFAULT_STRATEGY,\n    to: ''\n  }, options || {});\n\n  var opt = this.options;\n\n  if (opt.raw && (opt.windowBits > 0)) {\n    opt.windowBits = -opt.windowBits;\n  }\n\n  else if (opt.gzip && (opt.windowBits > 0) && (opt.windowBits < 16)) {\n    opt.windowBits += 16;\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm = new ZStream();\n  this.strm.avail_out = 0;\n\n  var status = zlib_deflate.deflateInit2(\n    this.strm,\n    opt.level,\n    opt.method,\n    opt.windowBits,\n    opt.memLevel,\n    opt.strategy\n  );\n\n  if (status !== Z_OK) {\n    throw new Error(msg[status]);\n  }\n\n  if (opt.header) {\n    zlib_deflate.deflateSetHeader(this.strm, opt.header);\n  }\n\n  if (opt.dictionary) {\n    var dict;\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      // If we need to compress text, change encoding to utf8.\n      dict = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      dict = new Uint8Array(opt.dictionary);\n    } else {\n      dict = opt.dictionary;\n    }\n\n    status = zlib_deflate.deflateSetDictionary(this.strm, dict);\n\n    if (status !== Z_OK) {\n      throw new Error(msg[status]);\n    }\n\n    this._dict_set = true;\n  }\n}\n\n/**\n * Deflate#push(data[, mode]) -> Boolean\n * - data (Uint8Array|Array|ArrayBuffer|String): input data. Strings will be\n *   converted to utf8 byte sequence.\n * - mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to deflate pipe, generating [[Deflate#onData]] calls with\n * new compressed chunks. Returns `true` on success. The last data block must have\n * mode Z_FINISH (or `true`). That will flush internal pending buffers and call\n * [[Deflate#onEnd]]. For interim explicit flushes (without ending the stream) you\n * can use mode Z_SYNC_FLUSH, keeping the compression context.\n *\n * On fail call [[Deflate#onEnd]] with error code and return false.\n *\n * We strongly recommend to use `Uint8Array` on input for best speed (output\n * array format is detected automatically). Also, don't skip last param and always\n * use the same type in your code (boolean or number). That will improve JS speed.\n *\n * For regular `Array`-s make sure all elements are [0..255].\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nDeflate.prototype.push = function (data, mode) {\n  var strm = this.strm;\n  var chunkSize = this.options.chunkSize;\n  var status, _mode;\n\n  if (this.ended) { return false; }\n\n  _mode = (mode === ~~mode) ? mode : ((mode === true) ? Z_FINISH : Z_NO_FLUSH);\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // If we need to compress text, change encoding to utf8.\n    strm.input = strings.string2buf(data);\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  do {\n    if (strm.avail_out === 0) {\n      strm.output = new utils.Buf8(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n    status = zlib_deflate.deflate(strm, _mode);    /* no bad return value */\n\n    if (status !== Z_STREAM_END && status !== Z_OK) {\n      this.onEnd(status);\n      this.ended = true;\n      return false;\n    }\n    if (strm.avail_out === 0 || (strm.avail_in === 0 && (_mode === Z_FINISH || _mode === Z_SYNC_FLUSH))) {\n      if (this.options.to === 'string') {\n        this.onData(strings.buf2binstring(utils.shrinkBuf(strm.output, strm.next_out)));\n      } else {\n        this.onData(utils.shrinkBuf(strm.output, strm.next_out));\n      }\n    }\n  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== Z_STREAM_END);\n\n  // Finalize on the last chunk.\n  if (_mode === Z_FINISH) {\n    status = zlib_deflate.deflateEnd(this.strm);\n    this.onEnd(status);\n    this.ended = true;\n    return status === Z_OK;\n  }\n\n  // callback interim results if Z_SYNC_FLUSH.\n  if (_mode === Z_SYNC_FLUSH) {\n    this.onEnd(Z_OK);\n    strm.avail_out = 0;\n    return true;\n  }\n\n  return true;\n};\n\n\n/**\n * Deflate#onData(chunk) -> Void\n * - chunk (Uint8Array|Array|String): output data. Type of array depends\n *   on js engine support. When string output requested, each chunk\n *   will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nDeflate.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Deflate#onEnd(status) -> Void\n * - status (Number): deflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called once after you tell deflate that the input stream is\n * complete (Z_FINISH) or should be flushed (Z_SYNC_FLUSH)\n * or if an error happened. By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nDeflate.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK) {\n    if (this.options.to === 'string') {\n      this.result = this.chunks.join('');\n    } else {\n      this.result = utils.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * deflate(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * Compress `data` with deflate algorithm and `options`.\n *\n * Supported options are:\n *\n * - level\n * - windowBits\n * - memLevel\n * - strategy\n * - dictionary\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be \"binary string\"\n *    (each char code [0..255])\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , data = Uint8Array([1,2,3,4,5,6,7,8,9]);\n *\n * console.log(pako.deflate(data));\n * ```\n **/\nfunction deflate(input, options) {\n  var deflator = new Deflate(options);\n\n  deflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (deflator.err) { throw deflator.msg || msg[deflator.err]; }\n\n  return deflator.result;\n}\n\n\n/**\n * deflateRaw(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction deflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return deflate(input, options);\n}\n\n\n/**\n * gzip(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but create gzip wrapper instead of\n * deflate one.\n **/\nfunction gzip(input, options) {\n  options = options || {};\n  options.gzip = true;\n  return deflate(input, options);\n}\n\n\nexports.Deflate = Deflate;\nexports.deflate = deflate;\nexports.deflateRaw = deflateRaw;\nexports.gzip = gzip;\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils   = require('../utils/common');\nvar trees   = require('./trees');\nvar adler32 = require('./adler32');\nvar crc32   = require('./crc32');\nvar msg     = require('./messages');\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n/* Allowed flush values; see deflate() and inflate() below for details */\nvar Z_NO_FLUSH      = 0;\nvar Z_PARTIAL_FLUSH = 1;\n//var Z_SYNC_FLUSH    = 2;\nvar Z_FULL_FLUSH    = 3;\nvar Z_FINISH        = 4;\nvar Z_BLOCK         = 5;\n//var Z_TREES         = 6;\n\n\n/* Return codes for the compression/decompression functions. Negative values\n * are errors, positive values are used for special but normal events.\n */\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\n//var Z_NEED_DICT     = 2;\n//var Z_ERRNO         = -1;\nvar Z_STREAM_ERROR  = -2;\nvar Z_DATA_ERROR    = -3;\n//var Z_MEM_ERROR     = -4;\nvar Z_BUF_ERROR     = -5;\n//var Z_VERSION_ERROR = -6;\n\n\n/* compression levels */\n//var Z_NO_COMPRESSION      = 0;\n//var Z_BEST_SPEED          = 1;\n//var Z_BEST_COMPRESSION    = 9;\nvar Z_DEFAULT_COMPRESSION = -1;\n\n\nvar Z_FILTERED            = 1;\nvar Z_HUFFMAN_ONLY        = 2;\nvar Z_RLE                 = 3;\nvar Z_FIXED               = 4;\nvar Z_DEFAULT_STRATEGY    = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\n//var Z_BINARY              = 0;\n//var Z_TEXT                = 1;\n//var Z_ASCII               = 1; // = Z_TEXT\nvar Z_UNKNOWN             = 2;\n\n\n/* The deflate compression method */\nvar Z_DEFLATED  = 8;\n\n/*============================================================================*/\n\n\nvar MAX_MEM_LEVEL = 9;\n/* Maximum value for memLevel in deflateInit2 */\nvar MAX_WBITS = 15;\n/* 32K LZ77 window */\nvar DEF_MEM_LEVEL = 8;\n\n\nvar LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\nvar LITERALS      = 256;\n/* number of literal bytes 0..255 */\nvar L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\nvar D_CODES       = 30;\n/* number of distance codes */\nvar BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\nvar HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\nvar MAX_BITS  = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nvar MIN_MATCH = 3;\nvar MAX_MATCH = 258;\nvar MIN_LOOKAHEAD = (MAX_MATCH + MIN_MATCH + 1);\n\nvar PRESET_DICT = 0x20;\n\nvar INIT_STATE = 42;\nvar EXTRA_STATE = 69;\nvar NAME_STATE = 73;\nvar COMMENT_STATE = 91;\nvar HCRC_STATE = 103;\nvar BUSY_STATE = 113;\nvar FINISH_STATE = 666;\n\nvar BS_NEED_MORE      = 1; /* block not completed, need more input or more output */\nvar BS_BLOCK_DONE     = 2; /* block flush performed */\nvar BS_FINISH_STARTED = 3; /* finish started, need only more output at next deflate */\nvar BS_FINISH_DONE    = 4; /* finish done, accept no more input or output */\n\nvar OS_CODE = 0x03; // Unix :) . Don't detect, use this default.\n\nfunction err(strm, errorCode) {\n  strm.msg = msg[errorCode];\n  return errorCode;\n}\n\nfunction rank(f) {\n  return ((f) << 1) - ((f) > 4 ? 9 : 0);\n}\n\nfunction zero(buf) { var len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n\n/* =========================================================================\n * Flush as much pending output as possible. All deflate() output goes\n * through this function so some applications may wish to modify it\n * to avoid allocating a large strm->output buffer and copying into it.\n * (See also read_buf()).\n */\nfunction flush_pending(strm) {\n  var s = strm.state;\n\n  //_tr_flush_bits(s);\n  var len = s.pending;\n  if (len > strm.avail_out) {\n    len = strm.avail_out;\n  }\n  if (len === 0) { return; }\n\n  utils.arraySet(strm.output, s.pending_buf, s.pending_out, len, strm.next_out);\n  strm.next_out += len;\n  s.pending_out += len;\n  strm.total_out += len;\n  strm.avail_out -= len;\n  s.pending -= len;\n  if (s.pending === 0) {\n    s.pending_out = 0;\n  }\n}\n\n\nfunction flush_block_only(s, last) {\n  trees._tr_flush_block(s, (s.block_start >= 0 ? s.block_start : -1), s.strstart - s.block_start, last);\n  s.block_start = s.strstart;\n  flush_pending(s.strm);\n}\n\n\nfunction put_byte(s, b) {\n  s.pending_buf[s.pending++] = b;\n}\n\n\n/* =========================================================================\n * Put a short in the pending buffer. The 16-bit value is put in MSB order.\n * IN assertion: the stream state is correct and there is enough room in\n * pending_buf.\n */\nfunction putShortMSB(s, b) {\n//  put_byte(s, (Byte)(b >> 8));\n//  put_byte(s, (Byte)(b & 0xff));\n  s.pending_buf[s.pending++] = (b >>> 8) & 0xff;\n  s.pending_buf[s.pending++] = b & 0xff;\n}\n\n\n/* ===========================================================================\n * Read a new buffer from the current input stream, update the adler32\n * and total number of bytes read.  All deflate() input goes through\n * this function so some applications may wish to modify it to avoid\n * allocating a large strm->input buffer and copying from it.\n * (See also flush_pending()).\n */\nfunction read_buf(strm, buf, start, size) {\n  var len = strm.avail_in;\n\n  if (len > size) { len = size; }\n  if (len === 0) { return 0; }\n\n  strm.avail_in -= len;\n\n  // zmemcpy(buf, strm->next_in, len);\n  utils.arraySet(buf, strm.input, strm.next_in, len, start);\n  if (strm.state.wrap === 1) {\n    strm.adler = adler32(strm.adler, buf, len, start);\n  }\n\n  else if (strm.state.wrap === 2) {\n    strm.adler = crc32(strm.adler, buf, len, start);\n  }\n\n  strm.next_in += len;\n  strm.total_in += len;\n\n  return len;\n}\n\n\n/* ===========================================================================\n * Set match_start to the longest match starting at the given string and\n * return its length. Matches shorter or equal to prev_length are discarded,\n * in which case the result is equal to prev_length and match_start is\n * garbage.\n * IN assertions: cur_match is the head of the hash chain for the current\n *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1\n * OUT assertion: the match length is not greater than s->lookahead.\n */\nfunction longest_match(s, cur_match) {\n  var chain_length = s.max_chain_length;      /* max hash chain length */\n  var scan = s.strstart; /* current string */\n  var match;                       /* matched string */\n  var len;                           /* length of current match */\n  var best_len = s.prev_length;              /* best match length so far */\n  var nice_match = s.nice_match;             /* stop if match long enough */\n  var limit = (s.strstart > (s.w_size - MIN_LOOKAHEAD)) ?\n      s.strstart - (s.w_size - MIN_LOOKAHEAD) : 0/*NIL*/;\n\n  var _win = s.window; // shortcut\n\n  var wmask = s.w_mask;\n  var prev  = s.prev;\n\n  /* Stop when cur_match becomes <= limit. To simplify the code,\n   * we prevent matches with the string of window index 0.\n   */\n\n  var strend = s.strstart + MAX_MATCH;\n  var scan_end1  = _win[scan + best_len - 1];\n  var scan_end   = _win[scan + best_len];\n\n  /* The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of 16.\n   * It is easy to get rid of this optimization if necessary.\n   */\n  // Assert(s->hash_bits >= 8 && MAX_MATCH == 258, \"Code too clever\");\n\n  /* Do not waste too much time if we already have a good match: */\n  if (s.prev_length >= s.good_match) {\n    chain_length >>= 2;\n  }\n  /* Do not look for matches beyond the end of the input. This is necessary\n   * to make deflate deterministic.\n   */\n  if (nice_match > s.lookahead) { nice_match = s.lookahead; }\n\n  // Assert((ulg)s->strstart <= s->window_size-MIN_LOOKAHEAD, \"need lookahead\");\n\n  do {\n    // Assert(cur_match < s->strstart, \"no future\");\n    match = cur_match;\n\n    /* Skip to next match if the match length cannot increase\n     * or if the match length is less than 2.  Note that the checks below\n     * for insufficient lookahead only occur occasionally for performance\n     * reasons.  Therefore uninitialized memory will be accessed, and\n     * conditional jumps will be made that depend on those values.\n     * However the length of the match is limited to the lookahead, so\n     * the output of deflate is not affected by the uninitialized values.\n     */\n\n    if (_win[match + best_len]     !== scan_end  ||\n        _win[match + best_len - 1] !== scan_end1 ||\n        _win[match]                !== _win[scan] ||\n        _win[++match]              !== _win[scan + 1]) {\n      continue;\n    }\n\n    /* The check at best_len-1 can be removed because it will be made\n     * again later. (This heuristic is not always a win.)\n     * It is not necessary to compare scan[2] and match[2] since they\n     * are always equal when the other bytes match, given that\n     * the hash keys are equal and that HASH_BITS >= 8.\n     */\n    scan += 2;\n    match++;\n    // Assert(*scan == *match, \"match[2]?\");\n\n    /* We check for insufficient lookahead only every 8th comparison;\n     * the 256th check will be made at strstart+258.\n     */\n    do {\n      /*jshint noempty:false*/\n    } while (_win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             scan < strend);\n\n    // Assert(scan <= s->window+(unsigned)(s->window_size-1), \"wild scan\");\n\n    len = MAX_MATCH - (strend - scan);\n    scan = strend - MAX_MATCH;\n\n    if (len > best_len) {\n      s.match_start = cur_match;\n      best_len = len;\n      if (len >= nice_match) {\n        break;\n      }\n      scan_end1  = _win[scan + best_len - 1];\n      scan_end   = _win[scan + best_len];\n    }\n  } while ((cur_match = prev[cur_match & wmask]) > limit && --chain_length !== 0);\n\n  if (best_len <= s.lookahead) {\n    return best_len;\n  }\n  return s.lookahead;\n}\n\n\n/* ===========================================================================\n * Fill the window when the lookahead becomes insufficient.\n * Updates strstart and lookahead.\n *\n * IN assertion: lookahead < MIN_LOOKAHEAD\n * OUT assertions: strstart <= window_size-MIN_LOOKAHEAD\n *    At least one byte has been read, or avail_in == 0; reads are\n *    performed for at least two bytes (required for the zip translate_eol\n *    option -- not supported here).\n */\nfunction fill_window(s) {\n  var _w_size = s.w_size;\n  var p, n, m, more, str;\n\n  //Assert(s->lookahead < MIN_LOOKAHEAD, \"already enough lookahead\");\n\n  do {\n    more = s.window_size - s.lookahead - s.strstart;\n\n    // JS ints have 32 bit, block below not needed\n    /* Deal with !@#$% 64K limit: */\n    //if (sizeof(int) <= 2) {\n    //    if (more == 0 && s->strstart == 0 && s->lookahead == 0) {\n    //        more = wsize;\n    //\n    //  } else if (more == (unsigned)(-1)) {\n    //        /* Very unlikely, but possible on 16 bit machine if\n    //         * strstart == 0 && lookahead == 1 (input done a byte at time)\n    //         */\n    //        more--;\n    //    }\n    //}\n\n\n    /* If the window is almost full and there is insufficient lookahead,\n     * move the upper half to the lower one to make room in the upper half.\n     */\n    if (s.strstart >= _w_size + (_w_size - MIN_LOOKAHEAD)) {\n\n      utils.arraySet(s.window, s.window, _w_size, _w_size, 0);\n      s.match_start -= _w_size;\n      s.strstart -= _w_size;\n      /* we now have strstart >= MAX_DIST */\n      s.block_start -= _w_size;\n\n      /* Slide the hash table (could be avoided with 32 bit values\n       at the expense of memory usage). We slide even when level == 0\n       to keep the hash table consistent if we switch back to level > 0\n       later. (Using level 0 permanently is not an optimal usage of\n       zlib, so we don't care about this pathological case.)\n       */\n\n      n = s.hash_size;\n      p = n;\n      do {\n        m = s.head[--p];\n        s.head[p] = (m >= _w_size ? m - _w_size : 0);\n      } while (--n);\n\n      n = _w_size;\n      p = n;\n      do {\n        m = s.prev[--p];\n        s.prev[p] = (m >= _w_size ? m - _w_size : 0);\n        /* If n is not on any hash chain, prev[n] is garbage but\n         * its value will never be used.\n         */\n      } while (--n);\n\n      more += _w_size;\n    }\n    if (s.strm.avail_in === 0) {\n      break;\n    }\n\n    /* If there was no sliding:\n     *    strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&\n     *    more == window_size - lookahead - strstart\n     * => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)\n     * => more >= window_size - 2*WSIZE + 2\n     * In the BIG_MEM or MMAP case (not yet supported),\n     *   window_size == input_size + MIN_LOOKAHEAD  &&\n     *   strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.\n     * Otherwise, window_size == 2*WSIZE so more >= 2.\n     * If there was sliding, more >= WSIZE. So in all cases, more >= 2.\n     */\n    //Assert(more >= 2, \"more < 2\");\n    n = read_buf(s.strm, s.window, s.strstart + s.lookahead, more);\n    s.lookahead += n;\n\n    /* Initialize the hash value now that we have some input: */\n    if (s.lookahead + s.insert >= MIN_MATCH) {\n      str = s.strstart - s.insert;\n      s.ins_h = s.window[str];\n\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + 1]); */\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + 1]) & s.hash_mask;\n//#if MIN_MATCH != 3\n//        Call update_hash() MIN_MATCH-3 more times\n//#endif\n      while (s.insert) {\n        /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n        s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + MIN_MATCH - 1]) & s.hash_mask;\n\n        s.prev[str & s.w_mask] = s.head[s.ins_h];\n        s.head[s.ins_h] = str;\n        str++;\n        s.insert--;\n        if (s.lookahead + s.insert < MIN_MATCH) {\n          break;\n        }\n      }\n    }\n    /* If the whole input has less than MIN_MATCH bytes, ins_h is garbage,\n     * but this is not important since only literal bytes will be emitted.\n     */\n\n  } while (s.lookahead < MIN_LOOKAHEAD && s.strm.avail_in !== 0);\n\n  /* If the WIN_INIT bytes after the end of the current data have never been\n   * written, then zero those bytes in order to avoid memory check reports of\n   * the use of uninitialized (or uninitialised as Julian writes) bytes by\n   * the longest match routines.  Update the high water mark for the next\n   * time through here.  WIN_INIT is set to MAX_MATCH since the longest match\n   * routines allow scanning to strstart + MAX_MATCH, ignoring lookahead.\n   */\n//  if (s.high_water < s.window_size) {\n//    var curr = s.strstart + s.lookahead;\n//    var init = 0;\n//\n//    if (s.high_water < curr) {\n//      /* Previous high water mark below current data -- zero WIN_INIT\n//       * bytes or up to end of window, whichever is less.\n//       */\n//      init = s.window_size - curr;\n//      if (init > WIN_INIT)\n//        init = WIN_INIT;\n//      zmemzero(s->window + curr, (unsigned)init);\n//      s->high_water = curr + init;\n//    }\n//    else if (s->high_water < (ulg)curr + WIN_INIT) {\n//      /* High water mark at or above current data, but below current data\n//       * plus WIN_INIT -- zero out to current data plus WIN_INIT, or up\n//       * to end of window, whichever is less.\n//       */\n//      init = (ulg)curr + WIN_INIT - s->high_water;\n//      if (init > s->window_size - s->high_water)\n//        init = s->window_size - s->high_water;\n//      zmemzero(s->window + s->high_water, (unsigned)init);\n//      s->high_water += init;\n//    }\n//  }\n//\n//  Assert((ulg)s->strstart <= s->window_size - MIN_LOOKAHEAD,\n//    \"not enough room for search\");\n}\n\n/* ===========================================================================\n * Copy without compression as much as possible from the input stream, return\n * the current block state.\n * This function does not insert new strings in the dictionary since\n * uncompressible data is probably not useful. This function is used\n * only for the level=0 compression option.\n * NOTE: this function should be optimized to avoid extra copying from\n * window to pending_buf.\n */\nfunction deflate_stored(s, flush) {\n  /* Stored blocks are limited to 0xffff bytes, pending_buf is limited\n   * to pending_buf_size, and each stored block has a 5 byte header:\n   */\n  var max_block_size = 0xffff;\n\n  if (max_block_size > s.pending_buf_size - 5) {\n    max_block_size = s.pending_buf_size - 5;\n  }\n\n  /* Copy as much as possible from input to output: */\n  for (;;) {\n    /* Fill the window as much as possible: */\n    if (s.lookahead <= 1) {\n\n      //Assert(s->strstart < s->w_size+MAX_DIST(s) ||\n      //  s->block_start >= (long)s->w_size, \"slide too late\");\n//      if (!(s.strstart < s.w_size + (s.w_size - MIN_LOOKAHEAD) ||\n//        s.block_start >= s.w_size)) {\n//        throw  new Error(\"slide too late\");\n//      }\n\n      fill_window(s);\n      if (s.lookahead === 0 && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n\n      if (s.lookahead === 0) {\n        break;\n      }\n      /* flush the current block */\n    }\n    //Assert(s->block_start >= 0L, \"block gone\");\n//    if (s.block_start < 0) throw new Error(\"block gone\");\n\n    s.strstart += s.lookahead;\n    s.lookahead = 0;\n\n    /* Emit a stored block if pending_buf will be full: */\n    var max_start = s.block_start + max_block_size;\n\n    if (s.strstart === 0 || s.strstart >= max_start) {\n      /* strstart == 0 is possible when wraparound on 16-bit machine */\n      s.lookahead = s.strstart - max_start;\n      s.strstart = max_start;\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n\n\n    }\n    /* Flush if we may have to slide, otherwise block_start may become\n     * negative and the data will be gone:\n     */\n    if (s.strstart - s.block_start >= (s.w_size - MIN_LOOKAHEAD)) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n\n  s.insert = 0;\n\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n\n  if (s.strstart > s.block_start) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_NEED_MORE;\n}\n\n/* ===========================================================================\n * Compress as much as possible from the input stream, return the current\n * block state.\n * This function does not perform lazy evaluation of matches and inserts\n * new strings in the dictionary only for unmatched strings or for short\n * matches. It is used only for the fast compression options.\n */\nfunction deflate_fast(s, flush) {\n  var hash_head;        /* head of the hash chain */\n  var bflush;           /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) {\n        break; /* flush the current block */\n      }\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     * At this point we have always match_length < MIN_MATCH\n     */\n    if (hash_head !== 0/*NIL*/ && ((s.strstart - hash_head) <= (s.w_size - MIN_LOOKAHEAD))) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n    }\n    if (s.match_length >= MIN_MATCH) {\n      // check_match(s, s.strstart, s.match_start, s.match_length); // for debug only\n\n      /*** _tr_tally_dist(s, s.strstart - s.match_start,\n                     s.match_length - MIN_MATCH, bflush); ***/\n      bflush = trees._tr_tally(s, s.strstart - s.match_start, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n\n      /* Insert new strings in the hash table only if the match length\n       * is not too large. This saves time but degrades compression.\n       */\n      if (s.match_length <= s.max_lazy_match/*max_insert_length*/ && s.lookahead >= MIN_MATCH) {\n        s.match_length--; /* string at strstart already in table */\n        do {\n          s.strstart++;\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n          /* strstart never exceeds WSIZE-MAX_MATCH, so there are\n           * always MIN_MATCH bytes ahead.\n           */\n        } while (--s.match_length !== 0);\n        s.strstart++;\n      } else\n      {\n        s.strstart += s.match_length;\n        s.match_length = 0;\n        s.ins_h = s.window[s.strstart];\n        /* UPDATE_HASH(s, s.ins_h, s.window[s.strstart+1]); */\n        s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + 1]) & s.hash_mask;\n\n//#if MIN_MATCH != 3\n//                Call UPDATE_HASH() MIN_MATCH-3 more times\n//#endif\n        /* If lookahead < MIN_MATCH, ins_h is garbage, but it does not\n         * matter since it will be recomputed at next deflate call.\n         */\n      }\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s.window[s.strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = ((s.strstart < (MIN_MATCH - 1)) ? s.strstart : MIN_MATCH - 1);\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* ===========================================================================\n * Same as above, but achieves better compression. We use a lazy\n * evaluation for matches: a match is finally adopted only if there is\n * no better match at the next window position.\n */\nfunction deflate_slow(s, flush) {\n  var hash_head;          /* head of hash chain */\n  var bflush;              /* set if current block must be flushed */\n\n  var max_insert;\n\n  /* Process the input block. */\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     */\n    s.prev_length = s.match_length;\n    s.prev_match = s.match_start;\n    s.match_length = MIN_MATCH - 1;\n\n    if (hash_head !== 0/*NIL*/ && s.prev_length < s.max_lazy_match &&\n        s.strstart - hash_head <= (s.w_size - MIN_LOOKAHEAD)/*MAX_DIST(s)*/) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n\n      if (s.match_length <= 5 &&\n         (s.strategy === Z_FILTERED || (s.match_length === MIN_MATCH && s.strstart - s.match_start > 4096/*TOO_FAR*/))) {\n\n        /* If prev_match is also MIN_MATCH, match_start is garbage\n         * but we will ignore the current match anyway.\n         */\n        s.match_length = MIN_MATCH - 1;\n      }\n    }\n    /* If there was a match at the previous step and the current\n     * match is not better, output the previous match:\n     */\n    if (s.prev_length >= MIN_MATCH && s.match_length <= s.prev_length) {\n      max_insert = s.strstart + s.lookahead - MIN_MATCH;\n      /* Do not insert strings in hash table beyond this. */\n\n      //check_match(s, s.strstart-1, s.prev_match, s.prev_length);\n\n      /***_tr_tally_dist(s, s.strstart - 1 - s.prev_match,\n                     s.prev_length - MIN_MATCH, bflush);***/\n      bflush = trees._tr_tally(s, s.strstart - 1 - s.prev_match, s.prev_length - MIN_MATCH);\n      /* Insert in hash table all strings up to the end of the match.\n       * strstart-1 and strstart are already inserted. If there is not\n       * enough lookahead, the last two strings are not inserted in\n       * the hash table.\n       */\n      s.lookahead -= s.prev_length - 1;\n      s.prev_length -= 2;\n      do {\n        if (++s.strstart <= max_insert) {\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n        }\n      } while (--s.prev_length !== 0);\n      s.match_available = 0;\n      s.match_length = MIN_MATCH - 1;\n      s.strstart++;\n\n      if (bflush) {\n        /*** FLUSH_BLOCK(s, 0); ***/\n        flush_block_only(s, false);\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n        /***/\n      }\n\n    } else if (s.match_available) {\n      /* If there was no match at the previous position, output a\n       * single literal. If there was a match but the current match\n       * is longer, truncate the previous match to a single literal.\n       */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n      /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart - 1]);\n\n      if (bflush) {\n        /*** FLUSH_BLOCK_ONLY(s, 0) ***/\n        flush_block_only(s, false);\n        /***/\n      }\n      s.strstart++;\n      s.lookahead--;\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n    } else {\n      /* There is no previous match to compare with, wait for\n       * the next step to decide.\n       */\n      s.match_available = 1;\n      s.strstart++;\n      s.lookahead--;\n    }\n  }\n  //Assert (flush != Z_NO_FLUSH, \"no flush?\");\n  if (s.match_available) {\n    //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n    /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n    bflush = trees._tr_tally(s, 0, s.window[s.strstart - 1]);\n\n    s.match_available = 0;\n  }\n  s.insert = s.strstart < MIN_MATCH - 1 ? s.strstart : MIN_MATCH - 1;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_BLOCK_DONE;\n}\n\n\n/* ===========================================================================\n * For Z_RLE, simply look for runs of bytes, generate matches only of distance\n * one.  Do not maintain a hash table.  (It will be regenerated if this run of\n * deflate switches away from Z_RLE.)\n */\nfunction deflate_rle(s, flush) {\n  var bflush;            /* set if current block must be flushed */\n  var prev;              /* byte at distance one to match */\n  var scan, strend;      /* scan goes up to strend for length of run */\n\n  var _win = s.window;\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the longest run, plus one for the unrolled loop.\n     */\n    if (s.lookahead <= MAX_MATCH) {\n      fill_window(s);\n      if (s.lookahead <= MAX_MATCH && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* See how many times the previous byte repeats */\n    s.match_length = 0;\n    if (s.lookahead >= MIN_MATCH && s.strstart > 0) {\n      scan = s.strstart - 1;\n      prev = _win[scan];\n      if (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan]) {\n        strend = s.strstart + MAX_MATCH;\n        do {\n          /*jshint noempty:false*/\n        } while (prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 scan < strend);\n        s.match_length = MAX_MATCH - (strend - scan);\n        if (s.match_length > s.lookahead) {\n          s.match_length = s.lookahead;\n        }\n      }\n      //Assert(scan <= s->window+(uInt)(s->window_size-1), \"wild scan\");\n    }\n\n    /* Emit match if have run of MIN_MATCH or longer, else emit literal */\n    if (s.match_length >= MIN_MATCH) {\n      //check_match(s, s.strstart, s.strstart - 1, s.match_length);\n\n      /*** _tr_tally_dist(s, 1, s.match_length - MIN_MATCH, bflush); ***/\n      bflush = trees._tr_tally(s, 1, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n      s.strstart += s.match_length;\n      s.match_length = 0;\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* ===========================================================================\n * For Z_HUFFMAN_ONLY, do not look for matches.  Do not maintain a hash table.\n * (It will be regenerated if this run of deflate switches away from Huffman.)\n */\nfunction deflate_huff(s, flush) {\n  var bflush;             /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we have a literal to write. */\n    if (s.lookahead === 0) {\n      fill_window(s);\n      if (s.lookahead === 0) {\n        if (flush === Z_NO_FLUSH) {\n          return BS_NEED_MORE;\n        }\n        break;      /* flush the current block */\n      }\n    }\n\n    /* Output a literal byte */\n    s.match_length = 0;\n    //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n    /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n    bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n    s.lookahead--;\n    s.strstart++;\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* Values for max_lazy_match, good_match and max_chain_length, depending on\n * the desired pack level (0..9). The values given below have been tuned to\n * exclude worst case performance for pathological files. Better values may be\n * found for specific files.\n */\nfunction Config(good_length, max_lazy, nice_length, max_chain, func) {\n  this.good_length = good_length;\n  this.max_lazy = max_lazy;\n  this.nice_length = nice_length;\n  this.max_chain = max_chain;\n  this.func = func;\n}\n\nvar configuration_table;\n\nconfiguration_table = [\n  /*      good lazy nice chain */\n  new Config(0, 0, 0, 0, deflate_stored),          /* 0 store only */\n  new Config(4, 4, 8, 4, deflate_fast),            /* 1 max speed, no lazy matches */\n  new Config(4, 5, 16, 8, deflate_fast),           /* 2 */\n  new Config(4, 6, 32, 32, deflate_fast),          /* 3 */\n\n  new Config(4, 4, 16, 16, deflate_slow),          /* 4 lazy matches */\n  new Config(8, 16, 32, 32, deflate_slow),         /* 5 */\n  new Config(8, 16, 128, 128, deflate_slow),       /* 6 */\n  new Config(8, 32, 128, 256, deflate_slow),       /* 7 */\n  new Config(32, 128, 258, 1024, deflate_slow),    /* 8 */\n  new Config(32, 258, 258, 4096, deflate_slow)     /* 9 max compression */\n];\n\n\n/* ===========================================================================\n * Initialize the \"longest match\" routines for a new zlib stream\n */\nfunction lm_init(s) {\n  s.window_size = 2 * s.w_size;\n\n  /*** CLEAR_HASH(s); ***/\n  zero(s.head); // Fill with NIL (= 0);\n\n  /* Set the default configuration parameters:\n   */\n  s.max_lazy_match = configuration_table[s.level].max_lazy;\n  s.good_match = configuration_table[s.level].good_length;\n  s.nice_match = configuration_table[s.level].nice_length;\n  s.max_chain_length = configuration_table[s.level].max_chain;\n\n  s.strstart = 0;\n  s.block_start = 0;\n  s.lookahead = 0;\n  s.insert = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  s.ins_h = 0;\n}\n\n\nfunction DeflateState() {\n  this.strm = null;            /* pointer back to this zlib stream */\n  this.status = 0;            /* as the name implies */\n  this.pending_buf = null;      /* output still pending */\n  this.pending_buf_size = 0;  /* size of pending_buf */\n  this.pending_out = 0;       /* next pending byte to output to the stream */\n  this.pending = 0;           /* nb of bytes in the pending buffer */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.gzhead = null;         /* gzip header information to write */\n  this.gzindex = 0;           /* where in extra, name, or comment */\n  this.method = Z_DEFLATED; /* can only be DEFLATED */\n  this.last_flush = -1;   /* value of flush param for previous deflate call */\n\n  this.w_size = 0;  /* LZ77 window size (32K by default) */\n  this.w_bits = 0;  /* log2(w_size)  (8..16) */\n  this.w_mask = 0;  /* w_size - 1 */\n\n  this.window = null;\n  /* Sliding window. Input bytes are read into the second half of the window,\n   * and move to the first half later to keep a dictionary of at least wSize\n   * bytes. With this organization, matches are limited to a distance of\n   * wSize-MAX_MATCH bytes, but this ensures that IO is always\n   * performed with a length multiple of the block size.\n   */\n\n  this.window_size = 0;\n  /* Actual size of window: 2*wSize, except when the user input buffer\n   * is directly used as sliding window.\n   */\n\n  this.prev = null;\n  /* Link to older string with same hash index. To limit the size of this\n   * array to 64K, this link is maintained only for the last 32K strings.\n   * An index in this array is thus a window index modulo 32K.\n   */\n\n  this.head = null;   /* Heads of the hash chains or NIL. */\n\n  this.ins_h = 0;       /* hash index of string to be inserted */\n  this.hash_size = 0;   /* number of elements in hash table */\n  this.hash_bits = 0;   /* log2(hash_size) */\n  this.hash_mask = 0;   /* hash_size-1 */\n\n  this.hash_shift = 0;\n  /* Number of bits by which ins_h must be shifted at each input\n   * step. It must be such that after MIN_MATCH steps, the oldest\n   * byte no longer takes part in the hash key, that is:\n   *   hash_shift * MIN_MATCH >= hash_bits\n   */\n\n  this.block_start = 0;\n  /* Window position at the beginning of the current output block. Gets\n   * negative when the window is moved backwards.\n   */\n\n  this.match_length = 0;      /* length of best match */\n  this.prev_match = 0;        /* previous match */\n  this.match_available = 0;   /* set if previous match exists */\n  this.strstart = 0;          /* start of string to insert */\n  this.match_start = 0;       /* start of matching string */\n  this.lookahead = 0;         /* number of valid bytes ahead in window */\n\n  this.prev_length = 0;\n  /* Length of the best match at previous step. Matches not greater than this\n   * are discarded. This is used in the lazy match evaluation.\n   */\n\n  this.max_chain_length = 0;\n  /* To speed up deflation, hash chains are never searched beyond this\n   * length.  A higher limit improves compression ratio but degrades the\n   * speed.\n   */\n\n  this.max_lazy_match = 0;\n  /* Attempt to find a better match only when the current match is strictly\n   * smaller than this value. This mechanism is used only for compression\n   * levels >= 4.\n   */\n  // That's alias to max_lazy_match, don't use directly\n  //this.max_insert_length = 0;\n  /* Insert new strings in the hash table only if the match length is not\n   * greater than this length. This saves time but degrades compression.\n   * max_insert_length is used only for compression levels <= 3.\n   */\n\n  this.level = 0;     /* compression level (1..9) */\n  this.strategy = 0;  /* favor or force Huffman coding*/\n\n  this.good_match = 0;\n  /* Use a faster search when the previous match is longer than this */\n\n  this.nice_match = 0; /* Stop searching when current match exceeds this */\n\n              /* used by trees.c: */\n\n  /* Didn't use ct_data typedef below to suppress compiler warning */\n\n  // struct ct_data_s dyn_ltree[HEAP_SIZE];   /* literal and length tree */\n  // struct ct_data_s dyn_dtree[2*D_CODES+1]; /* distance tree */\n  // struct ct_data_s bl_tree[2*BL_CODES+1];  /* Huffman tree for bit lengths */\n\n  // Use flat array of DOUBLE size, with interleaved fata,\n  // because JS does not support effective\n  this.dyn_ltree  = new utils.Buf16(HEAP_SIZE * 2);\n  this.dyn_dtree  = new utils.Buf16((2 * D_CODES + 1) * 2);\n  this.bl_tree    = new utils.Buf16((2 * BL_CODES + 1) * 2);\n  zero(this.dyn_ltree);\n  zero(this.dyn_dtree);\n  zero(this.bl_tree);\n\n  this.l_desc   = null;         /* desc. for literal tree */\n  this.d_desc   = null;         /* desc. for distance tree */\n  this.bl_desc  = null;         /* desc. for bit length tree */\n\n  //ush bl_count[MAX_BITS+1];\n  this.bl_count = new utils.Buf16(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  //int heap[2*L_CODES+1];      /* heap used to build the Huffman trees */\n  this.heap = new utils.Buf16(2 * L_CODES + 1);  /* heap used to build the Huffman trees */\n  zero(this.heap);\n\n  this.heap_len = 0;               /* number of elements in the heap */\n  this.heap_max = 0;               /* element of largest frequency */\n  /* The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.\n   * The same heap array is used to build all trees.\n   */\n\n  this.depth = new utils.Buf16(2 * L_CODES + 1); //uch depth[2*L_CODES+1];\n  zero(this.depth);\n  /* Depth of each subtree used as tie breaker for trees of equal frequency\n   */\n\n  this.l_buf = 0;          /* buffer index for literals or lengths */\n\n  this.lit_bufsize = 0;\n  /* Size of match buffer for literals/lengths.  There are 4 reasons for\n   * limiting lit_bufsize to 64K:\n   *   - frequencies can be kept in 16 bit counters\n   *   - if compression is not successful for the first block, all input\n   *     data is still in the window so we can still emit a stored block even\n   *     when input comes from standard input.  (This can also be done for\n   *     all blocks if lit_bufsize is not greater than 32K.)\n   *   - if compression is not successful for a file smaller than 64K, we can\n   *     even emit a stored file instead of a stored block (saving 5 bytes).\n   *     This is applicable only for zip (not gzip or zlib).\n   *   - creating new Huffman trees less frequently may not provide fast\n   *     adaptation to changes in the input data statistics. (Take for\n   *     example a binary file with poorly compressible code followed by\n   *     a highly compressible string table.) Smaller buffer sizes give\n   *     fast adaptation but have of course the overhead of transmitting\n   *     trees more frequently.\n   *   - I can't count above 4\n   */\n\n  this.last_lit = 0;      /* running index in l_buf */\n\n  this.d_buf = 0;\n  /* Buffer index for distances. To simplify the code, d_buf and l_buf have\n   * the same number of elements. To use different lengths, an extra flag\n   * array would be necessary.\n   */\n\n  this.opt_len = 0;       /* bit length of current block with optimal trees */\n  this.static_len = 0;    /* bit length of current block with static trees */\n  this.matches = 0;       /* number of string matches in current block */\n  this.insert = 0;        /* bytes at end of window left to insert */\n\n\n  this.bi_buf = 0;\n  /* Output buffer. bits are inserted starting at the bottom (least\n   * significant bits).\n   */\n  this.bi_valid = 0;\n  /* Number of valid bits in bi_buf.  All bits above the last valid bit\n   * are always zero.\n   */\n\n  // Used for window memory init. We safely ignore it for JS. That makes\n  // sense only for pointers and memory check tools.\n  //this.high_water = 0;\n  /* High water mark offset in window for initialized bytes -- bytes above\n   * this are set to zero in order to avoid memory check warnings when\n   * longest match routines access bytes past the input.  This is then\n   * updated to the new high water mark.\n   */\n}\n\n\nfunction deflateResetKeep(strm) {\n  var s;\n\n  if (!strm || !strm.state) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.total_in = strm.total_out = 0;\n  strm.data_type = Z_UNKNOWN;\n\n  s = strm.state;\n  s.pending = 0;\n  s.pending_out = 0;\n\n  if (s.wrap < 0) {\n    s.wrap = -s.wrap;\n    /* was made negative by deflate(..., Z_FINISH); */\n  }\n  s.status = (s.wrap ? INIT_STATE : BUSY_STATE);\n  strm.adler = (s.wrap === 2) ?\n    0  // crc32(0, Z_NULL, 0)\n  :\n    1; // adler32(0, Z_NULL, 0)\n  s.last_flush = Z_NO_FLUSH;\n  trees._tr_init(s);\n  return Z_OK;\n}\n\n\nfunction deflateReset(strm) {\n  var ret = deflateResetKeep(strm);\n  if (ret === Z_OK) {\n    lm_init(strm.state);\n  }\n  return ret;\n}\n\n\nfunction deflateSetHeader(strm, head) {\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  if (strm.state.wrap !== 2) { return Z_STREAM_ERROR; }\n  strm.state.gzhead = head;\n  return Z_OK;\n}\n\n\nfunction deflateInit2(strm, level, method, windowBits, memLevel, strategy) {\n  if (!strm) { // === Z_NULL\n    return Z_STREAM_ERROR;\n  }\n  var wrap = 1;\n\n  if (level === Z_DEFAULT_COMPRESSION) {\n    level = 6;\n  }\n\n  if (windowBits < 0) { /* suppress zlib wrapper */\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n\n  else if (windowBits > 15) {\n    wrap = 2;           /* write gzip wrapper instead */\n    windowBits -= 16;\n  }\n\n\n  if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || method !== Z_DEFLATED ||\n    windowBits < 8 || windowBits > 15 || level < 0 || level > 9 ||\n    strategy < 0 || strategy > Z_FIXED) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n\n  if (windowBits === 8) {\n    windowBits = 9;\n  }\n  /* until 256-byte window bug fixed */\n\n  var s = new DeflateState();\n\n  strm.state = s;\n  s.strm = strm;\n\n  s.wrap = wrap;\n  s.gzhead = null;\n  s.w_bits = windowBits;\n  s.w_size = 1 << s.w_bits;\n  s.w_mask = s.w_size - 1;\n\n  s.hash_bits = memLevel + 7;\n  s.hash_size = 1 << s.hash_bits;\n  s.hash_mask = s.hash_size - 1;\n  s.hash_shift = ~~((s.hash_bits + MIN_MATCH - 1) / MIN_MATCH);\n\n  s.window = new utils.Buf8(s.w_size * 2);\n  s.head = new utils.Buf16(s.hash_size);\n  s.prev = new utils.Buf16(s.w_size);\n\n  // Don't need mem init magic for JS.\n  //s.high_water = 0;  /* nothing written to s->window yet */\n\n  s.lit_bufsize = 1 << (memLevel + 6); /* 16K elements by default */\n\n  s.pending_buf_size = s.lit_bufsize * 4;\n\n  //overlay = (ushf *) ZALLOC(strm, s->lit_bufsize, sizeof(ush)+2);\n  //s->pending_buf = (uchf *) overlay;\n  s.pending_buf = new utils.Buf8(s.pending_buf_size);\n\n  // It is offset from `s.pending_buf` (size is `s.lit_bufsize * 2`)\n  //s->d_buf = overlay + s->lit_bufsize/sizeof(ush);\n  s.d_buf = 1 * s.lit_bufsize;\n\n  //s->l_buf = s->pending_buf + (1+sizeof(ush))*s->lit_bufsize;\n  s.l_buf = (1 + 2) * s.lit_bufsize;\n\n  s.level = level;\n  s.strategy = strategy;\n  s.method = method;\n\n  return deflateReset(strm);\n}\n\nfunction deflateInit(strm, level) {\n  return deflateInit2(strm, level, Z_DEFLATED, MAX_WBITS, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY);\n}\n\n\nfunction deflate(strm, flush) {\n  var old_flush, s;\n  var beg, val; // for gzip header write only\n\n  if (!strm || !strm.state ||\n    flush > Z_BLOCK || flush < 0) {\n    return strm ? err(strm, Z_STREAM_ERROR) : Z_STREAM_ERROR;\n  }\n\n  s = strm.state;\n\n  if (!strm.output ||\n      (!strm.input && strm.avail_in !== 0) ||\n      (s.status === FINISH_STATE && flush !== Z_FINISH)) {\n    return err(strm, (strm.avail_out === 0) ? Z_BUF_ERROR : Z_STREAM_ERROR);\n  }\n\n  s.strm = strm; /* just in case */\n  old_flush = s.last_flush;\n  s.last_flush = flush;\n\n  /* Write the header */\n  if (s.status === INIT_STATE) {\n\n    if (s.wrap === 2) { // GZIP header\n      strm.adler = 0;  //crc32(0L, Z_NULL, 0);\n      put_byte(s, 31);\n      put_byte(s, 139);\n      put_byte(s, 8);\n      if (!s.gzhead) { // s->gzhead == Z_NULL\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, OS_CODE);\n        s.status = BUSY_STATE;\n      }\n      else {\n        put_byte(s, (s.gzhead.text ? 1 : 0) +\n                    (s.gzhead.hcrc ? 2 : 0) +\n                    (!s.gzhead.extra ? 0 : 4) +\n                    (!s.gzhead.name ? 0 : 8) +\n                    (!s.gzhead.comment ? 0 : 16)\n        );\n        put_byte(s, s.gzhead.time & 0xff);\n        put_byte(s, (s.gzhead.time >> 8) & 0xff);\n        put_byte(s, (s.gzhead.time >> 16) & 0xff);\n        put_byte(s, (s.gzhead.time >> 24) & 0xff);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, s.gzhead.os & 0xff);\n        if (s.gzhead.extra && s.gzhead.extra.length) {\n          put_byte(s, s.gzhead.extra.length & 0xff);\n          put_byte(s, (s.gzhead.extra.length >> 8) & 0xff);\n        }\n        if (s.gzhead.hcrc) {\n          strm.adler = crc32(strm.adler, s.pending_buf, s.pending, 0);\n        }\n        s.gzindex = 0;\n        s.status = EXTRA_STATE;\n      }\n    }\n    else // DEFLATE header\n    {\n      var header = (Z_DEFLATED + ((s.w_bits - 8) << 4)) << 8;\n      var level_flags = -1;\n\n      if (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2) {\n        level_flags = 0;\n      } else if (s.level < 6) {\n        level_flags = 1;\n      } else if (s.level === 6) {\n        level_flags = 2;\n      } else {\n        level_flags = 3;\n      }\n      header |= (level_flags << 6);\n      if (s.strstart !== 0) { header |= PRESET_DICT; }\n      header += 31 - (header % 31);\n\n      s.status = BUSY_STATE;\n      putShortMSB(s, header);\n\n      /* Save the adler32 of the preset dictionary: */\n      if (s.strstart !== 0) {\n        putShortMSB(s, strm.adler >>> 16);\n        putShortMSB(s, strm.adler & 0xffff);\n      }\n      strm.adler = 1; // adler32(0L, Z_NULL, 0);\n    }\n  }\n\n//#ifdef GZIP\n  if (s.status === EXTRA_STATE) {\n    if (s.gzhead.extra/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n\n      while (s.gzindex < (s.gzhead.extra.length & 0xffff)) {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            break;\n          }\n        }\n        put_byte(s, s.gzhead.extra[s.gzindex] & 0xff);\n        s.gzindex++;\n      }\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (s.gzindex === s.gzhead.extra.length) {\n        s.gzindex = 0;\n        s.status = NAME_STATE;\n      }\n    }\n    else {\n      s.status = NAME_STATE;\n    }\n  }\n  if (s.status === NAME_STATE) {\n    if (s.gzhead.name/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.name.length) {\n          val = s.gzhead.name.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.gzindex = 0;\n        s.status = COMMENT_STATE;\n      }\n    }\n    else {\n      s.status = COMMENT_STATE;\n    }\n  }\n  if (s.status === COMMENT_STATE) {\n    if (s.gzhead.comment/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.comment.length) {\n          val = s.gzhead.comment.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.status = HCRC_STATE;\n      }\n    }\n    else {\n      s.status = HCRC_STATE;\n    }\n  }\n  if (s.status === HCRC_STATE) {\n    if (s.gzhead.hcrc) {\n      if (s.pending + 2 > s.pending_buf_size) {\n        flush_pending(strm);\n      }\n      if (s.pending + 2 <= s.pending_buf_size) {\n        put_byte(s, strm.adler & 0xff);\n        put_byte(s, (strm.adler >> 8) & 0xff);\n        strm.adler = 0; //crc32(0L, Z_NULL, 0);\n        s.status = BUSY_STATE;\n      }\n    }\n    else {\n      s.status = BUSY_STATE;\n    }\n  }\n//#endif\n\n  /* Flush as much pending output as possible */\n  if (s.pending !== 0) {\n    flush_pending(strm);\n    if (strm.avail_out === 0) {\n      /* Since avail_out is 0, deflate will be called again with\n       * more output space, but possibly with both pending and\n       * avail_in equal to zero. There won't be anything to do,\n       * but this is not an error situation so make sure we\n       * return OK instead of BUF_ERROR at next call of deflate:\n       */\n      s.last_flush = -1;\n      return Z_OK;\n    }\n\n    /* Make sure there is something to do and avoid duplicate consecutive\n     * flushes. For repeated and useless calls with Z_FINISH, we keep\n     * returning Z_STREAM_END instead of Z_BUF_ERROR.\n     */\n  } else if (strm.avail_in === 0 && rank(flush) <= rank(old_flush) &&\n    flush !== Z_FINISH) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* User must not provide more input after the first FINISH: */\n  if (s.status === FINISH_STATE && strm.avail_in !== 0) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* Start a new block or continue the current one.\n   */\n  if (strm.avail_in !== 0 || s.lookahead !== 0 ||\n    (flush !== Z_NO_FLUSH && s.status !== FINISH_STATE)) {\n    var bstate = (s.strategy === Z_HUFFMAN_ONLY) ? deflate_huff(s, flush) :\n      (s.strategy === Z_RLE ? deflate_rle(s, flush) :\n        configuration_table[s.level].func(s, flush));\n\n    if (bstate === BS_FINISH_STARTED || bstate === BS_FINISH_DONE) {\n      s.status = FINISH_STATE;\n    }\n    if (bstate === BS_NEED_MORE || bstate === BS_FINISH_STARTED) {\n      if (strm.avail_out === 0) {\n        s.last_flush = -1;\n        /* avoid BUF_ERROR next call, see above */\n      }\n      return Z_OK;\n      /* If flush != Z_NO_FLUSH && avail_out == 0, the next call\n       * of deflate should use the same flush parameter to make sure\n       * that the flush is complete. So we don't have to output an\n       * empty block here, this will be done at next call. This also\n       * ensures that for a very small output buffer, we emit at most\n       * one empty block.\n       */\n    }\n    if (bstate === BS_BLOCK_DONE) {\n      if (flush === Z_PARTIAL_FLUSH) {\n        trees._tr_align(s);\n      }\n      else if (flush !== Z_BLOCK) { /* FULL_FLUSH or SYNC_FLUSH */\n\n        trees._tr_stored_block(s, 0, 0, false);\n        /* For a full flush, this empty block will be recognized\n         * as a special marker by inflate_sync().\n         */\n        if (flush === Z_FULL_FLUSH) {\n          /*** CLEAR_HASH(s); ***/             /* forget history */\n          zero(s.head); // Fill with NIL (= 0);\n\n          if (s.lookahead === 0) {\n            s.strstart = 0;\n            s.block_start = 0;\n            s.insert = 0;\n          }\n        }\n      }\n      flush_pending(strm);\n      if (strm.avail_out === 0) {\n        s.last_flush = -1; /* avoid BUF_ERROR at next call, see above */\n        return Z_OK;\n      }\n    }\n  }\n  //Assert(strm->avail_out > 0, \"bug2\");\n  //if (strm.avail_out <= 0) { throw new Error(\"bug2\");}\n\n  if (flush !== Z_FINISH) { return Z_OK; }\n  if (s.wrap <= 0) { return Z_STREAM_END; }\n\n  /* Write the trailer */\n  if (s.wrap === 2) {\n    put_byte(s, strm.adler & 0xff);\n    put_byte(s, (strm.adler >> 8) & 0xff);\n    put_byte(s, (strm.adler >> 16) & 0xff);\n    put_byte(s, (strm.adler >> 24) & 0xff);\n    put_byte(s, strm.total_in & 0xff);\n    put_byte(s, (strm.total_in >> 8) & 0xff);\n    put_byte(s, (strm.total_in >> 16) & 0xff);\n    put_byte(s, (strm.total_in >> 24) & 0xff);\n  }\n  else\n  {\n    putShortMSB(s, strm.adler >>> 16);\n    putShortMSB(s, strm.adler & 0xffff);\n  }\n\n  flush_pending(strm);\n  /* If avail_out is zero, the application will call deflate again\n   * to flush the rest.\n   */\n  if (s.wrap > 0) { s.wrap = -s.wrap; }\n  /* write the trailer only once! */\n  return s.pending !== 0 ? Z_OK : Z_STREAM_END;\n}\n\nfunction deflateEnd(strm) {\n  var status;\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  status = strm.state.status;\n  if (status !== INIT_STATE &&\n    status !== EXTRA_STATE &&\n    status !== NAME_STATE &&\n    status !== COMMENT_STATE &&\n    status !== HCRC_STATE &&\n    status !== BUSY_STATE &&\n    status !== FINISH_STATE\n  ) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.state = null;\n\n  return status === BUSY_STATE ? err(strm, Z_DATA_ERROR) : Z_OK;\n}\n\n\n/* =========================================================================\n * Initializes the compression dictionary from the given byte\n * sequence without producing any compressed output.\n */\nfunction deflateSetDictionary(strm, dictionary) {\n  var dictLength = dictionary.length;\n\n  var s;\n  var str, n;\n  var wrap;\n  var avail;\n  var next;\n  var input;\n  var tmpDict;\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  s = strm.state;\n  wrap = s.wrap;\n\n  if (wrap === 2 || (wrap === 1 && s.status !== INIT_STATE) || s.lookahead) {\n    return Z_STREAM_ERROR;\n  }\n\n  /* when using zlib wrappers, compute Adler-32 for provided dictionary */\n  if (wrap === 1) {\n    /* adler32(strm->adler, dictionary, dictLength); */\n    strm.adler = adler32(strm.adler, dictionary, dictLength, 0);\n  }\n\n  s.wrap = 0;   /* avoid computing Adler-32 in read_buf */\n\n  /* if dictionary would fill window, just replace the history */\n  if (dictLength >= s.w_size) {\n    if (wrap === 0) {            /* already empty otherwise */\n      /*** CLEAR_HASH(s); ***/\n      zero(s.head); // Fill with NIL (= 0);\n      s.strstart = 0;\n      s.block_start = 0;\n      s.insert = 0;\n    }\n    /* use the tail */\n    // dictionary = dictionary.slice(dictLength - s.w_size);\n    tmpDict = new utils.Buf8(s.w_size);\n    utils.arraySet(tmpDict, dictionary, dictLength - s.w_size, s.w_size, 0);\n    dictionary = tmpDict;\n    dictLength = s.w_size;\n  }\n  /* insert dictionary into window and hash */\n  avail = strm.avail_in;\n  next = strm.next_in;\n  input = strm.input;\n  strm.avail_in = dictLength;\n  strm.next_in = 0;\n  strm.input = dictionary;\n  fill_window(s);\n  while (s.lookahead >= MIN_MATCH) {\n    str = s.strstart;\n    n = s.lookahead - (MIN_MATCH - 1);\n    do {\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + MIN_MATCH - 1]) & s.hash_mask;\n\n      s.prev[str & s.w_mask] = s.head[s.ins_h];\n\n      s.head[s.ins_h] = str;\n      str++;\n    } while (--n);\n    s.strstart = str;\n    s.lookahead = MIN_MATCH - 1;\n    fill_window(s);\n  }\n  s.strstart += s.lookahead;\n  s.block_start = s.strstart;\n  s.insert = s.lookahead;\n  s.lookahead = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  strm.next_in = next;\n  strm.input = input;\n  strm.avail_in = avail;\n  s.wrap = wrap;\n  return Z_OK;\n}\n\n\nexports.deflateInit = deflateInit;\nexports.deflateInit2 = deflateInit2;\nexports.deflateReset = deflateReset;\nexports.deflateResetKeep = deflateResetKeep;\nexports.deflateSetHeader = deflateSetHeader;\nexports.deflate = deflate;\nexports.deflateEnd = deflateEnd;\nexports.deflateSetDictionary = deflateSetDictionary;\nexports.deflateInfo = 'pako deflate (from Nodeca project)';\n\n/* Not implemented\nexports.deflateBound = deflateBound;\nexports.deflateCopy = deflateCopy;\nexports.deflateParams = deflateParams;\nexports.deflatePending = deflatePending;\nexports.deflatePrime = deflatePrime;\nexports.deflateTune = deflateTune;\n*/\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n/* eslint-disable space-unary-ops */\n\nvar utils = require('../utils/common');\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n//var Z_FILTERED          = 1;\n//var Z_HUFFMAN_ONLY      = 2;\n//var Z_RLE               = 3;\nvar Z_FIXED               = 4;\n//var Z_DEFAULT_STRATEGY  = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\nvar Z_BINARY              = 0;\nvar Z_TEXT                = 1;\n//var Z_ASCII             = 1; // = Z_TEXT\nvar Z_UNKNOWN             = 2;\n\n/*============================================================================*/\n\n\nfunction zero(buf) { var len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n// From zutil.h\n\nvar STORED_BLOCK = 0;\nvar STATIC_TREES = 1;\nvar DYN_TREES    = 2;\n/* The three kinds of block type */\n\nvar MIN_MATCH    = 3;\nvar MAX_MATCH    = 258;\n/* The minimum and maximum match lengths */\n\n// From deflate.h\n/* ===========================================================================\n * Internal compression state.\n */\n\nvar LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\n\nvar LITERALS      = 256;\n/* number of literal bytes 0..255 */\n\nvar L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\n\nvar D_CODES       = 30;\n/* number of distance codes */\n\nvar BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\n\nvar HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\n\nvar MAX_BITS      = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nvar Buf_size      = 16;\n/* size of bit buffer in bi_buf */\n\n\n/* ===========================================================================\n * Constants\n */\n\nvar MAX_BL_BITS = 7;\n/* Bit length codes must not exceed MAX_BL_BITS bits */\n\nvar END_BLOCK   = 256;\n/* end of block literal code */\n\nvar REP_3_6     = 16;\n/* repeat previous bit length 3-6 times (2 bits of repeat count) */\n\nvar REPZ_3_10   = 17;\n/* repeat a zero length 3-10 times  (3 bits of repeat count) */\n\nvar REPZ_11_138 = 18;\n/* repeat a zero length 11-138 times  (7 bits of repeat count) */\n\n/* eslint-disable comma-spacing,array-bracket-spacing */\nvar extra_lbits =   /* extra bits for each length code */\n  [0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];\n\nvar extra_dbits =   /* extra bits for each distance code */\n  [0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];\n\nvar extra_blbits =  /* extra bits for each bit length code */\n  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];\n\nvar bl_order =\n  [16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];\n/* eslint-enable comma-spacing,array-bracket-spacing */\n\n/* The lengths of the bit length codes are sent in order of decreasing\n * probability, to avoid transmitting the lengths for unused bit length codes.\n */\n\n/* ===========================================================================\n * Local data. These are initialized only once.\n */\n\n// We pre-fill arrays with 0 to avoid uninitialized gaps\n\nvar DIST_CODE_LEN = 512; /* see definition of array dist_code below */\n\n// !!!! Use flat array instead of structure, Freq = i*2, Len = i*2+1\nvar static_ltree  = new Array((L_CODES + 2) * 2);\nzero(static_ltree);\n/* The static literal tree. Since the bit lengths are imposed, there is no\n * need for the L_CODES extra codes used during heap construction. However\n * The codes 286 and 287 are needed to build a canonical tree (see _tr_init\n * below).\n */\n\nvar static_dtree  = new Array(D_CODES * 2);\nzero(static_dtree);\n/* The static distance tree. (Actually a trivial tree since all codes use\n * 5 bits.)\n */\n\nvar _dist_code    = new Array(DIST_CODE_LEN);\nzero(_dist_code);\n/* Distance codes. The first 256 values correspond to the distances\n * 3 .. 258, the last 256 values correspond to the top 8 bits of\n * the 15 bit distances.\n */\n\nvar _length_code  = new Array(MAX_MATCH - MIN_MATCH + 1);\nzero(_length_code);\n/* length code for each normalized match length (0 == MIN_MATCH) */\n\nvar base_length   = new Array(LENGTH_CODES);\nzero(base_length);\n/* First normalized length for each code (0 = MIN_MATCH) */\n\nvar base_dist     = new Array(D_CODES);\nzero(base_dist);\n/* First normalized distance for each code (0 = distance of 1) */\n\n\nfunction StaticTreeDesc(static_tree, extra_bits, extra_base, elems, max_length) {\n\n  this.static_tree  = static_tree;  /* static tree or NULL */\n  this.extra_bits   = extra_bits;   /* extra bits for each code or NULL */\n  this.extra_base   = extra_base;   /* base index for extra_bits */\n  this.elems        = elems;        /* max number of elements in the tree */\n  this.max_length   = max_length;   /* max bit length for the codes */\n\n  // show if `static_tree` has data or dummy - needed for monomorphic objects\n  this.has_stree    = static_tree && static_tree.length;\n}\n\n\nvar static_l_desc;\nvar static_d_desc;\nvar static_bl_desc;\n\n\nfunction TreeDesc(dyn_tree, stat_desc) {\n  this.dyn_tree = dyn_tree;     /* the dynamic tree */\n  this.max_code = 0;            /* largest code with non zero frequency */\n  this.stat_desc = stat_desc;   /* the corresponding static tree */\n}\n\n\n\nfunction d_code(dist) {\n  return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];\n}\n\n\n/* ===========================================================================\n * Output a short LSB first on the stream.\n * IN assertion: there is enough room in pendingBuf.\n */\nfunction put_short(s, w) {\n//    put_byte(s, (uch)((w) & 0xff));\n//    put_byte(s, (uch)((ush)(w) >> 8));\n  s.pending_buf[s.pending++] = (w) & 0xff;\n  s.pending_buf[s.pending++] = (w >>> 8) & 0xff;\n}\n\n\n/* ===========================================================================\n * Send a value on a given number of bits.\n * IN assertion: length <= 16 and value fits in length bits.\n */\nfunction send_bits(s, value, length) {\n  if (s.bi_valid > (Buf_size - length)) {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    put_short(s, s.bi_buf);\n    s.bi_buf = value >> (Buf_size - s.bi_valid);\n    s.bi_valid += length - Buf_size;\n  } else {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    s.bi_valid += length;\n  }\n}\n\n\nfunction send_code(s, c, tree) {\n  send_bits(s, tree[c * 2]/*.Code*/, tree[c * 2 + 1]/*.Len*/);\n}\n\n\n/* ===========================================================================\n * Reverse the first len bits of a code, using straightforward code (a faster\n * method would use a table)\n * IN assertion: 1 <= len <= 15\n */\nfunction bi_reverse(code, len) {\n  var res = 0;\n  do {\n    res |= code & 1;\n    code >>>= 1;\n    res <<= 1;\n  } while (--len > 0);\n  return res >>> 1;\n}\n\n\n/* ===========================================================================\n * Flush the bit buffer, keeping at most 7 bits in it.\n */\nfunction bi_flush(s) {\n  if (s.bi_valid === 16) {\n    put_short(s, s.bi_buf);\n    s.bi_buf = 0;\n    s.bi_valid = 0;\n\n  } else if (s.bi_valid >= 8) {\n    s.pending_buf[s.pending++] = s.bi_buf & 0xff;\n    s.bi_buf >>= 8;\n    s.bi_valid -= 8;\n  }\n}\n\n\n/* ===========================================================================\n * Compute the optimal bit lengths for a tree and update the total bit length\n * for the current block.\n * IN assertion: the fields freq and dad are set, heap[heap_max] and\n *    above are the tree nodes sorted by increasing frequency.\n * OUT assertions: the field len is set to the optimal bit length, the\n *     array bl_count contains the frequencies for each bit length.\n *     The length opt_len is updated; static_len is also updated if stree is\n *     not null.\n */\nfunction gen_bitlen(s, desc)\n//    deflate_state *s;\n//    tree_desc *desc;    /* the tree descriptor */\n{\n  var tree            = desc.dyn_tree;\n  var max_code        = desc.max_code;\n  var stree           = desc.stat_desc.static_tree;\n  var has_stree       = desc.stat_desc.has_stree;\n  var extra           = desc.stat_desc.extra_bits;\n  var base            = desc.stat_desc.extra_base;\n  var max_length      = desc.stat_desc.max_length;\n  var h;              /* heap index */\n  var n, m;           /* iterate over the tree elements */\n  var bits;           /* bit length */\n  var xbits;          /* extra bits */\n  var f;              /* frequency */\n  var overflow = 0;   /* number of elements with bit length too large */\n\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    s.bl_count[bits] = 0;\n  }\n\n  /* In a first pass, compute the optimal bit lengths (which may\n   * overflow in the case of the bit length tree).\n   */\n  tree[s.heap[s.heap_max] * 2 + 1]/*.Len*/ = 0; /* root of the heap */\n\n  for (h = s.heap_max + 1; h < HEAP_SIZE; h++) {\n    n = s.heap[h];\n    bits = tree[tree[n * 2 + 1]/*.Dad*/ * 2 + 1]/*.Len*/ + 1;\n    if (bits > max_length) {\n      bits = max_length;\n      overflow++;\n    }\n    tree[n * 2 + 1]/*.Len*/ = bits;\n    /* We overwrite tree[n].Dad which is no longer needed */\n\n    if (n > max_code) { continue; } /* not a leaf node */\n\n    s.bl_count[bits]++;\n    xbits = 0;\n    if (n >= base) {\n      xbits = extra[n - base];\n    }\n    f = tree[n * 2]/*.Freq*/;\n    s.opt_len += f * (bits + xbits);\n    if (has_stree) {\n      s.static_len += f * (stree[n * 2 + 1]/*.Len*/ + xbits);\n    }\n  }\n  if (overflow === 0) { return; }\n\n  // Trace((stderr,\"\\nbit length overflow\\n\"));\n  /* This happens for example on obj2 and pic of the Calgary corpus */\n\n  /* Find the first bit length which could increase: */\n  do {\n    bits = max_length - 1;\n    while (s.bl_count[bits] === 0) { bits--; }\n    s.bl_count[bits]--;      /* move one leaf down the tree */\n    s.bl_count[bits + 1] += 2; /* move one overflow item as its brother */\n    s.bl_count[max_length]--;\n    /* The brother of the overflow item also moves one step up,\n     * but this does not affect bl_count[max_length]\n     */\n    overflow -= 2;\n  } while (overflow > 0);\n\n  /* Now recompute all bit lengths, scanning in increasing frequency.\n   * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all\n   * lengths instead of fixing only the wrong ones. This idea is taken\n   * from 'ar' written by Haruhiko Okumura.)\n   */\n  for (bits = max_length; bits !== 0; bits--) {\n    n = s.bl_count[bits];\n    while (n !== 0) {\n      m = s.heap[--h];\n      if (m > max_code) { continue; }\n      if (tree[m * 2 + 1]/*.Len*/ !== bits) {\n        // Trace((stderr,\"code %d bits %d->%d\\n\", m, tree[m].Len, bits));\n        s.opt_len += (bits - tree[m * 2 + 1]/*.Len*/) * tree[m * 2]/*.Freq*/;\n        tree[m * 2 + 1]/*.Len*/ = bits;\n      }\n      n--;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Generate the codes for a given tree and bit counts (which need not be\n * optimal).\n * IN assertion: the array bl_count contains the bit length statistics for\n * the given tree and the field len is set for all tree elements.\n * OUT assertion: the field code is set for all tree elements of non\n *     zero code length.\n */\nfunction gen_codes(tree, max_code, bl_count)\n//    ct_data *tree;             /* the tree to decorate */\n//    int max_code;              /* largest code with non zero frequency */\n//    ushf *bl_count;            /* number of codes at each bit length */\n{\n  var next_code = new Array(MAX_BITS + 1); /* next code value for each bit length */\n  var code = 0;              /* running code value */\n  var bits;                  /* bit index */\n  var n;                     /* code index */\n\n  /* The distribution counts are first used to generate the code values\n   * without bit reversal.\n   */\n  for (bits = 1; bits <= MAX_BITS; bits++) {\n    next_code[bits] = code = (code + bl_count[bits - 1]) << 1;\n  }\n  /* Check that the bit counts in bl_count are consistent. The last code\n   * must be all ones.\n   */\n  //Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\n  //        \"inconsistent bit counts\");\n  //Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\n\n  for (n = 0;  n <= max_code; n++) {\n    var len = tree[n * 2 + 1]/*.Len*/;\n    if (len === 0) { continue; }\n    /* Now reverse the bits */\n    tree[n * 2]/*.Code*/ = bi_reverse(next_code[len]++, len);\n\n    //Tracecv(tree != static_ltree, (stderr,\"\\nn %3d %c l %2d c %4x (%x) \",\n    //     n, (isgraph(n) ? n : ' '), len, tree[n].Code, next_code[len]-1));\n  }\n}\n\n\n/* ===========================================================================\n * Initialize the various 'constant' tables.\n */\nfunction tr_static_init() {\n  var n;        /* iterates over tree elements */\n  var bits;     /* bit counter */\n  var length;   /* length value */\n  var code;     /* code value */\n  var dist;     /* distance index */\n  var bl_count = new Array(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  // do check in _tr_init()\n  //if (static_init_done) return;\n\n  /* For some embedded targets, global variables are not initialized: */\n/*#ifdef NO_INIT_GLOBAL_POINTERS\n  static_l_desc.static_tree = static_ltree;\n  static_l_desc.extra_bits = extra_lbits;\n  static_d_desc.static_tree = static_dtree;\n  static_d_desc.extra_bits = extra_dbits;\n  static_bl_desc.extra_bits = extra_blbits;\n#endif*/\n\n  /* Initialize the mapping length (0..255) -> length code (0..28) */\n  length = 0;\n  for (code = 0; code < LENGTH_CODES - 1; code++) {\n    base_length[code] = length;\n    for (n = 0; n < (1 << extra_lbits[code]); n++) {\n      _length_code[length++] = code;\n    }\n  }\n  //Assert (length == 256, \"tr_static_init: length != 256\");\n  /* Note that the length 255 (match length 258) can be represented\n   * in two different ways: code 284 + 5 bits or code 285, so we\n   * overwrite length_code[255] to use the best encoding:\n   */\n  _length_code[length - 1] = code;\n\n  /* Initialize the mapping dist (0..32K) -> dist code (0..29) */\n  dist = 0;\n  for (code = 0; code < 16; code++) {\n    base_dist[code] = dist;\n    for (n = 0; n < (1 << extra_dbits[code]); n++) {\n      _dist_code[dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: dist != 256\");\n  dist >>= 7; /* from now on, all distances are divided by 128 */\n  for (; code < D_CODES; code++) {\n    base_dist[code] = dist << 7;\n    for (n = 0; n < (1 << (extra_dbits[code] - 7)); n++) {\n      _dist_code[256 + dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: 256+dist != 512\");\n\n  /* Construct the codes of the static literal tree */\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    bl_count[bits] = 0;\n  }\n\n  n = 0;\n  while (n <= 143) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  while (n <= 255) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 9;\n    n++;\n    bl_count[9]++;\n  }\n  while (n <= 279) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 7;\n    n++;\n    bl_count[7]++;\n  }\n  while (n <= 287) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  /* Codes 286 and 287 do not exist, but we must include them in the\n   * tree construction to get a canonical Huffman tree (longest code\n   * all ones)\n   */\n  gen_codes(static_ltree, L_CODES + 1, bl_count);\n\n  /* The static distance tree is trivial: */\n  for (n = 0; n < D_CODES; n++) {\n    static_dtree[n * 2 + 1]/*.Len*/ = 5;\n    static_dtree[n * 2]/*.Code*/ = bi_reverse(n, 5);\n  }\n\n  // Now data ready and we can init static trees\n  static_l_desc = new StaticTreeDesc(static_ltree, extra_lbits, LITERALS + 1, L_CODES, MAX_BITS);\n  static_d_desc = new StaticTreeDesc(static_dtree, extra_dbits, 0,          D_CODES, MAX_BITS);\n  static_bl_desc = new StaticTreeDesc(new Array(0), extra_blbits, 0,         BL_CODES, MAX_BL_BITS);\n\n  //static_init_done = true;\n}\n\n\n/* ===========================================================================\n * Initialize a new block.\n */\nfunction init_block(s) {\n  var n; /* iterates over tree elements */\n\n  /* Initialize the trees. */\n  for (n = 0; n < L_CODES;  n++) { s.dyn_ltree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < D_CODES;  n++) { s.dyn_dtree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < BL_CODES; n++) { s.bl_tree[n * 2]/*.Freq*/ = 0; }\n\n  s.dyn_ltree[END_BLOCK * 2]/*.Freq*/ = 1;\n  s.opt_len = s.static_len = 0;\n  s.last_lit = s.matches = 0;\n}\n\n\n/* ===========================================================================\n * Flush the bit buffer and align the output on a byte boundary\n */\nfunction bi_windup(s)\n{\n  if (s.bi_valid > 8) {\n    put_short(s, s.bi_buf);\n  } else if (s.bi_valid > 0) {\n    //put_byte(s, (Byte)s->bi_buf);\n    s.pending_buf[s.pending++] = s.bi_buf;\n  }\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n}\n\n/* ===========================================================================\n * Copy a stored block, storing first the length and its\n * one's complement if requested.\n */\nfunction copy_block(s, buf, len, header)\n//DeflateState *s;\n//charf    *buf;    /* the input data */\n//unsigned len;     /* its length */\n//int      header;  /* true if block header must be written */\n{\n  bi_windup(s);        /* align on byte boundary */\n\n  if (header) {\n    put_short(s, len);\n    put_short(s, ~len);\n  }\n//  while (len--) {\n//    put_byte(s, *buf++);\n//  }\n  utils.arraySet(s.pending_buf, s.window, buf, len, s.pending);\n  s.pending += len;\n}\n\n/* ===========================================================================\n * Compares to subtrees, using the tree depth as tie breaker when\n * the subtrees have equal frequency. This minimizes the worst case length.\n */\nfunction smaller(tree, n, m, depth) {\n  var _n2 = n * 2;\n  var _m2 = m * 2;\n  return (tree[_n2]/*.Freq*/ < tree[_m2]/*.Freq*/ ||\n         (tree[_n2]/*.Freq*/ === tree[_m2]/*.Freq*/ && depth[n] <= depth[m]));\n}\n\n/* ===========================================================================\n * Restore the heap property by moving down the tree starting at node k,\n * exchanging a node with the smallest of its two sons if necessary, stopping\n * when the heap property is re-established (each father smaller than its\n * two sons).\n */\nfunction pqdownheap(s, tree, k)\n//    deflate_state *s;\n//    ct_data *tree;  /* the tree to restore */\n//    int k;               /* node to move down */\n{\n  var v = s.heap[k];\n  var j = k << 1;  /* left son of k */\n  while (j <= s.heap_len) {\n    /* Set j to the smallest of the two sons: */\n    if (j < s.heap_len &&\n      smaller(tree, s.heap[j + 1], s.heap[j], s.depth)) {\n      j++;\n    }\n    /* Exit if v is smaller than both sons */\n    if (smaller(tree, v, s.heap[j], s.depth)) { break; }\n\n    /* Exchange v with the smallest son */\n    s.heap[k] = s.heap[j];\n    k = j;\n\n    /* And continue down the tree, setting j to the left son of k */\n    j <<= 1;\n  }\n  s.heap[k] = v;\n}\n\n\n// inlined manually\n// var SMALLEST = 1;\n\n/* ===========================================================================\n * Send the block data compressed using the given Huffman trees\n */\nfunction compress_block(s, ltree, dtree)\n//    deflate_state *s;\n//    const ct_data *ltree; /* literal tree */\n//    const ct_data *dtree; /* distance tree */\n{\n  var dist;           /* distance of matched string */\n  var lc;             /* match length or unmatched char (if dist == 0) */\n  var lx = 0;         /* running index in l_buf */\n  var code;           /* the code to send */\n  var extra;          /* number of extra bits to send */\n\n  if (s.last_lit !== 0) {\n    do {\n      dist = (s.pending_buf[s.d_buf + lx * 2] << 8) | (s.pending_buf[s.d_buf + lx * 2 + 1]);\n      lc = s.pending_buf[s.l_buf + lx];\n      lx++;\n\n      if (dist === 0) {\n        send_code(s, lc, ltree); /* send a literal byte */\n        //Tracecv(isgraph(lc), (stderr,\" '%c' \", lc));\n      } else {\n        /* Here, lc is the match length - MIN_MATCH */\n        code = _length_code[lc];\n        send_code(s, code + LITERALS + 1, ltree); /* send the length code */\n        extra = extra_lbits[code];\n        if (extra !== 0) {\n          lc -= base_length[code];\n          send_bits(s, lc, extra);       /* send the extra length bits */\n        }\n        dist--; /* dist is now the match distance - 1 */\n        code = d_code(dist);\n        //Assert (code < D_CODES, \"bad d_code\");\n\n        send_code(s, code, dtree);       /* send the distance code */\n        extra = extra_dbits[code];\n        if (extra !== 0) {\n          dist -= base_dist[code];\n          send_bits(s, dist, extra);   /* send the extra distance bits */\n        }\n      } /* literal or match pair ? */\n\n      /* Check that the overlay between pending_buf and d_buf+l_buf is ok: */\n      //Assert((uInt)(s->pending) < s->lit_bufsize + 2*lx,\n      //       \"pendingBuf overflow\");\n\n    } while (lx < s.last_lit);\n  }\n\n  send_code(s, END_BLOCK, ltree);\n}\n\n\n/* ===========================================================================\n * Construct one Huffman tree and assigns the code bit strings and lengths.\n * Update the total bit length for the current block.\n * IN assertion: the field freq is set for all tree elements.\n * OUT assertions: the fields len and code are set to the optimal bit length\n *     and corresponding code. The length opt_len is updated; static_len is\n *     also updated if stree is not null. The field max_code is set.\n */\nfunction build_tree(s, desc)\n//    deflate_state *s;\n//    tree_desc *desc; /* the tree descriptor */\n{\n  var tree     = desc.dyn_tree;\n  var stree    = desc.stat_desc.static_tree;\n  var has_stree = desc.stat_desc.has_stree;\n  var elems    = desc.stat_desc.elems;\n  var n, m;          /* iterate over heap elements */\n  var max_code = -1; /* largest code with non zero frequency */\n  var node;          /* new node being created */\n\n  /* Construct the initial heap, with least frequent element in\n   * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\n   * heap[0] is not used.\n   */\n  s.heap_len = 0;\n  s.heap_max = HEAP_SIZE;\n\n  for (n = 0; n < elems; n++) {\n    if (tree[n * 2]/*.Freq*/ !== 0) {\n      s.heap[++s.heap_len] = max_code = n;\n      s.depth[n] = 0;\n\n    } else {\n      tree[n * 2 + 1]/*.Len*/ = 0;\n    }\n  }\n\n  /* The pkzip format requires that at least one distance code exists,\n   * and that at least one bit should be sent even if there is only one\n   * possible code. So to avoid special checks later on we force at least\n   * two codes of non zero frequency.\n   */\n  while (s.heap_len < 2) {\n    node = s.heap[++s.heap_len] = (max_code < 2 ? ++max_code : 0);\n    tree[node * 2]/*.Freq*/ = 1;\n    s.depth[node] = 0;\n    s.opt_len--;\n\n    if (has_stree) {\n      s.static_len -= stree[node * 2 + 1]/*.Len*/;\n    }\n    /* node is 0 or 1 so it does not have extra bits */\n  }\n  desc.max_code = max_code;\n\n  /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\n   * establish sub-heaps of increasing lengths:\n   */\n  for (n = (s.heap_len >> 1/*int /2*/); n >= 1; n--) { pqdownheap(s, tree, n); }\n\n  /* Construct the Huffman tree by repeatedly combining the least two\n   * frequent nodes.\n   */\n  node = elems;              /* next internal node of the tree */\n  do {\n    //pqremove(s, tree, n);  /* n = node of least frequency */\n    /*** pqremove ***/\n    n = s.heap[1/*SMALLEST*/];\n    s.heap[1/*SMALLEST*/] = s.heap[s.heap_len--];\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n    /***/\n\n    m = s.heap[1/*SMALLEST*/]; /* m = node of next least frequency */\n\n    s.heap[--s.heap_max] = n; /* keep the nodes sorted by frequency */\n    s.heap[--s.heap_max] = m;\n\n    /* Create a new node father of n and m */\n    tree[node * 2]/*.Freq*/ = tree[n * 2]/*.Freq*/ + tree[m * 2]/*.Freq*/;\n    s.depth[node] = (s.depth[n] >= s.depth[m] ? s.depth[n] : s.depth[m]) + 1;\n    tree[n * 2 + 1]/*.Dad*/ = tree[m * 2 + 1]/*.Dad*/ = node;\n\n    /* and insert the new node in the heap */\n    s.heap[1/*SMALLEST*/] = node++;\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n\n  } while (s.heap_len >= 2);\n\n  s.heap[--s.heap_max] = s.heap[1/*SMALLEST*/];\n\n  /* At this point, the fields freq and dad are set. We can now\n   * generate the bit lengths.\n   */\n  gen_bitlen(s, desc);\n\n  /* The field len is now set, we can generate the bit codes */\n  gen_codes(tree, max_code, s.bl_count);\n}\n\n\n/* ===========================================================================\n * Scan a literal or distance tree to determine the frequencies of the codes\n * in the bit length tree.\n */\nfunction scan_tree(s, tree, max_code)\n//    deflate_state *s;\n//    ct_data *tree;   /* the tree to be scanned */\n//    int max_code;    /* and its largest code of non zero frequency */\n{\n  var n;                     /* iterates over all tree elements */\n  var prevlen = -1;          /* last emitted length */\n  var curlen;                /* length of current code */\n\n  var nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  var count = 0;             /* repeat count of the current code */\n  var max_count = 7;         /* max repeat count */\n  var min_count = 4;         /* min repeat count */\n\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n  tree[(max_code + 1) * 2 + 1]/*.Len*/ = 0xffff; /* guard */\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      s.bl_tree[curlen * 2]/*.Freq*/ += count;\n\n    } else if (curlen !== 0) {\n\n      if (curlen !== prevlen) { s.bl_tree[curlen * 2]/*.Freq*/++; }\n      s.bl_tree[REP_3_6 * 2]/*.Freq*/++;\n\n    } else if (count <= 10) {\n      s.bl_tree[REPZ_3_10 * 2]/*.Freq*/++;\n\n    } else {\n      s.bl_tree[REPZ_11_138 * 2]/*.Freq*/++;\n    }\n\n    count = 0;\n    prevlen = curlen;\n\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Send a literal or distance tree in compressed form, using the codes in\n * bl_tree.\n */\nfunction send_tree(s, tree, max_code)\n//    deflate_state *s;\n//    ct_data *tree; /* the tree to be scanned */\n//    int max_code;       /* and its largest code of non zero frequency */\n{\n  var n;                     /* iterates over all tree elements */\n  var prevlen = -1;          /* last emitted length */\n  var curlen;                /* length of current code */\n\n  var nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  var count = 0;             /* repeat count of the current code */\n  var max_count = 7;         /* max repeat count */\n  var min_count = 4;         /* min repeat count */\n\n  /* tree[max_code+1].Len = -1; */  /* guard already set */\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      do { send_code(s, curlen, s.bl_tree); } while (--count !== 0);\n\n    } else if (curlen !== 0) {\n      if (curlen !== prevlen) {\n        send_code(s, curlen, s.bl_tree);\n        count--;\n      }\n      //Assert(count >= 3 && count <= 6, \" 3_6?\");\n      send_code(s, REP_3_6, s.bl_tree);\n      send_bits(s, count - 3, 2);\n\n    } else if (count <= 10) {\n      send_code(s, REPZ_3_10, s.bl_tree);\n      send_bits(s, count - 3, 3);\n\n    } else {\n      send_code(s, REPZ_11_138, s.bl_tree);\n      send_bits(s, count - 11, 7);\n    }\n\n    count = 0;\n    prevlen = curlen;\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Construct the Huffman tree for the bit lengths and return the index in\n * bl_order of the last bit length code to send.\n */\nfunction build_bl_tree(s) {\n  var max_blindex;  /* index of last bit length code of non zero freq */\n\n  /* Determine the bit length frequencies for literal and distance trees */\n  scan_tree(s, s.dyn_ltree, s.l_desc.max_code);\n  scan_tree(s, s.dyn_dtree, s.d_desc.max_code);\n\n  /* Build the bit length tree: */\n  build_tree(s, s.bl_desc);\n  /* opt_len now includes the length of the tree representations, except\n   * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.\n   */\n\n  /* Determine the number of bit length codes to send. The pkzip format\n   * requires that at least 4 bit length codes be sent. (appnote.txt says\n   * 3 but the actual value used is 4.)\n   */\n  for (max_blindex = BL_CODES - 1; max_blindex >= 3; max_blindex--) {\n    if (s.bl_tree[bl_order[max_blindex] * 2 + 1]/*.Len*/ !== 0) {\n      break;\n    }\n  }\n  /* Update opt_len to include the bit length tree and counts */\n  s.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4;\n  //Tracev((stderr, \"\\ndyn trees: dyn %ld, stat %ld\",\n  //        s->opt_len, s->static_len));\n\n  return max_blindex;\n}\n\n\n/* ===========================================================================\n * Send the header for a block using dynamic Huffman trees: the counts, the\n * lengths of the bit length codes, the literal tree and the distance tree.\n * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\n */\nfunction send_all_trees(s, lcodes, dcodes, blcodes)\n//    deflate_state *s;\n//    int lcodes, dcodes, blcodes; /* number of codes for each tree */\n{\n  var rank;                    /* index in bl_order */\n\n  //Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, \"not enough codes\");\n  //Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,\n  //        \"too many codes\");\n  //Tracev((stderr, \"\\nbl counts: \"));\n  send_bits(s, lcodes - 257, 5); /* not +255 as stated in appnote.txt */\n  send_bits(s, dcodes - 1,   5);\n  send_bits(s, blcodes - 4,  4); /* not -3 as stated in appnote.txt */\n  for (rank = 0; rank < blcodes; rank++) {\n    //Tracev((stderr, \"\\nbl code %2d \", bl_order[rank]));\n    send_bits(s, s.bl_tree[bl_order[rank] * 2 + 1]/*.Len*/, 3);\n  }\n  //Tracev((stderr, \"\\nbl tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_ltree, lcodes - 1); /* literal tree */\n  //Tracev((stderr, \"\\nlit tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_dtree, dcodes - 1); /* distance tree */\n  //Tracev((stderr, \"\\ndist tree: sent %ld\", s->bits_sent));\n}\n\n\n/* ===========================================================================\n * Check if the data type is TEXT or BINARY, using the following algorithm:\n * - TEXT if the two conditions below are satisfied:\n *    a) There are no non-portable control characters belonging to the\n *       \"black list\" (0..6, 14..25, 28..31).\n *    b) There is at least one printable character belonging to the\n *       \"white list\" (9 {TAB}, 10 {LF}, 13 {CR}, 32..255).\n * - BINARY otherwise.\n * - The following partially-portable control characters form a\n *   \"gray list\" that is ignored in this detection algorithm:\n *   (7 {BEL}, 8 {BS}, 11 {VT}, 12 {FF}, 26 {SUB}, 27 {ESC}).\n * IN assertion: the fields Freq of dyn_ltree are set.\n */\nfunction detect_data_type(s) {\n  /* black_mask is the bit mask of black-listed bytes\n   * set bits 0..6, 14..25, and 28..31\n   * 0xf3ffc07f = binary 11110011111111111100000001111111\n   */\n  var black_mask = 0xf3ffc07f;\n  var n;\n\n  /* Check for non-textual (\"black-listed\") bytes. */\n  for (n = 0; n <= 31; n++, black_mask >>>= 1) {\n    if ((black_mask & 1) && (s.dyn_ltree[n * 2]/*.Freq*/ !== 0)) {\n      return Z_BINARY;\n    }\n  }\n\n  /* Check for textual (\"white-listed\") bytes. */\n  if (s.dyn_ltree[9 * 2]/*.Freq*/ !== 0 || s.dyn_ltree[10 * 2]/*.Freq*/ !== 0 ||\n      s.dyn_ltree[13 * 2]/*.Freq*/ !== 0) {\n    return Z_TEXT;\n  }\n  for (n = 32; n < LITERALS; n++) {\n    if (s.dyn_ltree[n * 2]/*.Freq*/ !== 0) {\n      return Z_TEXT;\n    }\n  }\n\n  /* There are no \"black-listed\" or \"white-listed\" bytes:\n   * this stream either is empty or has tolerated (\"gray-listed\") bytes only.\n   */\n  return Z_BINARY;\n}\n\n\nvar static_init_done = false;\n\n/* ===========================================================================\n * Initialize the tree data structures for a new zlib stream.\n */\nfunction _tr_init(s)\n{\n\n  if (!static_init_done) {\n    tr_static_init();\n    static_init_done = true;\n  }\n\n  s.l_desc  = new TreeDesc(s.dyn_ltree, static_l_desc);\n  s.d_desc  = new TreeDesc(s.dyn_dtree, static_d_desc);\n  s.bl_desc = new TreeDesc(s.bl_tree, static_bl_desc);\n\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n\n  /* Initialize the first block of the first file: */\n  init_block(s);\n}\n\n\n/* ===========================================================================\n * Send a stored block\n */\nfunction _tr_stored_block(s, buf, stored_len, last)\n//DeflateState *s;\n//charf *buf;       /* input block */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  send_bits(s, (STORED_BLOCK << 1) + (last ? 1 : 0), 3);    /* send block type */\n  copy_block(s, buf, stored_len, true); /* with header */\n}\n\n\n/* ===========================================================================\n * Send one empty static block to give enough lookahead for inflate.\n * This takes 10 bits, of which 7 may remain in the bit buffer.\n */\nfunction _tr_align(s) {\n  send_bits(s, STATIC_TREES << 1, 3);\n  send_code(s, END_BLOCK, static_ltree);\n  bi_flush(s);\n}\n\n\n/* ===========================================================================\n * Determine the best encoding for the current block: dynamic trees, static\n * trees or store, and output the encoded block to the zip file.\n */\nfunction _tr_flush_block(s, buf, stored_len, last)\n//DeflateState *s;\n//charf *buf;       /* input block, or NULL if too old */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  var opt_lenb, static_lenb;  /* opt_len and static_len in bytes */\n  var max_blindex = 0;        /* index of last bit length code of non zero freq */\n\n  /* Build the Huffman trees unless a stored block is forced */\n  if (s.level > 0) {\n\n    /* Check if the file is binary or text */\n    if (s.strm.data_type === Z_UNKNOWN) {\n      s.strm.data_type = detect_data_type(s);\n    }\n\n    /* Construct the literal and distance trees */\n    build_tree(s, s.l_desc);\n    // Tracev((stderr, \"\\nlit data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n\n    build_tree(s, s.d_desc);\n    // Tracev((stderr, \"\\ndist data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n    /* At this point, opt_len and static_len are the total bit lengths of\n     * the compressed block data, excluding the tree representations.\n     */\n\n    /* Build the bit length tree for the above two trees, and get the index\n     * in bl_order of the last bit length code to send.\n     */\n    max_blindex = build_bl_tree(s);\n\n    /* Determine the best encoding. Compute the block lengths in bytes. */\n    opt_lenb = (s.opt_len + 3 + 7) >>> 3;\n    static_lenb = (s.static_len + 3 + 7) >>> 3;\n\n    // Tracev((stderr, \"\\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u \",\n    //        opt_lenb, s->opt_len, static_lenb, s->static_len, stored_len,\n    //        s->last_lit));\n\n    if (static_lenb <= opt_lenb) { opt_lenb = static_lenb; }\n\n  } else {\n    // Assert(buf != (char*)0, \"lost buf\");\n    opt_lenb = static_lenb = stored_len + 5; /* force a stored block */\n  }\n\n  if ((stored_len + 4 <= opt_lenb) && (buf !== -1)) {\n    /* 4: two words for the lengths */\n\n    /* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\n     * Otherwise we can't have processed more than WSIZE input bytes since\n     * the last block flush, because compression would have been\n     * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\n     * transform a block into a stored block.\n     */\n    _tr_stored_block(s, buf, stored_len, last);\n\n  } else if (s.strategy === Z_FIXED || static_lenb === opt_lenb) {\n\n    send_bits(s, (STATIC_TREES << 1) + (last ? 1 : 0), 3);\n    compress_block(s, static_ltree, static_dtree);\n\n  } else {\n    send_bits(s, (DYN_TREES << 1) + (last ? 1 : 0), 3);\n    send_all_trees(s, s.l_desc.max_code + 1, s.d_desc.max_code + 1, max_blindex + 1);\n    compress_block(s, s.dyn_ltree, s.dyn_dtree);\n  }\n  // Assert (s->compressed_len == s->bits_sent, \"bad compressed size\");\n  /* The above check is made mod 2^32, for files larger than 512 MB\n   * and uLong implemented on 32 bits.\n   */\n  init_block(s);\n\n  if (last) {\n    bi_windup(s);\n  }\n  // Tracev((stderr,\"\\ncomprlen %lu(%lu) \", s->compressed_len>>3,\n  //       s->compressed_len-7*last));\n}\n\n/* ===========================================================================\n * Save the match info and tally the frequency counts. Return true if\n * the current block must be flushed.\n */\nfunction _tr_tally(s, dist, lc)\n//    deflate_state *s;\n//    unsigned dist;  /* distance of matched string */\n//    unsigned lc;    /* match length-MIN_MATCH or unmatched char (if dist==0) */\n{\n  //var out_length, in_length, dcode;\n\n  s.pending_buf[s.d_buf + s.last_lit * 2]     = (dist >>> 8) & 0xff;\n  s.pending_buf[s.d_buf + s.last_lit * 2 + 1] = dist & 0xff;\n\n  s.pending_buf[s.l_buf + s.last_lit] = lc & 0xff;\n  s.last_lit++;\n\n  if (dist === 0) {\n    /* lc is the unmatched char */\n    s.dyn_ltree[lc * 2]/*.Freq*/++;\n  } else {\n    s.matches++;\n    /* Here, lc is the match length - MIN_MATCH */\n    dist--;             /* dist = match distance - 1 */\n    //Assert((ush)dist < (ush)MAX_DIST(s) &&\n    //       (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&\n    //       (ush)d_code(dist) < (ush)D_CODES,  \"_tr_tally: bad match\");\n\n    s.dyn_ltree[(_length_code[lc] + LITERALS + 1) * 2]/*.Freq*/++;\n    s.dyn_dtree[d_code(dist) * 2]/*.Freq*/++;\n  }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n\n//#ifdef TRUNCATE_BLOCK\n//  /* Try to guess if it is profitable to stop the current block here */\n//  if ((s.last_lit & 0x1fff) === 0 && s.level > 2) {\n//    /* Compute an upper bound for the compressed length */\n//    out_length = s.last_lit*8;\n//    in_length = s.strstart - s.block_start;\n//\n//    for (dcode = 0; dcode < D_CODES; dcode++) {\n//      out_length += s.dyn_dtree[dcode*2]/*.Freq*/ * (5 + extra_dbits[dcode]);\n//    }\n//    out_length >>>= 3;\n//    //Tracev((stderr,\"\\nlast_lit %u, in %ld, out ~%ld(%ld%%) \",\n//    //       s->last_lit, in_length, out_length,\n//    //       100L - out_length*100L/in_length));\n//    if (s.matches < (s.last_lit>>1)/*int /2*/ && out_length < (in_length>>1)/*int /2*/) {\n//      return true;\n//    }\n//  }\n//#endif\n\n  return (s.last_lit === s.lit_bufsize - 1);\n  /* We avoid equality with lit_bufsize because of wraparound at 64K\n   * on 16 bit machines and because stored blocks are restricted to\n   * 64K-1 bytes.\n   */\n}\n\nexports._tr_init  = _tr_init;\nexports._tr_stored_block = _tr_stored_block;\nexports._tr_flush_block  = _tr_flush_block;\nexports._tr_tally = _tr_tally;\nexports._tr_align = _tr_align;\n","// Top level file is just a mixin of submodules & constants\n'use strict';\n\nvar assign    = require('./lib/utils/common').assign;\n\nvar deflate   = require('./lib/deflate');\nvar inflate   = require('./lib/inflate');\nvar constants = require('./lib/zlib/constants');\n\nvar pako = {};\n\nassign(pako, deflate, inflate, constants);\n\nmodule.exports = pako;\n","'use strict';\n\n// Note: adler32 takes 12% for level 0 and 2% for level 6.\n// It isn't worth it to make additional optimizations as in original.\n// Small size is preferable.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction adler32(adler, buf, len, pos) {\n  var s1 = (adler & 0xffff) |0,\n      s2 = ((adler >>> 16) & 0xffff) |0,\n      n = 0;\n\n  while (len !== 0) {\n    // Set limit ~ twice less than 5552, to keep\n    // s2 in 31-bits, because we force signed ints.\n    // in other case %= will fail.\n    n = len > 2000 ? 2000 : len;\n    len -= n;\n\n    do {\n      s1 = (s1 + buf[pos++]) |0;\n      s2 = (s2 + s1) |0;\n    } while (--n);\n\n    s1 %= 65521;\n    s2 %= 65521;\n  }\n\n  return (s1 | (s2 << 16)) |0;\n}\n\n\nmodule.exports = adler32;\n","'use strict';\n\n// Note: we can't get significant speed boost here.\n// So write code to minimize size - no pregenerated tables\n// and array tools dependencies.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// Use ordinary array, since untyped makes no boost here\nfunction makeTable() {\n  var c, table = [];\n\n  for (var n = 0; n < 256; n++) {\n    c = n;\n    for (var k = 0; k < 8; k++) {\n      c = ((c & 1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\n    }\n    table[n] = c;\n  }\n\n  return table;\n}\n\n// Create table on load. Just 255 signed longs. Not a problem.\nvar crcTable = makeTable();\n\n\nfunction crc32(crc, buf, len, pos) {\n  var t = crcTable,\n      end = pos + len;\n\n  crc ^= -1;\n\n  for (var i = pos; i < end; i++) {\n    crc = (crc >>> 8) ^ t[(crc ^ buf[i]) & 0xFF];\n  }\n\n  return (crc ^ (-1)); // >>> 0;\n}\n\n\nmodule.exports = crc32;\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nmodule.exports = {\n  2:      'need dictionary',     /* Z_NEED_DICT       2  */\n  1:      'stream end',          /* Z_STREAM_END      1  */\n  0:      '',                    /* Z_OK              0  */\n  '-1':   'file error',          /* Z_ERRNO         (-1) */\n  '-2':   'stream error',        /* Z_STREAM_ERROR  (-2) */\n  '-3':   'data error',          /* Z_DATA_ERROR    (-3) */\n  '-4':   'insufficient memory', /* Z_MEM_ERROR     (-4) */\n  '-5':   'buffer error',        /* Z_BUF_ERROR     (-5) */\n  '-6':   'incompatible version' /* Z_VERSION_ERROR (-6) */\n};\n","// String encode/decode helpers\n'use strict';\n\n\nvar utils = require('./common');\n\n\n// Quick check if we can use fast array to bin string conversion\n//\n// - apply(Array) can fail on Android 2.2\n// - apply(Uint8Array) can fail on iOS 5.1 Safari\n//\nvar STR_APPLY_OK = true;\nvar STR_APPLY_UIA_OK = true;\n\ntry { String.fromCharCode.apply(null, [ 0 ]); } catch (__) { STR_APPLY_OK = false; }\ntry { String.fromCharCode.apply(null, new Uint8Array(1)); } catch (__) { STR_APPLY_UIA_OK = false; }\n\n\n// Table with utf8 lengths (calculated by first byte of sequence)\n// Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,\n// because max possible codepoint is 0x10ffff\nvar _utf8len = new utils.Buf8(256);\nfor (var q = 0; q < 256; q++) {\n  _utf8len[q] = (q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1);\n}\n_utf8len[254] = _utf8len[254] = 1; // Invalid sequence start\n\n\n// convert string to array (typed, when possible)\nexports.string2buf = function (str) {\n  var buf, c, c2, m_pos, i, str_len = str.length, buf_len = 0;\n\n  // count binary size\n  for (m_pos = 0; m_pos < str_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;\n  }\n\n  // allocate buffer\n  buf = new utils.Buf8(buf_len);\n\n  // convert\n  for (i = 0, m_pos = 0; i < buf_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    if (c < 0x80) {\n      /* one byte */\n      buf[i++] = c;\n    } else if (c < 0x800) {\n      /* two bytes */\n      buf[i++] = 0xC0 | (c >>> 6);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else if (c < 0x10000) {\n      /* three bytes */\n      buf[i++] = 0xE0 | (c >>> 12);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else {\n      /* four bytes */\n      buf[i++] = 0xf0 | (c >>> 18);\n      buf[i++] = 0x80 | (c >>> 12 & 0x3f);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    }\n  }\n\n  return buf;\n};\n\n// Helper (used in 2 places)\nfunction buf2binstring(buf, len) {\n  // On Chrome, the arguments in a function call that are allowed is `65534`.\n  // If the length of the buffer is smaller than that, we can use this optimization,\n  // otherwise we will take a slower path.\n  if (len < 65534) {\n    if ((buf.subarray && STR_APPLY_UIA_OK) || (!buf.subarray && STR_APPLY_OK)) {\n      return String.fromCharCode.apply(null, utils.shrinkBuf(buf, len));\n    }\n  }\n\n  var result = '';\n  for (var i = 0; i < len; i++) {\n    result += String.fromCharCode(buf[i]);\n  }\n  return result;\n}\n\n\n// Convert byte array to binary string\nexports.buf2binstring = function (buf) {\n  return buf2binstring(buf, buf.length);\n};\n\n\n// Convert binary string (typed, when possible)\nexports.binstring2buf = function (str) {\n  var buf = new utils.Buf8(str.length);\n  for (var i = 0, len = buf.length; i < len; i++) {\n    buf[i] = str.charCodeAt(i);\n  }\n  return buf;\n};\n\n\n// convert array to string\nexports.buf2string = function (buf, max) {\n  var i, out, c, c_len;\n  var len = max || buf.length;\n\n  // Reserve max possible length (2 words per char)\n  // NB: by unknown reasons, Array is significantly faster for\n  //     String.fromCharCode.apply than Uint16Array.\n  var utf16buf = new Array(len * 2);\n\n  for (out = 0, i = 0; i < len;) {\n    c = buf[i++];\n    // quick process ascii\n    if (c < 0x80) { utf16buf[out++] = c; continue; }\n\n    c_len = _utf8len[c];\n    // skip 5 & 6 byte codes\n    if (c_len > 4) { utf16buf[out++] = 0xfffd; i += c_len - 1; continue; }\n\n    // apply mask on first byte\n    c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;\n    // join the rest\n    while (c_len > 1 && i < len) {\n      c = (c << 6) | (buf[i++] & 0x3f);\n      c_len--;\n    }\n\n    // terminated by end of string?\n    if (c_len > 1) { utf16buf[out++] = 0xfffd; continue; }\n\n    if (c < 0x10000) {\n      utf16buf[out++] = c;\n    } else {\n      c -= 0x10000;\n      utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);\n      utf16buf[out++] = 0xdc00 | (c & 0x3ff);\n    }\n  }\n\n  return buf2binstring(utf16buf, out);\n};\n\n\n// Calculate max possible position in utf8 buffer,\n// that will not break sequence. If that's not possible\n// - (very small limits) return max size as is.\n//\n// buf[] - utf8 bytes array\n// max   - length limit (mandatory);\nexports.utf8border = function (buf, max) {\n  var pos;\n\n  max = max || buf.length;\n  if (max > buf.length) { max = buf.length; }\n\n  // go back from last position, until start of sequence found\n  pos = max - 1;\n  while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) { pos--; }\n\n  // Very small and broken sequence,\n  // return max, because we should return something anyway.\n  if (pos < 0) { return max; }\n\n  // If we came to start of buffer - that means buffer is too small,\n  // return max too.\n  if (pos === 0) { return max; }\n\n  return (pos + _utf8len[buf[pos]] > max) ? pos : max;\n};\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction ZStream() {\n  /* next input byte */\n  this.input = null; // JS specific, because we have no pointers\n  this.next_in = 0;\n  /* number of bytes available at input */\n  this.avail_in = 0;\n  /* total number of input bytes read so far */\n  this.total_in = 0;\n  /* next output byte should be put there */\n  this.output = null; // JS specific, because we have no pointers\n  this.next_out = 0;\n  /* remaining free space at output */\n  this.avail_out = 0;\n  /* total number of bytes output so far */\n  this.total_out = 0;\n  /* last error message, NULL if no error */\n  this.msg = ''/*Z_NULL*/;\n  /* not visible by applications */\n  this.state = null;\n  /* best guess about the data type: binary or text */\n  this.data_type = 2/*Z_UNKNOWN*/;\n  /* adler32 value of the uncompressed data */\n  this.adler = 0;\n}\n\nmodule.exports = ZStream;\n","'use strict';\n\n\nvar zlib_inflate = require('./zlib/inflate');\nvar utils        = require('./utils/common');\nvar strings      = require('./utils/strings');\nvar c            = require('./zlib/constants');\nvar msg          = require('./zlib/messages');\nvar ZStream      = require('./zlib/zstream');\nvar GZheader     = require('./zlib/gzheader');\n\nvar toString = Object.prototype.toString;\n\n/**\n * class Inflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[inflate]]\n * and [[inflateRaw]].\n **/\n\n/* internal\n * inflate.chunks -> Array\n *\n * Chunks of output data, if [[Inflate#onData]] not overridden.\n **/\n\n/**\n * Inflate.result -> Uint8Array|Array|String\n *\n * Uncompressed result, generated by default [[Inflate#onData]]\n * and [[Inflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Inflate#push]] with `Z_FINISH` / `true` param) or if you\n * push a chunk with explicit flush (call [[Inflate#push]] with\n * `Z_SYNC_FLUSH` param).\n **/\n\n/**\n * Inflate.err -> Number\n *\n * Error code after inflate finished. 0 (Z_OK) on success.\n * Should be checked if broken data possible.\n **/\n\n/**\n * Inflate.msg -> String\n *\n * Error message, if [[Inflate.err]] != 0\n **/\n\n\n/**\n * new Inflate(options)\n * - options (Object): zlib inflate options.\n *\n * Creates new inflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `windowBits`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw inflate\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n * By default, when no options set, autodetect deflate/gzip data format via\n * wrapper header.\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , chunk1 = Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * var inflate = new pako.Inflate({ level: 3});\n *\n * inflate.push(chunk1, false);\n * inflate.push(chunk2, true);  // true -> last chunk\n *\n * if (inflate.err) { throw new Error(inflate.err); }\n *\n * console.log(inflate.result);\n * ```\n **/\nfunction Inflate(options) {\n  if (!(this instanceof Inflate)) return new Inflate(options);\n\n  this.options = utils.assign({\n    chunkSize: 16384,\n    windowBits: 0,\n    to: ''\n  }, options || {});\n\n  var opt = this.options;\n\n  // Force window size for `raw` data, if not set directly,\n  // because we have no header for autodetect.\n  if (opt.raw && (opt.windowBits >= 0) && (opt.windowBits < 16)) {\n    opt.windowBits = -opt.windowBits;\n    if (opt.windowBits === 0) { opt.windowBits = -15; }\n  }\n\n  // If `windowBits` not defined (and mode not raw) - set autodetect flag for gzip/deflate\n  if ((opt.windowBits >= 0) && (opt.windowBits < 16) &&\n      !(options && options.windowBits)) {\n    opt.windowBits += 32;\n  }\n\n  // Gzip header has no info about windows size, we can do autodetect only\n  // for deflate. So, if window size not set, force it to max when gzip possible\n  if ((opt.windowBits > 15) && (opt.windowBits < 48)) {\n    // bit 3 (16) -> gzipped data\n    // bit 4 (32) -> autodetect gzip/deflate\n    if ((opt.windowBits & 15) === 0) {\n      opt.windowBits |= 15;\n    }\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm   = new ZStream();\n  this.strm.avail_out = 0;\n\n  var status  = zlib_inflate.inflateInit2(\n    this.strm,\n    opt.windowBits\n  );\n\n  if (status !== c.Z_OK) {\n    throw new Error(msg[status]);\n  }\n\n  this.header = new GZheader();\n\n  zlib_inflate.inflateGetHeader(this.strm, this.header);\n\n  // Setup dictionary\n  if (opt.dictionary) {\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      opt.dictionary = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      opt.dictionary = new Uint8Array(opt.dictionary);\n    }\n    if (opt.raw) { //In raw mode we need to set the dictionary early\n      status = zlib_inflate.inflateSetDictionary(this.strm, opt.dictionary);\n      if (status !== c.Z_OK) {\n        throw new Error(msg[status]);\n      }\n    }\n  }\n}\n\n/**\n * Inflate#push(data[, mode]) -> Boolean\n * - data (Uint8Array|Array|ArrayBuffer|String): input data\n * - mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to inflate pipe, generating [[Inflate#onData]] calls with\n * new output chunks. Returns `true` on success. The last data block must have\n * mode Z_FINISH (or `true`). That will flush internal pending buffers and call\n * [[Inflate#onEnd]]. For interim explicit flushes (without ending the stream) you\n * can use mode Z_SYNC_FLUSH, keeping the decompression context.\n *\n * On fail call [[Inflate#onEnd]] with error code and return false.\n *\n * We strongly recommend to use `Uint8Array` on input for best speed (output\n * format is detected automatically). Also, don't skip last param and always\n * use the same type in your code (boolean or number). That will improve JS speed.\n *\n * For regular `Array`-s make sure all elements are [0..255].\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nInflate.prototype.push = function (data, mode) {\n  var strm = this.strm;\n  var chunkSize = this.options.chunkSize;\n  var dictionary = this.options.dictionary;\n  var status, _mode;\n  var next_out_utf8, tail, utf8str;\n\n  // Flag to properly process Z_BUF_ERROR on testing inflate call\n  // when we check that all output data was flushed.\n  var allowBufError = false;\n\n  if (this.ended) { return false; }\n  _mode = (mode === ~~mode) ? mode : ((mode === true) ? c.Z_FINISH : c.Z_NO_FLUSH);\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // Only binary strings can be decompressed on practice\n    strm.input = strings.binstring2buf(data);\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  do {\n    if (strm.avail_out === 0) {\n      strm.output = new utils.Buf8(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    status = zlib_inflate.inflate(strm, c.Z_NO_FLUSH);    /* no bad return value */\n\n    if (status === c.Z_NEED_DICT && dictionary) {\n      status = zlib_inflate.inflateSetDictionary(this.strm, dictionary);\n    }\n\n    if (status === c.Z_BUF_ERROR && allowBufError === true) {\n      status = c.Z_OK;\n      allowBufError = false;\n    }\n\n    if (status !== c.Z_STREAM_END && status !== c.Z_OK) {\n      this.onEnd(status);\n      this.ended = true;\n      return false;\n    }\n\n    if (strm.next_out) {\n      if (strm.avail_out === 0 || status === c.Z_STREAM_END || (strm.avail_in === 0 && (_mode === c.Z_FINISH || _mode === c.Z_SYNC_FLUSH))) {\n\n        if (this.options.to === 'string') {\n\n          next_out_utf8 = strings.utf8border(strm.output, strm.next_out);\n\n          tail = strm.next_out - next_out_utf8;\n          utf8str = strings.buf2string(strm.output, next_out_utf8);\n\n          // move tail\n          strm.next_out = tail;\n          strm.avail_out = chunkSize - tail;\n          if (tail) { utils.arraySet(strm.output, strm.output, next_out_utf8, tail, 0); }\n\n          this.onData(utf8str);\n\n        } else {\n          this.onData(utils.shrinkBuf(strm.output, strm.next_out));\n        }\n      }\n    }\n\n    // When no more input data, we should check that internal inflate buffers\n    // are flushed. The only way to do it when avail_out = 0 - run one more\n    // inflate pass. But if output data not exists, inflate return Z_BUF_ERROR.\n    // Here we set flag to process this error properly.\n    //\n    // NOTE. Deflate does not return error in this case and does not needs such\n    // logic.\n    if (strm.avail_in === 0 && strm.avail_out === 0) {\n      allowBufError = true;\n    }\n\n  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== c.Z_STREAM_END);\n\n  if (status === c.Z_STREAM_END) {\n    _mode = c.Z_FINISH;\n  }\n\n  // Finalize on the last chunk.\n  if (_mode === c.Z_FINISH) {\n    status = zlib_inflate.inflateEnd(this.strm);\n    this.onEnd(status);\n    this.ended = true;\n    return status === c.Z_OK;\n  }\n\n  // callback interim results if Z_SYNC_FLUSH.\n  if (_mode === c.Z_SYNC_FLUSH) {\n    this.onEnd(c.Z_OK);\n    strm.avail_out = 0;\n    return true;\n  }\n\n  return true;\n};\n\n\n/**\n * Inflate#onData(chunk) -> Void\n * - chunk (Uint8Array|Array|String): output data. Type of array depends\n *   on js engine support. When string output requested, each chunk\n *   will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nInflate.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Inflate#onEnd(status) -> Void\n * - status (Number): inflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called either after you tell inflate that the input stream is\n * complete (Z_FINISH) or should be flushed (Z_SYNC_FLUSH)\n * or if an error happened. By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nInflate.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === c.Z_OK) {\n    if (this.options.to === 'string') {\n      // Glue & convert here, until we teach pako to send\n      // utf8 aligned strings to onData\n      this.result = this.chunks.join('');\n    } else {\n      this.result = utils.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * inflate(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Decompress `data` with inflate/ungzip and `options`. Autodetect\n * format via wrapper header by default. That's why we don't provide\n * separate `ungzip` method.\n *\n * Supported options are:\n *\n * - windowBits\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , input = pako.deflate([1,2,3,4,5,6,7,8,9])\n *   , output;\n *\n * try {\n *   output = pako.inflate(input);\n * } catch (err)\n *   console.log(err);\n * }\n * ```\n **/\nfunction inflate(input, options) {\n  var inflator = new Inflate(options);\n\n  inflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (inflator.err) { throw inflator.msg || msg[inflator.err]; }\n\n  return inflator.result;\n}\n\n\n/**\n * inflateRaw(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * The same as [[inflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction inflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return inflate(input, options);\n}\n\n\n/**\n * ungzip(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Just shortcut to [[inflate]], because it autodetects format\n * by header.content. Done for convenience.\n **/\n\n\nexports.Inflate = Inflate;\nexports.inflate = inflate;\nexports.inflateRaw = inflateRaw;\nexports.ungzip  = inflate;\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils         = require('../utils/common');\nvar adler32       = require('./adler32');\nvar crc32         = require('./crc32');\nvar inflate_fast  = require('./inffast');\nvar inflate_table = require('./inftrees');\n\nvar CODES = 0;\nvar LENS = 1;\nvar DISTS = 2;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n/* Allowed flush values; see deflate() and inflate() below for details */\n//var Z_NO_FLUSH      = 0;\n//var Z_PARTIAL_FLUSH = 1;\n//var Z_SYNC_FLUSH    = 2;\n//var Z_FULL_FLUSH    = 3;\nvar Z_FINISH        = 4;\nvar Z_BLOCK         = 5;\nvar Z_TREES         = 6;\n\n\n/* Return codes for the compression/decompression functions. Negative values\n * are errors, positive values are used for special but normal events.\n */\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\nvar Z_NEED_DICT     = 2;\n//var Z_ERRNO         = -1;\nvar Z_STREAM_ERROR  = -2;\nvar Z_DATA_ERROR    = -3;\nvar Z_MEM_ERROR     = -4;\nvar Z_BUF_ERROR     = -5;\n//var Z_VERSION_ERROR = -6;\n\n/* The deflate compression method */\nvar Z_DEFLATED  = 8;\n\n\n/* STATES ====================================================================*/\n/* ===========================================================================*/\n\n\nvar    HEAD = 1;       /* i: waiting for magic header */\nvar    FLAGS = 2;      /* i: waiting for method and flags (gzip) */\nvar    TIME = 3;       /* i: waiting for modification time (gzip) */\nvar    OS = 4;         /* i: waiting for extra flags and operating system (gzip) */\nvar    EXLEN = 5;      /* i: waiting for extra length (gzip) */\nvar    EXTRA = 6;      /* i: waiting for extra bytes (gzip) */\nvar    NAME = 7;       /* i: waiting for end of file name (gzip) */\nvar    COMMENT = 8;    /* i: waiting for end of comment (gzip) */\nvar    HCRC = 9;       /* i: waiting for header crc (gzip) */\nvar    DICTID = 10;    /* i: waiting for dictionary check value */\nvar    DICT = 11;      /* waiting for inflateSetDictionary() call */\nvar        TYPE = 12;      /* i: waiting for type bits, including last-flag bit */\nvar        TYPEDO = 13;    /* i: same, but skip check to exit inflate on new block */\nvar        STORED = 14;    /* i: waiting for stored size (length and complement) */\nvar        COPY_ = 15;     /* i/o: same as COPY below, but only first time in */\nvar        COPY = 16;      /* i/o: waiting for input or output to copy stored block */\nvar        TABLE = 17;     /* i: waiting for dynamic block table lengths */\nvar        LENLENS = 18;   /* i: waiting for code length code lengths */\nvar        CODELENS = 19;  /* i: waiting for length/lit and distance code lengths */\nvar            LEN_ = 20;      /* i: same as LEN below, but only first time in */\nvar            LEN = 21;       /* i: waiting for length/lit/eob code */\nvar            LENEXT = 22;    /* i: waiting for length extra bits */\nvar            DIST = 23;      /* i: waiting for distance code */\nvar            DISTEXT = 24;   /* i: waiting for distance extra bits */\nvar            MATCH = 25;     /* o: waiting for output space to copy string */\nvar            LIT = 26;       /* o: waiting for output space to write literal */\nvar    CHECK = 27;     /* i: waiting for 32-bit check value */\nvar    LENGTH = 28;    /* i: waiting for 32-bit length (gzip) */\nvar    DONE = 29;      /* finished check, done -- remain here until reset */\nvar    BAD = 30;       /* got a data error -- remain here until reset */\nvar    MEM = 31;       /* got an inflate() memory error -- remain here until reset */\nvar    SYNC = 32;      /* looking for synchronization bytes to restart inflate() */\n\n/* ===========================================================================*/\n\n\n\nvar ENOUGH_LENS = 852;\nvar ENOUGH_DISTS = 592;\n//var ENOUGH =  (ENOUGH_LENS+ENOUGH_DISTS);\n\nvar MAX_WBITS = 15;\n/* 32K LZ77 window */\nvar DEF_WBITS = MAX_WBITS;\n\n\nfunction zswap32(q) {\n  return  (((q >>> 24) & 0xff) +\n          ((q >>> 8) & 0xff00) +\n          ((q & 0xff00) << 8) +\n          ((q & 0xff) << 24));\n}\n\n\nfunction InflateState() {\n  this.mode = 0;             /* current inflate mode */\n  this.last = false;          /* true if processing last block */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.havedict = false;      /* true if dictionary provided */\n  this.flags = 0;             /* gzip header method and flags (0 if zlib) */\n  this.dmax = 0;              /* zlib header max distance (INFLATE_STRICT) */\n  this.check = 0;             /* protected copy of check value */\n  this.total = 0;             /* protected copy of output count */\n  // TODO: may be {}\n  this.head = null;           /* where to save gzip header information */\n\n  /* sliding window */\n  this.wbits = 0;             /* log base 2 of requested window size */\n  this.wsize = 0;             /* window size or zero if not using window */\n  this.whave = 0;             /* valid bytes in the window */\n  this.wnext = 0;             /* window write index */\n  this.window = null;         /* allocated sliding window, if needed */\n\n  /* bit accumulator */\n  this.hold = 0;              /* input bit accumulator */\n  this.bits = 0;              /* number of bits in \"in\" */\n\n  /* for string and stored block copying */\n  this.length = 0;            /* literal or length of data to copy */\n  this.offset = 0;            /* distance back to copy string from */\n\n  /* for table and code decoding */\n  this.extra = 0;             /* extra bits needed */\n\n  /* fixed and dynamic code tables */\n  this.lencode = null;          /* starting table for length/literal codes */\n  this.distcode = null;         /* starting table for distance codes */\n  this.lenbits = 0;           /* index bits for lencode */\n  this.distbits = 0;          /* index bits for distcode */\n\n  /* dynamic table building */\n  this.ncode = 0;             /* number of code length code lengths */\n  this.nlen = 0;              /* number of length code lengths */\n  this.ndist = 0;             /* number of distance code lengths */\n  this.have = 0;              /* number of code lengths in lens[] */\n  this.next = null;              /* next available space in codes[] */\n\n  this.lens = new utils.Buf16(320); /* temporary storage for code lengths */\n  this.work = new utils.Buf16(288); /* work area for code table building */\n\n  /*\n   because we don't have pointers in js, we use lencode and distcode directly\n   as buffers so we don't need codes\n  */\n  //this.codes = new utils.Buf32(ENOUGH);       /* space for code tables */\n  this.lendyn = null;              /* dynamic table for length/literal codes (JS specific) */\n  this.distdyn = null;             /* dynamic table for distance codes (JS specific) */\n  this.sane = 0;                   /* if false, allow invalid distance too far */\n  this.back = 0;                   /* bits back of last unprocessed length/lit */\n  this.was = 0;                    /* initial length of match */\n}\n\nfunction inflateResetKeep(strm) {\n  var state;\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  strm.total_in = strm.total_out = state.total = 0;\n  strm.msg = ''; /*Z_NULL*/\n  if (state.wrap) {       /* to support ill-conceived Java test suite */\n    strm.adler = state.wrap & 1;\n  }\n  state.mode = HEAD;\n  state.last = 0;\n  state.havedict = 0;\n  state.dmax = 32768;\n  state.head = null/*Z_NULL*/;\n  state.hold = 0;\n  state.bits = 0;\n  //state.lencode = state.distcode = state.next = state.codes;\n  state.lencode = state.lendyn = new utils.Buf32(ENOUGH_LENS);\n  state.distcode = state.distdyn = new utils.Buf32(ENOUGH_DISTS);\n\n  state.sane = 1;\n  state.back = -1;\n  //Tracev((stderr, \"inflate: reset\\n\"));\n  return Z_OK;\n}\n\nfunction inflateReset(strm) {\n  var state;\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  state.wsize = 0;\n  state.whave = 0;\n  state.wnext = 0;\n  return inflateResetKeep(strm);\n\n}\n\nfunction inflateReset2(strm, windowBits) {\n  var wrap;\n  var state;\n\n  /* get the state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n\n  /* extract wrap request from windowBits parameter */\n  if (windowBits < 0) {\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n  else {\n    wrap = (windowBits >> 4) + 1;\n    if (windowBits < 48) {\n      windowBits &= 15;\n    }\n  }\n\n  /* set number of window bits, free window if different */\n  if (windowBits && (windowBits < 8 || windowBits > 15)) {\n    return Z_STREAM_ERROR;\n  }\n  if (state.window !== null && state.wbits !== windowBits) {\n    state.window = null;\n  }\n\n  /* update state and reset the rest of it */\n  state.wrap = wrap;\n  state.wbits = windowBits;\n  return inflateReset(strm);\n}\n\nfunction inflateInit2(strm, windowBits) {\n  var ret;\n  var state;\n\n  if (!strm) { return Z_STREAM_ERROR; }\n  //strm.msg = Z_NULL;                 /* in case we return an error */\n\n  state = new InflateState();\n\n  //if (state === Z_NULL) return Z_MEM_ERROR;\n  //Tracev((stderr, \"inflate: allocated\\n\"));\n  strm.state = state;\n  state.window = null/*Z_NULL*/;\n  ret = inflateReset2(strm, windowBits);\n  if (ret !== Z_OK) {\n    strm.state = null/*Z_NULL*/;\n  }\n  return ret;\n}\n\nfunction inflateInit(strm) {\n  return inflateInit2(strm, DEF_WBITS);\n}\n\n\n/*\n Return state with length and distance decoding tables and index sizes set to\n fixed code decoding.  Normally this returns fixed tables from inffixed.h.\n If BUILDFIXED is defined, then instead this routine builds the tables the\n first time it's called, and returns those tables the first time and\n thereafter.  This reduces the size of the code by about 2K bytes, in\n exchange for a little execution time.  However, BUILDFIXED should not be\n used for threaded applications, since the rewriting of the tables and virgin\n may not be thread-safe.\n */\nvar virgin = true;\n\nvar lenfix, distfix; // We have no pointers in JS, so keep tables separate\n\nfunction fixedtables(state) {\n  /* build fixed huffman tables if first call (may not be thread safe) */\n  if (virgin) {\n    var sym;\n\n    lenfix = new utils.Buf32(512);\n    distfix = new utils.Buf32(32);\n\n    /* literal/length table */\n    sym = 0;\n    while (sym < 144) { state.lens[sym++] = 8; }\n    while (sym < 256) { state.lens[sym++] = 9; }\n    while (sym < 280) { state.lens[sym++] = 7; }\n    while (sym < 288) { state.lens[sym++] = 8; }\n\n    inflate_table(LENS,  state.lens, 0, 288, lenfix,   0, state.work, { bits: 9 });\n\n    /* distance table */\n    sym = 0;\n    while (sym < 32) { state.lens[sym++] = 5; }\n\n    inflate_table(DISTS, state.lens, 0, 32,   distfix, 0, state.work, { bits: 5 });\n\n    /* do this just once */\n    virgin = false;\n  }\n\n  state.lencode = lenfix;\n  state.lenbits = 9;\n  state.distcode = distfix;\n  state.distbits = 5;\n}\n\n\n/*\n Update the window with the last wsize (normally 32K) bytes written before\n returning.  If window does not exist yet, create it.  This is only called\n when a window is already in use, or when output has been written during this\n inflate call, but the end of the deflate stream has not been reached yet.\n It is also called to create a window for dictionary data when a dictionary\n is loaded.\n\n Providing output buffers larger than 32K to inflate() should provide a speed\n advantage, since only the last 32K of output is copied to the sliding window\n upon return from inflate(), and since all distances after the first 32K of\n output will fall in the output data, making match copies simpler and faster.\n The advantage may be dependent on the size of the processor's data caches.\n */\nfunction updatewindow(strm, src, end, copy) {\n  var dist;\n  var state = strm.state;\n\n  /* if it hasn't been done already, allocate space for the window */\n  if (state.window === null) {\n    state.wsize = 1 << state.wbits;\n    state.wnext = 0;\n    state.whave = 0;\n\n    state.window = new utils.Buf8(state.wsize);\n  }\n\n  /* copy state->wsize or less output bytes into the circular window */\n  if (copy >= state.wsize) {\n    utils.arraySet(state.window, src, end - state.wsize, state.wsize, 0);\n    state.wnext = 0;\n    state.whave = state.wsize;\n  }\n  else {\n    dist = state.wsize - state.wnext;\n    if (dist > copy) {\n      dist = copy;\n    }\n    //zmemcpy(state->window + state->wnext, end - copy, dist);\n    utils.arraySet(state.window, src, end - copy, dist, state.wnext);\n    copy -= dist;\n    if (copy) {\n      //zmemcpy(state->window, end - copy, copy);\n      utils.arraySet(state.window, src, end - copy, copy, 0);\n      state.wnext = copy;\n      state.whave = state.wsize;\n    }\n    else {\n      state.wnext += dist;\n      if (state.wnext === state.wsize) { state.wnext = 0; }\n      if (state.whave < state.wsize) { state.whave += dist; }\n    }\n  }\n  return 0;\n}\n\nfunction inflate(strm, flush) {\n  var state;\n  var input, output;          // input/output buffers\n  var next;                   /* next input INDEX */\n  var put;                    /* next output INDEX */\n  var have, left;             /* available input and output */\n  var hold;                   /* bit buffer */\n  var bits;                   /* bits in bit buffer */\n  var _in, _out;              /* save starting available input and output */\n  var copy;                   /* number of stored or match bytes to copy */\n  var from;                   /* where to copy match bytes from */\n  var from_source;\n  var here = 0;               /* current decoding table entry */\n  var here_bits, here_op, here_val; // paked \"here\" denormalized (JS specific)\n  //var last;                   /* parent table entry */\n  var last_bits, last_op, last_val; // paked \"last\" denormalized (JS specific)\n  var len;                    /* length to copy for repeats, bits to drop */\n  var ret;                    /* return code */\n  var hbuf = new utils.Buf8(4);    /* buffer for gzip header crc calculation */\n  var opts;\n\n  var n; // temporary var for NEED_BITS\n\n  var order = /* permutation of code lengths */\n    [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ];\n\n\n  if (!strm || !strm.state || !strm.output ||\n      (!strm.input && strm.avail_in !== 0)) {\n    return Z_STREAM_ERROR;\n  }\n\n  state = strm.state;\n  if (state.mode === TYPE) { state.mode = TYPEDO; }    /* skip check */\n\n\n  //--- LOAD() ---\n  put = strm.next_out;\n  output = strm.output;\n  left = strm.avail_out;\n  next = strm.next_in;\n  input = strm.input;\n  have = strm.avail_in;\n  hold = state.hold;\n  bits = state.bits;\n  //---\n\n  _in = have;\n  _out = left;\n  ret = Z_OK;\n\n  inf_leave: // goto emulation\n  for (;;) {\n    switch (state.mode) {\n      case HEAD:\n        if (state.wrap === 0) {\n          state.mode = TYPEDO;\n          break;\n        }\n        //=== NEEDBITS(16);\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((state.wrap & 2) && hold === 0x8b1f) {  /* gzip header */\n          state.check = 0/*crc32(0L, Z_NULL, 0)*/;\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          state.mode = FLAGS;\n          break;\n        }\n        state.flags = 0;           /* expect zlib header */\n        if (state.head) {\n          state.head.done = false;\n        }\n        if (!(state.wrap & 1) ||   /* check if zlib header allowed */\n          (((hold & 0xff)/*BITS(8)*/ << 8) + (hold >> 8)) % 31) {\n          strm.msg = 'incorrect header check';\n          state.mode = BAD;\n          break;\n        }\n        if ((hold & 0x0f)/*BITS(4)*/ !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n        len = (hold & 0x0f)/*BITS(4)*/ + 8;\n        if (state.wbits === 0) {\n          state.wbits = len;\n        }\n        else if (len > state.wbits) {\n          strm.msg = 'invalid window size';\n          state.mode = BAD;\n          break;\n        }\n        state.dmax = 1 << len;\n        //Tracev((stderr, \"inflate:   zlib header ok\\n\"));\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = hold & 0x200 ? DICTID : TYPE;\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        break;\n      case FLAGS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.flags = hold;\n        if ((state.flags & 0xff) !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        if (state.flags & 0xe000) {\n          strm.msg = 'unknown header flags set';\n          state.mode = BAD;\n          break;\n        }\n        if (state.head) {\n          state.head.text = ((hold >> 8) & 1);\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = TIME;\n        /* falls through */\n      case TIME:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.time = hold;\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC4(state.check, hold)\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          hbuf[2] = (hold >>> 16) & 0xff;\n          hbuf[3] = (hold >>> 24) & 0xff;\n          state.check = crc32(state.check, hbuf, 4, 0);\n          //===\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = OS;\n        /* falls through */\n      case OS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.xflags = (hold & 0xff);\n          state.head.os = (hold >> 8);\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = EXLEN;\n        /* falls through */\n      case EXLEN:\n        if (state.flags & 0x0400) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length = hold;\n          if (state.head) {\n            state.head.extra_len = hold;\n          }\n          if (state.flags & 0x0200) {\n            //=== CRC2(state.check, hold);\n            hbuf[0] = hold & 0xff;\n            hbuf[1] = (hold >>> 8) & 0xff;\n            state.check = crc32(state.check, hbuf, 2, 0);\n            //===//\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        else if (state.head) {\n          state.head.extra = null/*Z_NULL*/;\n        }\n        state.mode = EXTRA;\n        /* falls through */\n      case EXTRA:\n        if (state.flags & 0x0400) {\n          copy = state.length;\n          if (copy > have) { copy = have; }\n          if (copy) {\n            if (state.head) {\n              len = state.head.extra_len - state.length;\n              if (!state.head.extra) {\n                // Use untyped array for more convenient processing later\n                state.head.extra = new Array(state.head.extra_len);\n              }\n              utils.arraySet(\n                state.head.extra,\n                input,\n                next,\n                // extra field is limited to 65536 bytes\n                // - no need for additional size check\n                copy,\n                /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/\n                len\n              );\n              //zmemcpy(state.head.extra + len, next,\n              //        len + copy > state.head.extra_max ?\n              //        state.head.extra_max - len : copy);\n            }\n            if (state.flags & 0x0200) {\n              state.check = crc32(state.check, input, copy, next);\n            }\n            have -= copy;\n            next += copy;\n            state.length -= copy;\n          }\n          if (state.length) { break inf_leave; }\n        }\n        state.length = 0;\n        state.mode = NAME;\n        /* falls through */\n      case NAME:\n        if (state.flags & 0x0800) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            // TODO: 2 or 1 bytes?\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.name_max*/)) {\n              state.head.name += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n\n          if (state.flags & 0x0200) {\n            state.check = crc32(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.name = null;\n        }\n        state.length = 0;\n        state.mode = COMMENT;\n        /* falls through */\n      case COMMENT:\n        if (state.flags & 0x1000) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.comm_max*/)) {\n              state.head.comment += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n          if (state.flags & 0x0200) {\n            state.check = crc32(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.comment = null;\n        }\n        state.mode = HCRC;\n        /* falls through */\n      case HCRC:\n        if (state.flags & 0x0200) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if (hold !== (state.check & 0xffff)) {\n            strm.msg = 'header crc mismatch';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        if (state.head) {\n          state.head.hcrc = ((state.flags >> 9) & 1);\n          state.head.done = true;\n        }\n        strm.adler = state.check = 0;\n        state.mode = TYPE;\n        break;\n      case DICTID:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        strm.adler = state.check = zswap32(hold);\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = DICT;\n        /* falls through */\n      case DICT:\n        if (state.havedict === 0) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          return Z_NEED_DICT;\n        }\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = TYPE;\n        /* falls through */\n      case TYPE:\n        if (flush === Z_BLOCK || flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case TYPEDO:\n        if (state.last) {\n          //--- BYTEBITS() ---//\n          hold >>>= bits & 7;\n          bits -= bits & 7;\n          //---//\n          state.mode = CHECK;\n          break;\n        }\n        //=== NEEDBITS(3); */\n        while (bits < 3) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.last = (hold & 0x01)/*BITS(1)*/;\n        //--- DROPBITS(1) ---//\n        hold >>>= 1;\n        bits -= 1;\n        //---//\n\n        switch ((hold & 0x03)/*BITS(2)*/) {\n          case 0:                             /* stored block */\n            //Tracev((stderr, \"inflate:     stored block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = STORED;\n            break;\n          case 1:                             /* fixed block */\n            fixedtables(state);\n            //Tracev((stderr, \"inflate:     fixed codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = LEN_;             /* decode codes */\n            if (flush === Z_TREES) {\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n              break inf_leave;\n            }\n            break;\n          case 2:                             /* dynamic block */\n            //Tracev((stderr, \"inflate:     dynamic codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = TABLE;\n            break;\n          case 3:\n            strm.msg = 'invalid block type';\n            state.mode = BAD;\n        }\n        //--- DROPBITS(2) ---//\n        hold >>>= 2;\n        bits -= 2;\n        //---//\n        break;\n      case STORED:\n        //--- BYTEBITS() ---// /* go to byte boundary */\n        hold >>>= bits & 7;\n        bits -= bits & 7;\n        //---//\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((hold & 0xffff) !== ((hold >>> 16) ^ 0xffff)) {\n          strm.msg = 'invalid stored block lengths';\n          state.mode = BAD;\n          break;\n        }\n        state.length = hold & 0xffff;\n        //Tracev((stderr, \"inflate:       stored length %u\\n\",\n        //        state.length));\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = COPY_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case COPY_:\n        state.mode = COPY;\n        /* falls through */\n      case COPY:\n        copy = state.length;\n        if (copy) {\n          if (copy > have) { copy = have; }\n          if (copy > left) { copy = left; }\n          if (copy === 0) { break inf_leave; }\n          //--- zmemcpy(put, next, copy); ---\n          utils.arraySet(output, input, next, copy, put);\n          //---//\n          have -= copy;\n          next += copy;\n          left -= copy;\n          put += copy;\n          state.length -= copy;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       stored end\\n\"));\n        state.mode = TYPE;\n        break;\n      case TABLE:\n        //=== NEEDBITS(14); */\n        while (bits < 14) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.nlen = (hold & 0x1f)/*BITS(5)*/ + 257;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ndist = (hold & 0x1f)/*BITS(5)*/ + 1;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ncode = (hold & 0x0f)/*BITS(4)*/ + 4;\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n//#ifndef PKZIP_BUG_WORKAROUND\n        if (state.nlen > 286 || state.ndist > 30) {\n          strm.msg = 'too many length or distance symbols';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracev((stderr, \"inflate:       table sizes ok\\n\"));\n        state.have = 0;\n        state.mode = LENLENS;\n        /* falls through */\n      case LENLENS:\n        while (state.have < state.ncode) {\n          //=== NEEDBITS(3);\n          while (bits < 3) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.lens[order[state.have++]] = (hold & 0x07);//BITS(3);\n          //--- DROPBITS(3) ---//\n          hold >>>= 3;\n          bits -= 3;\n          //---//\n        }\n        while (state.have < 19) {\n          state.lens[order[state.have++]] = 0;\n        }\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        //state.next = state.codes;\n        //state.lencode = state.next;\n        // Switch to use dynamic table\n        state.lencode = state.lendyn;\n        state.lenbits = 7;\n\n        opts = { bits: state.lenbits };\n        ret = inflate_table(CODES, state.lens, 0, 19, state.lencode, 0, state.work, opts);\n        state.lenbits = opts.bits;\n\n        if (ret) {\n          strm.msg = 'invalid code lengths set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       code lengths ok\\n\"));\n        state.have = 0;\n        state.mode = CODELENS;\n        /* falls through */\n      case CODELENS:\n        while (state.have < state.nlen + state.ndist) {\n          for (;;) {\n            here = state.lencode[hold & ((1 << state.lenbits) - 1)];/*BITS(state.lenbits)*/\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          if (here_val < 16) {\n            //--- DROPBITS(here.bits) ---//\n            hold >>>= here_bits;\n            bits -= here_bits;\n            //---//\n            state.lens[state.have++] = here_val;\n          }\n          else {\n            if (here_val === 16) {\n              //=== NEEDBITS(here.bits + 2);\n              n = here_bits + 2;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              if (state.have === 0) {\n                strm.msg = 'invalid bit length repeat';\n                state.mode = BAD;\n                break;\n              }\n              len = state.lens[state.have - 1];\n              copy = 3 + (hold & 0x03);//BITS(2);\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n            }\n            else if (here_val === 17) {\n              //=== NEEDBITS(here.bits + 3);\n              n = here_bits + 3;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 3 + (hold & 0x07);//BITS(3);\n              //--- DROPBITS(3) ---//\n              hold >>>= 3;\n              bits -= 3;\n              //---//\n            }\n            else {\n              //=== NEEDBITS(here.bits + 7);\n              n = here_bits + 7;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 11 + (hold & 0x7f);//BITS(7);\n              //--- DROPBITS(7) ---//\n              hold >>>= 7;\n              bits -= 7;\n              //---//\n            }\n            if (state.have + copy > state.nlen + state.ndist) {\n              strm.msg = 'invalid bit length repeat';\n              state.mode = BAD;\n              break;\n            }\n            while (copy--) {\n              state.lens[state.have++] = len;\n            }\n          }\n        }\n\n        /* handle error breaks in while */\n        if (state.mode === BAD) { break; }\n\n        /* check for end-of-block code (better have one) */\n        if (state.lens[256] === 0) {\n          strm.msg = 'invalid code -- missing end-of-block';\n          state.mode = BAD;\n          break;\n        }\n\n        /* build code tables -- note: do not change the lenbits or distbits\n           values here (9 and 6) without reading the comments in inftrees.h\n           concerning the ENOUGH constants, which depend on those values */\n        state.lenbits = 9;\n\n        opts = { bits: state.lenbits };\n        ret = inflate_table(LENS, state.lens, 0, state.nlen, state.lencode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.lenbits = opts.bits;\n        // state.lencode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid literal/lengths set';\n          state.mode = BAD;\n          break;\n        }\n\n        state.distbits = 6;\n        //state.distcode.copy(state.codes);\n        // Switch to use dynamic table\n        state.distcode = state.distdyn;\n        opts = { bits: state.distbits };\n        ret = inflate_table(DISTS, state.lens, state.nlen, state.ndist, state.distcode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.distbits = opts.bits;\n        // state.distcode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid distances set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, 'inflate:       codes ok\\n'));\n        state.mode = LEN_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case LEN_:\n        state.mode = LEN;\n        /* falls through */\n      case LEN:\n        if (have >= 6 && left >= 258) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          inflate_fast(strm, _out);\n          //--- LOAD() ---\n          put = strm.next_out;\n          output = strm.output;\n          left = strm.avail_out;\n          next = strm.next_in;\n          input = strm.input;\n          have = strm.avail_in;\n          hold = state.hold;\n          bits = state.bits;\n          //---\n\n          if (state.mode === TYPE) {\n            state.back = -1;\n          }\n          break;\n        }\n        state.back = 0;\n        for (;;) {\n          here = state.lencode[hold & ((1 << state.lenbits) - 1)];  /*BITS(state.lenbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if (here_bits <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if (here_op && (here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.lencode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        state.length = here_val;\n        if (here_op === 0) {\n          //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n          //        \"inflate:         literal '%c'\\n\" :\n          //        \"inflate:         literal 0x%02x\\n\", here.val));\n          state.mode = LIT;\n          break;\n        }\n        if (here_op & 32) {\n          //Tracevv((stderr, \"inflate:         end of block\\n\"));\n          state.back = -1;\n          state.mode = TYPE;\n          break;\n        }\n        if (here_op & 64) {\n          strm.msg = 'invalid literal/length code';\n          state.mode = BAD;\n          break;\n        }\n        state.extra = here_op & 15;\n        state.mode = LENEXT;\n        /* falls through */\n      case LENEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", state.length));\n        state.was = state.length;\n        state.mode = DIST;\n        /* falls through */\n      case DIST:\n        for (;;) {\n          here = state.distcode[hold & ((1 << state.distbits) - 1)];/*BITS(state.distbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if ((here_bits) <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if ((here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.distcode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        if (here_op & 64) {\n          strm.msg = 'invalid distance code';\n          state.mode = BAD;\n          break;\n        }\n        state.offset = here_val;\n        state.extra = (here_op) & 15;\n        state.mode = DISTEXT;\n        /* falls through */\n      case DISTEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.offset += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n//#ifdef INFLATE_STRICT\n        if (state.offset > state.dmax) {\n          strm.msg = 'invalid distance too far back';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracevv((stderr, \"inflate:         distance %u\\n\", state.offset));\n        state.mode = MATCH;\n        /* falls through */\n      case MATCH:\n        if (left === 0) { break inf_leave; }\n        copy = _out - left;\n        if (state.offset > copy) {         /* copy from window */\n          copy = state.offset - copy;\n          if (copy > state.whave) {\n            if (state.sane) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break;\n            }\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//          Trace((stderr, \"inflate.c too far\\n\"));\n//          copy -= state.whave;\n//          if (copy > state.length) { copy = state.length; }\n//          if (copy > left) { copy = left; }\n//          left -= copy;\n//          state.length -= copy;\n//          do {\n//            output[put++] = 0;\n//          } while (--copy);\n//          if (state.length === 0) { state.mode = LEN; }\n//          break;\n//#endif\n          }\n          if (copy > state.wnext) {\n            copy -= state.wnext;\n            from = state.wsize - copy;\n          }\n          else {\n            from = state.wnext - copy;\n          }\n          if (copy > state.length) { copy = state.length; }\n          from_source = state.window;\n        }\n        else {                              /* copy from output */\n          from_source = output;\n          from = put - state.offset;\n          copy = state.length;\n        }\n        if (copy > left) { copy = left; }\n        left -= copy;\n        state.length -= copy;\n        do {\n          output[put++] = from_source[from++];\n        } while (--copy);\n        if (state.length === 0) { state.mode = LEN; }\n        break;\n      case LIT:\n        if (left === 0) { break inf_leave; }\n        output[put++] = state.length;\n        left--;\n        state.mode = LEN;\n        break;\n      case CHECK:\n        if (state.wrap) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            // Use '|' instead of '+' to make sure that result is signed\n            hold |= input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          _out -= left;\n          strm.total_out += _out;\n          state.total += _out;\n          if (_out) {\n            strm.adler = state.check =\n                /*UPDATE(state.check, put - _out, _out);*/\n                (state.flags ? crc32(state.check, output, _out, put - _out) : adler32(state.check, output, _out, put - _out));\n\n          }\n          _out = left;\n          // NB: crc32 stored as signed 32-bit int, zswap32 returns signed too\n          if ((state.flags ? hold : zswap32(hold)) !== state.check) {\n            strm.msg = 'incorrect data check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   check matches trailer\\n\"));\n        }\n        state.mode = LENGTH;\n        /* falls through */\n      case LENGTH:\n        if (state.wrap && state.flags) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if (hold !== (state.total & 0xffffffff)) {\n            strm.msg = 'incorrect length check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   length matches trailer\\n\"));\n        }\n        state.mode = DONE;\n        /* falls through */\n      case DONE:\n        ret = Z_STREAM_END;\n        break inf_leave;\n      case BAD:\n        ret = Z_DATA_ERROR;\n        break inf_leave;\n      case MEM:\n        return Z_MEM_ERROR;\n      case SYNC:\n        /* falls through */\n      default:\n        return Z_STREAM_ERROR;\n    }\n  }\n\n  // inf_leave <- here is real place for \"goto inf_leave\", emulated via \"break inf_leave\"\n\n  /*\n     Return from inflate(), updating the total counts and the check value.\n     If there was no progress during the inflate() call, return a buffer\n     error.  Call updatewindow() to create and/or update the window state.\n     Note: a memory error from inflate() is non-recoverable.\n   */\n\n  //--- RESTORE() ---\n  strm.next_out = put;\n  strm.avail_out = left;\n  strm.next_in = next;\n  strm.avail_in = have;\n  state.hold = hold;\n  state.bits = bits;\n  //---\n\n  if (state.wsize || (_out !== strm.avail_out && state.mode < BAD &&\n                      (state.mode < CHECK || flush !== Z_FINISH))) {\n    if (updatewindow(strm, strm.output, strm.next_out, _out - strm.avail_out)) {\n      state.mode = MEM;\n      return Z_MEM_ERROR;\n    }\n  }\n  _in -= strm.avail_in;\n  _out -= strm.avail_out;\n  strm.total_in += _in;\n  strm.total_out += _out;\n  state.total += _out;\n  if (state.wrap && _out) {\n    strm.adler = state.check = /*UPDATE(state.check, strm.next_out - _out, _out);*/\n      (state.flags ? crc32(state.check, output, _out, strm.next_out - _out) : adler32(state.check, output, _out, strm.next_out - _out));\n  }\n  strm.data_type = state.bits + (state.last ? 64 : 0) +\n                    (state.mode === TYPE ? 128 : 0) +\n                    (state.mode === LEN_ || state.mode === COPY_ ? 256 : 0);\n  if (((_in === 0 && _out === 0) || flush === Z_FINISH) && ret === Z_OK) {\n    ret = Z_BUF_ERROR;\n  }\n  return ret;\n}\n\nfunction inflateEnd(strm) {\n\n  if (!strm || !strm.state /*|| strm->zfree == (free_func)0*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  var state = strm.state;\n  if (state.window) {\n    state.window = null;\n  }\n  strm.state = null;\n  return Z_OK;\n}\n\nfunction inflateGetHeader(strm, head) {\n  var state;\n\n  /* check state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  if ((state.wrap & 2) === 0) { return Z_STREAM_ERROR; }\n\n  /* save header structure */\n  state.head = head;\n  head.done = false;\n  return Z_OK;\n}\n\nfunction inflateSetDictionary(strm, dictionary) {\n  var dictLength = dictionary.length;\n\n  var state;\n  var dictid;\n  var ret;\n\n  /* check state */\n  if (!strm /* == Z_NULL */ || !strm.state /* == Z_NULL */) { return Z_STREAM_ERROR; }\n  state = strm.state;\n\n  if (state.wrap !== 0 && state.mode !== DICT) {\n    return Z_STREAM_ERROR;\n  }\n\n  /* check for correct dictionary identifier */\n  if (state.mode === DICT) {\n    dictid = 1; /* adler32(0, null, 0)*/\n    /* dictid = adler32(dictid, dictionary, dictLength); */\n    dictid = adler32(dictid, dictionary, dictLength, 0);\n    if (dictid !== state.check) {\n      return Z_DATA_ERROR;\n    }\n  }\n  /* copy dictionary to window using updatewindow(), which will amend the\n   existing dictionary if appropriate */\n  ret = updatewindow(strm, dictionary, dictLength, dictLength);\n  if (ret) {\n    state.mode = MEM;\n    return Z_MEM_ERROR;\n  }\n  state.havedict = 1;\n  // Tracev((stderr, \"inflate:   dictionary set\\n\"));\n  return Z_OK;\n}\n\nexports.inflateReset = inflateReset;\nexports.inflateReset2 = inflateReset2;\nexports.inflateResetKeep = inflateResetKeep;\nexports.inflateInit = inflateInit;\nexports.inflateInit2 = inflateInit2;\nexports.inflate = inflate;\nexports.inflateEnd = inflateEnd;\nexports.inflateGetHeader = inflateGetHeader;\nexports.inflateSetDictionary = inflateSetDictionary;\nexports.inflateInfo = 'pako inflate (from Nodeca project)';\n\n/* Not implemented\nexports.inflateCopy = inflateCopy;\nexports.inflateGetDictionary = inflateGetDictionary;\nexports.inflateMark = inflateMark;\nexports.inflatePrime = inflatePrime;\nexports.inflateSync = inflateSync;\nexports.inflateSyncPoint = inflateSyncPoint;\nexports.inflateUndermine = inflateUndermine;\n*/\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// See state defs from inflate.js\nvar BAD = 30;       /* got a data error -- remain here until reset */\nvar TYPE = 12;      /* i: waiting for type bits, including last-flag bit */\n\n/*\n   Decode literal, length, and distance codes and write out the resulting\n   literal and match bytes until either not enough input or output is\n   available, an end-of-block is encountered, or a data error is encountered.\n   When large enough input and output buffers are supplied to inflate(), for\n   example, a 16K input buffer and a 64K output buffer, more than 95% of the\n   inflate execution time is spent in this routine.\n\n   Entry assumptions:\n\n        state.mode === LEN\n        strm.avail_in >= 6\n        strm.avail_out >= 258\n        start >= strm.avail_out\n        state.bits < 8\n\n   On return, state.mode is one of:\n\n        LEN -- ran out of enough output space or enough available input\n        TYPE -- reached end of block code, inflate() to interpret next block\n        BAD -- error in block data\n\n   Notes:\n\n    - The maximum input bits used by a length/distance pair is 15 bits for the\n      length code, 5 bits for the length extra, 15 bits for the distance code,\n      and 13 bits for the distance extra.  This totals 48 bits, or six bytes.\n      Therefore if strm.avail_in >= 6, then there is enough input to avoid\n      checking for available input while decoding.\n\n    - The maximum bytes that a single length/distance pair can output is 258\n      bytes, which is the maximum length that can be coded.  inflate_fast()\n      requires strm.avail_out >= 258 for each loop to avoid checking for\n      output space.\n */\nmodule.exports = function inflate_fast(strm, start) {\n  var state;\n  var _in;                    /* local strm.input */\n  var last;                   /* have enough input while in < last */\n  var _out;                   /* local strm.output */\n  var beg;                    /* inflate()'s initial strm.output */\n  var end;                    /* while out < end, enough space available */\n//#ifdef INFLATE_STRICT\n  var dmax;                   /* maximum distance from zlib header */\n//#endif\n  var wsize;                  /* window size or zero if not using window */\n  var whave;                  /* valid bytes in the window */\n  var wnext;                  /* window write index */\n  // Use `s_window` instead `window`, avoid conflict with instrumentation tools\n  var s_window;               /* allocated sliding window, if wsize != 0 */\n  var hold;                   /* local strm.hold */\n  var bits;                   /* local strm.bits */\n  var lcode;                  /* local strm.lencode */\n  var dcode;                  /* local strm.distcode */\n  var lmask;                  /* mask for first level of length codes */\n  var dmask;                  /* mask for first level of distance codes */\n  var here;                   /* retrieved table entry */\n  var op;                     /* code bits, operation, extra bits, or */\n                              /*  window position, window bytes to copy */\n  var len;                    /* match length, unused bytes */\n  var dist;                   /* match distance */\n  var from;                   /* where to copy match from */\n  var from_source;\n\n\n  var input, output; // JS specific, because we have no pointers\n\n  /* copy state to local variables */\n  state = strm.state;\n  //here = state.here;\n  _in = strm.next_in;\n  input = strm.input;\n  last = _in + (strm.avail_in - 5);\n  _out = strm.next_out;\n  output = strm.output;\n  beg = _out - (start - strm.avail_out);\n  end = _out + (strm.avail_out - 257);\n//#ifdef INFLATE_STRICT\n  dmax = state.dmax;\n//#endif\n  wsize = state.wsize;\n  whave = state.whave;\n  wnext = state.wnext;\n  s_window = state.window;\n  hold = state.hold;\n  bits = state.bits;\n  lcode = state.lencode;\n  dcode = state.distcode;\n  lmask = (1 << state.lenbits) - 1;\n  dmask = (1 << state.distbits) - 1;\n\n\n  /* decode literals and length/distances until end-of-block or not enough\n     input data or output space */\n\n  top:\n  do {\n    if (bits < 15) {\n      hold += input[_in++] << bits;\n      bits += 8;\n      hold += input[_in++] << bits;\n      bits += 8;\n    }\n\n    here = lcode[hold & lmask];\n\n    dolen:\n    for (;;) { // Goto emulation\n      op = here >>> 24/*here.bits*/;\n      hold >>>= op;\n      bits -= op;\n      op = (here >>> 16) & 0xff/*here.op*/;\n      if (op === 0) {                          /* literal */\n        //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n        //        \"inflate:         literal '%c'\\n\" :\n        //        \"inflate:         literal 0x%02x\\n\", here.val));\n        output[_out++] = here & 0xffff/*here.val*/;\n      }\n      else if (op & 16) {                     /* length base */\n        len = here & 0xffff/*here.val*/;\n        op &= 15;                           /* number of extra bits */\n        if (op) {\n          if (bits < op) {\n            hold += input[_in++] << bits;\n            bits += 8;\n          }\n          len += hold & ((1 << op) - 1);\n          hold >>>= op;\n          bits -= op;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", len));\n        if (bits < 15) {\n          hold += input[_in++] << bits;\n          bits += 8;\n          hold += input[_in++] << bits;\n          bits += 8;\n        }\n        here = dcode[hold & dmask];\n\n        dodist:\n        for (;;) { // goto emulation\n          op = here >>> 24/*here.bits*/;\n          hold >>>= op;\n          bits -= op;\n          op = (here >>> 16) & 0xff/*here.op*/;\n\n          if (op & 16) {                      /* distance base */\n            dist = here & 0xffff/*here.val*/;\n            op &= 15;                       /* number of extra bits */\n            if (bits < op) {\n              hold += input[_in++] << bits;\n              bits += 8;\n              if (bits < op) {\n                hold += input[_in++] << bits;\n                bits += 8;\n              }\n            }\n            dist += hold & ((1 << op) - 1);\n//#ifdef INFLATE_STRICT\n            if (dist > dmax) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break top;\n            }\n//#endif\n            hold >>>= op;\n            bits -= op;\n            //Tracevv((stderr, \"inflate:         distance %u\\n\", dist));\n            op = _out - beg;                /* max distance in output */\n            if (dist > op) {                /* see if copy from window */\n              op = dist - op;               /* distance back in window */\n              if (op > whave) {\n                if (state.sane) {\n                  strm.msg = 'invalid distance too far back';\n                  state.mode = BAD;\n                  break top;\n                }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//                if (len <= op - whave) {\n//                  do {\n//                    output[_out++] = 0;\n//                  } while (--len);\n//                  continue top;\n//                }\n//                len -= op - whave;\n//                do {\n//                  output[_out++] = 0;\n//                } while (--op > whave);\n//                if (op === 0) {\n//                  from = _out - dist;\n//                  do {\n//                    output[_out++] = output[from++];\n//                  } while (--len);\n//                  continue top;\n//                }\n//#endif\n              }\n              from = 0; // window index\n              from_source = s_window;\n              if (wnext === 0) {           /* very common case */\n                from += wsize - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              else if (wnext < op) {      /* wrap around window */\n                from += wsize + wnext - op;\n                op -= wnext;\n                if (op < len) {         /* some from end of window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = 0;\n                  if (wnext < len) {  /* some from start of window */\n                    op = wnext;\n                    len -= op;\n                    do {\n                      output[_out++] = s_window[from++];\n                    } while (--op);\n                    from = _out - dist;      /* rest from output */\n                    from_source = output;\n                  }\n                }\n              }\n              else {                      /* contiguous in window */\n                from += wnext - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              while (len > 2) {\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                len -= 3;\n              }\n              if (len) {\n                output[_out++] = from_source[from++];\n                if (len > 1) {\n                  output[_out++] = from_source[from++];\n                }\n              }\n            }\n            else {\n              from = _out - dist;          /* copy direct from output */\n              do {                        /* minimum length is three */\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                len -= 3;\n              } while (len > 2);\n              if (len) {\n                output[_out++] = output[from++];\n                if (len > 1) {\n                  output[_out++] = output[from++];\n                }\n              }\n            }\n          }\n          else if ((op & 64) === 0) {          /* 2nd level distance code */\n            here = dcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n            continue dodist;\n          }\n          else {\n            strm.msg = 'invalid distance code';\n            state.mode = BAD;\n            break top;\n          }\n\n          break; // need to emulate goto via \"continue\"\n        }\n      }\n      else if ((op & 64) === 0) {              /* 2nd level length code */\n        here = lcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n        continue dolen;\n      }\n      else if (op & 32) {                     /* end-of-block */\n        //Tracevv((stderr, \"inflate:         end of block\\n\"));\n        state.mode = TYPE;\n        break top;\n      }\n      else {\n        strm.msg = 'invalid literal/length code';\n        state.mode = BAD;\n        break top;\n      }\n\n      break; // need to emulate goto via \"continue\"\n    }\n  } while (_in < last && _out < end);\n\n  /* return unused bytes (on entry, bits < 8, so in won't go too far back) */\n  len = bits >> 3;\n  _in -= len;\n  bits -= len << 3;\n  hold &= (1 << bits) - 1;\n\n  /* update state and return */\n  strm.next_in = _in;\n  strm.next_out = _out;\n  strm.avail_in = (_in < last ? 5 + (last - _in) : 5 - (_in - last));\n  strm.avail_out = (_out < end ? 257 + (end - _out) : 257 - (_out - end));\n  state.hold = hold;\n  state.bits = bits;\n  return;\n};\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils = require('../utils/common');\n\nvar MAXBITS = 15;\nvar ENOUGH_LENS = 852;\nvar ENOUGH_DISTS = 592;\n//var ENOUGH = (ENOUGH_LENS+ENOUGH_DISTS);\n\nvar CODES = 0;\nvar LENS = 1;\nvar DISTS = 2;\n\nvar lbase = [ /* Length codes 257..285 base */\n  3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,\n  35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0\n];\n\nvar lext = [ /* Length codes 257..285 extra */\n  16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18,\n  19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78\n];\n\nvar dbase = [ /* Distance codes 0..29 base */\n  1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,\n  257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,\n  8193, 12289, 16385, 24577, 0, 0\n];\n\nvar dext = [ /* Distance codes 0..29 extra */\n  16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22,\n  23, 23, 24, 24, 25, 25, 26, 26, 27, 27,\n  28, 28, 29, 29, 64, 64\n];\n\nmodule.exports = function inflate_table(type, lens, lens_index, codes, table, table_index, work, opts)\n{\n  var bits = opts.bits;\n      //here = opts.here; /* table entry for duplication */\n\n  var len = 0;               /* a code's length in bits */\n  var sym = 0;               /* index of code symbols */\n  var min = 0, max = 0;          /* minimum and maximum code lengths */\n  var root = 0;              /* number of index bits for root table */\n  var curr = 0;              /* number of index bits for current table */\n  var drop = 0;              /* code bits to drop for sub-table */\n  var left = 0;                   /* number of prefix codes available */\n  var used = 0;              /* code entries in table used */\n  var huff = 0;              /* Huffman code */\n  var incr;              /* for incrementing code, index */\n  var fill;              /* index for replicating entries */\n  var low;               /* low bits for current root entry */\n  var mask;              /* mask for low root bits */\n  var next;             /* next available space in table */\n  var base = null;     /* base value table to use */\n  var base_index = 0;\n//  var shoextra;    /* extra bits table to use */\n  var end;                    /* use base and extra for symbol > end */\n  var count = new utils.Buf16(MAXBITS + 1); //[MAXBITS+1];    /* number of codes of each length */\n  var offs = new utils.Buf16(MAXBITS + 1); //[MAXBITS+1];     /* offsets in table for each length */\n  var extra = null;\n  var extra_index = 0;\n\n  var here_bits, here_op, here_val;\n\n  /*\n   Process a set of code lengths to create a canonical Huffman code.  The\n   code lengths are lens[0..codes-1].  Each length corresponds to the\n   symbols 0..codes-1.  The Huffman code is generated by first sorting the\n   symbols by length from short to long, and retaining the symbol order\n   for codes with equal lengths.  Then the code starts with all zero bits\n   for the first code of the shortest length, and the codes are integer\n   increments for the same length, and zeros are appended as the length\n   increases.  For the deflate format, these bits are stored backwards\n   from their more natural integer increment ordering, and so when the\n   decoding tables are built in the large loop below, the integer codes\n   are incremented backwards.\n\n   This routine assumes, but does not check, that all of the entries in\n   lens[] are in the range 0..MAXBITS.  The caller must assure this.\n   1..MAXBITS is interpreted as that code length.  zero means that that\n   symbol does not occur in this code.\n\n   The codes are sorted by computing a count of codes for each length,\n   creating from that a table of starting indices for each length in the\n   sorted table, and then entering the symbols in order in the sorted\n   table.  The sorted table is work[], with that space being provided by\n   the caller.\n\n   The length counts are used for other purposes as well, i.e. finding\n   the minimum and maximum length codes, determining if there are any\n   codes at all, checking for a valid set of lengths, and looking ahead\n   at length counts to determine sub-table sizes when building the\n   decoding tables.\n   */\n\n  /* accumulate lengths for codes (assumes lens[] all in 0..MAXBITS) */\n  for (len = 0; len <= MAXBITS; len++) {\n    count[len] = 0;\n  }\n  for (sym = 0; sym < codes; sym++) {\n    count[lens[lens_index + sym]]++;\n  }\n\n  /* bound code lengths, force root to be within code lengths */\n  root = bits;\n  for (max = MAXBITS; max >= 1; max--) {\n    if (count[max] !== 0) { break; }\n  }\n  if (root > max) {\n    root = max;\n  }\n  if (max === 0) {                     /* no symbols to code at all */\n    //table.op[opts.table_index] = 64;  //here.op = (var char)64;    /* invalid code marker */\n    //table.bits[opts.table_index] = 1;   //here.bits = (var char)1;\n    //table.val[opts.table_index++] = 0;   //here.val = (var short)0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n\n    //table.op[opts.table_index] = 64;\n    //table.bits[opts.table_index] = 1;\n    //table.val[opts.table_index++] = 0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n    opts.bits = 1;\n    return 0;     /* no symbols, but wait for decoding to report error */\n  }\n  for (min = 1; min < max; min++) {\n    if (count[min] !== 0) { break; }\n  }\n  if (root < min) {\n    root = min;\n  }\n\n  /* check for an over-subscribed or incomplete set of lengths */\n  left = 1;\n  for (len = 1; len <= MAXBITS; len++) {\n    left <<= 1;\n    left -= count[len];\n    if (left < 0) {\n      return -1;\n    }        /* over-subscribed */\n  }\n  if (left > 0 && (type === CODES || max !== 1)) {\n    return -1;                      /* incomplete set */\n  }\n\n  /* generate offsets into symbol table for each length for sorting */\n  offs[1] = 0;\n  for (len = 1; len < MAXBITS; len++) {\n    offs[len + 1] = offs[len] + count[len];\n  }\n\n  /* sort symbols by length, by symbol order within each length */\n  for (sym = 0; sym < codes; sym++) {\n    if (lens[lens_index + sym] !== 0) {\n      work[offs[lens[lens_index + sym]]++] = sym;\n    }\n  }\n\n  /*\n   Create and fill in decoding tables.  In this loop, the table being\n   filled is at next and has curr index bits.  The code being used is huff\n   with length len.  That code is converted to an index by dropping drop\n   bits off of the bottom.  For codes where len is less than drop + curr,\n   those top drop + curr - len bits are incremented through all values to\n   fill the table with replicated entries.\n\n   root is the number of index bits for the root table.  When len exceeds\n   root, sub-tables are created pointed to by the root entry with an index\n   of the low root bits of huff.  This is saved in low to check for when a\n   new sub-table should be started.  drop is zero when the root table is\n   being filled, and drop is root when sub-tables are being filled.\n\n   When a new sub-table is needed, it is necessary to look ahead in the\n   code lengths to determine what size sub-table is needed.  The length\n   counts are used for this, and so count[] is decremented as codes are\n   entered in the tables.\n\n   used keeps track of how many table entries have been allocated from the\n   provided *table space.  It is checked for LENS and DIST tables against\n   the constants ENOUGH_LENS and ENOUGH_DISTS to guard against changes in\n   the initial root table size constants.  See the comments in inftrees.h\n   for more information.\n\n   sym increments through all symbols, and the loop terminates when\n   all codes of length max, i.e. all codes, have been processed.  This\n   routine permits incomplete codes, so another loop after this one fills\n   in the rest of the decoding tables with invalid code markers.\n   */\n\n  /* set up for code type */\n  // poor man optimization - use if-else instead of switch,\n  // to avoid deopts in old v8\n  if (type === CODES) {\n    base = extra = work;    /* dummy value--not used */\n    end = 19;\n\n  } else if (type === LENS) {\n    base = lbase;\n    base_index -= 257;\n    extra = lext;\n    extra_index -= 257;\n    end = 256;\n\n  } else {                    /* DISTS */\n    base = dbase;\n    extra = dext;\n    end = -1;\n  }\n\n  /* initialize opts for loop */\n  huff = 0;                   /* starting code */\n  sym = 0;                    /* starting code symbol */\n  len = min;                  /* starting code length */\n  next = table_index;              /* current table to fill in */\n  curr = root;                /* current table index bits */\n  drop = 0;                   /* current bits to drop from code for index */\n  low = -1;                   /* trigger new sub-table when len > root */\n  used = 1 << root;          /* use root table entries */\n  mask = used - 1;            /* mask for comparing low */\n\n  /* check available table space */\n  if ((type === LENS && used > ENOUGH_LENS) ||\n    (type === DISTS && used > ENOUGH_DISTS)) {\n    return 1;\n  }\n\n  /* process all codes and make table entries */\n  for (;;) {\n    /* create table entry */\n    here_bits = len - drop;\n    if (work[sym] < end) {\n      here_op = 0;\n      here_val = work[sym];\n    }\n    else if (work[sym] > end) {\n      here_op = extra[extra_index + work[sym]];\n      here_val = base[base_index + work[sym]];\n    }\n    else {\n      here_op = 32 + 64;         /* end of block */\n      here_val = 0;\n    }\n\n    /* replicate for those indices with low len bits equal to huff */\n    incr = 1 << (len - drop);\n    fill = 1 << curr;\n    min = fill;                 /* save offset to next table */\n    do {\n      fill -= incr;\n      table[next + (huff >> drop) + fill] = (here_bits << 24) | (here_op << 16) | here_val |0;\n    } while (fill !== 0);\n\n    /* backwards increment the len-bit code huff */\n    incr = 1 << (len - 1);\n    while (huff & incr) {\n      incr >>= 1;\n    }\n    if (incr !== 0) {\n      huff &= incr - 1;\n      huff += incr;\n    } else {\n      huff = 0;\n    }\n\n    /* go to next symbol, update count, len */\n    sym++;\n    if (--count[len] === 0) {\n      if (len === max) { break; }\n      len = lens[lens_index + work[sym]];\n    }\n\n    /* create new sub-table if needed */\n    if (len > root && (huff & mask) !== low) {\n      /* if first time, transition to sub-tables */\n      if (drop === 0) {\n        drop = root;\n      }\n\n      /* increment past last table */\n      next += min;            /* here min is 1 << curr */\n\n      /* determine length of next table */\n      curr = len - drop;\n      left = 1 << curr;\n      while (curr + drop < max) {\n        left -= count[curr + drop];\n        if (left <= 0) { break; }\n        curr++;\n        left <<= 1;\n      }\n\n      /* check for enough space */\n      used += 1 << curr;\n      if ((type === LENS && used > ENOUGH_LENS) ||\n        (type === DISTS && used > ENOUGH_DISTS)) {\n        return 1;\n      }\n\n      /* point entry in root table to sub-table */\n      low = huff & mask;\n      /*table.op[low] = curr;\n      table.bits[low] = root;\n      table.val[low] = next - opts.table_index;*/\n      table[low] = (root << 24) | (curr << 16) | (next - table_index) |0;\n    }\n  }\n\n  /* fill in remaining table entry if code is incomplete (guaranteed to have\n   at most one remaining entry, since if the code is incomplete, the\n   maximum code length that was allowed to get this far is one bit) */\n  if (huff !== 0) {\n    //table.op[next + huff] = 64;            /* invalid code marker */\n    //table.bits[next + huff] = len - drop;\n    //table.val[next + huff] = 0;\n    table[next + huff] = ((len - drop) << 24) | (64 << 16) |0;\n  }\n\n  /* set return parameters */\n  //opts.table_index += used;\n  opts.bits = root;\n  return 0;\n};\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nmodule.exports = {\n\n  /* Allowed flush values; see deflate() and inflate() below for details */\n  Z_NO_FLUSH:         0,\n  Z_PARTIAL_FLUSH:    1,\n  Z_SYNC_FLUSH:       2,\n  Z_FULL_FLUSH:       3,\n  Z_FINISH:           4,\n  Z_BLOCK:            5,\n  Z_TREES:            6,\n\n  /* Return codes for the compression/decompression functions. Negative values\n  * are errors, positive values are used for special but normal events.\n  */\n  Z_OK:               0,\n  Z_STREAM_END:       1,\n  Z_NEED_DICT:        2,\n  Z_ERRNO:           -1,\n  Z_STREAM_ERROR:    -2,\n  Z_DATA_ERROR:      -3,\n  //Z_MEM_ERROR:     -4,\n  Z_BUF_ERROR:       -5,\n  //Z_VERSION_ERROR: -6,\n\n  /* compression levels */\n  Z_NO_COMPRESSION:         0,\n  Z_BEST_SPEED:             1,\n  Z_BEST_COMPRESSION:       9,\n  Z_DEFAULT_COMPRESSION:   -1,\n\n\n  Z_FILTERED:               1,\n  Z_HUFFMAN_ONLY:           2,\n  Z_RLE:                    3,\n  Z_FIXED:                  4,\n  Z_DEFAULT_STRATEGY:       0,\n\n  /* Possible values of the data_type field (though see inflate()) */\n  Z_BINARY:                 0,\n  Z_TEXT:                   1,\n  //Z_ASCII:                1, // = Z_TEXT (deprecated)\n  Z_UNKNOWN:                2,\n\n  /* The deflate compression method */\n  Z_DEFLATED:               8\n  //Z_NULL:                 null // Use -1 or null inline, depending on var type\n};\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction GZheader() {\n  /* true if compressed data believed to be text */\n  this.text       = 0;\n  /* modification time */\n  this.time       = 0;\n  /* extra flags (not used when writing a gzip file) */\n  this.xflags     = 0;\n  /* operating system */\n  this.os         = 0;\n  /* pointer to extra field or Z_NULL if none */\n  this.extra      = null;\n  /* extra field length (valid if extra != Z_NULL) */\n  this.extra_len  = 0; // Actually, we don't need it in JS,\n                       // but leave for few code modifications\n\n  //\n  // Setup limits is not necessary because in js we should not preallocate memory\n  // for inflate use constant limit in 65536 bytes\n  //\n\n  /* space at extra (only when reading header) */\n  // this.extra_max  = 0;\n  /* pointer to zero-terminated file name or Z_NULL */\n  this.name       = '';\n  /* space at name (only when reading header) */\n  // this.name_max   = 0;\n  /* pointer to zero-terminated comment or Z_NULL */\n  this.comment    = '';\n  /* space at comment (only when reading header) */\n  // this.comm_max   = 0;\n  /* true if there was or will be a header crc */\n  this.hcrc       = 0;\n  /* true when done reading gzip header (not used when writing a gzip file) */\n  this.done       = false;\n}\n\nmodule.exports = GZheader;\n","!function(e,r){\"function\"==typeof define&&define.amd?define([],r):\"object\"==typeof exports?module.exports=r():e.untar=r()}(this,function(){\"use strict\";function r(t){if(\"function\"!=typeof Promise)throw new Error(\"Promise implementation not available in this environment.\");var a=[],n=[];function i(e){for(var r=0,t=a.length;r<t;++r)a[r](e);n.push(e)}var o=new Promise(function(e,r){t(e,r,i)});o.progress=function(e){if(\"function\"!=typeof e)throw new Error(\"cb is not a function.\");for(var r=0,t=n.length;r<t;++r)e(n[r]);return a.push(e),o};var s=o.then;return o.then=function(e,r,t){return s.call(o,e,r),void 0!==t&&o.progress(t),o},o}var t=(window||this).URL.createObjectURL(new Blob(['\"use strict\";function UntarWorker(){}var worker;function decodeUTF8(e){for(var r=\"\",t=0;t<e.length;){var a=e[t++];if(127<a){if(191<a&&a<224){if(t>=e.length)throw\"UTF-8 decode: incomplete 2-byte sequence\";a=(31&a)<<6|63&e[t]}else if(223<a&&a<240){if(t+1>=e.length)throw\"UTF-8 decode: incomplete 3-byte sequence\";a=(15&a)<<12|(63&e[t])<<6|63&e[++t]}else{if(!(239<a&&a<248))throw\"UTF-8 decode: unknown multibyte start 0x\"+a.toString(16)+\" at index \"+(t-1);if(t+2>=e.length)throw\"UTF-8 decode: incomplete 4-byte sequence\";a=(7&a)<<18|(63&e[t])<<12|(63&e[++t])<<6|63&e[++t]}++t}if(a<=65535)r+=String.fromCharCode(a);else{if(!(a<=1114111))throw\"UTF-8 decode: code point 0x\"+a.toString(16)+\" exceeds UTF-16 reach\";a-=65536,r+=String.fromCharCode(a>>10|55296),r+=String.fromCharCode(1023&a|56320)}}return r}function PaxHeader(e){this._fields=e}function TarFile(){}function UntarStream(e){this._bufferView=new DataView(e),this._position=0}function UntarFileStream(e){this._stream=new UntarStream(e),this._globalPaxHeader=null}UntarWorker.prototype={onmessage:function(e){try{if(\"extract\"!==e.data.type)throw new Error(\"Unknown message type: \"+e.data.type);this.untarBuffer(e.data.buffer)}catch(e){this.postError(e)}},postError:function(e){this.postMessage({type:\"error\",data:{message:e.message}})},postLog:function(e,r){this.postMessage({type:\"log\",data:{level:e,msg:r}})},untarBuffer:function(e){try{for(var r=new UntarFileStream(e);r.hasNext();){var t=r.next();this.postMessage({type:\"extract\",data:t},[t.buffer])}this.postMessage({type:\"complete\"})}catch(e){this.postError(e)}},postMessage:function(e,r){self.postMessage(e,r)}},\"undefined\"!=typeof self&&(worker=new UntarWorker,self.onmessage=function(e){worker.onmessage(e)}),PaxHeader.parse=function(e){for(var r=new Uint8Array(e),t=[];0<r.length;){var a=parseInt(decodeUTF8(r.subarray(0,r.indexOf(32)))),n=decodeUTF8(r.subarray(0,a)).match(/^\\\\d+ ([^=]+)=(.*)\\\\n$/);if(null===n)throw new Error(\"Invalid PAX header data format.\");var i=n[1],s=n[2];0===s.length?s=null:null!==s.match(/^\\\\d+$/)&&(s=parseInt(s));var o={name:i,value:s};t.push(o),r=r.subarray(a)}return new PaxHeader(t)},PaxHeader.prototype={applyHeader:function(a){this._fields.forEach(function(e){var r=e.name,t=e.value;\"path\"===r?(r=\"name\",void 0!==a.prefix&&delete a.prefix):\"linkpath\"===r&&(r=\"linkname\"),null===t?delete a[r]:a[r]=t})}},UntarStream.prototype={readString:function(e){for(var r=+e,t=[],a=0;a<e;++a){var n=this._bufferView.getUint8(this.position()+ +a,!0);if(0===n)break;t.push(n)}return this.seek(r),String.fromCharCode.apply(null,t)},readBuffer:function(e){var r,t,a;return\"function\"==typeof ArrayBuffer.prototype.slice?r=this._bufferView.buffer.slice(this.position(),this.position()+e):(r=new ArrayBuffer(e),t=new Uint8Array(r),a=new Uint8Array(this._bufferView.buffer,this.position(),e),t.set(a)),this.seek(e),r},seek:function(e){this._position+=e},peekUint32:function(){return this._bufferView.getUint32(this.position(),!0)},position:function(e){if(void 0===e)return this._position;this._position=e},size:function(){return this._bufferView.byteLength}},UntarFileStream.prototype={hasNext:function(){return this._stream.position()+4<this._stream.size()&&0!==this._stream.peekUint32()},next:function(){return this._readNextFile()},_readNextFile:function(){var e=this._stream,r=new TarFile,t=!1,a=null,n=e.position()+512;switch(r.name=e.readString(100),r.mode=e.readString(8),r.uid=parseInt(e.readString(8)),r.gid=parseInt(e.readString(8)),r.size=parseInt(e.readString(12),8),r.mtime=parseInt(e.readString(12),8),r.checksum=parseInt(e.readString(8)),r.type=e.readString(1),r.linkname=e.readString(100),r.ustarFormat=e.readString(6),-1<r.ustarFormat.indexOf(\"ustar\")&&(r.version=e.readString(2),r.uname=e.readString(32),r.gname=e.readString(32),r.devmajor=parseInt(e.readString(8)),r.devminor=parseInt(e.readString(8)),r.namePrefix=e.readString(155),0<r.namePrefix.length&&(r.name=r.namePrefix+\"/\"+r.name)),e.position(n),r.type){case\"0\":case\"\":r.buffer=e.readBuffer(r.size);break;case\"1\":case\"2\":case\"3\":case\"4\":case\"5\":case\"6\":case\"7\":break;case\"g\":t=!0,this._globalPaxHeader=PaxHeader.parse(e.readBuffer(r.size));break;case\"x\":t=!0,a=PaxHeader.parse(e.readBuffer(r.size))}void 0===r.buffer&&(r.buffer=new ArrayBuffer(0));var i=n+r.size;return r.size%512!=0&&(i+=512-r.size%512),e.position(i),t&&(r=this._readNextFile()),null!==this._globalPaxHeader&&this._globalPaxHeader.applyHeader(r),null!==a&&a.applyHeader(r),r}};'])),a=window||this,e=a.URL||a.webkitURL;var f={blob:{get:function(){return this._blob||(this._blob=new Blob([this.buffer]))}},getBlobUrl:{value:function(){return this._blobUrl||(this._blobUrl=e.createObjectURL(this.blob))}},readAsString:{value:function(){for(var e=this.buffer,r=e.byteLength,t=new DataView(e),a=\"\",n=0;n<r;++n){var i=t.getUint8(+n,!0);a+=String.fromCharCode(i)}return this._string=a}},readAsJSON:{value:function(){return JSON.parse(this.readAsString())}}};return function(e){if(!(e instanceof ArrayBuffer))throw new TypeError(\"arrayBuffer is not an instance of ArrayBuffer.\");if(!a.Worker)throw new Error(\"Worker implementation is not available in this environment.\");return new r(function(a,n,i){var o=new Worker(t),s=[];o.onerror=function(e){n(e)},o.onmessage=function(e){switch((e=e.data).type){case\"log\":console[e.data.level](\"Worker: \"+e.data.msg);break;case\"extract\":var r=(t=e.data,Object.defineProperties(t,f),t);s.push(r),i(r);break;case\"complete\":o.terminate(),a(s);break;case\"error\":o.terminate(),n(new Error(e.data.message));break;default:o.terminate(),n(new Error(\"Unknown message from worker: \"+e.type))}var t},o.postMessage({type:\"extract\",buffer:e},[e])})}});","module.exports = function _atob(str) {\n  return atob(str)\n}\n","/**\r\n * @module  string-to-arraybuffer\r\n */\r\n\r\n'use strict'\r\n\r\nvar atob = require('atob-lite')\r\nvar isBase64 = require('is-base64')\r\n\r\nmodule.exports = function stringToArrayBuffer (arg) {\r\n\tif (typeof arg !== 'string') throw Error('Argument should be a string')\r\n\r\n\t//valid data uri\r\n\tif (/^data\\:/i.test(arg)) return decode(arg)\r\n\r\n\t//base64\r\n\tif (isBase64(arg)) arg = atob(arg)\r\n\r\n\treturn str2ab(arg)\r\n}\r\n\r\nfunction str2ab (str) {\r\n\tvar array = new Uint8Array(str.length);\r\n\tfor(var i = 0; i < str.length; i++) {\r\n\t\tarray[i] = str.charCodeAt(i);\r\n\t}\r\n\treturn array.buffer\r\n}\r\n\r\nfunction decode(uri) {\r\n\t// strip newlines\r\n\turi = uri.replace(/\\r?\\n/g, '');\r\n\r\n\t// split the URI up into the \"metadata\" and the \"data\" portions\r\n\tvar firstComma = uri.indexOf(',');\r\n\tif (-1 === firstComma || firstComma <= 4) throw new TypeError('malformed data-URI');\r\n\r\n\t// remove the \"data:\" scheme and parse the metadata\r\n\tvar meta = uri.substring(5, firstComma).split(';');\r\n\r\n\tvar base64 = false;\r\n\tvar charset = 'US-ASCII';\r\n\tfor (var i = 0; i < meta.length; i++) {\r\n\t\tif ('base64' == meta[i]) {\r\n\t\t\tbase64 = true;\r\n\t\t} else if (0 == meta[i].indexOf('charset=')) {\r\n\t\t\tcharset = meta[i].substring(8);\r\n\t\t}\r\n\t}\r\n\r\n\t// get the encoded data portion and decode URI-encoded chars\r\n\tvar data = unescape(uri.substring(firstComma + 1));\r\n\r\n\tif (base64) data = atob(data)\r\n\r\n\tvar abuf = str2ab(data)\r\n\r\n\tabuf.type = meta[0] || 'text/plain'\r\n\tabuf.charset = charset\r\n\r\n\treturn abuf\r\n}\r\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst smart_1 = require(\"../smart\");\n\nconst Client_1 = require(\"../Client\");\n\nconst BrowserStorage_1 = require(\"../storage/BrowserStorage\");\n/**\n * Browser Adapter\n */\n\n\nclass BrowserAdapter {\n  /**\n   * @param options Environment-specific options\n   */\n  constructor(options = {}) {\n    /**\n     * Stores the URL instance associated with this adapter\n     */\n    this._url = null;\n    /**\n     * Holds the Storage instance associated with this instance\n     */\n\n    this._storage = null;\n    this.options = Object.assign({\n      // Replaces the browser's current URL\n      // using window.history.replaceState API or by reloading.\n      replaceBrowserHistory: true,\n      // When set to true, this variable will fully utilize\n      // HTML5 sessionStorage API.\n      // This variable can be overridden to false by setting\n      // FHIR.oauth2.settings.fullSessionStorageSupport = false.\n      // When set to false, the sessionStorage will be keyed\n      // by a state variable. This is to allow the embedded IE browser\n      // instances instantiated on a single thread to continue to\n      // function without having sessionStorage data shared\n      // across the embedded IE instances.\n      fullSessionStorageSupport: true,\n      // Do we want to send cookies while making a request to the token\n      // endpoint in order to obtain new access token using existing\n      // refresh token. In rare cases the auth server might require the\n      // client to send cookies along with those requests. In this case\n      // developers will have to change this before initializing the app\n      // like so:\n      // `FHIR.oauth2.settings.refreshTokenWithCredentials = \"include\";`\n      // or\n      // `FHIR.oauth2.settings.refreshTokenWithCredentials = \"same-origin\";`\n      // Can be one of:\n      // \"include\"     - always send cookies\n      // \"same-origin\" - only send cookies if we are on the same domain (default)\n      // \"omit\"        - do not send cookies\n      refreshTokenWithCredentials: \"same-origin\"\n    }, options);\n  }\n  /**\n   * Given a relative path, returns an absolute url using the instance base URL\n   */\n\n\n  relative(path) {\n    return new URL(path, this.getUrl().href).href;\n  }\n  /**\n   * In browsers we need to be able to (dynamically) check if fhir.js is\n   * included in the page. If it is, it should have created a \"fhir\" variable\n   * in the global scope.\n   */\n\n\n  get fhir() {\n    // @ts-ignore\n    return typeof fhir === \"function\" ? fhir : null;\n  }\n  /**\n   * Given the current environment, this method must return the current url\n   * as URL instance\n   */\n\n\n  getUrl() {\n    if (!this._url) {\n      this._url = new URL(location + \"\");\n    }\n\n    return this._url;\n  }\n  /**\n   * Given the current environment, this method must redirect to the given\n   * path\n   */\n\n\n  redirect(to) {\n    location.href = to;\n  }\n  /**\n   * Returns a BrowserStorage object which is just a wrapper around\n   * sessionStorage\n   */\n\n\n  getStorage() {\n    if (!this._storage) {\n      this._storage = new BrowserStorage_1.default();\n    }\n\n    return this._storage;\n  }\n  /**\n   * Returns a reference to the AbortController constructor. In browsers,\n   * AbortController will always be available as global (native or polyfilled)\n   */\n\n\n  getAbortController() {\n    return AbortController;\n  }\n  /**\n   * ASCII string to Base64\n   */\n\n\n  atob(str) {\n    return window.atob(str);\n  }\n  /**\n   * Base64 to ASCII string\n   */\n\n\n  btoa(str) {\n    return window.btoa(str);\n  }\n  /**\n   * Creates and returns adapter-aware SMART api. Not that while the shape of\n   * the returned object is well known, the arguments to this function are not.\n   * Those who override this method are free to require any environment-specific\n   * arguments. For example in node we will need a request, a response and\n   * optionally a storage or storage factory function.\n   */\n\n\n  getSmartApi() {\n    return {\n      ready: (...args) => smart_1.ready(this, ...args),\n      authorize: options => smart_1.authorize(this, options),\n      init: options => smart_1.init(this, options),\n      client: state => new Client_1.default(this, state),\n      options: this.options\n    };\n  }\n\n}\n\nexports.default = BrowserAdapter;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.init = exports.ready = exports.buildTokenRequest = exports.completeAuth = exports.onMessage = exports.isInPopUp = exports.isInFrame = exports.authorize = exports.getSecurityExtensions = exports.fetchWellKnownJson = exports.KEY = void 0;\n/* global window */\n\nconst lib_1 = require(\"./lib\");\n\nconst Client_1 = require(\"./Client\");\n\nconst settings_1 = require(\"./settings\");\n\nObject.defineProperty(exports, \"KEY\", {\n  enumerable: true,\n  get: function () {\n    return settings_1.SMART_KEY;\n  }\n});\nconst debug = lib_1.debug.extend(\"oauth2\");\n\nfunction isBrowser() {\n  return typeof window === \"object\";\n}\n/**\n * Fetches the well-known json file from the given base URL.\n * Note that the result is cached in memory (until the page is reloaded in the\n * browser) because it might have to be re-used by the client\n * @param baseUrl The base URL of the FHIR server\n */\n\n\nfunction fetchWellKnownJson(baseUrl = \"/\", requestOptions) {\n  const url = String(baseUrl).replace(/\\/*$/, \"/\") + \".well-known/smart-configuration\";\n  return lib_1.getAndCache(url, requestOptions).catch(ex => {\n    throw new Error(`Failed to fetch the well-known json \"${url}\". ${ex.message}`);\n  });\n}\n\nexports.fetchWellKnownJson = fetchWellKnownJson;\n/**\n * Fetch a \"WellKnownJson\" and extract the SMART endpoints from it\n */\n\nfunction getSecurityExtensionsFromWellKnownJson(baseUrl = \"/\", requestOptions) {\n  return fetchWellKnownJson(baseUrl, requestOptions).then(meta => {\n    if (!meta.authorization_endpoint || !meta.token_endpoint) {\n      throw new Error(\"Invalid wellKnownJson\");\n    }\n\n    return {\n      registrationUri: meta.registration_endpoint || \"\",\n      authorizeUri: meta.authorization_endpoint,\n      tokenUri: meta.token_endpoint\n    };\n  });\n}\n/**\n * Fetch a `CapabilityStatement` and extract the SMART endpoints from it\n */\n\n\nfunction getSecurityExtensionsFromConformanceStatement(baseUrl = \"/\", requestOptions) {\n  return lib_1.fetchConformanceStatement(baseUrl, requestOptions).then(meta => {\n    const nsUri = \"http://fhir-registry.smarthealthit.org/StructureDefinition/oauth-uris\";\n    const extensions = (lib_1.getPath(meta || {}, \"rest.0.security.extension\") || []).filter(e => e.url === nsUri).map(o => o.extension)[0];\n    const out = {\n      registrationUri: \"\",\n      authorizeUri: \"\",\n      tokenUri: \"\"\n    };\n\n    if (extensions) {\n      extensions.forEach(ext => {\n        if (ext.url === \"register\") {\n          out.registrationUri = ext.valueUri;\n        }\n\n        if (ext.url === \"authorize\") {\n          out.authorizeUri = ext.valueUri;\n        }\n\n        if (ext.url === \"token\") {\n          out.tokenUri = ext.valueUri;\n        }\n      });\n    }\n\n    return out;\n  });\n}\n/**\n * This works similarly to `Promise.any()`. The tasks are objects containing a\n * request promise and it's AbortController. Returns a promise that will be\n * resolved with the return value of the first successful request, or rejected\n * with an aggregate error if all tasks fail. Any requests, other than the first\n * one that succeeds will be aborted.\n */\n\n\nfunction any(tasks) {\n  const len = tasks.length;\n  const errors = [];\n  let resolved = false;\n  return new Promise((resolve, reject) => {\n    function onSuccess(task, result) {\n      task.complete = true;\n\n      if (!resolved) {\n        resolved = true;\n        tasks.forEach(t => {\n          if (!t.complete) {\n            t.controller.abort();\n          }\n        });\n        resolve(result);\n      }\n    }\n\n    function onError(error) {\n      if (errors.push(error) === len) {\n        reject(new Error(errors.map(e => e.message).join(\"; \")));\n      }\n    }\n\n    tasks.forEach(t => {\n      t.promise.then(result => onSuccess(t, result), onError);\n    });\n  });\n}\n/**\n * Given a FHIR server, returns an object with it's Oauth security endpoints\n * that we are interested in. This will try to find the info in both the\n * `CapabilityStatement` and the `.well-known/smart-configuration`. Whatever\n * Arrives first will be used and the other request will be aborted.\n * @param [baseUrl] Fhir server base URL\n * @param [env] The Adapter\n */\n\n\nfunction getSecurityExtensions(env, baseUrl = \"/\") {\n  const AbortController = env.getAbortController();\n  const abortController1 = new AbortController();\n  const abortController2 = new AbortController();\n  return any([{\n    controller: abortController1,\n    promise: getSecurityExtensionsFromWellKnownJson(baseUrl, {\n      signal: abortController1.signal\n    })\n  }, {\n    controller: abortController2,\n    promise: getSecurityExtensionsFromConformanceStatement(baseUrl, {\n      signal: abortController2.signal\n    })\n  }]);\n}\n\nexports.getSecurityExtensions = getSecurityExtensions;\n/**\n * Starts the SMART Launch Sequence.\n * > **IMPORTANT**:\n *   `authorize()` will end up redirecting you to the authorization server.\n *    This means that you should not add anything to the returned promise chain.\n *    Any code written directly after the authorize() call might not be executed\n *    due to that redirect!\n * @param env\n * @param [params]\n * @param [_noRedirect] If true, resolve with the redirect url without trying to redirect to it\n */\n\nasync function authorize(env, params = {}, _noRedirect = false) {\n  // Obtain input\n  const {\n    redirect_uri,\n    clientSecret,\n    fakeTokenResponse,\n    patientId,\n    encounterId,\n    client_id,\n    target,\n    width,\n    height\n  } = params;\n  let {\n    iss,\n    launch,\n    fhirServiceUrl,\n    redirectUri,\n    scope = \"\",\n    clientId,\n    completeInTarget\n  } = params;\n  const url = env.getUrl();\n  const storage = env.getStorage(); // For these three an url param takes precedence over inline option\n\n  iss = url.searchParams.get(\"iss\") || iss;\n  fhirServiceUrl = url.searchParams.get(\"fhirServiceUrl\") || fhirServiceUrl;\n  launch = url.searchParams.get(\"launch\") || launch;\n\n  if (!clientId) {\n    clientId = client_id;\n  }\n\n  if (!redirectUri) {\n    redirectUri = redirect_uri;\n  }\n\n  if (!redirectUri) {\n    redirectUri = env.relative(\".\");\n  } else if (!redirectUri.match(/^https?\\:\\/\\//)) {\n    redirectUri = env.relative(redirectUri);\n  }\n\n  const serverUrl = String(iss || fhirServiceUrl || \"\"); // Validate input\n\n  if (!serverUrl) {\n    throw new Error(\"No server url found. It must be specified as `iss` or as \" + \"`fhirServiceUrl` parameter\");\n  }\n\n  if (iss) {\n    debug(\"Making %s launch...\", launch ? \"EHR\" : \"standalone\");\n  } // append launch scope if needed\n\n\n  if (launch && !scope.match(/launch/)) {\n    scope += \" launch\";\n  }\n\n  if (isBrowser()) {\n    const inFrame = isInFrame();\n    const inPopUp = isInPopUp();\n\n    if ((inFrame || inPopUp) && completeInTarget !== true && completeInTarget !== false) {\n      // completeInTarget will default to true if authorize is called from\n      // within an iframe. This is to avoid issues when the entire app\n      // happens to be rendered in an iframe (including in some EHRs),\n      // even though that was not how the app developer's intention.\n      completeInTarget = inFrame; // In this case we can't always make the best decision so ask devs\n      // to be explicit in their configuration.\n\n      console.warn('Your app is being authorized from within an iframe or popup ' + 'window. Please be explicit and provide a \"completeInTarget\" ' + 'option. Use \"true\" to complete the authorization in the ' + 'same window, or \"false\" to try to complete it in the parent ' + 'or the opener window. See http://docs.smarthealthit.org/client-js/api.html');\n    }\n  } // If `authorize` is called, make sure we clear any previous state (in case\n  // this is a re-authorize)\n\n\n  const oldKey = await storage.get(settings_1.SMART_KEY);\n  await storage.unset(oldKey); // create initial state\n\n  const stateKey = lib_1.randomString(16);\n  const state = {\n    clientId,\n    scope,\n    redirectUri,\n    serverUrl,\n    clientSecret,\n    tokenResponse: {},\n    key: stateKey,\n    completeInTarget\n  };\n  const fullSessionStorageSupport = isBrowser() ? lib_1.getPath(env, \"options.fullSessionStorageSupport\") : true;\n\n  if (fullSessionStorageSupport) {\n    await storage.set(settings_1.SMART_KEY, stateKey);\n  } // fakeTokenResponse to override stuff (useful in development)\n\n\n  if (fakeTokenResponse) {\n    Object.assign(state.tokenResponse, fakeTokenResponse);\n  } // Fixed patientId (useful in development)\n\n\n  if (patientId) {\n    Object.assign(state.tokenResponse, {\n      patient: patientId\n    });\n  } // Fixed encounterId (useful in development)\n\n\n  if (encounterId) {\n    Object.assign(state.tokenResponse, {\n      encounter: encounterId\n    });\n  }\n\n  let redirectUrl = redirectUri + \"?state=\" + encodeURIComponent(stateKey); // bypass oauth if fhirServiceUrl is used (but iss takes precedence)\n\n  if (fhirServiceUrl && !iss) {\n    debug(\"Making fake launch...\");\n    await storage.set(stateKey, state);\n\n    if (_noRedirect) {\n      return redirectUrl;\n    }\n\n    return await env.redirect(redirectUrl);\n  } // Get oauth endpoints and add them to the state\n\n\n  const extensions = await getSecurityExtensions(env, serverUrl);\n  Object.assign(state, extensions);\n  await storage.set(stateKey, state); // If this happens to be an open server and there is no authorizeUri\n\n  if (!state.authorizeUri) {\n    if (_noRedirect) {\n      return redirectUrl;\n    }\n\n    return await env.redirect(redirectUrl);\n  } // build the redirect uri\n\n\n  const redirectParams = [\"response_type=code\", \"client_id=\" + encodeURIComponent(clientId || \"\"), \"scope=\" + encodeURIComponent(scope), \"redirect_uri=\" + encodeURIComponent(redirectUri), \"aud=\" + encodeURIComponent(serverUrl), \"state=\" + encodeURIComponent(stateKey)]; // also pass this in case of EHR launch\n\n  if (launch) {\n    redirectParams.push(\"launch=\" + encodeURIComponent(launch));\n  }\n\n  redirectUrl = state.authorizeUri + \"?\" + redirectParams.join(\"&\");\n\n  if (_noRedirect) {\n    return redirectUrl;\n  }\n\n  if (target && isBrowser()) {\n    let win;\n    win = await lib_1.getTargetWindow(target, width, height);\n\n    if (win !== self) {\n      try {\n        // Also remove any old state from the target window and then\n        // transfer the current state there\n        win.sessionStorage.removeItem(oldKey);\n        win.sessionStorage.setItem(stateKey, JSON.stringify(state));\n      } catch (ex) {\n        lib_1.debug(`Failed to modify window.sessionStorage. Perhaps it is from different origin?. Failing back to \"_self\". %s`, ex);\n        win = self;\n      }\n    }\n\n    if (win !== self) {\n      try {\n        win.location.href = redirectUrl;\n        self.addEventListener(\"message\", onMessage);\n      } catch (ex) {\n        lib_1.debug(`Failed to modify window.location. Perhaps it is from different origin?. Failing back to \"_self\". %s`, ex);\n        self.location.href = redirectUrl;\n      }\n    } else {\n      self.location.href = redirectUrl;\n    }\n\n    return;\n  } else {\n    return await env.redirect(redirectUrl);\n  }\n}\n\nexports.authorize = authorize;\n/**\n * Checks if called within a frame. Only works in browsers!\n * If the current window has a `parent` or `top` properties that refer to\n * another window, returns true. If trying to access `top` or `parent` throws an\n * error, returns true. Otherwise returns `false`.\n */\n\nfunction isInFrame() {\n  try {\n    return self !== top && parent !== self;\n  } catch (e) {\n    return true;\n  }\n}\n\nexports.isInFrame = isInFrame;\n/**\n * Checks if called within another window (popup or tab). Only works in browsers!\n * To consider itself called in a new window, this function verifies that:\n * 1. `self === top` (not in frame)\n * 2. `!!opener && opener !== self` The window has an opener\n * 3. `!!window.name` The window has a `name` set\n */\n\nfunction isInPopUp() {\n  try {\n    return self === top && !!opener && opener !== self && !!window.name;\n  } catch (e) {\n    return false;\n  }\n}\n\nexports.isInPopUp = isInPopUp;\n/**\n * Another window can send a \"completeAuth\" message to this one, making it to\n * navigate to e.data.url\n * @param e The message event\n */\n\nfunction onMessage(e) {\n  if (e.data.type == \"completeAuth\" && e.origin === new URL(self.location.href).origin) {\n    window.removeEventListener(\"message\", onMessage);\n    window.location.href = e.data.url;\n  }\n}\n\nexports.onMessage = onMessage;\n/**\n * The completeAuth function should only be called on the page that represents\n * the redirectUri. We typically land there after a redirect from the\n * authorization server..\n */\n\nasync function completeAuth(env) {\n  var _a, _b;\n\n  const url = env.getUrl();\n  const Storage = env.getStorage();\n  const params = url.searchParams;\n  let key = params.get(\"state\");\n  const code = params.get(\"code\");\n  const authError = params.get(\"error\");\n  const authErrorDescription = params.get(\"error_description\");\n\n  if (!key) {\n    key = await Storage.get(settings_1.SMART_KEY);\n  } // Start by checking the url for `error` and `error_description` parameters.\n  // This happens when the auth server rejects our authorization attempt. In\n  // this case it has no other way to tell us what the error was, other than\n  // appending these parameters to the redirect url.\n  // From client's point of view, this is not very reliable (because we can't\n  // know how we have landed on this page - was it a redirect or was it loaded\n  // manually). However, if `completeAuth()` is being called, we can assume\n  // that the url comes from the auth server (otherwise the app won't work\n  // anyway).\n\n\n  if (authError || authErrorDescription) {\n    throw new Error([authError, authErrorDescription].filter(Boolean).join(\": \"));\n  }\n\n  debug(\"key: %s, code: %s\", key, code); // key might be coming from the page url so it might be empty or missing\n\n  if (!key) {\n    throw new Error(\"No 'state' parameter found. Please (re)launch the app.\");\n  } // Check if we have a previous state\n\n\n  let state = await Storage.get(key);\n  const fullSessionStorageSupport = isBrowser() ? lib_1.getPath(env, \"options.fullSessionStorageSupport\") : true; // If we are in a popup window or an iframe and the authorization is\n  // complete, send the location back to our opener and exit.\n\n  if (isBrowser() && state && !state.completeInTarget) {\n    const inFrame = isInFrame();\n    const inPopUp = isInPopUp(); // we are about to return to the opener/parent where completeAuth will\n    // be called again. In rare cases the opener or parent might also be\n    // a frame or popup. Then inFrame or inPopUp will be true but we still\n    // have to stop going up the chain. To guard against that weird form of\n    // recursion we pass one additional parameter to the url which we later\n    // remove.\n\n    if ((inFrame || inPopUp) && !url.searchParams.get(\"complete\")) {\n      url.searchParams.set(\"complete\", \"1\");\n      const {\n        href,\n        origin\n      } = url;\n\n      if (inFrame) {\n        parent.postMessage({\n          type: \"completeAuth\",\n          url: href\n        }, origin);\n      }\n\n      if (inPopUp) {\n        opener.postMessage({\n          type: \"completeAuth\",\n          url: href\n        }, origin);\n        window.close();\n      }\n\n      return new Promise(() => {});\n    }\n  }\n\n  url.searchParams.delete(\"complete\"); // Do we have to remove the `code` and `state` params from the URL?\n\n  const hasState = params.has(\"state\");\n\n  if (isBrowser() && lib_1.getPath(env, \"options.replaceBrowserHistory\") && (code || hasState)) {\n    // `code` is the flag that tell us to request an access token.\n    // We have to remove it, otherwise the page will authorize on\n    // every load!\n    if (code) {\n      params.delete(\"code\");\n      debug(\"Removed code parameter from the url.\");\n    } // If we have `fullSessionStorageSupport` it means we no longer\n    // need the `state` key. It will be stored to a well know\n    // location - sessionStorage[SMART_KEY]. However, no\n    // fullSessionStorageSupport means that this \"well know location\"\n    // might be shared between windows and tabs. In this case we\n    // MUST keep the `state` url parameter.\n\n\n    if (hasState && fullSessionStorageSupport) {\n      params.delete(\"state\");\n      debug(\"Removed state parameter from the url.\");\n    } // If the browser does not support the replaceState method for the\n    // History Web API, the \"code\" parameter cannot be removed. As a\n    // consequence, the page will (re)authorize on every load. The\n    // workaround is to reload the page to new location without those\n    // parameters. If that is not acceptable replaceBrowserHistory\n    // should be set to false.\n\n\n    if (window.history.replaceState) {\n      window.history.replaceState({}, \"\", url.href);\n    }\n  } // If the state does not exist, it means the page has been loaded directly.\n\n\n  if (!state) {\n    throw new Error(\"No state found! Please (re)launch the app.\");\n  } // Assume the client has already completed a token exchange when\n  // there is no code (but we have a state) or access token is found in state\n\n\n  const authorized = !code || ((_a = state.tokenResponse) === null || _a === void 0 ? void 0 : _a.access_token); // If we are authorized already, then this is just a reload.\n  // Otherwise, we have to complete the code flow\n\n  if (!authorized && state.tokenUri) {\n    if (!code) {\n      throw new Error(\"'code' url parameter is required\");\n    }\n\n    debug(\"Preparing to exchange the code for access token...\");\n    const requestOptions = buildTokenRequest(env, code, state);\n    debug(\"Token request options: %O\", requestOptions); // The EHR authorization server SHALL return a JSON structure that\n    // includes an access token or a message indicating that the\n    // authorization request has been denied.\n\n    const tokenResponse = await lib_1.request(state.tokenUri, requestOptions);\n    debug(\"Token response: %O\", tokenResponse);\n\n    if (!tokenResponse.access_token) {\n      throw new Error(\"Failed to obtain access token.\");\n    } // Now we need to determine when is this authorization going to expire\n\n\n    state.expiresAt = lib_1.getAccessTokenExpiration(tokenResponse, env); // save the tokenResponse so that we don't have to re-authorize on\n    // every page reload\n\n    state = Object.assign(Object.assign({}, state), {\n      tokenResponse\n    });\n    await Storage.set(key, state);\n    debug(\"Authorization successful!\");\n  } else {\n    debug(((_b = state.tokenResponse) === null || _b === void 0 ? void 0 : _b.access_token) ? \"Already authorized\" : \"No authorization needed\");\n  }\n\n  if (fullSessionStorageSupport) {\n    await Storage.set(settings_1.SMART_KEY, key);\n  }\n\n  const client = new Client_1.default(env, state);\n  debug(\"Created client instance: %O\", client);\n  return client;\n}\n\nexports.completeAuth = completeAuth;\n/**\n * Builds the token request options. Does not make the request, just\n * creates it's configuration and returns it in a Promise.\n */\n\nfunction buildTokenRequest(env, code, state) {\n  const {\n    redirectUri,\n    clientSecret,\n    tokenUri,\n    clientId\n  } = state;\n\n  if (!redirectUri) {\n    throw new Error(\"Missing state.redirectUri\");\n  }\n\n  if (!tokenUri) {\n    throw new Error(\"Missing state.tokenUri\");\n  }\n\n  if (!clientId) {\n    throw new Error(\"Missing state.clientId\");\n  }\n\n  const requestOptions = {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/x-www-form-urlencoded\"\n    },\n    body: `code=${code}&grant_type=authorization_code&redirect_uri=${encodeURIComponent(redirectUri)}`\n  }; // For public apps, authentication is not possible (and thus not required),\n  // since a client with no secret cannot prove its identity when it issues a\n  // call. (The end-to-end system can still be secure because the client comes\n  // from a known, https protected endpoint specified and enforced by the\n  // redirect uri.) For confidential apps, an Authorization header using HTTP\n  // Basic authentication is required, where the username is the apps\n  // client_id and the password is the apps client_secret (see example).\n\n  if (clientSecret) {\n    requestOptions.headers.Authorization = \"Basic \" + env.btoa(clientId + \":\" + clientSecret);\n    debug(\"Using state.clientSecret to construct the authorization header: %s\", requestOptions.headers.Authorization);\n  } else {\n    debug(\"No clientSecret found in state. Adding the clientId to the POST body\");\n    requestOptions.body += `&client_id=${encodeURIComponent(clientId)}`;\n  }\n\n  return requestOptions;\n}\n\nexports.buildTokenRequest = buildTokenRequest;\n/**\n * @param env\n * @param [onSuccess]\n * @param [onError]\n */\n\nasync function ready(env, onSuccess, onError) {\n  let task = completeAuth(env);\n\n  if (onSuccess) {\n    task = task.then(onSuccess);\n  }\n\n  if (onError) {\n    task = task.catch(onError);\n  }\n\n  return task;\n}\n\nexports.ready = ready;\n/**\n * This function can be used when you want to handle everything in one page\n * (no launch endpoint needed). You can think of it as if it does:\n * ```js\n * authorize(options).then(ready)\n * ```\n *\n * **Be careful with init()!** There are some details you need to be aware of:\n *\n * 1. It will only work if your launch_uri is the same as your redirect_uri.\n *    While this should be valid, we cant promise that every EHR will allow you\n *    to register client with such settings.\n * 2. Internally, `init()` will be called twice. First it will redirect to the\n *    EHR, then the EHR will redirect back to the page where init() will be\n *    called again to complete the authorization. This is generally fine,\n *    because the returned promise will only be resolved once, after the second\n *    execution, but please also consider the following:\n *    - You should wrap all your apps code in a function that is only executed\n *      after `init()` resolves!\n *    - Since the page will be loaded twice, you must be careful if your code\n *      has global side effects that can persist between page reloads\n *      (for example writing to localStorage).\n * 3. For standalone launch, only use init in combination with offline_access\n *    scope. Once the access_token expires, if you dont have a refresh_token\n *    there is no way to re-authorize properly. We detect that and delete the\n *    expired access token, but it still means that the user will have to\n *    refresh the page twice to re-authorize.\n * @param env The adapter\n * @param options The authorize options\n */\n\nasync function init(env, options) {\n  const url = env.getUrl();\n  const code = url.searchParams.get(\"code\");\n  const state = url.searchParams.get(\"state\"); // if `code` and `state` params are present we need to complete the auth flow\n\n  if (code && state) {\n    return completeAuth(env);\n  } // Check for existing client state. If state is found, it means a client\n  // instance have already been created in this session and we should try to\n  // \"revive\" it.\n\n\n  const storage = env.getStorage();\n  const key = state || (await storage.get(settings_1.SMART_KEY));\n  const cached = await storage.get(key);\n\n  if (cached) {\n    return new Client_1.default(env, cached);\n  } // Otherwise try to launch\n\n\n  return authorize(env, options).then(() => {\n    // `init` promises a Client but that cannot happen in this case. The\n    // browser will be redirected (unload the page and be redirected back\n    // to it later and the same init function will be called again). On\n    // success, authorize will resolve with the redirect url but we don't\n    // want to return that from this promise chain because it is not a\n    // Client instance. At the same time, if authorize fails, we do want to\n    // pass the error to those waiting for a client instance.\n    return new Promise(() => {});\n  });\n}\n\nexports.init = init;","\"use strict\";\n/*\n * This file contains some shared functions. They are used by other modules, but\n * are defined here so that tests can import this library and test them.\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getTargetWindow = exports.getPatientParam = exports.byCodes = exports.byCode = exports.getAccessTokenExpiration = exports.jwtDecode = exports.randomString = exports.absolute = exports.makeArray = exports.setPath = exports.getPath = exports.humanizeError = exports.fetchConformanceStatement = exports.getAndCache = exports.request = exports.responseToJSON = exports.checkResponse = exports.units = exports.debug = void 0;\n\nconst HttpError_1 = require(\"./HttpError\");\n\nconst settings_1 = require(\"./settings\");\n\nconst debug = require(\"debug\"); // $lab:coverage:off$\n// @ts-ignore\n\n\nconst {\n  fetch\n} = typeof FHIRCLIENT_PURE !== \"undefined\" ? window : require(\"cross-fetch\"); // $lab:coverage:on$\n\nconst _debug = debug(\"FHIR\");\n\nexports.debug = _debug;\n/**\n * The cache for the `getAndCache` function\n */\n\nconst cache = {};\n/**\n * A namespace with functions for converting between different measurement units\n */\n\nexports.units = {\n  cm({\n    code,\n    value\n  }) {\n    ensureNumerical({\n      code,\n      value\n    });\n    if (code == \"cm\") return value;\n    if (code == \"m\") return value * 100;\n    if (code == \"in\") return value * 2.54;\n    if (code == \"[in_us]\") return value * 2.54;\n    if (code == \"[in_i]\") return value * 2.54;\n    if (code == \"ft\") return value * 30.48;\n    if (code == \"[ft_us]\") return value * 30.48;\n    throw new Error(\"Unrecognized length unit: \" + code);\n  },\n\n  kg({\n    code,\n    value\n  }) {\n    ensureNumerical({\n      code,\n      value\n    });\n    if (code == \"kg\") return value;\n    if (code == \"g\") return value / 1000;\n    if (code.match(/lb/)) return value / 2.20462;\n    if (code.match(/oz/)) return value / 35.274;\n    throw new Error(\"Unrecognized weight unit: \" + code);\n  },\n\n  any(pq) {\n    ensureNumerical(pq);\n    return pq.value;\n  }\n\n};\n/**\n * Assertion function to guard arguments for `units` functions\n */\n\nfunction ensureNumerical({\n  value,\n  code\n}) {\n  if (typeof value !== \"number\") {\n    throw new Error(\"Found a non-numerical unit: \" + value + \" \" + code);\n  }\n}\n/**\n * Used in fetch Promise chains to reject if the \"ok\" property is not true\n */\n\n\nasync function checkResponse(resp) {\n  if (!resp.ok) {\n    throw await humanizeError(resp);\n  }\n\n  return resp;\n}\n\nexports.checkResponse = checkResponse;\n/**\n * Used in fetch Promise chains to return the JSON version of the response.\n * Note that `resp.json()` will throw on empty body so we use resp.text()\n * instead.\n */\n\nfunction responseToJSON(resp) {\n  return resp.text().then(text => text.length ? JSON.parse(text) : \"\");\n}\n\nexports.responseToJSON = responseToJSON;\n/**\n * This is our built-in request function. It does a few things by default\n * (unless told otherwise):\n * - Makes CORS requests\n * - Sets accept header to \"application/json\"\n * - Handles errors\n * - If the response is json return the json object\n * - If the response is text return the result text\n * - Otherwise return the response object on which we call stuff like `.blob()`\n */\n\nfunction request(url, options = {}) {\n  return fetch(url, Object.assign(Object.assign({\n    mode: \"cors\"\n  }, options), {\n    headers: Object.assign({\n      accept: \"application/json\"\n    }, options.headers)\n  })).then(checkResponse).then(res => {\n    const type = res.headers.get(\"Content-Type\") + \"\";\n\n    if (type.match(/\\bjson\\b/i)) {\n      return responseToJSON(res).then(body => ({\n        res,\n        body\n      }));\n    }\n\n    if (type.match(/^text\\//i)) {\n      return res.text().then(body => ({\n        res,\n        body\n      }));\n    }\n\n    return {\n      res\n    };\n  }).then(({\n    res,\n    body\n  }) => {\n    // Some servers will reply after CREATE with json content type but with\n    // empty body. In this case check if a location header is received and\n    // fetch that to use it as the final result.\n    if (!body && res.status == 201) {\n      const location = res.headers.get(\"location\") + \"\";\n\n      if (location) {\n        return request(location, Object.assign(Object.assign({}, options), {\n          method: \"GET\",\n          body: null\n        }));\n      }\n    } // For any non-text and non-json response return the Response object.\n    // This to let users decide if they want to call text(), blob() or\n    // something else on it\n\n\n    if (body === undefined) {\n      return res;\n    } // Otherwise just return the parsed body (can also be \"\" or null)\n\n\n    return body;\n  });\n}\n\nexports.request = request;\n/**\n * Makes a request using `fetch` and stores the result in internal memory cache.\n * The cache is cleared when the page is unloaded.\n * @param url The URL to request\n * @param requestOptions Request options\n * @param force If true, reload from source and update the cache, even if it has\n * already been cached.\n */\n\nfunction getAndCache(url, requestOptions, force = process.env.NODE_ENV === \"test\") {\n  if (force || !cache[url]) {\n    cache[url] = request(url, requestOptions);\n    return cache[url];\n  }\n\n  return Promise.resolve(cache[url]);\n}\n\nexports.getAndCache = getAndCache;\n/**\n * Fetches the conformance statement from the given base URL.\n * Note that the result is cached in memory (until the page is reloaded in the\n * browser) because it might have to be re-used by the client\n * @param baseUrl The base URL of the FHIR server\n * @param [requestOptions] Any options passed to the fetch call\n */\n\nfunction fetchConformanceStatement(baseUrl = \"/\", requestOptions) {\n  const url = String(baseUrl).replace(/\\/*$/, \"/\") + \"metadata\";\n  return getAndCache(url, requestOptions).catch(ex => {\n    throw new Error(`Failed to fetch the conformance statement from \"${url}\". ${ex}`);\n  });\n}\n\nexports.fetchConformanceStatement = fetchConformanceStatement;\n/**\n * Given a response object, generates and throws detailed HttpError.\n * @param resp The `Response` object of a failed `fetch` request\n */\n\nasync function humanizeError(resp) {\n  let msg = `${resp.status} ${resp.statusText}\\nURL: ${resp.url}`;\n  let body = null;\n\n  try {\n    const type = resp.headers.get(\"Content-Type\") || \"text/plain\";\n\n    if (type.match(/\\bjson\\b/i)) {\n      body = await resp.json();\n\n      if (body.error) {\n        msg += \"\\n\" + body.error;\n\n        if (body.error_description) {\n          msg += \": \" + body.error_description;\n        }\n      } else {\n        msg += \"\\n\\n\" + JSON.stringify(body, null, 4);\n      }\n    } else if (type.match(/^text\\//i)) {\n      body = await resp.text();\n\n      if (body) {\n        msg += \"\\n\\n\" + body;\n      }\n    }\n  } catch (_) {// ignore\n  }\n\n  throw new HttpError_1.default(msg, resp.status, resp.statusText, body);\n}\n\nexports.humanizeError = humanizeError;\n/**\n * Walks through an object (or array) and returns the value found at the\n * provided path. This function is very simple so it intentionally does not\n * support any argument polymorphism, meaning that the path can only be a\n * dot-separated string. If the path is invalid returns undefined.\n * @param obj The object (or Array) to walk through\n * @param path The path (eg. \"a.b.4.c\")\n * @returns {*} Whatever is found in the path or undefined\n */\n\nfunction getPath(obj, path = \"\") {\n  path = path.trim();\n\n  if (!path) {\n    return obj;\n  }\n\n  let segments = path.split(\".\");\n  let result = obj;\n\n  while (result && segments.length) {\n    const key = segments.shift();\n\n    if (!key && Array.isArray(result)) {\n      return result.map(o => getPath(o, segments.join(\".\")));\n    } else {\n      result = result[key];\n    }\n  }\n\n  return result;\n}\n\nexports.getPath = getPath;\n/**\n * Like getPath, but if the node is found, its value is set to @value\n * @param obj The object (or Array) to walk through\n * @param path The path (eg. \"a.b.4.c\")\n * @param value The value to set\n * @param createEmpty If true, create missing intermediate objects or arrays\n * @returns The modified object\n */\n\nfunction setPath(obj, path, value, createEmpty = false) {\n  path.trim().split(\".\").reduce((out, key, idx, arr) => {\n    if (out && idx === arr.length - 1) {\n      out[key] = value;\n    } else {\n      if (out && out[key] === undefined && createEmpty) {\n        out[key] = arr[idx + 1].match(/^[0-9]+$/) ? [] : {};\n      }\n\n      return out ? out[key] : undefined;\n    }\n  }, obj);\n  return obj;\n}\n\nexports.setPath = setPath;\n/**\n * If the argument is an array returns it as is. Otherwise puts it in an array\n * (`[arg]`) and returns the result\n * @param arg The element to test and possibly convert to array\n * @category Utility\n */\n\nfunction makeArray(arg) {\n  if (Array.isArray(arg)) {\n    return arg;\n  }\n\n  return [arg];\n}\n\nexports.makeArray = makeArray;\n/**\n * Given a path, converts it to absolute url based on the `baseUrl`. If baseUrl\n * is not provided, the result would be a rooted path (one that starts with `/`).\n * @param path The path to convert\n * @param baseUrl The base URL\n */\n\nfunction absolute(path, baseUrl) {\n  if (path.match(/^http/)) return path;\n  if (path.match(/^urn/)) return path;\n  return String(baseUrl || \"\").replace(/\\/+$/, \"\") + \"/\" + path.replace(/^\\/+/, \"\");\n}\n\nexports.absolute = absolute;\n/**\n * Generates random strings. By default this returns random 8 characters long\n * alphanumeric strings.\n * @param strLength The length of the output string. Defaults to 8.\n * @param charSet A string containing all the possible characters.\n *     Defaults to all the upper and lower-case letters plus digits.\n * @category Utility\n */\n\nfunction randomString(strLength = 8, charSet = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\") {\n  const result = [];\n  const len = charSet.length;\n\n  while (strLength--) {\n    result.push(charSet.charAt(Math.floor(Math.random() * len)));\n  }\n\n  return result.join(\"\");\n}\n\nexports.randomString = randomString;\n/**\n * Decodes a JWT token and returns it's body.\n * @param token The token to read\n * @param env An `Adapter` or any other object that has an `atob` method\n * @category Utility\n */\n\nfunction jwtDecode(token, env) {\n  const payload = token.split(\".\")[1];\n  return payload ? JSON.parse(env.atob(payload)) : null;\n}\n\nexports.jwtDecode = jwtDecode;\n/**\n * Given a token response, computes and returns the expiresAt timestamp.\n * Note that this should only be used immediately after an access token is\n * received, otherwise the computed timestamp will be incorrect.\n * @param tokenResponse\n * @param env\n */\n\nfunction getAccessTokenExpiration(tokenResponse, env) {\n  const now = Math.floor(Date.now() / 1000); // Option 1 - using the expires_in property of the token response\n\n  if (tokenResponse.expires_in) {\n    return now + tokenResponse.expires_in;\n  } // Option 2 - using the exp property of JWT tokens (must not assume JWT!)\n\n\n  if (tokenResponse.access_token) {\n    let tokenBody = jwtDecode(tokenResponse.access_token, env);\n\n    if (tokenBody && tokenBody.exp) {\n      return tokenBody.exp;\n    }\n  } // Option 3 - if none of the above worked set this to 5 minutes after now\n\n\n  return now + 300;\n}\n\nexports.getAccessTokenExpiration = getAccessTokenExpiration;\n/**\n * Groups the observations by code. Returns a map that will look like:\n * ```js\n * const map = client.byCodes(observations, \"code\");\n * // map = {\n * //     \"55284-4\": [ observation1, observation2 ],\n * //     \"6082-2\": [ observation3 ]\n * // }\n * ```\n * @param observations Array of observations\n * @param property The name of a CodeableConcept property to group by\n */\n\nfunction byCode(observations, property) {\n  const ret = {};\n\n  function handleCodeableConcept(concept, observation) {\n    if (concept && Array.isArray(concept.coding)) {\n      concept.coding.forEach(({\n        code\n      }) => {\n        if (code) {\n          ret[code] = ret[code] || [];\n          ret[code].push(observation);\n        }\n      });\n    }\n  }\n\n  makeArray(observations).forEach(o => {\n    if (o.resourceType === \"Observation\" && o[property]) {\n      if (Array.isArray(o[property])) {\n        o[property].forEach(concept => handleCodeableConcept(concept, o));\n      } else {\n        handleCodeableConcept(o[property], o);\n      }\n    }\n  });\n  return ret;\n}\n\nexports.byCode = byCode;\n/**\n * First groups the observations by code using `byCode`. Then returns a function\n * that accepts codes as arguments and will return a flat array of observations\n * having that codes. Example:\n * ```js\n * const filter = client.byCodes(observations, \"category\");\n * filter(\"laboratory\") // => [ observation1, observation2 ]\n * filter(\"vital-signs\") // => [ observation3 ]\n * filter(\"laboratory\", \"vital-signs\") // => [ observation1, observation2, observation3 ]\n * ```\n * @param observations Array of observations\n * @param property The name of a CodeableConcept property to group by\n */\n\nfunction byCodes(observations, property) {\n  const bank = byCode(observations, property);\n  return (...codes) => codes.filter(code => code + \"\" in bank).reduce((prev, code) => prev.concat(bank[code + \"\"]), []);\n}\n\nexports.byCodes = byCodes;\n/**\n * Given a conformance statement and a resource type, returns the name of the\n * URL parameter that can be used to scope the resource type by patient ID.\n */\n\nfunction getPatientParam(conformance, resourceType) {\n  // Find what resources are supported by this server\n  const resources = getPath(conformance, \"rest.0.resource\") || []; // Check if this resource is supported\n\n  const meta = resources.find(r => r.type === resourceType);\n\n  if (!meta) {\n    throw new Error(`Resource \"${resourceType}\" is not supported by this FHIR server`);\n  } // Check if any search parameters are available for this resource\n\n\n  if (!Array.isArray(meta.searchParam)) {\n    throw new Error(`No search parameters supported for \"${resourceType}\" on this FHIR server`);\n  } // This is a rare case but could happen in generic workflows\n\n\n  if (resourceType == \"Patient\" && meta.searchParam.find(x => x.name == \"_id\")) {\n    return \"_id\";\n  } // Now find the first possible parameter name\n\n\n  const out = settings_1.patientParams.find(p => meta.searchParam.find(x => x.name == p)); // If there is no match\n\n  if (!out) {\n    throw new Error(\"I don't know what param to use for \" + resourceType);\n  }\n\n  return out;\n}\n\nexports.getPatientParam = getPatientParam;\n/**\n * Resolves a reference to target window. It may also open new window or tab if\n * the `target = \"popup\"` or `target = \"_blank\"`.\n * @param target\n * @param width Only used when `target = \"popup\"`\n * @param height Only used when `target = \"popup\"`\n */\n\nasync function getTargetWindow(target, width = 800, height = 720) {\n  // The target can be a function that returns the target. This can be\n  // used to open a layer pop-up with an iframe and then return a reference\n  // to that iframe (or its name)\n  if (typeof target == \"function\") {\n    target = await target();\n  } // The target can be a window reference\n\n\n  if (target && typeof target == \"object\") {\n    return target;\n  } // At this point target must be a string\n\n\n  if (typeof target != \"string\") {\n    _debug(\"Invalid target type '%s'. Failing back to '_self'.\", typeof target);\n\n    return self;\n  } // Current window\n\n\n  if (target == \"_self\") {\n    return self;\n  } // The parent frame\n\n\n  if (target == \"_parent\") {\n    return parent;\n  } // The top window\n\n\n  if (target == \"_top\") {\n    return top;\n  } // New tab or window\n\n\n  if (target == \"_blank\") {\n    let error,\n        targetWindow = null;\n\n    try {\n      targetWindow = window.open(\"\", \"SMARTAuthPopup\");\n\n      if (!targetWindow) {\n        throw new Error(\"Perhaps window.open was blocked\");\n      }\n    } catch (e) {\n      error = e;\n    }\n\n    if (!targetWindow) {\n      _debug(\"Cannot open window. Failing back to '_self'. %s\", error);\n\n      return self;\n    } else {\n      return targetWindow;\n    }\n  } // Popup window\n\n\n  if (target == \"popup\") {\n    let error,\n        targetWindow = null; // if (!targetWindow || targetWindow.closed) {\n\n    try {\n      targetWindow = window.open(\"\", \"SMARTAuthPopup\", [\"height=\" + height, \"width=\" + width, \"menubar=0\", \"resizable=1\", \"status=0\", \"top=\" + (screen.height - height) / 2, \"left=\" + (screen.width - width) / 2].join(\",\"));\n\n      if (!targetWindow) {\n        throw new Error(\"Perhaps the popup window was blocked\");\n      }\n    } catch (e) {\n      error = e;\n    }\n\n    if (!targetWindow) {\n      _debug(\"Cannot open window. Failing back to '_self'. %s\", error);\n\n      return self;\n    } else {\n      return targetWindow;\n    }\n  } // Frame or window by name\n\n\n  const winOrFrame = frames[target];\n\n  if (winOrFrame) {\n    return winOrFrame;\n  }\n\n  _debug(\"Unknown target '%s'. Failing back to '_self'.\", target);\n\n  return self;\n}\n\nexports.getTargetWindow = getTargetWindow;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nclass HttpError extends Error {\n  constructor(message = \"Unknown error\", statusCode = 0, statusText = \"Error\", body = null) {\n    super(message);\n    this.message = message;\n    this.name = \"HttpError\";\n    this.statusCode = statusCode;\n    this.status = statusCode;\n    this.statusText = statusText;\n    this.body = body;\n  }\n\n  toJSON() {\n    return {\n      name: this.name,\n      statusCode: this.statusCode,\n      status: this.status,\n      statusText: this.statusText,\n      message: this.message,\n      body: this.body\n    };\n  }\n\n}\n\nexports.default = HttpError;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SMART_KEY = exports.patientParams = exports.fhirVersions = exports.patientCompartment = void 0;\n/**\n * Combined list of FHIR resource types accepting patient parameter in FHIR R2-R4\n */\n\nexports.patientCompartment = [\"Account\", \"AdverseEvent\", \"AllergyIntolerance\", \"Appointment\", \"AppointmentResponse\", \"AuditEvent\", \"Basic\", \"BodySite\", \"BodyStructure\", \"CarePlan\", \"CareTeam\", \"ChargeItem\", \"Claim\", \"ClaimResponse\", \"ClinicalImpression\", \"Communication\", \"CommunicationRequest\", \"Composition\", \"Condition\", \"Consent\", \"Coverage\", \"CoverageEligibilityRequest\", \"CoverageEligibilityResponse\", \"DetectedIssue\", \"DeviceRequest\", \"DeviceUseRequest\", \"DeviceUseStatement\", \"DiagnosticOrder\", \"DiagnosticReport\", \"DocumentManifest\", \"DocumentReference\", \"EligibilityRequest\", \"Encounter\", \"EnrollmentRequest\", \"EpisodeOfCare\", \"ExplanationOfBenefit\", \"FamilyMemberHistory\", \"Flag\", \"Goal\", \"Group\", \"ImagingManifest\", \"ImagingObjectSelection\", \"ImagingStudy\", \"Immunization\", \"ImmunizationEvaluation\", \"ImmunizationRecommendation\", \"Invoice\", \"List\", \"MeasureReport\", \"Media\", \"MedicationAdministration\", \"MedicationDispense\", \"MedicationOrder\", \"MedicationRequest\", \"MedicationStatement\", \"MolecularSequence\", \"NutritionOrder\", \"Observation\", \"Order\", \"Patient\", \"Person\", \"Procedure\", \"ProcedureRequest\", \"Provenance\", \"QuestionnaireResponse\", \"ReferralRequest\", \"RelatedPerson\", \"RequestGroup\", \"ResearchSubject\", \"RiskAssessment\", \"Schedule\", \"ServiceRequest\", \"Specimen\", \"SupplyDelivery\", \"SupplyRequest\", \"VisionPrescription\"];\n/**\n * Map of FHIR releases and their abstract version as number\n */\n\nexports.fhirVersions = {\n  \"0.4.0\": 2,\n  \"0.5.0\": 2,\n  \"1.0.0\": 2,\n  \"1.0.1\": 2,\n  \"1.0.2\": 2,\n  \"1.1.0\": 3,\n  \"1.4.0\": 3,\n  \"1.6.0\": 3,\n  \"1.8.0\": 3,\n  \"3.0.0\": 3,\n  \"3.0.1\": 3,\n  \"3.3.0\": 4,\n  \"3.5.0\": 4,\n  \"4.0.0\": 4,\n  \"4.0.1\": 4\n};\n/**\n * Combined (FHIR R2-R4) list of search parameters that can be used to scope\n * a request by patient ID.\n */\n\nexports.patientParams = [\"patient\", \"subject\", \"requester\", \"member\", \"actor\", \"beneficiary\"];\n/**\n * The name of the sessionStorage entry that contains the current key\n */\n\nexports.SMART_KEY = \"SMART_KEY\";","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar has = require('../internals/has');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\nvar nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? nativeGetOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return nativeGetOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);\n};\n","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line no-undef\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func\n  (function () { return this; })() || Function('return this')();\n","'use strict';\nvar nativePropertyIsEnumerable = {}.propertyIsEnumerable;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : nativePropertyIsEnumerable;\n","var fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","var fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar split = ''.split;\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split.call(it, '') : Object(it);\n} : Object;\n","// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","var isObject = require('../internals/is-object');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (input, PREFERRED_STRING) {\n  if (!isObject(input)) return input;\n  var fn, val;\n  if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar anObject = require('../internals/an-object');\nvar toPrimitive = require('../internals/to-primitive');\n\nvar nativeDefineProperty = Object.defineProperty;\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? nativeDefineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return nativeDefineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it)) {\n    throw TypeError(String(it) + ' is not an object');\n  } return it;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nmodule.exports = function (key, value) {\n  try {\n    createNonEnumerableProperty(global, key, value);\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n","var store = require('../internals/shared-store');\n\nvar functionToString = Function.toString;\n\n// this helper broken in `3.4.1-3.4.4`, so we can't use `shared` helper\nif (typeof store.inspectSource != 'function') {\n  store.inspectSource = function (it) {\n    return functionToString.call(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var global = require('../internals/global');\nvar inspectSource = require('../internals/inspect-source');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = typeof WeakMap === 'function' && /native code/.test(inspectSource(WeakMap));\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.8.3',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: ' 2021 Denis Pushkarev (zloirock.ru)'\n});\n","var id = 0;\nvar postfix = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);\n};\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","module.exports = {};\n","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar objectHas = require('../internals/has');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP) {\n  var store = shared.state || (shared.state = new WeakMap());\n  var wmget = store.get;\n  var wmhas = store.has;\n  var wmset = store.set;\n  set = function (it, metadata) {\n    metadata.facade = it;\n    wmset.call(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget.call(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas.call(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return objectHas(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return objectHas(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar setGlobal = require('../internals/set-global');\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(String).split('String');\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  var state;\n  if (typeof value == 'function') {\n    if (typeof key == 'string' && !has(value, 'name')) {\n      createNonEnumerableProperty(value, 'name', key);\n    }\n    state = enforceInternalState(value);\n    if (!state.source) {\n      state.source = TEMPLATE.join(typeof key == 'string' ? key : '');\n    }\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else createNonEnumerableProperty(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return typeof this == 'function' && getInternalState(this).source || inspectSource(this);\n});\n","var global = require('../internals/global');\n\nmodule.exports = global;\n","var path = require('../internals/path');\nvar global = require('../internals/global');\n\nvar aFunction = function (variable) {\n  return typeof variable == 'function' ? variable : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])\n    : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToInteger` abstract operation\n// https://tc39.es/ecma262/#sec-tointeger\nmodule.exports = function (argument) {\n  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n};\n","var toInteger = require('../internals/to-integer');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var toInteger = require('../internals/to-integer');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toInteger(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toLength = require('../internals/to-length');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var has = require('../internals/has');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~indexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","exports.f = Object.getOwnPropertySymbols;\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var getBuiltIn = require('../internals/get-built-in');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;\n};\n","var has = require('../internals/has');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n  }\n};\n","var fails = require('../internals/fails');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : typeof detection == 'function' ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar setGlobal = require('../internals/set-global');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty === typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n","module.exports = function (it) {\n  if (typeof it != 'function') {\n    throw TypeError(String(it) + ' is not a function');\n  } return it;\n};\n","var aFunction = require('../internals/a-function');\n\n// optional / simple context binding\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 0: return function () {\n      return fn.call(that);\n    };\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","'use strict';\nvar isArray = require('../internals/is-array');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/function-bind-context');\n\n// `FlattenIntoArray` abstract operation\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? bind(mapper, thisArg, 3) : false;\n  var element;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      if (depth > 0 && isArray(element)) {\n        targetIndex = flattenIntoArray(target, original, element, toLength(element.length), targetIndex, depth - 1) - 1;\n      } else {\n        if (targetIndex >= 0x1FFFFFFFFFFFFF) throw TypeError('Exceed the acceptable array length');\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n};\n\nmodule.exports = flattenIntoArray;\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n","var NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = NATIVE_SYMBOL\n  // eslint-disable-next-line no-undef\n  && !Symbol.sham\n  // eslint-disable-next-line no-undef\n  && typeof Symbol.iterator == 'symbol';\n","var fails = require('../internals/fails');\n\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  // Chrome 38 Symbol has incorrect toString conversion\n  // eslint-disable-next-line no-undef\n  return !String(Symbol());\n});\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar has = require('../internals/has');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!has(WellKnownSymbolsStore, name)) {\n    if (NATIVE_SYMBOL && has(Symbol, name)) WellKnownSymbolsStore[name] = Symbol[name];\n    else WellKnownSymbolsStore[name] = createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n","var isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length === 0 ? 0 : length);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar toInteger = require('../internals/to-integer');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flat` method\n// https://tc39.es/ecma262/#sec-array.prototype.flat\n$({ target: 'Array', proto: true }, {\n  flat: function flat(/* depthArg = 1 */) {\n    var depthArg = arguments.length ? arguments[0] : undefined;\n    var O = toObject(this);\n    var sourceLen = toLength(O.length);\n    var A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toInteger(depthArg));\n    return A;\n  }\n});\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\nmodule.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], Properties[key]);\n  return O;\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","var anObject = require('../internals/an-object');\nvar defineProperties = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    /* global ActiveXObject */\n    activeXDocument = document.domain && new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame();\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : defineProperties(result, Properties);\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar definePropertyModule = require('../internals/object-define-property');\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  definePropertyModule.f(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('flat');\n","\"use strict\";\n\nrequire(\"core-js/modules/es.array.flat\");\n\nrequire(\"core-js/modules/es.array.unscopables.flat\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst lib_1 = require(\"./lib\");\n\nconst strings_1 = require(\"./strings\");\n\nconst settings_1 = require(\"./settings\"); // $lab:coverage:off$\n// @ts-ignore\n\n\nconst {\n  Response\n} = typeof FHIRCLIENT_PURE !== \"undefined\" ? window : require(\"cross-fetch\"); // $lab:coverage:on$\n\nconst debug = lib_1.debug.extend(\"client\");\n/**\n * Adds patient context to requestOptions object to be used with [[Client.request]]\n * @param requestOptions Can be a string URL (relative to the serviceUrl), or an\n * object which will be passed to fetch()\n * @param client Current FHIR client object containing patient context\n * @return requestOptions object contextualized to current patient\n */\n\nasync function contextualize(requestOptions, client) {\n  const base = lib_1.absolute(\"/\", client.state.serverUrl);\n\n  async function contextualURL(_url) {\n    const resourceType = _url.pathname.split(\"/\").pop();\n\n    if (!resourceType) {\n      throw new Error(`Invalid url \"${_url}\"`);\n    }\n\n    if (settings_1.patientCompartment.indexOf(resourceType) == -1) {\n      throw new Error(`Cannot filter \"${resourceType}\" resources by patient`);\n    }\n\n    const conformance = await lib_1.fetchConformanceStatement(client.state.serverUrl);\n    const searchParam = lib_1.getPatientParam(conformance, resourceType);\n\n    _url.searchParams.set(searchParam, client.patient.id);\n\n    return _url.href;\n  }\n\n  if (typeof requestOptions == \"string\" || requestOptions instanceof URL) {\n    return {\n      url: await contextualURL(new URL(requestOptions + \"\", base))\n    };\n  }\n\n  requestOptions.url = await contextualURL(new URL(requestOptions.url + \"\", base));\n  return requestOptions;\n}\n/**\n * Gets single reference by id. Caches the result.\n * @param refId\n * @param cache A map to store the resolved refs\n * @param client The client instance\n * @param [signal] The `AbortSignal` if any\n * @returns The resolved reference\n * @private\n */\n\n\nfunction getRef(refId, cache, client, signal) {\n  if (!cache[refId]) {\n    // Note that we set cache[refId] immediately! When the promise is\n    // settled it will be updated. This is to avoid a ref being fetched\n    // twice because some of these requests are executed in parallel.\n    cache[refId] = client.request({\n      url: refId,\n      signal\n    }).then(res => {\n      cache[refId] = res;\n      return res;\n    }, error => {\n      delete cache[refId];\n      throw error;\n    });\n  }\n\n  return Promise.resolve(cache[refId]);\n}\n/**\n * Resolves a reference in the given resource.\n * @param obj FHIR Resource\n */\n\n\nfunction resolveRef(obj, path, graph, cache, client, signal) {\n  const node = lib_1.getPath(obj, path);\n\n  if (node) {\n    const isArray = Array.isArray(node);\n    return Promise.all(lib_1.makeArray(node).filter(Boolean).map((item, i) => {\n      const ref = item.reference;\n\n      if (ref) {\n        return getRef(ref, cache, client, signal).then(sub => {\n          if (graph) {\n            if (isArray) {\n              if (path.indexOf(\"..\") > -1) {\n                lib_1.setPath(obj, `${path.replace(\"..\", `.${i}.`)}`, sub);\n              } else {\n                lib_1.setPath(obj, `${path}.${i}`, sub);\n              }\n            } else {\n              lib_1.setPath(obj, path, sub);\n            }\n          }\n        }).catch(ex => {\n          /* ignore missing references */\n          if (ex.status !== 404) {\n            throw ex;\n          }\n        });\n      }\n    }));\n  }\n}\n/**\n * Given a resource and a list of ref paths - resolves them all\n * @param obj FHIR Resource\n * @param fhirOptions The fhir options of the initiating request call\n * @param cache A map to store fetched refs\n * @param client The client instance\n * @private\n */\n\n\nfunction resolveRefs(obj, fhirOptions, cache, client, signal) {\n  // 1. Sanitize paths, remove any invalid ones\n  let paths = lib_1.makeArray(fhirOptions.resolveReferences).filter(Boolean) // No false, 0, null, undefined or \"\"\n  .map(path => String(path).trim()).filter(Boolean); // No space-only strings\n  // 2. Remove duplicates\n\n  paths = paths.filter((p, i) => {\n    const index = paths.indexOf(p, i + 1);\n\n    if (index > -1) {\n      debug(\"Duplicated reference path \\\"%s\\\"\", p);\n      return false;\n    }\n\n    return true;\n  }); // 3. Early exit if no valid paths are found\n\n  if (!paths.length) {\n    return Promise.resolve();\n  } // 4. Group the paths by depth so that child refs are looked up\n  // after their parents!\n\n\n  const groups = {};\n  paths.forEach(path => {\n    const len = path.split(\".\").length;\n\n    if (!groups[len]) {\n      groups[len] = [];\n    }\n\n    groups[len].push(path);\n  }); // 5. Execute groups sequentially! Paths within same group are\n  // fetched in parallel!\n\n  let task = Promise.resolve();\n  Object.keys(groups).sort().forEach(len => {\n    const group = groups[len];\n    task = task.then(() => Promise.all(group.map(path => {\n      return resolveRef(obj, path, !!fhirOptions.graph, cache, client, signal);\n    })));\n  });\n  return task;\n}\n/**\n * This is a FHIR client that is returned to you from the `ready()` call of the\n * **SMART API**. You can also create it yourself if needed:\n *\n * ```js\n * // BROWSER\n * const client = FHIR.client(\"https://r4.smarthealthit.org\");\n *\n * // SERVER\n * const client = smart(req, res).client(\"https://r4.smarthealthit.org\");\n * ```\n */\n\n\nclass Client {\n  /**\n   * Validates the parameters, creates an instance and tries to connect it to\n   * FhirJS, if one is available globally.\n   */\n  constructor(environment, state) {\n    /**\n     * @category Utility\n     */\n    this.units = lib_1.units;\n\n    const _state = typeof state == \"string\" ? {\n      serverUrl: state\n    } : state; // Valid serverUrl is required!\n\n\n    if (!_state.serverUrl || !_state.serverUrl.match(/https?:\\/\\/.+/)) {\n      throw new Error(\"A \\\"serverUrl\\\" option is required and must begin with \\\"http(s)\\\"\");\n    }\n\n    this.state = _state;\n    this.environment = environment;\n    this._refreshTask = null;\n    const client = this; // patient api ---------------------------------------------------------\n\n    this.patient = {\n      get id() {\n        return client.getPatientId();\n      },\n\n      read: (requestOptions = {}) => {\n        const id = this.patient.id;\n        return id ? this.request(Object.assign(Object.assign({}, requestOptions), {\n          url: `Patient/${id}`\n        })) : Promise.reject(new Error(\"Patient is not available\"));\n      },\n      request: (requestOptions, fhirOptions = {}) => {\n        if (this.patient.id) {\n          return (async () => {\n            const options = await contextualize(requestOptions, this);\n            return this.request(options, fhirOptions);\n          })();\n        } else {\n          return Promise.reject(new Error(\"Patient is not available\"));\n        }\n      }\n    }; // encounter api -------------------------------------------------------\n\n    this.encounter = {\n      get id() {\n        return client.getEncounterId();\n      },\n\n      read: (requestOptions = {}) => {\n        const id = this.encounter.id;\n        return id ? this.request(Object.assign(Object.assign({}, requestOptions), {\n          url: `Encounter/${id}`\n        })) : Promise.reject(new Error(\"Encounter is not available\"));\n      }\n    }; // user api ------------------------------------------------------------\n\n    this.user = {\n      get fhirUser() {\n        return client.getFhirUser();\n      },\n\n      get id() {\n        return client.getUserId();\n      },\n\n      get resourceType() {\n        return client.getUserType();\n      },\n\n      read: (requestOptions = {}) => {\n        const fhirUser = this.user.fhirUser;\n        return fhirUser ? this.request(Object.assign(Object.assign({}, requestOptions), {\n          url: fhirUser\n        })) : Promise.reject(new Error(\"User is not available\"));\n      }\n    }; // fhir.js api (attached automatically in browser)\n    // ---------------------------------------------------------------------\n\n    this.connect(environment.fhir);\n  }\n  /**\n   * This method is used to make the \"link\" between the `fhirclient` and the\n   * `fhir.js`, if one is available.\n   * **Note:** This is called by the constructor. If fhir.js is available in\n   * the global scope as `fhir`, it will automatically be linked to any [[Client]]\n   * instance. You should only use this method to connect to `fhir.js` which\n   * is not global.\n   */\n\n\n  connect(fhirJs) {\n    if (typeof fhirJs == \"function\") {\n      const options = {\n        baseUrl: this.state.serverUrl.replace(/\\/$/, \"\")\n      };\n      const accessToken = this.getState(\"tokenResponse.access_token\");\n\n      if (accessToken) {\n        options.auth = {\n          token: accessToken\n        };\n      } else {\n        const {\n          username,\n          password\n        } = this.state;\n\n        if (username && password) {\n          options.auth = {\n            user: username,\n            pass: password\n          };\n        }\n      }\n\n      this.api = fhirJs(options);\n      const patientId = this.getState(\"tokenResponse.patient\");\n\n      if (patientId) {\n        this.patient.api = fhirJs(Object.assign(Object.assign({}, options), {\n          patient: patientId\n        }));\n      }\n    }\n\n    return this;\n  }\n  /**\n   * Returns the ID of the selected patient or null. You should have requested\n   * \"launch/patient\" scope. Otherwise this will return null.\n   */\n\n\n  getPatientId() {\n    const tokenResponse = this.state.tokenResponse;\n\n    if (tokenResponse) {\n      // We have been authorized against this server but we don't know\n      // the patient. This should be a scope issue.\n      if (!tokenResponse.patient) {\n        if (!(this.state.scope || \"\").match(/\\blaunch(\\/patient)?\\b/)) {\n          debug(strings_1.default.noScopeForId, \"patient\", \"patient\");\n        } else {\n          // The server should have returned the patient!\n          debug(\"The ID of the selected patient is not available. Please check if your server supports that.\");\n        }\n\n        return null;\n      }\n\n      return tokenResponse.patient;\n    }\n\n    if (this.state.authorizeUri) {\n      debug(strings_1.default.noIfNoAuth, \"the ID of the selected patient\");\n    } else {\n      debug(strings_1.default.noFreeContext, \"selected patient\");\n    }\n\n    return null;\n  }\n  /**\n   * Returns the ID of the selected encounter or null. You should have\n   * requested \"launch/encounter\" scope. Otherwise this will return null.\n   * Note that not all servers support the \"launch/encounter\" scope so this\n   * will be null if they don't.\n   */\n\n\n  getEncounterId() {\n    const tokenResponse = this.state.tokenResponse;\n\n    if (tokenResponse) {\n      // We have been authorized against this server but we don't know\n      // the encounter. This should be a scope issue.\n      if (!tokenResponse.encounter) {\n        if (!(this.state.scope || \"\").match(/\\blaunch(\\/encounter)?\\b/)) {\n          debug(strings_1.default.noScopeForId, \"encounter\", \"encounter\");\n        } else {\n          // The server should have returned the encounter!\n          debug(\"The ID of the selected encounter is not available. Please check if your server supports that, and that the selected patient has any recorded encounters.\");\n        }\n\n        return null;\n      }\n\n      return tokenResponse.encounter;\n    }\n\n    if (this.state.authorizeUri) {\n      debug(strings_1.default.noIfNoAuth, \"the ID of the selected encounter\");\n    } else {\n      debug(strings_1.default.noFreeContext, \"selected encounter\");\n    }\n\n    return null;\n  }\n  /**\n   * Returns the (decoded) id_token if any. You need to request \"openid\" and\n   * \"profile\" scopes if you need to receive an id_token (if you need to know\n   * who the logged-in user is).\n   */\n\n\n  getIdToken() {\n    const tokenResponse = this.state.tokenResponse;\n\n    if (tokenResponse) {\n      const idToken = tokenResponse.id_token;\n      const scope = this.state.scope || \"\"; // We have been authorized against this server but we don't have\n      // the id_token. This should be a scope issue.\n\n      if (!idToken) {\n        const hasOpenid = scope.match(/\\bopenid\\b/);\n        const hasProfile = scope.match(/\\bprofile\\b/);\n        const hasFhirUser = scope.match(/\\bfhirUser\\b/);\n\n        if (!hasOpenid || !(hasFhirUser || hasProfile)) {\n          debug(\"You are trying to get the id_token but you are not \" + \"using the right scopes. Please add 'openid' and \" + \"'fhirUser' or 'profile' to the scopes you are \" + \"requesting.\");\n        } else {\n          // The server should have returned the id_token!\n          debug(\"The id_token is not available. Please check if your server supports that.\");\n        }\n\n        return null;\n      }\n\n      return lib_1.jwtDecode(idToken, this.environment);\n    }\n\n    if (this.state.authorizeUri) {\n      debug(strings_1.default.noIfNoAuth, \"the id_token\");\n    } else {\n      debug(strings_1.default.noFreeContext, \"id_token\");\n    }\n\n    return null;\n  }\n  /**\n   * Returns the profile of the logged_in user (if any). This is a string\n   * having the following shape `\"{user type}/{user id}\"`. For example:\n   * `\"Practitioner/abc\"` or `\"Patient/xyz\"`.\n   */\n\n\n  getFhirUser() {\n    const idToken = this.getIdToken();\n\n    if (idToken) {\n      return idToken.profile;\n    }\n\n    return null;\n  }\n  /**\n   * Returns the user ID or null.\n   */\n\n\n  getUserId() {\n    const profile = this.getFhirUser();\n\n    if (profile) {\n      return profile.split(\"/\")[1];\n    }\n\n    return null;\n  }\n  /**\n   * Returns the type of the logged-in user or null. The result can be\n   * \"Practitioner\", \"Patient\" or \"RelatedPerson\".\n   */\n\n\n  getUserType() {\n    const profile = this.getFhirUser();\n\n    if (profile) {\n      return profile.split(\"/\")[0];\n    }\n\n    return null;\n  }\n  /**\n   * Builds and returns the value of the `Authorization` header that can be\n   * sent to the FHIR server\n   */\n\n\n  getAuthorizationHeader() {\n    const accessToken = this.getState(\"tokenResponse.access_token\");\n\n    if (accessToken) {\n      return \"Bearer \" + accessToken;\n    }\n\n    const {\n      username,\n      password\n    } = this.state;\n\n    if (username && password) {\n      return \"Basic \" + this.environment.btoa(username + \":\" + password);\n    }\n\n    return null;\n  }\n  /**\n   * Used internally to clear the state of the instance and the state in the\n   * associated storage.\n   */\n\n\n  async _clearState() {\n    const storage = this.environment.getStorage();\n    const key = await storage.get(settings_1.SMART_KEY);\n\n    if (key) {\n      await storage.unset(key);\n    }\n\n    await storage.unset(settings_1.SMART_KEY);\n    this.state.tokenResponse = {};\n  }\n  /**\n   * Creates a new resource in a server-assigned location\n   * @see http://hl7.org/fhir/http.html#create\n   * @param resource A FHIR resource to be created\n   * @param [requestOptions] Any options to be passed to the fetch call.\n   * Note that `method` and `body` will be ignored.\n   * @category Request\n   */\n\n\n  create(resource, requestOptions = {}) {\n    return this.request(Object.assign(Object.assign({}, requestOptions), {\n      url: `${resource.resourceType}`,\n      method: \"POST\",\n      body: JSON.stringify(resource),\n      headers: Object.assign({\n        // TODO: Do we need to alternate with \"application/json+fhir\"?\n        \"Content-Type\": \"application/json\"\n      }, requestOptions.headers)\n    }));\n  }\n  /**\n   * Creates a new current version for an existing resource or creates an\n   * initial version if no resource already exists for the given id.\n   * @see http://hl7.org/fhir/http.html#update\n   * @param resource A FHIR resource to be updated\n   * @param requestOptions Any options to be passed to the fetch call.\n   * Note that `method` and `body` will be ignored.\n   * @category Request\n   */\n\n\n  update(resource, requestOptions = {}) {\n    return this.request(Object.assign(Object.assign({}, requestOptions), {\n      url: `${resource.resourceType}/${resource.id}`,\n      method: \"PUT\",\n      body: JSON.stringify(resource),\n      headers: Object.assign({\n        // TODO: Do we need to alternate with \"application/json+fhir\"?\n        \"Content-Type\": \"application/json\"\n      }, requestOptions.headers)\n    }));\n  }\n  /**\n   * Removes an existing resource.\n   * @see http://hl7.org/fhir/http.html#delete\n   * @param url Relative URI of the FHIR resource to be deleted\n   * (format: `resourceType/id`)\n   * @param requestOptions Any options (except `method` which will be fixed\n   * to `DELETE`) to be passed to the fetch call.\n   * @category Request\n   */\n\n\n  delete(url, requestOptions = {}) {\n    return this.request(Object.assign(Object.assign({}, requestOptions), {\n      url,\n      method: \"DELETE\"\n    }));\n  }\n  /**\n   * @param requestOptions Can be a string URL (relative to the serviceUrl),\n   * or an object which will be passed to fetch()\n   * @param fhirOptions Additional options to control the behavior\n   * @param _resolvedRefs DO NOT USE! Used internally.\n   * @category Request\n   */\n\n\n  async request(requestOptions, fhirOptions = {}, _resolvedRefs = {}) {\n    var _a;\n\n    const debugRequest = lib_1.debug.extend(\"client:request\");\n\n    if (!requestOptions) {\n      throw new Error(\"request requires an url or request options as argument\");\n    } // url -----------------------------------------------------------------\n\n\n    let url;\n\n    if (typeof requestOptions == \"string\" || requestOptions instanceof URL) {\n      url = String(requestOptions);\n      requestOptions = {};\n    } else {\n      url = String(requestOptions.url);\n    }\n\n    url = lib_1.absolute(url, this.state.serverUrl);\n    const options = {\n      graph: fhirOptions.graph !== false,\n      flat: !!fhirOptions.flat,\n      pageLimit: (_a = fhirOptions.pageLimit) !== null && _a !== void 0 ? _a : 1,\n      resolveReferences: fhirOptions.resolveReferences || [],\n      useRefreshToken: fhirOptions.useRefreshToken !== false,\n      onPage: typeof fhirOptions.onPage == \"function\" ? fhirOptions.onPage : undefined\n    };\n    const signal = requestOptions.signal || undefined; // Refresh the access token if needed\n\n    const job = options.useRefreshToken ? this.refreshIfNeeded({\n      signal\n    }).then(() => requestOptions) : Promise.resolve(requestOptions);\n    return job // Add the Authorization header now, after the access token might\n    // have been updated\n    .then(requestOptions => {\n      const authHeader = this.getAuthorizationHeader();\n\n      if (authHeader) {\n        requestOptions.headers = Object.assign(Object.assign({}, requestOptions.headers), {\n          Authorization: authHeader\n        });\n      }\n\n      return requestOptions;\n    }) // Make the request\n    .then(requestOptions => {\n      debugRequest(\"%s, options: %O, fhirOptions: %O\", url, requestOptions, options);\n      return lib_1.request(url, requestOptions);\n    }) // Handle 401 ------------------------------------------------------\n    .catch(async error => {\n      if (error.status == 401) {\n        // !accessToken -> not authorized -> No session. Need to launch.\n        if (!this.getState(\"tokenResponse.access_token\")) {\n          throw new Error(\"This app cannot be accessed directly. Please launch it as SMART app!\");\n        } // auto-refresh not enabled and Session expired.\n        // Need to re-launch. Clear state to start over!\n\n\n        if (!options.useRefreshToken) {\n          debugRequest(\"Your session has expired and the useRefreshToken option is set to false. Please re-launch the app.\");\n          await this._clearState();\n          throw new Error(strings_1.default.expired);\n        } // otherwise -> auto-refresh failed. Session expired.\n        // Need to re-launch. Clear state to start over!\n\n\n        debugRequest(\"Auto-refresh failed! Please re-launch the app.\");\n        await this._clearState();\n        throw new Error(strings_1.default.expired);\n      }\n\n      throw error;\n    }) // Handle 403 ------------------------------------------------------\n    .catch(error => {\n      if (error.status == 403) {\n        debugRequest(\"Permission denied! Please make sure that you have requested the proper scopes.\");\n      }\n\n      throw error;\n    }).then(data => {\n      // Handle raw responses (anything other than json) -------------\n      if (!data) return data;\n      if (typeof data == \"string\") return data;\n      if (data instanceof Response) return data; // Resolve References ------------------------------------------\n\n      return (async _data => {\n        if (_data.resourceType == \"Bundle\") {\n          await Promise.all((_data.entry || []).map(item => resolveRefs(item.resource, options, _resolvedRefs, this, signal)));\n        } else {\n          await resolveRefs(_data, options, _resolvedRefs, this, signal);\n        }\n\n        return _data;\n      })(data) // Pagination ----------------------------------------------\n      .then(async _data => {\n        if (_data && _data.resourceType == \"Bundle\") {\n          const links = _data.link || [];\n\n          if (options.flat) {\n            _data = (_data.entry || []).map(entry => entry.resource);\n          }\n\n          if (options.onPage) {\n            await options.onPage(_data, Object.assign({}, _resolvedRefs));\n          }\n\n          if (--options.pageLimit) {\n            const next = links.find(l => l.relation == \"next\");\n            _data = lib_1.makeArray(_data);\n\n            if (next && next.url) {\n              const nextPage = await this.request({\n                url: next.url,\n                // Aborting the main request (even after it is complete)\n                // must propagate to any child requests and abort them!\n                // To do so, just pass the same AbortSignal if one is\n                // provided.\n                signal\n              }, options, _resolvedRefs);\n\n              if (options.onPage) {\n                return null;\n              }\n\n              if (options.resolveReferences.length) {\n                Object.assign(_resolvedRefs, nextPage.references);\n                return _data.concat(lib_1.makeArray(nextPage.data || nextPage));\n              }\n\n              return _data.concat(lib_1.makeArray(nextPage));\n            }\n          }\n        }\n\n        return _data;\n      }) // Finalize ------------------------------------------------\n      .then(_data => {\n        if (options.graph) {\n          _resolvedRefs = {};\n        } else if (!options.onPage && options.resolveReferences.length) {\n          return {\n            data: _data,\n            references: _resolvedRefs\n          };\n        }\n\n        return _data;\n      });\n    });\n  }\n  /**\n   * Checks if access token and refresh token are present. If they are, and if\n   * the access token is expired or is about to expire in the next 10 seconds,\n   * calls `this.refresh()` to obtain new access token.\n   * @param requestOptions Any options to pass to the fetch call. Most of them\n   * will be overridden, bit it might still be useful for passing additional\n   * request options or an abort signal.\n   * @category Request\n   */\n\n\n  refreshIfNeeded(requestOptions = {}) {\n    const accessToken = this.getState(\"tokenResponse.access_token\");\n    const refreshToken = this.getState(\"tokenResponse.refresh_token\");\n    const expiresAt = this.state.expiresAt || 0;\n\n    if (accessToken && refreshToken && expiresAt - 10 < Date.now() / 1000) {\n      return this.refresh(requestOptions);\n    }\n\n    return Promise.resolve(this.state);\n  }\n  /**\n   * Use the refresh token to obtain new access token. If the refresh token is\n   * expired (or this fails for any other reason) it will be deleted from the\n   * state, so that we don't enter into loops trying to re-authorize.\n   *\n   * This method is typically called internally from [[Client.request]] if\n   * certain request fails with 401.\n   *\n   * @param requestOptions Any options to pass to the fetch call. Most of them\n   * will be overridden, bit it might still be useful for passing additional\n   * request options or an abort signal.\n   * @category Request\n   */\n\n\n  refresh(requestOptions = {}) {\n    var _a, _b;\n\n    const debugRefresh = lib_1.debug.extend(\"client:refresh\");\n    debugRefresh(\"Attempting to refresh with refresh_token...\");\n    const refreshToken = (_b = (_a = this.state) === null || _a === void 0 ? void 0 : _a.tokenResponse) === null || _b === void 0 ? void 0 : _b.refresh_token;\n\n    if (!refreshToken) {\n      throw new Error(\"Unable to refresh. No refresh_token found.\");\n    }\n\n    const tokenUri = this.state.tokenUri;\n\n    if (!tokenUri) {\n      throw new Error(\"Unable to refresh. No tokenUri found.\");\n    }\n\n    const scopes = this.getState(\"tokenResponse.scope\") || \"\";\n    const hasOfflineAccess = scopes.search(/\\boffline_access\\b/) > -1;\n    const hasOnlineAccess = scopes.search(/\\bonline_access\\b/) > -1;\n\n    if (!hasOfflineAccess && !hasOnlineAccess) {\n      throw new Error(\"Unable to refresh. No offline_access or online_access scope found.\");\n    } // This method is typically called internally from `request` if certain\n    // request fails with 401. However, clients will often run multiple\n    // requests in parallel which may result in multiple refresh calls.\n    // To avoid that, we keep a reference to the current refresh task (if any).\n\n\n    if (!this._refreshTask) {\n      const refreshRequestOptions = Object.assign(Object.assign({\n        credentials: this.environment.options.refreshTokenWithCredentials || \"same-origin\"\n      }, requestOptions), {\n        method: \"POST\",\n        mode: \"cors\",\n        headers: Object.assign(Object.assign({}, requestOptions.headers || {}), {\n          \"content-type\": \"application/x-www-form-urlencoded\"\n        }),\n        body: `grant_type=refresh_token&refresh_token=${encodeURIComponent(refreshToken)}`\n      }); // custom authorization header can be passed on manual calls\n\n      if (!(\"authorization\" in refreshRequestOptions.headers)) {\n        const {\n          clientSecret,\n          clientId\n        } = this.state;\n\n        if (clientSecret) {\n          // @ts-ignore\n          refreshRequestOptions.headers.authorization = \"Basic \" + this.environment.btoa(clientId + \":\" + clientSecret);\n        }\n      }\n\n      this._refreshTask = lib_1.request(tokenUri, refreshRequestOptions).then(data => {\n        if (!data.access_token) {\n          throw new Error(\"No access token received\");\n        }\n\n        debugRefresh(\"Received new access token response %O\", data);\n        Object.assign(this.state.tokenResponse, data);\n        this.state.expiresAt = lib_1.getAccessTokenExpiration(data, this.environment);\n        return this.state;\n      }).catch(error => {\n        var _a, _b;\n\n        if ((_b = (_a = this.state) === null || _a === void 0 ? void 0 : _a.tokenResponse) === null || _b === void 0 ? void 0 : _b.refresh_token) {\n          debugRefresh(\"Deleting the expired or invalid refresh token.\");\n          delete this.state.tokenResponse.refresh_token;\n        }\n\n        throw error;\n      }).finally(() => {\n        this._refreshTask = null;\n        const key = this.state.key;\n\n        if (key) {\n          this.environment.getStorage().set(key, this.state);\n        } else {\n          debugRefresh(\"No 'key' found in Clint.state. Cannot persist the instance.\");\n        }\n      });\n    }\n\n    return this._refreshTask;\n  } // utils -------------------------------------------------------------------\n\n  /**\n   * Groups the observations by code. Returns a map that will look like:\n   * ```js\n   * const map = client.byCodes(observations, \"code\");\n   * // map = {\n   * //     \"55284-4\": [ observation1, observation2 ],\n   * //     \"6082-2\": [ observation3 ]\n   * // }\n   * ```\n   * @param observations Array of observations\n   * @param property The name of a CodeableConcept property to group by\n   * @todo This should be deprecated and moved elsewhere. One should not have\n   * to obtain an instance of [[Client]] just to use utility functions like this.\n   * @deprecated\n   * @category Utility\n   */\n\n\n  byCode(observations, property) {\n    return lib_1.byCode(observations, property);\n  }\n  /**\n   * First groups the observations by code using `byCode`. Then returns a function\n   * that accepts codes as arguments and will return a flat array of observations\n   * having that codes. Example:\n   * ```js\n   * const filter = client.byCodes(observations, \"category\");\n   * filter(\"laboratory\") // => [ observation1, observation2 ]\n   * filter(\"vital-signs\") // => [ observation3 ]\n   * filter(\"laboratory\", \"vital-signs\") // => [ observation1, observation2, observation3 ]\n   * ```\n   * @param observations Array of observations\n   * @param property The name of a CodeableConcept property to group by\n   * @todo This should be deprecated and moved elsewhere. One should not have\n   * to obtain an instance of [[Client]] just to use utility functions like this.\n   * @deprecated\n   * @category Utility\n   */\n\n\n  byCodes(observations, property) {\n    return lib_1.byCodes(observations, property);\n  }\n  /**\n   * Walks through an object (or array) and returns the value found at the\n   * provided path. This function is very simple so it intentionally does not\n   * support any argument polymorphism, meaning that the path can only be a\n   * dot-separated string. If the path is invalid returns undefined.\n   * @param obj The object (or Array) to walk through\n   * @param path The path (eg. \"a.b.4.c\")\n   * @returns {*} Whatever is found in the path or undefined\n   * @todo This should be deprecated and moved elsewhere. One should not have\n   * to obtain an instance of [[Client]] just to use utility functions like this.\n   * @deprecated\n   * @category Utility\n   */\n\n\n  getPath(obj, path = \"\") {\n    return lib_1.getPath(obj, path);\n  }\n  /**\n   * Returns a copy of the client state. Accepts a dot-separated path argument\n   * (same as for `getPath`) to allow for selecting specific properties.\n   * Examples:\n   * ```js\n   * client.getState(); // -> the entire state object\n   * client.getState(\"serverUrl\"); // -> the URL we are connected to\n   * client.getState(\"tokenResponse.patient\"); // -> The selected patient ID (if any)\n   * ```\n   * @param path The path (eg. \"a.b.4.c\")\n   * @returns {*} Whatever is found in the path or undefined\n   */\n\n\n  getState(path = \"\") {\n    return lib_1.getPath(Object.assign({}, this.state), path);\n  }\n  /**\n   * Returns a promise that will be resolved with the fhir version as defined\n   * in the CapabilityStatement.\n   */\n\n\n  getFhirVersion() {\n    return lib_1.fetchConformanceStatement(this.state.serverUrl).then(metadata => metadata.fhirVersion);\n  }\n  /**\n   * Returns a promise that will be resolved with the numeric fhir version\n   * - 2 for DSTU2\n   * - 3 for STU3\n   * - 4 for R4\n   * - 0 if the version is not known\n   */\n\n\n  getFhirRelease() {\n    return this.getFhirVersion().then(v => {\n      var _a;\n\n      return (_a = settings_1.fhirVersions[v]) !== null && _a !== void 0 ? _a : 0;\n    });\n  }\n\n}\n\nexports.default = Client;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n}); // This map contains reusable debug messages (only those used in multiple places)\n\nexports.default = {\n  expired: \"Session expired! Please re-launch the app\",\n  noScopeForId: \"Trying to get the ID of the selected %s. Please add 'launch' or 'launch/%s' to the requested scopes and try again.\",\n  noIfNoAuth: \"You are trying to get %s but the app is not authorized yet.\",\n  noFreeContext: \"Please don't use open fhir servers if you need to access launch context items like the %S.\"\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nclass Storage {\n  /**\n   * Gets the value at `key`. Returns a promise that will be resolved\n   * with that value (or undefined for missing keys).\n   */\n  async get(key) {\n    const value = sessionStorage[key];\n\n    if (value) {\n      return JSON.parse(value);\n    }\n\n    return null;\n  }\n  /**\n   * Sets the `value` on `key` and returns a promise that will be resolved\n   * with the value that was set.\n   */\n\n\n  async set(key, value) {\n    sessionStorage[key] = JSON.stringify(value);\n    return value;\n  }\n  /**\n   * Deletes the value at `key`. Returns a promise that will be resolved\n   * with true if the key was deleted or with false if it was not (eg. if\n   * did not exist).\n   */\n\n\n  async unset(key) {\n    if (key in sessionStorage) {\n      delete sessionStorage[key];\n      return true;\n    }\n\n    return false;\n  }\n\n}\n\nexports.default = Storage;","\"use strict\"; // In Browsers we create an adapter, get the SMART api from it and build the\n// global FHIR object\n\nconst BrowserAdapter_1 = require(\"../adapters/BrowserAdapter\");\n\nconst adapter = new BrowserAdapter_1.default();\nconst {\n  ready,\n  authorize,\n  init,\n  client,\n  options\n} = adapter.getSmartApi(); // We have two kinds of browser builds - \"pure\" for new browsers and \"legacy\"\n// for old ones. In pure builds we assume that the browser supports everything\n// we need. In legacy mode, the library also acts as a polyfill. Babel will\n// automatically polyfill everything except \"fetch\", which we have to handle\n// manually.\n// @ts-ignore\n\nif (typeof FHIRCLIENT_PURE == \"undefined\") {\n  const fetch = require(\"cross-fetch\");\n\n  require(\"abortcontroller-polyfill/dist/abortcontroller-polyfill-only\");\n\n  if (!window.fetch) {\n    window.fetch = fetch.default;\n    window.Headers = fetch.Headers;\n    window.Request = fetch.Request;\n    window.Response = fetch.Response;\n  }\n} // $lab:coverage:off$\n\n\nconst FHIR = {\n  AbortController: window.AbortController,\n  client,\n  oauth2: {\n    settings: options,\n    ready,\n    authorize,\n    init\n  }\n};\nmodule.exports = FHIR; // $lab:coverage:on$","[\"29.0.0\",\"28.0.0\",\"26.0.0\",\"25.0.0\",\"24.0.0\",\"23.0.0\",\"22.0.0\"]","module.exports = {};\nmodule.exports['29.0.0'] = require('./versionUpdates/29.0.0.js');\nmodule.exports['28.0.0'] = require('./versionUpdates/28.0.0.js');\nmodule.exports['26.0.0'] = require('./versionUpdates/26.0.0.js');\nmodule.exports['25.0.0'] = require('./versionUpdates/25.0.0.js');\nmodule.exports['24.0.0'] = require('./versionUpdates/24.0.0.js');\nmodule.exports['23.0.0'] = require('./versionUpdates/23.0.0.js');\nmodule.exports['22.0.0'] = require('./versionUpdates/22.0.0.js');\n","// Updates an LForms form definition or a FHIR resource generated by LForms,\n// to be compatible with the latest LForms version.\n\n'use strict';\n\n/**\n *  A list of all version numbers for which an update step is provided, in order\n *  from highest to lowest version number.\n */\nconst updateVersions_ = require('./versionList');\n\n/**\n *  A hash from an updateVersions_ entry to a function for performing that\n *  update step.  Each function takes the JSON for the resource to be updated.\n */\nconst updateFns_ = require('./updateFns');\n\n/**\n *  Updates an LForms form definition or a FHIR resource generated by LForms,\n *  to be compatible with the latest LForms version.\n * @param parsedJSON the parsed JSON containing the form\n *  definition or FHIR resource to be updated.\n * @param version (optional) the version to update to.  Updates for version\n *  numbers greater than this number will not be run.\n * @return the updated form definition or FHIR resource.\n */\nmodule.exports = {update: function (parsedJSON, version) {\n  let stopVersion = version;\n  let util = require('./util');\n  // Determine the lforms version\n  var isFHIR = util.isFHIRResource(parsedJSON);\n  var lformsVersion;\n  if (isFHIR) {\n    let meta = parsedJSON.meta;\n    if (meta) {\n      let tags = meta.tag;\n      if (tags) {\n        for (let t of tags) {\n          let tagVersion = util.versionFromTag(t);\n          if (tagVersion) {\n            lformsVersion = tagVersion;\n            break;\n          }\n        }\n      }\n    }\n  }\n  else { // an lforms form definition\n    lformsVersion = parsedJSON.lformsVersion;\n  }\n\n  // Determine which update steps need to run.\n  let updateSteps = [];\n  for (let i=0, len=updateVersions_.length, uv; i<len && (uv=updateVersions_[i]) &&\n       util.versionLessThan(lformsVersion, uv); ++i) {\n    if (!stopVersion || !util.versionLessThan(stopVersion, uv)) // stopVersion >= uv\n      updateSteps.push(uv);\n  }\n\n  let latestVersion = updateSteps[0];\n  for (let step of updateSteps.reverse()) // reverse changes the array in place\n    parsedJSON = updateFns_[step](parsedJSON);\n\n  // If we ran any of the updates, update the version tag\n  if (updateSteps.length) {\n    if (isFHIR) {\n      // Update or set the tag\n      let meta = parsedJSON.meta;\n      if (!meta)\n        meta = parsedJSON.meta = {};\n      let tags = meta.tag;\n      if (!tags)\n        tags = meta.tag = [];\n      let versionTag;\n      // for existing tags\n      for (let t of tags) {\n        let version = util.versionFromTag(t);\n        if (version) {\n          versionTag = t;\n          break;\n        }\n      }\n      let versionDisplay = util.makeVersionTag(latestVersion);\n      if (versionTag) {\n        versionTag.code = versionDisplay;\n        delete versionTag.display; // in case it was from the old version tag format\n      }\n      else\n        tags.push({code: versionDisplay});\n    }\n    else\n      parsedJSON.lformsVersion = latestVersion;\n  }\n\n  return parsedJSON;\n}};\n","// Imports for webpack to find assets\nimport '../css/app.css';\n\nimport parse from \"url-parse\";\nimport pako from \"pako\";\nimport untar from \"js-untar-lhc\";\nimport str2ab from \"string-to-arraybuffer\";\nimport FHIR from 'fhirclient';\nimport lformsUpdater from 'lforms-updater';\n\n\nlet urlQSelected = null;\nlet urlPSelected = null;\nlet urlSSelected = null;\nlet usePackage = null;\nlet results = {hasUrlQ: false, gotQ: false, hasUrlP: false, gotP: false}\n\n/**\n * Add a FHIR Questionnaire to page and display it\n * @param {*} dataQ FHIR Questionnaire data (LForms format also supported)\n * @param {*} dataPackage FHIR resource package data, optional\n */\nfunction addQuestionnaire(dataQ, dataPackage) {\n\n  if (dataQ && dataQ.resourceType === \"Questionnaire\") {\n\n    let message = \"The Questionnaire loaded from \" + urlQSelected +\n    \" cannot be processed by LHC-Forms.  Please check if the Questionnaire is valid\" +\n    \" or if it has features that LHC-Forms does not support yet.\";\n\n    // Run the updater in case it was created with an older version of\n    // LHC-Forms.\n    let lfData;\n    // Convert FHIR Questionnaire to LForms format\n    try {\n      dataQ = lformsUpdater.update(dataQ);\n      lfData = LForms.Util.convertFHIRQuestionnaireToLForms(dataQ);\n    }\n    catch(error) {\n      console.error('Error:', error);\n      results.gotQ = false;\n      showErrorMessages(message + \" (Details: \"+error+\")\");\n    }\n\n    if (lfData) {\n      // Add resource package if there is one\n      if (dataPackage) {\n        lfData._packageStore = dataPackage;\n      }\n\n      // Turn off the top-level questions and controls (optional)\n      lfData.templateOptions = {\n        showFormHeader: false,\n        hideFormControls: true\n      };\n\n      // Add the form to the page\n      try {\n        LForms.Util.addFormToPage(lfData, \"qv-lforms\").then(function(){\n          showInfoMessages();\n        });\n      }\n      catch(error) {\n        console.error('Error:', error);\n        results.gotQ = false;\n        showErrorMessages(message)\n      }\n    }\n  }\n\n}\n\n\n/**\n * Show or hide the loading message\n * @param {*} show a flag decides whether to show or hide the loading message\n */\nfunction setLoadingMessage(show) {\n  let loadingEle = document.getElementById('qv-loading');\n  if (show) {\n    loadingEle.style.display = '';\n  }\n  else {\n    loadingEle.style.display = 'none';\n  }\n}\n\n\n/**\n * Display information message once a Questionnaire is successfully loaded,\n * with or without a package file loaded successfully.\n */\nfunction showInfoMessages() {\n  let formInfo = document.getElementById('qv-form-info');\n  let formRendered = document.querySelector('lforms');\n  let notes = \"\";\n  if (results.hasUrlQ && results.gotQ && formRendered) {\n    notes = \"The following Questionnaire was loaded from \" + urlQSelected;\n    if (results.hasUrlP) {\n      if (results.gotP) {\n        notes += \", with resources from \" + urlPSelected;\n      }\n      else {\n        switch (results.pErrorLocation) {\n          case \"untar\":\n            notes += \", but failed to untar the package file from \" + urlPSelected;\n            break;\n          case \"unzip\":\n            notes += \", but failed to unzip the package file from \" + urlPSelected;\n            break;\n          case \"reader\":\n            notes += \", but failed to read the package file from \" + urlPSelected;\n            break;\n          case \"fetch\":\n            notes += \", but failed to fetch the package file from \" + urlPSelected;\n            break;\n          default:\n            notes += \", but failed to fetch/process the package file from \" + urlPSelected;\n        }\n      }\n    }\n    else if (results.hasUrlS && !results.gotS) {\n      notes += \", but failed to access to the FHIR Server at \" + urlSSelected;\n    }\n    else if (results.hasUrlS && results.gotS) {\n      notes += \", with resources loaded from the FHIR Server at \" + urlSSelected;\n    }\n\n    notes += \".\";\n    // check answer resource loading message\n    let answerMessages = LForms.Util.getAnswersResourceStatus();\n    if (answerMessages && answerMessages.length > 0) {\n      notes += ' Some FHIR ValueSet Resource(s) failed to load.'\n      // show the button\n      let btnWarning = document.getElementById('qv-btn-show-warning');\n      if (btnWarning) btnWarning.style.display = '';\n\n      // add warning messages\n      let formWarning = document.getElementById('qv-form-warning');\n      formWarning.innerHTML = answerMessages.join('<br />')\n    }\n  }\n\n  formInfo.textContent  = notes;\n\n  setLoadingMessage(false);\n}\n\n\n/**\n * Show/Hide the warning messages and change button label accordingly\n */\nexport function toggleWarning() {\n  let formWarning = document.getElementById('qv-form-warning');\n  let btnWarning = document.getElementById('qv-btn-show-warning');\n  if (formWarning.style.display === 'none') {\n    formWarning.style.display = \"\";\n    btnWarning.textContent = \"Hide Warning Messages\";\n  }\n  else {\n    formWarning.style.display = \"none\";\n    btnWarning.textContent = \"Show Warning Messages\";\n  }\n}\n\n\n/**\n * Load a FHIR Questionnaire resource, along with FHIR resource package data\n * and add it to pageLoad a FHIR resource package.\n * @param {*} urlQ URL of a FHIR Questionnaire resource\n * @param {*} packageData a FHIR resource package, optional\n */\nfunction loadQuestionnaire(urlQ, packageData) {\n\n  fetch(urlQ)\n    .then(res => {\n      if (res.ok) {\n        return res.json()\n      }\n      else {\n        return Promise.reject(\"No data returned from \" + urlQ)\n      }\n    })\n    .then(json => {\n      if (json && json.resourceType === \"Questionnaire\") {\n        results.gotQ = true;\n        addQuestionnaire(json, packageData)\n      }\n      else {\n        return Promise.reject(\"No Questionnaire (JSON) returned from \" + urlQ)\n      }\n    })\n    .catch(error => {\n      console.error('Error:', error);\n      if (typeof error === 'string') {\n        showErrorMessages(error);\n      }\n      else {\n        showErrorMessages(\"Failed to load Questionnaire from \" + urlQ);\n      }\n\n    });\n\n}\n\n\n/**\n * Construct a files info array with the same structure of 'files' in .index.json\n*  where resourceType, url and version are used in LHC-Forms to identifier a resource.\n*  See https://confluence.hl7.org/display/FHIR/NPM+Package+Specification#NPMPackageSpecification-.index.json\n * @param {*} extractedFiles an array of file objects extracted from a tar file using js-untar-lhc npm package.\n */\nfunction constructResourcePackage(extractedFiles) {\n\n  let packageData = [];\n\n  for (let j=0, jLen = extractedFiles.length; j<jLen; j++) {\n    let fileInfo = {};\n    let extractedFile = extractedFiles[j];\n\n    if (extractedFile.name.match(/^package.*\\.json$/)) {\n      let fileContent = extractedFile.readAsJSON();\n      if (fileContent && (fileContent.resourceType === 'ValueSet' || fileContent.resourceType === 'CodeSystem')) {\n        packageData.push({\n          filename: extractedFile.name.replace(/^package\\//, \"\"),\n          fileContent: fileContent,\n          url: fileContent.url,\n          version: fileContent.version,\n          resourceType: fileContent.resourceType\n        })\n      }\n    }\n  }\n\n  return packageData;\n}\n\n\n/**\n * Load a FHIR resource package file, which is a gzipped tar file.\n * See https://confluence.hl7.org/display/FHIR/NPM+Package+Specification\n * It then processes the file in memory and call loadQuestionnaire to add the questionnaire to the page.\n * See https://stackoverflow.com/questions/47443433/extracting-gzip-data-in-javascript-with-pako-encoding-issues\n * @param {*} urlPackage URL of a FHIR resource package\n * @param {*} urlQ URL of a FHIR Questionnaire resource\n */\nfunction loadPackageAndQuestionnaire(urlPackage, urlQ) {\n\n  let packageData = [];\n\n  if (urlPackage) {\n    fetch(urlPackage)\n      .then(response => {\n        if(!response.ok) {\n          throw response.ok // let catch handle it\n        }\n        else {\n          return response.blob();\n        }\n        })\n        .then(response => {\n        let reader = new FileReader();\n        reader.onload = function(event){\n\n          try {\n            let base64 =   event.target.result;\n\n            // base64 includes header info \"data:application/gzip;base64,\"\n            // \"data:application/gzip;base64,H4sIAAkTyF4AA+3RMQ6DMAyF4cw9RU6A4hDCeSIRdWMgRtDbN4BYkTpAl/9bLFtveJI1F210VXMjV8UQttn2odt3OfaDeCNtjN6JBFfv4mvSWHdnqdNcNE3WmiWN70++yuWpPFHoWVr/b4ek6fXvJgAAAAAAAAAAAAAAAACAX3wBvhQL0QAoAAA=\"\n            // remove the header info\n            let base64Content = base64.replace(/^data:[\\/\\+;a-zA-Z0-9\\._-]+;base64,/, \"\");\n            // convert arraybuffer to string\n            const strData = atob(base64Content);\n\n            // split it into an array rather than a \"string\"\n            const charData = strData.split('').map(function(x){return x.charCodeAt(0); });\n\n            // convert to binary\n            const binData = new Uint8Array(charData);\n\n            // inflate\n            const unzippedData = pako.inflate(binData);\n\n            // unzippedData could be too long and result in an error:\n            //  \"Uncaught RangeError: Maximum call stack size exceeded\"\n            // Use the following loop instead\n            const uint16Data = new Uint16Array(unzippedData);\n            let strAsciiData =\"\";\n            let len = uint16Data.length;\n            for (let i = 0; i < len; i++) {\n              strAsciiData += String.fromCharCode(uint16Data[i]);\n            }\n\n            // convert string to ArrayBuffer\n            const abData = str2ab(strAsciiData);\n\n            // process the tar file\n            // Note:\n            //let fileJsonContent = extractedFile.readAsJSON();\n            // readAsString (and readAsJSON) encountered two errors on on sample package.tgz file\n            // 1) Uncaught RangeError: Maximum call stack size exceeded\n            //    this is caused by the same reason above\n            //    on line #89 in untar.js :\n            //    (this._string = String.fromCharCode.apply(null, charCodes))\n            //    where the side of charCodes could be too big.\n            // 2) Uncaught SyntaxError: Unexpected token  in JSON at position 0\n            untar(abData)\n              // .progress(function(extractedFile) {\n                // do something with a single extracted file\n                //let fileStrContent = extractedFile.readAsString();\n                // if (extractedFile && extractedFile.name.match(/\\.json$/)) {\n                //   packageFiles[extractedFile.name] = extractedFile.readAsJSON();\n                // }\n              // })\n              .then(function(extractedFiles) {\n                if (Array.isArray(extractedFiles) && extractedFiles.length > 0) {\n                  // all extracted files\n                  let resInIndex = {}; // key is the file name, value is file info object\n                  // check if the optional file, .index.json, is in the package\n                  let indexFile = extractedFiles.find(function(file) { return file.name === 'package/.index.json';});\n                  // only process files listed in .index.json if there is a .index.json\n                  if (indexFile) {\n                    let indexFileContent = indexFile.readAsJSON();\n                    for (let i=0, iLen = indexFileContent.files.length; i<iLen; i++) {\n                      let fileInfo = indexFileContent.files[i];\n                      if (fileInfo.resourceType === 'ValueSet' || fileInfo.resourceType === 'CodeSystem') {\n                        resInIndex[fileInfo.filename] = fileInfo;\n                      }\n                    }\n                    // remove the 'package/' from the file name and add file content\n                    for (let j=0, jLen = extractedFiles.length; j<jLen; j++) {\n                      let extractedFile = extractedFiles[j];\n                      let fileInfo = resInIndex[extractedFile.name.replace(/^package\\//, \"\")];\n                      if (fileInfo && (fileInfo.resourceType === 'ValueSet' || fileInfo.resourceType === 'CodeSystem')) {\n                        fileInfo.fileContent = extractedFile.readAsJSON();\n                        packageData.push(fileInfo);\n                      }\n                    }\n                  }\n                  // process all .json files in the /package directory if there is no .index.json\n                  else {\n                    packageData = constructResourcePackage(extractedFiles)\n                  }\n\n                  // packageData has the same structure of the .index.json file in the package file, with an extra fileContent\n                  // that contains the data in each resource file.\n                  // See https://confluence.hl7.org/display/FHIR/NPM+Package+Specification\n\n                  // load questionnaire with the pakcage data\n                  results.gotP = true;\n                  loadQuestionnaire(urlQ, packageData)\n                }\n                else {\n                  results.gotP = false;\n                  results.pErrorLocation = \"untar\";\n                  loadQuestionnaire(urlQ, packageData)\n                }\n              })\n              .catch(function (error) {\n                console.error('Untar Error', urlPackage, error);\n                results.gotP = false;\n                results.pErrorLocation = \"untar\";\n                // try to load the questionnaire without the package\n                loadQuestionnaire(urlQ)\n              });\n\n          }\n          catch(error) {\n            console.log(\"Unzip Error\", urlPackage, error)\n            results.gotP = false;\n            results.pErrorLocation = \"unzip\";\n            // try to load the questionnaire without the package\n            loadQuestionnaire(urlQ)\n          }\n\n        };\n\n        reader.onerror = function (error) {\n          console.error('FileReader Error', urlPackage, error);\n          results.gotP = false;\n          esults.pErrorLocation = \"reader\";\n          // try to load the questionnaire without the package\n          loadQuestionnaire(urlQ)\n        };\n\n        reader.readAsDataURL(response);\n      })\n      .catch(error => {\n        console.error('Fetch Error:', urlPackage, error);\n        results.gotP = false;\n        results.pErrorLocation = \"fetch\"\n        // try to load the questionnaire without the package\n        loadQuestionnaire(urlQ)\n      });\n  }\n}\n\n\n/**\n * Show error messages\n * @param {} message an error message\n */\nfunction showErrorMessages(message) {\n  if (message) {\n    let divError = document.getElementById('qv-error');\n    divError.style.display = '';\n    let divMessage = document.getElementById('qv-error-message');\n    divMessage.textContent = message;\n  }\n\n  setLoadingMessage(false);\n}\n\n\n/**\n * Clear up messgaes and previously loaded form before next Questionnaire is loaded\n */\nfunction resetPage() {\n  let divError = document.getElementById('qv-error');\n  if (divError) divError.style.display = 'none';\n  let divMessage = document.getElementById('qv-error-message');\n  if (divMessage) divMessage.textContent ='';\n  let formInfo = document.getElementById('qv-form-info');\n  if (formInfo) formInfo.textContent = ''\n  let formWarning = document.getElementById('qv-form-warning');\n  if (formWarning) formWarning.textContent = '';\n  if (formWarning) formWarning.style.display = 'none';\n  let btnWarning = document.getElementById('qv-btn-show-warning');\n  if (btnWarning) btnWarning.style.display = 'none';\n\n  // remove previously added form if any\n  let formContainer = document.getElementById('qv-lforms');\n  while (formContainer.firstChild) {\n    formContainer.removeChild(formContainer.lastChild);\n  }\n\n  // reset FHIR context\n  LForms.Util.setFHIRContext(null);\n\n  setLoadingMessage(false);\n\n}\n\n\n/**\n * Sets up a client for a standard (open) FHIR server.\n * @param urlFhirServer the URL of a FHIR server.\n *  whether communication with the server was successfully established.\n */\nfunction setupFHIRServerAndLoadQuestionnaire(urlFhirServer) {\n  try {\n    let fhir = FHIR.client(urlFhirServer);\n    LForms.Util.setFHIRContext(fhir);\n    // Retrieve the fhir version\n    LForms.Util.getServerFHIRReleaseID(function(releaseID) {\n      if (releaseID !== undefined) {\n        results.gotS = true;\n      }\n      else {\n        results.gotS = false;\n        LForms.Util.setFHIRContext(null);\n      }\n      loadQuestionnaire(urlQSelected)\n    });\n  }\n  catch (e) {\n    results.gotS = false;\n    console.log(e)\n    loadQuestionnaire(urlQSelected)\n  }\n}\n\n/**\n * Show a Questionnaire based on the parameters\n */\nfunction showQuestionnaire() {\n\n  results = {hasUrlQ: false, gotQ: false, hasUrlP: false, gotP: false, hasUrlS: false, gotS: false};\n\n  // has a Questionnaire URL\n  if (urlQSelected) {\n    results.hasUrlQ = true;\n    setLoadingMessage(true);\n    // use a resource package\n    if (usePackage) {\n      // has a resource package URL\n      if (urlPSelected) {\n        results.hasUrlP = true;\n        loadPackageAndQuestionnaire(urlPSelected, urlQSelected)\n      }\n      // no resource package URL\n      else {\n        loadQuestionnaire(urlQSelected);\n      }\n    }\n    // use a FHIR server\n    else {\n      // has a FHIR server URL\n      if (urlSSelected) {\n        results.hasUrlS = true;\n        setupFHIRServerAndLoadQuestionnaire(urlSSelected);\n      }\n      // no FHIR server URL\n      else {\n        loadQuestionnaire(urlQSelected);\n      }\n    }\n  }\n  // no Questionnaire URL\n  else {\n    showErrorMessages(\"Please provide the URL of a FHIR Questionnaire.\")\n  }\n\n}\n/**\n * Page's onLoad event hanlder. Check URL parameters to load FHIR Questionnarie and resource package\n */\nexport function onPageLoad() {\n\n  resetPage();\n\n  // http://localhost:4029/?q=http://localhost:8080/questionnaire-use-package.json&p=http://localhost:8080/package.json.tgz\n  let inputPanel = document.getElementById('qv-form-input');\n  let urlLaunch = window.location.href;\n  let parsedUrl = parse(urlLaunch, true);\n  urlQSelected = parsedUrl && parsedUrl.query ? parsedUrl.query.q : null;\n  urlPSelected = parsedUrl && parsedUrl.query ? parsedUrl.query.p : null;\n  urlSSelected = parsedUrl && parsedUrl.query ? parsedUrl.query.s : null;\n\n  // show input panel if parameters are not provided in URL\n  if (!urlQSelected ) {\n    inputPanel.style.display = ''\n  }\n  else {\n    // If both a package file and a FHIR server are present, use only the package file.\n    if (urlPSelected) {\n      usePackage = true;\n    }\n    showQuestionnaire();\n  }\n}\n\n\n/**\n * Load the FHIR Questionnarie and resource package using the URLs users types in the fields\n */\nexport function viewQuestionnaire() {\n\n  // Some sample URLs for FHIR Questionnaire / LForms data\n  // https://clinicaltables.nlm.nih.gov/loinc_form_definitions?loinc_num=[LOINC_NUM]>\n  // https://clinicaltables.nlm.nih.gov/loinc_form_definitions?loinc_num=34565-2\n  // https://lforms-fhir.nlm.nih.gov/baseR4/Questionnaire/55418-8\n  // https://lforms-fhir.nlm.nih.gov/baseR4/Questionnaire/24322-0\n\n  resetPage();\n\n  let inputPanel = document.getElementById('qv-form-input');\n\n  inputPanel.style.display = ''\n  urlQSelected = document.getElementById('urlQuestionnaire').value;\n  urlPSelected = document.getElementById('urlPackage').value;\n  urlSSelected = document.getElementById('urlFhirServer').value;\n  usePackage = document.getElementById('radioPackage').checked;\n\n  showQuestionnaire();\n\n}\n\n/**\n * Toggle the disable/enable attributes of the input fields for package URL and FHRI server URL\n * @param {*} eleId2Disable the id of the input field to be disabled\n * @param {*} eleId2Enable the id of the input field to be enabled\n */\nexport function toggleInputFields(eleId2Disable, eleId2Enable) {\n  let eleDisable = document.getElementById(eleId2Disable);\n  if (eleDisable) {\n    eleDisable.disabled = true;\n  }\n  let eleEnable = document.getElementById(eleId2Enable);\n  if (eleEnable) {\n    eleEnable.disabled = false;\n  }\n\n}\n\n// Parcel does not by default provide these exported functions on a global\n// object, so create one here.\nwindow.app = {toggleWarning, onPageLoad, viewQuestionnaire, toggleInputFields};\n"],"names":["root","isBase64","v","opts","Boolean","Object","hasOwnProperty","allowBlank","regex","mime","paddingRequired","RegExp","test","module","exports","env","createDebug","namespace","prevTime","namespacesCache","enabledCache","enableOverride","debug","args","enabled","self","curr","Number","Date","ms","diff","prev","coerce","unshift","index","replace","match","format","formatter","formatters","val","call","splice","formatArgs","log","apply","useColors","color","selectColor","extend","destroy","defineProperty","enumerable","configurable","get","namespaces","set","init","delimiter","newDebug","this","toNamespace","regexp","toString","substring","length","default","Error","stack","message","disable","names","map","skips","join","enable","i","save","split","len","push","slice","name","humanize","parcelRequire","console","warn","keys","forEach","key","hash","charCodeAt","colors","Math","abs","load","$27cd24efd2f930b8$var$s","$27cd24efd2f930b8$var$m","$27cd24efd2f930b8$var$h","$27cd24efd2f930b8$var$d","$27cd24efd2f930b8$var$w","$27cd24efd2f930b8$var$y","$27cd24efd2f930b8$var$plural","msAbs","n","isPlural","round","options","type","str","String","exec","parseFloat","toLowerCase","$27cd24efd2f930b8$var$parse","isFinite","long","$27cd24efd2f930b8$var$fmtShort","JSON","stringify","self1","global","__self__","F","fetch","DOMException","prototype","exports1","support","searchParams","iterable","Symbol","blob","Blob","e","formData","arrayBuffer","viewClasses","isArrayBufferView","ArrayBuffer","isView","obj","indexOf","normalizeName","TypeError","normalizeValue","value","iteratorFor","items","iterator","next","shift","done","undefined","Headers","headers","append","Array","isArray","header","getOwnPropertyNames","consumed","body","bodyUsed","Promise","reject","fileReaderReady","reader","resolve","onload","result","onerror","error","readBlobAsArrayBuffer","FileReader","promise","readAsArrayBuffer","bufferClone","buf","view","Uint8Array","byteLength","buffer","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","DataView","_bodyArrayBuffer","rejected","then","text","readAsText","chars","fromCharCode","readArrayBufferAsText","decode","json","parse","oldValue","has","callback","thisArg","values","entries","methods","Request","input","method","upcased","url","credentials","mode","signal","toUpperCase","referrer","form","trim","bytes","decodeURIComponent","Response","bodyInit","status","ok","statusText","clone","response","redirectStatuses","redirect","RangeError","location","err","create","constructor","request","aborted","xhr","XMLHttpRequest","abortXhr","abort","rawHeaders","getAllResponseHeaders","line","parts","responseURL","responseText","ontimeout","onabort","open","withCredentials","responseType","setRequestHeader","addEventListener","onreadystatechange","readyState","removeEventListener","send","polyfill","ponyfill","ctx","factory","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","writable","_createClass","protoProps","staticProps","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","p","_assertThisInitialized","ReferenceError","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","_isNativeReflectConstruct","Super","NewTarget","arguments","_get","property","receiver","base","object","_superPropBase","desc","getOwnPropertyDescriptor","Emitter","listeners","l","event","stackToCall","listener","once","defaultPrevented","AbortSignal","_Emitter","subClass","superClass","_inherits","_super","_this","AbortController","Event","document","createEvent","initEvent","createEventObject","bubbles","cancelable","dispatchEvent","toStringTag","__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL","polyfillNeeded","$parcel$global","define","amd","parsedJSON","util","isFHIRResource","resourceType","findExtensions","extArray","ext","$8af37926e509ced1$var$VERSION_REGEX","extension","item","findItemByExtension","versionLessThan","left","right","rtn","leftParts","rightParts","lp","parseInt","rp","makeVersionTag","lformsVersion","versionFromTag","tag","md","code","display","hasLformsTag","meta","valueBoolean","templateOptions","hideFormControls","showFormHeader","$467bcca416378ced$var$PATH_DELIMITER","$467bcca416378ced$var$convertCodeToLinkId","lfData","$467bcca416378ced$var$_addLinkId","$467bcca416378ced$var$_convertFormControls","$467bcca416378ced$var$_removeTempFields","iLen","_parentItem","_codePath","parentItemCodePath","parentItem","prevSibling","questionCardinality","max","questionCode","codePath","linkId","skipLogic","conditions","j","jLen","condition","sourceItem","$467bcca416378ced$var$_findItemsUpwardsAlongAncestorTree","source","dataControl","sourceType","sourceItemCode","question","sourceLinkId","calculationMethod","newValue","foundSource","parentSiblings","tags","t","repeats","$e72213fefeee6595$exports","port","protocol","$c7ed1ca4ef6b4f89$export$fac44ee5b035f737","$c7ed1ca4ef6b4f89$export$98e6a39c04603d36","$c7ed1ca4ef6b4f89$var$has","$c7ed1ca4ef6b4f89$var$decode","$c7ed1ca4ef6b4f89$var$encode","encodeURIComponent","prefix","pairs","isNaN","query","part","parser","$5682d9ca04ade704$var$controlOrWhitespace","$5682d9ca04ade704$var$CRHTLF","$5682d9ca04ade704$var$slashes","$5682d9ca04ade704$var$port","$5682d9ca04ade704$var$protocolre","$5682d9ca04ade704$var$windowsDriveLetter","$5682d9ca04ade704$var$trimLeft","$5682d9ca04ade704$var$rules","address","$5682d9ca04ade704$var$isSpecial","NaN","$5682d9ca04ade704$var$ignore","$5682d9ca04ade704$var$lolcation","loc","window","finaldestination","$5682d9ca04ade704$var$Url","unescape","pathname","slashes","href","scheme","$5682d9ca04ade704$var$extractProtocol","rest","forwardSlashes","otherSlashes","slashesCount","relative","extracted","instruction","instructions","$c7ed1ca4ef6b4f89$exports","lastIndexOf","charAt","path","concat","last","up","$5682d9ca04ade704$var$resolve","host","hostname","username","password","auth","origin","fn","pop","char","ins","extractProtocol","trimLeft","qs","$5682d9ca04ade704$exports","$701cc75d47025217$var$TYPED_OK","Uint16Array","Int32Array","$701cc75d47025217$var$_has","$701cc75d47025217$exports","assign","sources","shrinkBuf","size","subarray","$701cc75d47025217$var$fnTyped","arraySet","dest","src","src_offs","dest_offs","flattenChunks","chunks","pos","chunk","$701cc75d47025217$var$fnUntyped","setTyped","on","Buf8","Buf16","Buf32","$1d57b756249bc6d3$export$ae157b6234afe138","$1d57b756249bc6d3$export$2316623ecd1285ab","$1d57b756249bc6d3$export$e95d6a8f69fb340a","$1d57b756249bc6d3$export$69f0ea7cf3a331a8","$fc8941aa2060205a$export$a65c7b2bde87cb70","$fc8941aa2060205a$export$1cd50f7b2515ba19","$fc8941aa2060205a$export$2316623ecd1285ab","$fc8941aa2060205a$export$599854fa319a815f","$fc8941aa2060205a$export$f55e0b3ab66b5d46","$cc3a58b664fcb155$export$4e4fc0157c3cd14d","$cc3a58b664fcb155$export$8959e34c5e020172","$cc3a58b664fcb155$export$44f15b52eef0cf41","$cc3a58b664fcb155$export$b3cbce147289408f","$cc3a58b664fcb155$export$bfb360e02ee9b403","$cc3a58b664fcb155$var$Z_BINARY","$cc3a58b664fcb155$var$Z_TEXT","$cc3a58b664fcb155$var$zero","$cc3a58b664fcb155$var$STORED_BLOCK","$cc3a58b664fcb155$var$LENGTH_CODES","$cc3a58b664fcb155$var$LITERALS","$cc3a58b664fcb155$var$L_CODES","$cc3a58b664fcb155$var$D_CODES","$cc3a58b664fcb155$var$BL_CODES","$cc3a58b664fcb155$var$HEAP_SIZE","$cc3a58b664fcb155$var$MAX_BITS","$cc3a58b664fcb155$var$Buf_size","$cc3a58b664fcb155$var$MAX_BL_BITS","$cc3a58b664fcb155$var$END_BLOCK","$cc3a58b664fcb155$var$REP_3_6","$cc3a58b664fcb155$var$REPZ_3_10","$cc3a58b664fcb155$var$REPZ_11_138","$cc3a58b664fcb155$var$extra_lbits","$cc3a58b664fcb155$var$extra_dbits","$cc3a58b664fcb155$var$extra_blbits","$cc3a58b664fcb155$var$bl_order","$cc3a58b664fcb155$var$static_ltree","$cc3a58b664fcb155$var$static_dtree","$cc3a58b664fcb155$var$_dist_code","$cc3a58b664fcb155$var$_length_code","$cc3a58b664fcb155$var$MAX_MATCH","$cc3a58b664fcb155$var$base_length","$cc3a58b664fcb155$var$static_l_desc","$cc3a58b664fcb155$var$static_d_desc","$cc3a58b664fcb155$var$static_bl_desc","$cc3a58b664fcb155$var$base_dist","$cc3a58b664fcb155$var$StaticTreeDesc","static_tree","extra_bits","extra_base","elems","max_length","has_stree","$cc3a58b664fcb155$var$TreeDesc","dyn_tree","stat_desc","max_code","$cc3a58b664fcb155$var$d_code","dist","$cc3a58b664fcb155$var$put_short","s","w","pending_buf","pending","$cc3a58b664fcb155$var$send_bits","bi_valid","bi_buf","$cc3a58b664fcb155$var$send_code","c","tree","$cc3a58b664fcb155$var$bi_reverse","res","$cc3a58b664fcb155$var$gen_codes","bl_count","bits","next_code","$cc3a58b664fcb155$var$init_block","dyn_ltree","dyn_dtree","bl_tree","opt_len","static_len","last_lit","matches","$cc3a58b664fcb155$var$bi_windup","$cc3a58b664fcb155$var$smaller","m","depth","_n2","_m2","$cc3a58b664fcb155$var$pqdownheap","k","heap","heap_len","$cc3a58b664fcb155$var$compress_block","ltree","dtree","lc","extra","lx","d_buf","l_buf","$cc3a58b664fcb155$var$build_tree","node","stree","heap_max","h","xbits","f","overflow","$cc3a58b664fcb155$var$gen_bitlen","$cc3a58b664fcb155$var$scan_tree","curlen","prevlen","nextlen","count","max_count","min_count","$cc3a58b664fcb155$var$send_tree","$cc3a58b664fcb155$var$static_init_done","$cc3a58b664fcb155$var$_tr_stored_block","stored_len","$cc3a58b664fcb155$var$copy_block","$cc3a58b664fcb155$var$tr_static_init","l_desc","d_desc","bl_desc","opt_lenb","static_lenb","max_blindex","level","strm","data_type","black_mask","$cc3a58b664fcb155$var$detect_data_type","$cc3a58b664fcb155$var$build_bl_tree","strategy","lcodes","dcodes","blcodes","rank","$cc3a58b664fcb155$var$send_all_trees","lit_bufsize","$cc3a58b664fcb155$var$STATIC_TREES","$cc3a58b664fcb155$var$bi_flush","$c2fc869ba2d0859c$exports","adler","s1","s2","$44e7d98dd6723a9a$var$crcTable","table","$44e7d98dd6723a9a$var$makeTable","$44e7d98dd6723a9a$exports","crc","end","$54a63c0c56b6e112$exports","$fc8941aa2060205a$var$configuration_table","$d8cddf31faab2448$export$7a4c1b2f775b5a9f","$d8cddf31faab2448$export$a751fe64af8a9a51","$d8cddf31faab2448$export$1d1a7119601ff18c","$d8cddf31faab2448$export$49a50563f377746","$d8cddf31faab2448$export$53dee3f58a714214","$fc8941aa2060205a$var$Z_NO_FLUSH","$fc8941aa2060205a$var$Z_FINISH","$fc8941aa2060205a$var$Z_OK","$fc8941aa2060205a$var$Z_STREAM_ERROR","$fc8941aa2060205a$var$Z_DEFAULT_COMPRESSION","$fc8941aa2060205a$var$Z_FIXED","$fc8941aa2060205a$var$Z_UNKNOWN","$fc8941aa2060205a$var$Z_DEFLATED","$fc8941aa2060205a$var$MAX_MEM_LEVEL","$fc8941aa2060205a$var$L_CODES","$fc8941aa2060205a$var$LITERALS","$fc8941aa2060205a$var$D_CODES","$fc8941aa2060205a$var$BL_CODES","$fc8941aa2060205a$var$HEAP_SIZE","$fc8941aa2060205a$var$MAX_BITS","$fc8941aa2060205a$var$MIN_MATCH","$fc8941aa2060205a$var$MAX_MATCH","$fc8941aa2060205a$var$MIN_LOOKAHEAD","$fc8941aa2060205a$var$INIT_STATE","$fc8941aa2060205a$var$HCRC_STATE","$fc8941aa2060205a$var$BUSY_STATE","$fc8941aa2060205a$var$FINISH_STATE","$fc8941aa2060205a$var$BS_NEED_MORE","$fc8941aa2060205a$var$BS_BLOCK_DONE","$fc8941aa2060205a$var$BS_FINISH_STARTED","$fc8941aa2060205a$var$BS_FINISH_DONE","$fc8941aa2060205a$var$err","errorCode","msg","$fc8941aa2060205a$var$rank","$fc8941aa2060205a$var$zero","$fc8941aa2060205a$var$flush_pending","state","avail_out","output","pending_out","next_out","total_out","$fc8941aa2060205a$var$flush_block_only","block_start","strstart","$fc8941aa2060205a$var$put_byte","b","$fc8941aa2060205a$var$putShortMSB","$fc8941aa2060205a$var$longest_match","cur_match","chain_length","max_chain_length","scan","best_len","prev_length","nice_match","limit","w_size","_win","wmask","w_mask","strend","scan_end1","scan_end","good_match","lookahead","match_start","$fc8941aa2060205a$var$fill_window","more","start","_w_size","window_size","hash_size","head","avail_in","next_in","wrap","total_in","insert","ins_h","hash_shift","hash_mask","$fc8941aa2060205a$var$deflate_fast","flush","hash_head","bflush","match_length","max_lazy_match","$fc8941aa2060205a$var$deflate_slow","max_insert","prev_match","match_available","$fc8941aa2060205a$var$Config","good_length","max_lazy","nice_length","max_chain","func","$fc8941aa2060205a$var$DeflateState","pending_buf_size","gzhead","gzindex","last_flush","w_bits","hash_bits","$fc8941aa2060205a$var$deflateResetKeep","$fc8941aa2060205a$var$deflateReset","ret","$fc8941aa2060205a$var$deflateInit2","windowBits","memLevel","max_block_size","max_start","old_flush","beg","hcrc","comment","time","os","bstate","$fc8941aa2060205a$var$deflate_huff","$fc8941aa2060205a$var$deflate_rle","dictionary","avail","tmpDict","dictLength","$d8cddf31faab2448$var$STR_APPLY_OK","$d8cddf31faab2448$var$STR_APPLY_UIA_OK","__","$d8cddf31faab2448$var$_utf8len","$d8cddf31faab2448$var$q","$d8cddf31faab2448$var$buf2binstring","c2","m_pos","str_len","buf_len","out","c_len","utf16buf","$73d8265e2c50d00b$exports","$1d57b756249bc6d3$var$toString","$1d57b756249bc6d3$var$Z_OK","$1d57b756249bc6d3$var$Z_DEFAULT_COMPRESSION","$1d57b756249bc6d3$var$Z_DEFAULT_STRATEGY","$1d57b756249bc6d3$var$Z_DEFLATED","$1d57b756249bc6d3$var$Deflate","chunkSize","to","opt","raw","gzip","ended","dict","_dict_set","$1d57b756249bc6d3$var$deflate","deflator","data","_mode","onEnd","onData","$2c8537a6b47169be$export$d1de70a877d6e43c","$2c8537a6b47169be$export$cae1ce83fe4a1782","$2c8537a6b47169be$export$d0f0aa2d05c905c5","$2c8537a6b47169be$export$95adf9d270383091","$b562a383a327bea1$export$6792d92addc5c8a0","$b562a383a327bea1$export$cae1ce83fe4a1782","$b562a383a327bea1$export$224e1a443c3fba76","$b562a383a327bea1$export$6d4647cb9e1c75fc","$b562a383a327bea1$export$60da749bed98ccf8","$4f67bc996330e695$exports","_in","_out","dmax","wsize","whave","wnext","s_window","hold","lcode","dcode","lmask","dmask","here","op","from","from_source","lencode","distcode","lenbits","distbits","top","dolen","dodist","sane","$86622ca50c32b2ec$var$MAXBITS","$86622ca50c32b2ec$var$lbase","$86622ca50c32b2ec$var$lext","$86622ca50c32b2ec$var$dbase","$86622ca50c32b2ec$var$dext","$86622ca50c32b2ec$exports","lens","lens_index","codes","table_index","work","incr","fill","low","mask","here_bits","here_op","here_val","sym","min","drop","used","huff","base_index","offs","extra_index","$b562a383a327bea1$var$LENS","$b562a383a327bea1$var$DISTS","$b562a383a327bea1$var$Z_OK","$b562a383a327bea1$var$Z_STREAM_ERROR","$b562a383a327bea1$var$HEAD","$b562a383a327bea1$var$TYPE","$b562a383a327bea1$var$BAD","$b562a383a327bea1$var$ENOUGH_LENS","$b562a383a327bea1$var$ENOUGH_DISTS","$b562a383a327bea1$var$zswap32","q","$b562a383a327bea1$var$InflateState","havedict","flags","check","total","wbits","offset","ncode","nlen","ndist","have","lendyn","distdyn","back","was","$b562a383a327bea1$var$inflateResetKeep","$b562a383a327bea1$var$inflateReset","$b562a383a327bea1$var$inflateReset2","$b562a383a327bea1$var$inflateInit2","$b562a383a327bea1$var$lenfix","$b562a383a327bea1$var$distfix","$b562a383a327bea1$var$virgin","$b562a383a327bea1$var$fixedtables","$b562a383a327bea1$var$updatewindow","copy","put","last_bits","last_op","last_val","hbuf","order","inf_leave","xflags","extra_len","$c8d7af08a93a7841$exports","Z_NO_FLUSH","Z_PARTIAL_FLUSH","Z_SYNC_FLUSH","Z_FULL_FLUSH","Z_FINISH","Z_BLOCK","Z_TREES","Z_OK","Z_STREAM_END","Z_NEED_DICT","Z_ERRNO","Z_STREAM_ERROR","Z_DATA_ERROR","Z_BUF_ERROR","Z_NO_COMPRESSION","Z_BEST_SPEED","Z_BEST_COMPRESSION","Z_DEFAULT_COMPRESSION","Z_FILTERED","Z_HUFFMAN_ONLY","Z_RLE","Z_FIXED","Z_DEFAULT_STRATEGY","Z_BINARY","Z_TEXT","Z_UNKNOWN","Z_DEFLATED","$6e4bef2851e6b301$exports","$2c8537a6b47169be$var$toString","$2c8537a6b47169be$var$Inflate","$2c8537a6b47169be$var$inflate","inflator","next_out_utf8","tail","utf8str","allowBufError","$8fa5292818130bae$var$pako","$8fa5292818130bae$require$assign","$1d57b756249bc6d3$exports","$2c8537a6b47169be$exports","$8fa5292818130bae$exports","r","a","progress","URL","createObjectURL","webkitURL","_blob","getBlobUrl","_blobUrl","readAsString","getUint8","_string","readAsJSON","Worker","onmessage","defineProperties","terminate","postMessage","$c488d752965ebb38$exports","$1cf6ca991a8ade09$exports","atob","$e835d3077c64ee50$var$str2ab","array","$e835d3077c64ee50$exports","arg","uri","firstComma","base64","charset","abuf","$e835d3077c64ee50$var$decode","$iIDdR","$2241136b1aba1e64$exports","$9b169f72336acb48$exports","ready","buildTokenRequest","completeAuth","onMessage","isInPopUp","isInFrame","authorize","getSecurityExtensions","fetchWellKnownJson","KEY","$3e6dcbd6932f03cd$exports","getTargetWindow","getPatientParam","byCodes","byCode","getAccessTokenExpiration","jwtDecode","randomString","absolute","makeArray","setPath","getPath","humanizeError","fetchConformanceStatement","getAndCache","responseToJSON","checkResponse","units","$d50f68baa55af7ac$exports","$d50f68baa55af7ac$var$HttpError","statusCode","super","toJSON","$e5e6e34664e6599f$exports","SMART_KEY","patientParams","fhirVersions","patientCompartment","$cfae44f0dfdf62c0$var$cachedSetTimeout","$cfae44f0dfdf62c0$var$cachedClearTimeout","$cfae44f0dfdf62c0$var$process","$cfae44f0dfdf62c0$exports","$cfae44f0dfdf62c0$var$defaultSetTimout","$cfae44f0dfdf62c0$var$defaultClearTimeout","$cfae44f0dfdf62c0$var$runTimeout","fun","setTimeout","clearTimeout","$cfae44f0dfdf62c0$var$currentQueue","$cfae44f0dfdf62c0$var$queue","$cfae44f0dfdf62c0$var$draining","$cfae44f0dfdf62c0$var$queueIndex","$cfae44f0dfdf62c0$var$cleanUpNextTick","$cfae44f0dfdf62c0$var$drainQueue","timeout","run","marker","$cfae44f0dfdf62c0$var$runClearTimeout","$cfae44f0dfdf62c0$var$Item","$cfae44f0dfdf62c0$var$noop","nextTick","title","browser","argv","version","versions","addListener","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","$15f92843e9c96e5d$exports","lastC","storage","setItem","removeItem","getItem","process","__nwjs","navigator","userAgent","documentElement","style","WebkitAppearance","firebug","exception","$1","localStorage","$15f92843e9c96e5d$var$localstorage","warned","$15f92843e9c96e5d$var$formatters","$3e6dcbd6932f03cd$var$fetch","FHIRCLIENT_PURE","$3e6dcbd6932f03cd$var$_debug","$3e6dcbd6932f03cd$var$cache","$3e6dcbd6932f03cd$var$ensureNumerical","async","$3e6dcbd6932f03cd$var$checkResponse","resp","$3e6dcbd6932f03cd$var$humanizeError","$3e6dcbd6932f03cd$var$responseToJSON","$3e6dcbd6932f03cd$var$request","accept","$3e6dcbd6932f03cd$var$getAndCache","requestOptions","force","error_description","_","$3e6dcbd6932f03cd$var$getPath","segments","$3e6dcbd6932f03cd$var$makeArray","$3e6dcbd6932f03cd$var$jwtDecode","token","payload","$3e6dcbd6932f03cd$var$byCode","observations","handleCodeableConcept","concept","observation","coding","cm","kg","any","pq","baseUrl","catch","ex","createEmpty","reduce","idx","arr","strLength","charSet","floor","random","tokenResponse","now","expires_in","access_token","tokenBody","exp","bank","filter","conformance","find","searchParam","x","width","height","parent","targetWindow","screen","winOrFrame","frames","$b6802293d122f2d1$export$2d1720544b23b823","$522621bf8dedc975$var$check","it","$522621bf8dedc975$exports","globalThis","Function","$5947130294e2f382$export$2d1720544b23b823","$b528d6fe2b4bbf77$exports","$313365deab5436f8$exports","$5947130294e2f382$var$nativePropertyIsEnumerable","propertyIsEnumerable","$5947130294e2f382$var$getOwnPropertyDescriptor","$5947130294e2f382$var$NASHORN_BUG","V","$521085e4351c0524$exports","bitmap","$708541b01e85f134$var$toString","$708541b01e85f134$exports","$4bbdba018a2f5bf8$var$split","$4bbdba018a2f5bf8$exports","$df4132cf23738c37$exports","$8600c461a671fd44$exports","$5108b27d34fd982c$exports","$8a46f67d7a4a33d9$exports","PREFERRED_STRING","valueOf","$548714ce8e26417d$var$hasOwnProperty","$548714ce8e26417d$exports","$197c62e314d55e8f$var$document","$197c62e314d55e8f$var$EXISTS","createElement","$197c62e314d55e8f$exports","$8028c54a5bee899c$exports","$48439982d42f0b86$export$2d1720544b23b823","$b6802293d122f2d1$var$nativeGetOwnPropertyDescriptor","O","P","$0e58bbd39513c715$exports","$48439982d42f0b86$var$nativeDefineProperty","Attributes","$3b0b8a842e7db2fa$exports","$df5de4b38a284fac$exports","$4c007602062f68eb$var$SHARED","$4c007602062f68eb$var$store","$4c007602062f68eb$exports","$ae7e223df2d98439$var$functionToString","inspectSource","$ae7e223df2d98439$exports","$8bbb716f557d606b$var$WeakMap","WeakMap","$8bbb716f557d606b$exports","$bf8f0888716fee33$exports","copyright","$ea4eeca8461cc1dd$var$id","$ea4eeca8461cc1dd$var$postfix","$ea4eeca8461cc1dd$exports","$dd4e1f76c1a3e6d1$var$keys","$dd4e1f76c1a3e6d1$exports","$937519ee856dcf2c$exports","$47a69d56756e2420$var$set","$47a69d56756e2420$var$get","$47a69d56756e2420$var$has","$47a69d56756e2420$var$WeakMap","$47a69d56756e2420$var$store","$47a69d56756e2420$var$wmget","$47a69d56756e2420$var$wmhas","$47a69d56756e2420$var$wmset","metadata","facade","$47a69d56756e2420$var$STATE","$7908108dad70270a$var$getInternalState","$47a69d56756e2420$exports","enforce","getterFor","TYPE","$7908108dad70270a$var$enforceInternalState","$7908108dad70270a$var$TEMPLATE","$7908108dad70270a$exports","unsafe","simple","noTargetGet","$75816cb5d62c4a4c$exports","$10cf332cacc4d7d0$export$2d1720544b23b823","$356d39974f050129$var$aFunction","variable","$356d39974f050129$exports","$b70e87322e341b61$var$ceil","ceil","$b70e87322e341b61$var$floor","$b70e87322e341b61$exports","argument","$07d7dbf49780d461$var$min","$07d7dbf49780d461$exports","$b827c328804febf9$var$max","$b827c328804febf9$var$min","$b827c328804febf9$exports","integer","$ac20abc70d0c4a7a$var$createMethod","IS_INCLUDES","$this","el","fromIndex","includes","$dd6ce52a9bf80a06$exports","$dd6ce52a9bf80a06$require$indexOf","$56fbf5f35a17b68c$export$2d1720544b23b823","$10cf332cacc4d7d0$var$hiddenKeys","$481fe3c95c6a6c1f$exports","getOwnPropertySymbols","$3cc0f7b078939566$exports","$ed4b47ade736f234$exports","$810cb9f0cd974b2c$var$replacement","$810cb9f0cd974b2c$var$isForced","feature","detection","$810cb9f0cd974b2c$var$data","$810cb9f0cd974b2c$var$normalize","$810cb9f0cd974b2c$var$POLYFILL","$810cb9f0cd974b2c$var$NATIVE","normalize","string","NATIVE","POLYFILL","$810cb9f0cd974b2c$exports","$b4169d2aeb59c4bd$exports","targetProperty","sourceProperty","TARGET","GLOBAL","STATIC","stat","$b4169d2aeb59c4bd$require$getOwnPropertyDescriptor","forced","$6704ebc8aacd45a8$exports","$0ff0224673933bde$exports","$b5550d2cba85f3d8$exports","that","$db50d60baaf2d7fb$var$flattenIntoArray","original","sourceLen","mapper","element","targetIndex","sourceIndex","mapFn","$db50d60baaf2d7fb$exports","$cf244a6b5b7342f4$exports","$66e605a0a319f59d$exports","$b160f445534e015b$exports","$81e25041e160c1a0$var$WellKnownSymbolsStore","$81e25041e160c1a0$var$Symbol","$81e25041e160c1a0$var$createWellKnownSymbol","withoutSetter","$ab32fde6f1ce2ab0$var$SPECIES","$81e25041e160c1a0$exports","$ab32fde6f1ce2ab0$exports","originalArray","C","proto","flat","depthArg","A","$ab442fa43ac80640$exports","$fd91945c12990404$exports","Properties","$148c7b2c2aeb3b17$exports","$236e195b6e0ec5d8$var$activeXDocument","$236e195b6e0ec5d8$var$PROTOTYPE","$236e195b6e0ec5d8$var$SCRIPT","$236e195b6e0ec5d8$var$IE_PROTO","$236e195b6e0ec5d8$var$EmptyConstructor","$236e195b6e0ec5d8$var$scriptTag","content","$236e195b6e0ec5d8$var$LT","$236e195b6e0ec5d8$var$NullProtoObject","domain","ActiveXObject","iframeDocument","iframe","JS","activeXDocument","write","close","temp","parentWindow","$236e195b6e0ec5d8$var$NullProtoObjectViaActiveX","appendChild","contentWindow","$236e195b6e0ec5d8$exports","$d1b271288b2d747c$var$UNSCOPABLES","$d1b271288b2d747c$var$ArrayPrototype","$d1b271288b2d747c$exports","$e92efa1597823f07$exports","$824f57624c1a1876$exports","expired","noScopeForId","noIfNoAuth","noFreeContext","$e92efa1597823f07$var$Response","$e92efa1597823f07$var$debug","$e92efa1597823f07$var$resolveRef","graph","cache","client","all","ref","reference","refId","$e92efa1597823f07$var$getRef","sub","$e92efa1597823f07$var$resolveRefs","fhirOptions","paths","resolveReferences","groups","task","sort","group","environment","_state","serverUrl","_refreshTask","patient","id","getPatientId","read","contextualURL","_url","$e92efa1597823f07$var$contextualize","encounter","getEncounterId","user","fhirUser","getFhirUser","getUserId","getUserType","connect","fhir","fhirJs","accessToken","getState","pass","api","patientId","scope","authorizeUri","getIdToken","idToken","id_token","hasOpenid","hasProfile","hasFhirUser","profile","getAuthorizationHeader","btoa","getStorage","unset","resource","update","delete","_resolvedRefs","_a","debugRequest","pageLimit","useRefreshToken","onPage","refreshIfNeeded","authHeader","Authorization","_clearState","_data","entry","links","link","relation","nextPage","references","refreshToken","expiresAt","refresh","_b","debugRefresh","refresh_token","tokenUri","scopes","hasOfflineAccess","search","hasOnlineAccess","refreshRequestOptions","refreshTokenWithCredentials","clientSecret","clientId","authorization","finally","getFhirVersion","fhirVersion","getFhirRelease","$9b169f72336acb48$var$debug","$9b169f72336acb48$var$isBrowser","$9b169f72336acb48$var$fetchWellKnownJson","$9b169f72336acb48$var$getSecurityExtensionsFromWellKnownJson","authorization_endpoint","token_endpoint","registrationUri","registration_endpoint","$9b169f72336acb48$var$getSecurityExtensionsFromConformanceStatement","extensions","valueUri","$9b169f72336acb48$var$any","tasks","errors","resolved","onError","complete","controller","onSuccess","$9b169f72336acb48$var$getSecurityExtensions","getAbortController","abortController1","abortController2","$9b169f72336acb48$var$authorize","params","_noRedirect","redirect_uri","fakeTokenResponse","encounterId","client_id","iss","launch","fhirServiceUrl","redirectUri","completeInTarget","getUrl","inFrame","$9b169f72336acb48$var$isInFrame","inPopUp","$9b169f72336acb48$var$isInPopUp","oldKey","stateKey","redirectUrl","redirectParams","win","sessionStorage","$9b169f72336acb48$var$onMessage","opener","$9b169f72336acb48$var$completeAuth","Storage","authError","authErrorDescription","fullSessionStorageSupport","hasState","history","replaceState","$9b169f72336acb48$var$buildTokenRequest","cached","$5420394c952b9a4a$exports","_storage","replaceBrowserHistory","getSmartApi","$d243cabdb0815a3b$var$adapter","$d243cabdb0815a3b$var$ready","$d243cabdb0815a3b$var$authorize","$d243cabdb0815a3b$var$init","$d243cabdb0815a3b$var$client","$d243cabdb0815a3b$var$options","$d243cabdb0815a3b$var$FHIR","oauth2","settings","$d243cabdb0815a3b$exports","$c0724f9ae622cd19$exports","$ab6c97af2c6a3f00$exports","$03fb4dd33620a748$exports","stopVersion","isFHIR","tagVersion","updateSteps","uv","latestVersion","step","reverse","versionTag","versionDisplay","$4bd47ebd12fc5c3c$var$urlQSelected","$4bd47ebd12fc5c3c$var$urlPSelected","$4bd47ebd12fc5c3c$var$urlSSelected","$4bd47ebd12fc5c3c$var$usePackage","$4bd47ebd12fc5c3c$var$results","hasUrlQ","gotQ","hasUrlP","gotP","$4bd47ebd12fc5c3c$var$addQuestionnaire","dataQ","dataPackage","$parcel$interopDefault","LForms","Util","convertFHIRQuestionnaireToLForms","$4bd47ebd12fc5c3c$var$showErrorMessages","_packageStore","addFormToPage","formInfo","getElementById","formRendered","querySelector","notes","pErrorLocation","hasUrlS","gotS","answerMessages","getAnswersResourceStatus","btnWarning","innerHTML","textContent","$4bd47ebd12fc5c3c$var$setLoadingMessage","$4bd47ebd12fc5c3c$var$showInfoMessages","show","loadingEle","$4bd47ebd12fc5c3c$var$loadQuestionnaire","urlQ","packageData","$4bd47ebd12fc5c3c$var$resetPage","divError","divMessage","formWarning","formContainer","firstChild","removeChild","lastChild","setFHIRContext","$4bd47ebd12fc5c3c$var$showQuestionnaire","urlPackage","base64Content","charData","binData","unzippedData","inflate","uint16Data","strAsciiData","abData","extractedFiles","resInIndex","indexFile","file","indexFileContent","files","fileInfo","filename","extractedFile","fileContent","$4bd47ebd12fc5c3c$var$constructResourcePackage","esults","readAsDataURL","$4bd47ebd12fc5c3c$var$loadPackageAndQuestionnaire","urlFhirServer","getServerFHIRReleaseID","releaseID","$4bd47ebd12fc5c3c$var$setupFHIRServerAndLoadQuestionnaire","app","inputPanel","urlLaunch","parsedUrl","checked","eleId2Disable","eleId2Enable","eleDisable","disabled","eleEnable"],"version":3,"file":"index.2c7b572f.js.map"}